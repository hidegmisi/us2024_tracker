{"version":3,"file":"bundle.js","sources":["../../node_modules/svelte/src/runtime/internal/utils.js","../../node_modules/svelte/src/runtime/internal/dom.js","../../node_modules/svelte/src/runtime/internal/lifecycle.js","../../node_modules/svelte/src/runtime/internal/scheduler.js","../../node_modules/svelte/src/runtime/internal/transitions.js","../../node_modules/svelte/src/runtime/internal/each.js","../../node_modules/svelte/src/runtime/internal/Component.js","../../node_modules/svelte/src/runtime/internal/disclose-version/index.js","../../node_modules/svelte/src/shared/version.js","../../node_modules/page/page.js","../../node_modules/d3-array/src/ascending.js","../../node_modules/d3-array/src/descending.js","../../node_modules/d3-array/src/bisector.js","../../node_modules/d3-array/src/bisect.js","../../node_modules/d3-array/src/number.js","../../node_modules/d3-array/src/ticks.js","../../node_modules/d3-array/src/mean.js","../../node_modules/d3-axis/src/identity.js","../../node_modules/d3-axis/src/axis.js","../../node_modules/d3-dispatch/src/dispatch.js","../../node_modules/d3-selection/src/namespaces.js","../../node_modules/d3-selection/src/namespace.js","../../node_modules/d3-selection/src/creator.js","../../node_modules/d3-selection/src/selector.js","../../node_modules/d3-selection/src/array.js","../../node_modules/d3-selection/src/selectorAll.js","../../node_modules/d3-selection/src/matcher.js","../../node_modules/d3-selection/src/selection/selectChild.js","../../node_modules/d3-selection/src/selection/selectChildren.js","../../node_modules/d3-selection/src/selection/sparse.js","../../node_modules/d3-selection/src/selection/enter.js","../../node_modules/d3-selection/src/selection/data.js","../../node_modules/d3-selection/src/selection/sort.js","../../node_modules/d3-selection/src/selection/attr.js","../../node_modules/d3-selection/src/window.js","../../node_modules/d3-selection/src/selection/style.js","../../node_modules/d3-selection/src/selection/property.js","../../node_modules/d3-selection/src/selection/classed.js","../../node_modules/d3-selection/src/selection/text.js","../../node_modules/d3-selection/src/selection/html.js","../../node_modules/d3-selection/src/selection/raise.js","../../node_modules/d3-selection/src/selection/lower.js","../../node_modules/d3-selection/src/selection/insert.js","../../node_modules/d3-selection/src/selection/remove.js","../../node_modules/d3-selection/src/selection/clone.js","../../node_modules/d3-selection/src/selection/on.js","../../node_modules/d3-selection/src/selection/dispatch.js","../../node_modules/d3-selection/src/selection/index.js","../../node_modules/d3-selection/src/select.js","../../node_modules/d3-selection/src/selectAll.js","../../node_modules/d3-color/src/define.js","../../node_modules/d3-color/src/color.js","../../node_modules/d3-selection/src/selection/select.js","../../node_modules/d3-selection/src/selection/selectAll.js","../../node_modules/d3-selection/src/selection/filter.js","../../node_modules/d3-selection/src/constant.js","../../node_modules/d3-selection/src/selection/exit.js","../../node_modules/d3-selection/src/selection/join.js","../../node_modules/d3-selection/src/selection/merge.js","../../node_modules/d3-selection/src/selection/order.js","../../node_modules/d3-selection/src/selection/call.js","../../node_modules/d3-selection/src/selection/nodes.js","../../node_modules/d3-selection/src/selection/node.js","../../node_modules/d3-selection/src/selection/size.js","../../node_modules/d3-selection/src/selection/empty.js","../../node_modules/d3-selection/src/selection/each.js","../../node_modules/d3-selection/src/selection/append.js","../../node_modules/d3-selection/src/selection/datum.js","../../node_modules/d3-selection/src/selection/iterator.js","../../node_modules/d3-interpolate/src/constant.js","../../node_modules/d3-interpolate/src/color.js","../../node_modules/d3-interpolate/src/rgb.js","../../node_modules/d3-interpolate/src/numberArray.js","../../node_modules/d3-interpolate/src/array.js","../../node_modules/d3-interpolate/src/date.js","../../node_modules/d3-interpolate/src/number.js","../../node_modules/d3-interpolate/src/object.js","../../node_modules/d3-interpolate/src/string.js","../../node_modules/d3-interpolate/src/value.js","../../node_modules/d3-interpolate/src/round.js","../../node_modules/d3-interpolate/src/transform/decompose.js","../../node_modules/d3-interpolate/src/transform/parse.js","../../node_modules/d3-interpolate/src/transform/index.js","../../node_modules/d3-timer/src/timer.js","../../node_modules/d3-timer/src/timeout.js","../../node_modules/d3-transition/src/transition/schedule.js","../../node_modules/d3-transition/src/transition/tween.js","../../node_modules/d3-transition/src/transition/interpolate.js","../../node_modules/d3-transition/src/transition/attr.js","../../node_modules/d3-transition/src/transition/attrTween.js","../../node_modules/d3-transition/src/transition/delay.js","../../node_modules/d3-transition/src/transition/duration.js","../../node_modules/d3-transition/src/transition/selection.js","../../node_modules/d3-transition/src/transition/style.js","../../node_modules/d3-transition/src/transition/index.js","../../node_modules/d3-transition/src/transition/select.js","../../node_modules/d3-transition/src/transition/selectAll.js","../../node_modules/d3-transition/src/transition/filter.js","../../node_modules/d3-transition/src/transition/merge.js","../../node_modules/d3-transition/src/transition/transition.js","../../node_modules/d3-transition/src/transition/on.js","../../node_modules/d3-transition/src/transition/styleTween.js","../../node_modules/d3-transition/src/transition/text.js","../../node_modules/d3-transition/src/transition/textTween.js","../../node_modules/d3-transition/src/transition/remove.js","../../node_modules/d3-transition/src/transition/ease.js","../../node_modules/d3-transition/src/transition/easeVarying.js","../../node_modules/d3-transition/src/transition/end.js","../../node_modules/d3-transition/src/selection/transition.js","../../node_modules/d3-ease/src/cubic.js","../../node_modules/d3-transition/src/selection/index.js","../../node_modules/d3-transition/src/selection/interrupt.js","../../node_modules/d3-transition/src/interrupt.js","../../node_modules/d3-path/src/path.js","../../node_modules/d3-dsv/src/dsv.js","../../node_modules/d3-dsv/src/csv.js","../../node_modules/d3-format/src/formatDecimal.js","../../node_modules/d3-format/src/exponent.js","../../node_modules/d3-format/src/formatSpecifier.js","../../node_modules/d3-format/src/formatPrefixAuto.js","../../node_modules/d3-format/src/formatRounded.js","../../node_modules/d3-format/src/formatTypes.js","../../node_modules/d3-format/src/identity.js","../../node_modules/d3-format/src/locale.js","../../node_modules/d3-format/src/defaultLocale.js","../../node_modules/d3-format/src/formatGroup.js","../../node_modules/d3-format/src/formatNumerals.js","../../node_modules/d3-format/src/formatTrim.js","../../node_modules/d3-scale/src/init.js","../../node_modules/d3-scale/src/number.js","../../node_modules/d3-scale/src/continuous.js","../../node_modules/d3-scale/src/constant.js","../../node_modules/d3-scale/src/tickFormat.js","../../node_modules/d3-format/src/precisionPrefix.js","../../node_modules/d3-format/src/precisionRound.js","../../node_modules/d3-format/src/precisionFixed.js","../../node_modules/d3-scale/src/linear.js","../../node_modules/d3-time/src/interval.js","../../node_modules/d3-time/src/millisecond.js","../../node_modules/d3-time/src/duration.js","../../node_modules/d3-time/src/second.js","../../node_modules/d3-time/src/minute.js","../../node_modules/d3-time/src/hour.js","../../node_modules/d3-time/src/day.js","../../node_modules/d3-time/src/week.js","../../node_modules/d3-time/src/month.js","../../node_modules/d3-time/src/year.js","../../node_modules/d3-time/src/ticks.js","../../node_modules/d3-time-format/src/locale.js","../../node_modules/d3-time-format/src/defaultLocale.js","../../node_modules/d3-scale/src/time.js","../../node_modules/d3-scale/src/nice.js","../../node_modules/d3-shape/src/constant.js","../../node_modules/d3-shape/src/math.js","../../node_modules/d3-shape/src/path.js","../../node_modules/d3-shape/src/arc.js","../../node_modules/d3-shape/src/curve/linear.js","../../node_modules/d3-shape/src/point.js","../../node_modules/d3-shape/src/line.js","../../node_modules/d3-shape/src/array.js","../../node_modules/d3-shape/src/curve/monotone.js","../../node_modules/d3-zoom/src/transform.js","../../node_modules/tslib/tslib.es6.mjs","../../node_modules/@amcharts/amcharts5/.internal/core/util/Percent.js","../../node_modules/@amcharts/amcharts5/.internal/core/util/Type.js","../../node_modules/@amcharts/amcharts5/.internal/core/util/Array.js","../../node_modules/@amcharts/amcharts5/.internal/core/util/Object.js","../../node_modules/@amcharts/amcharts5/.internal/core/util/Disposer.js","../../node_modules/@amcharts/amcharts5/.internal/core/util/Utils.js","../../node_modules/@amcharts/amcharts5/.internal/core/util/Color.js","../../node_modules/@amcharts/amcharts5/.internal/core/util/EventDispatcher.js","../../node_modules/@amcharts/amcharts5/.internal/core/util/Animation.js","../../node_modules/@amcharts/amcharts5/.internal/core/util/List.js","../../node_modules/@amcharts/amcharts5/.internal/core/util/Children.js","../../node_modules/@amcharts/amcharts5/.internal/core/util/Math.js","../../node_modules/@amcharts/amcharts5/.internal/core/util/Ease.js","../../node_modules/@amcharts/amcharts5/.internal/core/util/States.js","../../node_modules/@amcharts/amcharts5/.internal/core/Registry.js","../../node_modules/@amcharts/amcharts5/.internal/core/util/Order.js","../../node_modules/@amcharts/amcharts5/.internal/core/util/Entity.js","../../node_modules/@amcharts/amcharts5/.internal/core/util/Template.js","../../node_modules/@amcharts/amcharts5/.internal/core/render/Sprite.js","../../node_modules/@amcharts/amcharts5/.internal/core/render/patterns/Pattern.js","../../node_modules/@amcharts/amcharts5/.internal/core/render/patterns/PicturePattern.js","../../node_modules/@amcharts/amcharts5/.internal/core/render/backend/Renderer.js","../../node_modules/@amcharts/amcharts5/.internal/core/render/Graphics.js","../../node_modules/@amcharts/amcharts5/.internal/core/render/Rectangle.js","../../node_modules/@amcharts/amcharts5/.internal/core/render/Layout.js","../../node_modules/@amcharts/amcharts5/.internal/core/render/HorizontalLayout.js","../../node_modules/@amcharts/amcharts5/.internal/core/render/VerticalLayout.js","../../node_modules/@amcharts/amcharts5/.internal/core/render/GridLayout.js","../../node_modules/@amcharts/amcharts5/.internal/core/util/TextFormatter.js","../../node_modules/@amcharts/amcharts5/.internal/core/util/PopulateString.js","../../node_modules/@amcharts/amcharts5/.internal/core/render/Container.js","../../node_modules/@amcharts/amcharts5/.internal/core/render/Text.js","../../node_modules/@amcharts/amcharts5/.internal/core/util/ResizeSensor.js","../../node_modules/@amcharts/amcharts5/.internal/core/util/InterfaceColors.js","../../node_modules/@amcharts/amcharts5/.internal/core/render/Label.js","../../node_modules/@amcharts/amcharts5/.internal/core/render/PointedRectangle.js","../../node_modules/@amcharts/amcharts5/.internal/core/render/Tooltip.js","../../node_modules/@amcharts/amcharts5/.internal/core/util/NumberFormatter.js","../../node_modules/@amcharts/amcharts5/.internal/core/util/Timezone.js","../../node_modules/@amcharts/amcharts5/.internal/core/util/DateFormatter.js","../../node_modules/@amcharts/amcharts5/.internal/core/util/DurationFormatter.js","../../node_modules/@amcharts/amcharts5/locales/en.js","../../node_modules/@amcharts/amcharts5/.internal/core/util/Language.js","../../node_modules/@amcharts/amcharts5/.internal/core/Theme.js","../../node_modules/@amcharts/amcharts5/.internal/themes/DefaultTheme.js","../../node_modules/@amcharts/amcharts5/.internal/core/util/Matrix.js","../../node_modules/svg-arc-to-cubic-bezier/modules/index.js","../../node_modules/@amcharts/amcharts5/.internal/core/render/backend/CanvasRenderer.js","../../node_modules/@amcharts/amcharts5/.internal/core/Root.js","../../node_modules/@amcharts/amcharts5/.internal/core/render/RoundedRectangle.js","../../node_modules/@amcharts/amcharts5/.internal/core/render/Button.js","../../node_modules/@amcharts/amcharts5/.internal/core/util/Data.js","../../node_modules/@amcharts/amcharts5/.internal/core/render/Component.js","../../node_modules/@amcharts/amcharts5/.internal/core/render/gradients/Gradient.js","../../node_modules/@amcharts/amcharts5/.internal/core/render/gradients/LinearGradient.js","../../node_modules/@amcharts/amcharts5/.internal/core/util/Time.js","../../node_modules/@amcharts/amcharts5/.internal/core/util/Draw.js","../../node_modules/@amcharts/amcharts5/.internal/core/render/Line.js","../../node_modules/@amcharts/amcharts5/.internal/core/render/RadialText.js","../../node_modules/@amcharts/amcharts5/.internal/core/render/RadialLabel.js","../../node_modules/@amcharts/amcharts5/.internal/core/render/Slice.js","../../node_modules/@amcharts/amcharts5/.internal/core/render/Chart.js","../../node_modules/@amcharts/amcharts5/.internal/core/render/SerialChart.js","../../node_modules/@amcharts/amcharts5/.internal/core/render/Tick.js","../../node_modules/@amcharts/amcharts5/.internal/core/util/ColorSet.js","../../node_modules/@amcharts/amcharts5/.internal/charts/xy/XYChartDefaultTheme.js","../../node_modules/@amcharts/amcharts5/.internal/charts/xy/XYChart.js","../../node_modules/@amcharts/amcharts5/.internal/charts/xy/axes/Grid.js","../../node_modules/@amcharts/amcharts5/.internal/charts/xy/axes/Axis.js","../../node_modules/@amcharts/amcharts5/.internal/charts/xy/axes/ValueAxis.js","../../node_modules/@amcharts/amcharts5/.internal/charts/xy/axes/AxisBullet.js","../../node_modules/@amcharts/amcharts5/.internal/charts/xy/axes/AxisLabel.js","../../node_modules/@amcharts/amcharts5/.internal/charts/xy/axes/AxisLabelRadial.js","../../node_modules/@amcharts/amcharts5/.internal/charts/xy/axes/AxisTick.js","../../node_modules/@amcharts/amcharts5/.internal/charts/xy/axes/AxisRenderer.js","../../node_modules/@amcharts/amcharts5/.internal/charts/radar/AxisRendererCircular.js","../../node_modules/@amcharts/amcharts5/.internal/charts/radar/ClockHand.js","../../node_modules/@amcharts/amcharts5/.internal/charts/radar/RadarDefaultTheme.js","../../node_modules/@amcharts/amcharts5/.internal/charts/radar/RadarChart.js","../../node_modules/@amcharts/amcharts5/.internal/themes/AnimatedTheme.js","../../src/components/Gauge.svelte","../../src/lib/chartUtils.js","../../node_modules/d3-array/src/extent.js","../../node_modules/d3-selection/src/pointer.js","../../node_modules/d3-selection/src/sourceEvent.js","../../node_modules/d3-array/src/max.js","../../src/components/Chart.svelte","../../src/lib/dataUtils.js","../../src/routes/Home.svelte","../../src/routes/ChartEmbed.svelte","../../src/routes/NotFound.svelte","../../src/App.svelte","../../src/main.js"],"sourcesContent":["/** @returns {void} */\nexport function noop() {}\n\nexport const identity = (x) => x;\n\n/**\n * @template T\n * @template S\n * @param {T} tar\n * @param {S} src\n * @returns {T & S}\n */\nexport function assign(tar, src) {\n\t// @ts-ignore\n\tfor (const k in src) tar[k] = src[k];\n\treturn /** @type {T & S} */ (tar);\n}\n\n// Adapted from https://github.com/then/is-promise/blob/master/index.js\n// Distributed under MIT License https://github.com/then/is-promise/blob/master/LICENSE\n/**\n * @param {any} value\n * @returns {value is PromiseLike<any>}\n */\nexport function is_promise(value) {\n\treturn (\n\t\t!!value &&\n\t\t(typeof value === 'object' || typeof value === 'function') &&\n\t\ttypeof (/** @type {any} */ (value).then) === 'function'\n\t);\n}\n\n/** @returns {void} */\nexport function add_location(element, file, line, column, char) {\n\telement.__svelte_meta = {\n\t\tloc: { file, line, column, char }\n\t};\n}\n\nexport function run(fn) {\n\treturn fn();\n}\n\nexport function blank_object() {\n\treturn Object.create(null);\n}\n\n/**\n * @param {Function[]} fns\n * @returns {void}\n */\nexport function run_all(fns) {\n\tfns.forEach(run);\n}\n\n/**\n * @param {any} thing\n * @returns {thing is Function}\n */\nexport function is_function(thing) {\n\treturn typeof thing === 'function';\n}\n\n/** @returns {boolean} */\nexport function safe_not_equal(a, b) {\n\treturn a != a ? b == b : a !== b || (a && typeof a === 'object') || typeof a === 'function';\n}\n\nlet src_url_equal_anchor;\n\n/**\n * @param {string} element_src\n * @param {string} url\n * @returns {boolean}\n */\nexport function src_url_equal(element_src, url) {\n\tif (element_src === url) return true;\n\tif (!src_url_equal_anchor) {\n\t\tsrc_url_equal_anchor = document.createElement('a');\n\t}\n\t// This is actually faster than doing URL(..).href\n\tsrc_url_equal_anchor.href = url;\n\treturn element_src === src_url_equal_anchor.href;\n}\n\n/** @param {string} srcset */\nfunction split_srcset(srcset) {\n\treturn srcset.split(',').map((src) => src.trim().split(' ').filter(Boolean));\n}\n\n/**\n * @param {HTMLSourceElement | HTMLImageElement} element_srcset\n * @param {string | undefined | null} srcset\n * @returns {boolean}\n */\nexport function srcset_url_equal(element_srcset, srcset) {\n\tconst element_urls = split_srcset(element_srcset.srcset);\n\tconst urls = split_srcset(srcset || '');\n\n\treturn (\n\t\turls.length === element_urls.length &&\n\t\turls.every(\n\t\t\t([url, width], i) =>\n\t\t\t\twidth === element_urls[i][1] &&\n\t\t\t\t// We need to test both ways because Vite will create an a full URL with\n\t\t\t\t// `new URL(asset, import.meta.url).href` for the client when `base: './'`, and the\n\t\t\t\t// relative URLs inside srcset are not automatically resolved to absolute URLs by\n\t\t\t\t// browsers (in contrast to img.src). This means both SSR and DOM code could\n\t\t\t\t// contain relative or absolute URLs.\n\t\t\t\t(src_url_equal(element_urls[i][0], url) || src_url_equal(url, element_urls[i][0]))\n\t\t)\n\t);\n}\n\n/** @returns {boolean} */\nexport function not_equal(a, b) {\n\treturn a != a ? b == b : a !== b;\n}\n\n/** @returns {boolean} */\nexport function is_empty(obj) {\n\treturn Object.keys(obj).length === 0;\n}\n\n/** @returns {void} */\nexport function validate_store(store, name) {\n\tif (store != null && typeof store.subscribe !== 'function') {\n\t\tthrow new Error(`'${name}' is not a store with a 'subscribe' method`);\n\t}\n}\n\nexport function subscribe(store, ...callbacks) {\n\tif (store == null) {\n\t\tfor (const callback of callbacks) {\n\t\t\tcallback(undefined);\n\t\t}\n\t\treturn noop;\n\t}\n\tconst unsub = store.subscribe(...callbacks);\n\treturn unsub.unsubscribe ? () => unsub.unsubscribe() : unsub;\n}\n\n/**\n * Get the current value from a store by subscribing and immediately unsubscribing.\n *\n * https://svelte.dev/docs/svelte-store#get\n * @template T\n * @param {import('../store/public.js').Readable<T>} store\n * @returns {T}\n */\nexport function get_store_value(store) {\n\tlet value;\n\tsubscribe(store, (_) => (value = _))();\n\treturn value;\n}\n\n/** @returns {void} */\nexport function component_subscribe(component, store, callback) {\n\tcomponent.$$.on_destroy.push(subscribe(store, callback));\n}\n\nexport function create_slot(definition, ctx, $$scope, fn) {\n\tif (definition) {\n\t\tconst slot_ctx = get_slot_context(definition, ctx, $$scope, fn);\n\t\treturn definition[0](slot_ctx);\n\t}\n}\n\nfunction get_slot_context(definition, ctx, $$scope, fn) {\n\treturn definition[1] && fn ? assign($$scope.ctx.slice(), definition[1](fn(ctx))) : $$scope.ctx;\n}\n\nexport function get_slot_changes(definition, $$scope, dirty, fn) {\n\tif (definition[2] && fn) {\n\t\tconst lets = definition[2](fn(dirty));\n\t\tif ($$scope.dirty === undefined) {\n\t\t\treturn lets;\n\t\t}\n\t\tif (typeof lets === 'object') {\n\t\t\tconst merged = [];\n\t\t\tconst len = Math.max($$scope.dirty.length, lets.length);\n\t\t\tfor (let i = 0; i < len; i += 1) {\n\t\t\t\tmerged[i] = $$scope.dirty[i] | lets[i];\n\t\t\t}\n\t\t\treturn merged;\n\t\t}\n\t\treturn $$scope.dirty | lets;\n\t}\n\treturn $$scope.dirty;\n}\n\n/** @returns {void} */\nexport function update_slot_base(\n\tslot,\n\tslot_definition,\n\tctx,\n\t$$scope,\n\tslot_changes,\n\tget_slot_context_fn\n) {\n\tif (slot_changes) {\n\t\tconst slot_context = get_slot_context(slot_definition, ctx, $$scope, get_slot_context_fn);\n\t\tslot.p(slot_context, slot_changes);\n\t}\n}\n\n/** @returns {void} */\nexport function update_slot(\n\tslot,\n\tslot_definition,\n\tctx,\n\t$$scope,\n\tdirty,\n\tget_slot_changes_fn,\n\tget_slot_context_fn\n) {\n\tconst slot_changes = get_slot_changes(slot_definition, $$scope, dirty, get_slot_changes_fn);\n\tupdate_slot_base(slot, slot_definition, ctx, $$scope, slot_changes, get_slot_context_fn);\n}\n\n/** @returns {any[] | -1} */\nexport function get_all_dirty_from_scope($$scope) {\n\tif ($$scope.ctx.length > 32) {\n\t\tconst dirty = [];\n\t\tconst length = $$scope.ctx.length / 32;\n\t\tfor (let i = 0; i < length; i++) {\n\t\t\tdirty[i] = -1;\n\t\t}\n\t\treturn dirty;\n\t}\n\treturn -1;\n}\n\n/** @returns {{}} */\nexport function exclude_internal_props(props) {\n\tconst result = {};\n\tfor (const k in props) if (k[0] !== '$') result[k] = props[k];\n\treturn result;\n}\n\n/** @returns {{}} */\nexport function compute_rest_props(props, keys) {\n\tconst rest = {};\n\tkeys = new Set(keys);\n\tfor (const k in props) if (!keys.has(k) && k[0] !== '$') rest[k] = props[k];\n\treturn rest;\n}\n\n/** @returns {{}} */\nexport function compute_slots(slots) {\n\tconst result = {};\n\tfor (const key in slots) {\n\t\tresult[key] = true;\n\t}\n\treturn result;\n}\n\n/** @returns {(this: any, ...args: any[]) => void} */\nexport function once(fn) {\n\tlet ran = false;\n\treturn function (...args) {\n\t\tif (ran) return;\n\t\tran = true;\n\t\tfn.call(this, ...args);\n\t};\n}\n\nexport function null_to_empty(value) {\n\treturn value == null ? '' : value;\n}\n\nexport function set_store_value(store, ret, value) {\n\tstore.set(value);\n\treturn ret;\n}\n\nexport const has_prop = (obj, prop) => Object.prototype.hasOwnProperty.call(obj, prop);\n\nexport function action_destroyer(action_result) {\n\treturn action_result && is_function(action_result.destroy) ? action_result.destroy : noop;\n}\n\n/** @param {number | string} value\n * @returns {[number, string]}\n */\nexport function split_css_unit(value) {\n\tconst split = typeof value === 'string' && value.match(/^\\s*(-?[\\d.]+)([^\\s]*)\\s*$/);\n\treturn split ? [parseFloat(split[1]), split[2] || 'px'] : [/** @type {number} */ (value), 'px'];\n}\n\nexport const contenteditable_truthy_values = ['', true, 1, 'true', 'contenteditable'];\n","import { contenteditable_truthy_values, has_prop } from './utils.js';\n\nimport { ResizeObserverSingleton } from './ResizeObserverSingleton.js';\n\n// Track which nodes are claimed during hydration. Unclaimed nodes can then be removed from the DOM\n// at the end of hydration without touching the remaining nodes.\nlet is_hydrating = false;\n\n/**\n * @returns {void}\n */\nexport function start_hydrating() {\n\tis_hydrating = true;\n}\n\n/**\n * @returns {void}\n */\nexport function end_hydrating() {\n\tis_hydrating = false;\n}\n\n/**\n * @param {number} low\n * @param {number} high\n * @param {(index: number) => number} key\n * @param {number} value\n * @returns {number}\n */\nfunction upper_bound(low, high, key, value) {\n\t// Return first index of value larger than input value in the range [low, high)\n\twhile (low < high) {\n\t\tconst mid = low + ((high - low) >> 1);\n\t\tif (key(mid) <= value) {\n\t\t\tlow = mid + 1;\n\t\t} else {\n\t\t\thigh = mid;\n\t\t}\n\t}\n\treturn low;\n}\n\n/**\n * @param {NodeEx} target\n * @returns {void}\n */\nfunction init_hydrate(target) {\n\tif (target.hydrate_init) return;\n\ttarget.hydrate_init = true;\n\t// We know that all children have claim_order values since the unclaimed have been detached if target is not <head>\n\n\tlet children = /** @type {ArrayLike<NodeEx2>} */ (target.childNodes);\n\t// If target is <head>, there may be children without claim_order\n\tif (target.nodeName === 'HEAD') {\n\t\tconst my_children = [];\n\t\tfor (let i = 0; i < children.length; i++) {\n\t\t\tconst node = children[i];\n\t\t\tif (node.claim_order !== undefined) {\n\t\t\t\tmy_children.push(node);\n\t\t\t}\n\t\t}\n\t\tchildren = my_children;\n\t}\n\t/*\n\t * Reorder claimed children optimally.\n\t * We can reorder claimed children optimally by finding the longest subsequence of\n\t * nodes that are already claimed in order and only moving the rest. The longest\n\t * subsequence of nodes that are claimed in order can be found by\n\t * computing the longest increasing subsequence of .claim_order values.\n\t *\n\t * This algorithm is optimal in generating the least amount of reorder operations\n\t * possible.\n\t *\n\t * Proof:\n\t * We know that, given a set of reordering operations, the nodes that do not move\n\t * always form an increasing subsequence, since they do not move among each other\n\t * meaning that they must be already ordered among each other. Thus, the maximal\n\t * set of nodes that do not move form a longest increasing subsequence.\n\t */\n\t// Compute longest increasing subsequence\n\t// m: subsequence length j => index k of smallest value that ends an increasing subsequence of length j\n\tconst m = new Int32Array(children.length + 1);\n\t// Predecessor indices + 1\n\tconst p = new Int32Array(children.length);\n\tm[0] = -1;\n\tlet longest = 0;\n\tfor (let i = 0; i < children.length; i++) {\n\t\tconst current = children[i].claim_order;\n\t\t// Find the largest subsequence length such that it ends in a value less than our current value\n\t\t// upper_bound returns first greater value, so we subtract one\n\t\t// with fast path for when we are on the current longest subsequence\n\t\tconst seq_len =\n\t\t\t(longest > 0 && children[m[longest]].claim_order <= current\n\t\t\t\t? longest + 1\n\t\t\t\t: upper_bound(1, longest, (idx) => children[m[idx]].claim_order, current)) - 1;\n\t\tp[i] = m[seq_len] + 1;\n\t\tconst new_len = seq_len + 1;\n\t\t// We can guarantee that current is the smallest value. Otherwise, we would have generated a longer sequence.\n\t\tm[new_len] = i;\n\t\tlongest = Math.max(new_len, longest);\n\t}\n\t// The longest increasing subsequence of nodes (initially reversed)\n\n\t/**\n\t * @type {NodeEx2[]}\n\t */\n\tconst lis = [];\n\t// The rest of the nodes, nodes that will be moved\n\n\t/**\n\t * @type {NodeEx2[]}\n\t */\n\tconst to_move = [];\n\tlet last = children.length - 1;\n\tfor (let cur = m[longest] + 1; cur != 0; cur = p[cur - 1]) {\n\t\tlis.push(children[cur - 1]);\n\t\tfor (; last >= cur; last--) {\n\t\t\tto_move.push(children[last]);\n\t\t}\n\t\tlast--;\n\t}\n\tfor (; last >= 0; last--) {\n\t\tto_move.push(children[last]);\n\t}\n\tlis.reverse();\n\t// We sort the nodes being moved to guarantee that their insertion order matches the claim order\n\tto_move.sort((a, b) => a.claim_order - b.claim_order);\n\t// Finally, we move the nodes\n\tfor (let i = 0, j = 0; i < to_move.length; i++) {\n\t\twhile (j < lis.length && to_move[i].claim_order >= lis[j].claim_order) {\n\t\t\tj++;\n\t\t}\n\t\tconst anchor = j < lis.length ? lis[j] : null;\n\t\ttarget.insertBefore(to_move[i], anchor);\n\t}\n}\n\n/**\n * @param {Node} target\n * @param {Node} node\n * @returns {void}\n */\nexport function append(target, node) {\n\ttarget.appendChild(node);\n}\n\n/**\n * @param {Node} target\n * @param {string} style_sheet_id\n * @param {string} styles\n * @returns {void}\n */\nexport function append_styles(target, style_sheet_id, styles) {\n\tconst append_styles_to = get_root_for_style(target);\n\tif (!append_styles_to.getElementById(style_sheet_id)) {\n\t\tconst style = element('style');\n\t\tstyle.id = style_sheet_id;\n\t\tstyle.textContent = styles;\n\t\tappend_stylesheet(append_styles_to, style);\n\t}\n}\n\n/**\n * @param {Node} node\n * @returns {ShadowRoot | Document}\n */\nexport function get_root_for_style(node) {\n\tif (!node) return document;\n\tconst root = node.getRootNode ? node.getRootNode() : node.ownerDocument;\n\tif (root && /** @type {ShadowRoot} */ (root).host) {\n\t\treturn /** @type {ShadowRoot} */ (root);\n\t}\n\treturn node.ownerDocument;\n}\n\n/**\n * @param {Node} node\n * @returns {CSSStyleSheet}\n */\nexport function append_empty_stylesheet(node) {\n\tconst style_element = element('style');\n\t// For transitions to work without 'style-src: unsafe-inline' Content Security Policy,\n\t// these empty tags need to be allowed with a hash as a workaround until we move to the Web Animations API.\n\t// Using the hash for the empty string (for an empty tag) works in all browsers except Safari.\n\t// So as a workaround for the workaround, when we append empty style tags we set their content to /* empty */.\n\t// The hash 'sha256-9OlNO0DNEeaVzHL4RZwCLsBHA8WBQ8toBp/4F5XV2nc=' will then work even in Safari.\n\tstyle_element.textContent = '/* empty */';\n\tappend_stylesheet(get_root_for_style(node), style_element);\n\treturn style_element.sheet;\n}\n\n/**\n * @param {ShadowRoot | Document} node\n * @param {HTMLStyleElement} style\n * @returns {CSSStyleSheet}\n */\nfunction append_stylesheet(node, style) {\n\tappend(/** @type {Document} */ (node).head || node, style);\n\treturn style.sheet;\n}\n\n/**\n * @param {NodeEx} target\n * @param {NodeEx} node\n * @returns {void}\n */\nexport function append_hydration(target, node) {\n\tif (is_hydrating) {\n\t\tinit_hydrate(target);\n\t\tif (\n\t\t\ttarget.actual_end_child === undefined ||\n\t\t\t(target.actual_end_child !== null && target.actual_end_child.parentNode !== target)\n\t\t) {\n\t\t\ttarget.actual_end_child = target.firstChild;\n\t\t}\n\t\t// Skip nodes of undefined ordering\n\t\twhile (target.actual_end_child !== null && target.actual_end_child.claim_order === undefined) {\n\t\t\ttarget.actual_end_child = target.actual_end_child.nextSibling;\n\t\t}\n\t\tif (node !== target.actual_end_child) {\n\t\t\t// We only insert if the ordering of this node should be modified or the parent node is not target\n\t\t\tif (node.claim_order !== undefined || node.parentNode !== target) {\n\t\t\t\ttarget.insertBefore(node, target.actual_end_child);\n\t\t\t}\n\t\t} else {\n\t\t\ttarget.actual_end_child = node.nextSibling;\n\t\t}\n\t} else if (node.parentNode !== target || node.nextSibling !== null) {\n\t\ttarget.appendChild(node);\n\t}\n}\n\n/**\n * @param {Node} target\n * @param {Node} node\n * @param {Node} [anchor]\n * @returns {void}\n */\nexport function insert(target, node, anchor) {\n\ttarget.insertBefore(node, anchor || null);\n}\n\n/**\n * @param {NodeEx} target\n * @param {NodeEx} node\n * @param {NodeEx} [anchor]\n * @returns {void}\n */\nexport function insert_hydration(target, node, anchor) {\n\tif (is_hydrating && !anchor) {\n\t\tappend_hydration(target, node);\n\t} else if (node.parentNode !== target || node.nextSibling != anchor) {\n\t\ttarget.insertBefore(node, anchor || null);\n\t}\n}\n\n/**\n * @param {Node} node\n * @returns {void}\n */\nexport function detach(node) {\n\tif (node.parentNode) {\n\t\tnode.parentNode.removeChild(node);\n\t}\n}\n\n/**\n * @returns {void} */\nexport function destroy_each(iterations, detaching) {\n\tfor (let i = 0; i < iterations.length; i += 1) {\n\t\tif (iterations[i]) iterations[i].d(detaching);\n\t}\n}\n\n/**\n * @template {keyof HTMLElementTagNameMap} K\n * @param {K} name\n * @returns {HTMLElementTagNameMap[K]}\n */\nexport function element(name) {\n\treturn document.createElement(name);\n}\n\n/**\n * @template {keyof HTMLElementTagNameMap} K\n * @param {K} name\n * @param {string} is\n * @returns {HTMLElementTagNameMap[K]}\n */\nexport function element_is(name, is) {\n\treturn document.createElement(name, { is });\n}\n\n/**\n * @template T\n * @template {keyof T} K\n * @param {T} obj\n * @param {K[]} exclude\n * @returns {Pick<T, Exclude<keyof T, K>>}\n */\nexport function object_without_properties(obj, exclude) {\n\tconst target = /** @type {Pick<T, Exclude<keyof T, K>>} */ ({});\n\tfor (const k in obj) {\n\t\tif (\n\t\t\thas_prop(obj, k) &&\n\t\t\t// @ts-ignore\n\t\t\texclude.indexOf(k) === -1\n\t\t) {\n\t\t\t// @ts-ignore\n\t\t\ttarget[k] = obj[k];\n\t\t}\n\t}\n\treturn target;\n}\n\n/**\n * @template {keyof SVGElementTagNameMap} K\n * @param {K} name\n * @returns {SVGElement}\n */\nexport function svg_element(name) {\n\treturn document.createElementNS('http://www.w3.org/2000/svg', name);\n}\n\n/**\n * @param {string} data\n * @returns {Text}\n */\nexport function text(data) {\n\treturn document.createTextNode(data);\n}\n\n/**\n * @returns {Text} */\nexport function space() {\n\treturn text(' ');\n}\n\n/**\n * @returns {Text} */\nexport function empty() {\n\treturn text('');\n}\n\n/**\n * @param {string} content\n * @returns {Comment}\n */\nexport function comment(content) {\n\treturn document.createComment(content);\n}\n\n/**\n * @param {EventTarget} node\n * @param {string} event\n * @param {EventListenerOrEventListenerObject} handler\n * @param {boolean | AddEventListenerOptions | EventListenerOptions} [options]\n * @returns {() => void}\n */\nexport function listen(node, event, handler, options) {\n\tnode.addEventListener(event, handler, options);\n\treturn () => node.removeEventListener(event, handler, options);\n}\n\n/**\n * @returns {(event: any) => any} */\nexport function prevent_default(fn) {\n\treturn function (event) {\n\t\tevent.preventDefault();\n\t\t// @ts-ignore\n\t\treturn fn.call(this, event);\n\t};\n}\n\n/**\n * @returns {(event: any) => any} */\nexport function stop_propagation(fn) {\n\treturn function (event) {\n\t\tevent.stopPropagation();\n\t\t// @ts-ignore\n\t\treturn fn.call(this, event);\n\t};\n}\n\n/**\n * @returns {(event: any) => any} */\nexport function stop_immediate_propagation(fn) {\n\treturn function (event) {\n\t\tevent.stopImmediatePropagation();\n\t\t// @ts-ignore\n\t\treturn fn.call(this, event);\n\t};\n}\n\n/**\n * @returns {(event: any) => void} */\nexport function self(fn) {\n\treturn function (event) {\n\t\t// @ts-ignore\n\t\tif (event.target === this) fn.call(this, event);\n\t};\n}\n\n/**\n * @returns {(event: any) => void} */\nexport function trusted(fn) {\n\treturn function (event) {\n\t\t// @ts-ignore\n\t\tif (event.isTrusted) fn.call(this, event);\n\t};\n}\n\n/**\n * @param {Element} node\n * @param {string} attribute\n * @param {string} [value]\n * @returns {void}\n */\nexport function attr(node, attribute, value) {\n\tif (value == null) node.removeAttribute(attribute);\n\telse if (node.getAttribute(attribute) !== value) node.setAttribute(attribute, value);\n}\n/**\n * List of attributes that should always be set through the attr method,\n * because updating them through the property setter doesn't work reliably.\n * In the example of `width`/`height`, the problem is that the setter only\n * accepts numeric values, but the attribute can also be set to a string like `50%`.\n * If this list becomes too big, rethink this approach.\n */\nconst always_set_through_set_attribute = ['width', 'height'];\n\n/**\n * @param {Element & ElementCSSInlineStyle} node\n * @param {{ [x: string]: string }} attributes\n * @returns {void}\n */\nexport function set_attributes(node, attributes) {\n\t// @ts-ignore\n\tconst descriptors = Object.getOwnPropertyDescriptors(node.__proto__);\n\tfor (const key in attributes) {\n\t\tif (attributes[key] == null) {\n\t\t\tnode.removeAttribute(key);\n\t\t} else if (key === 'style') {\n\t\t\tnode.style.cssText = attributes[key];\n\t\t} else if (key === '__value') {\n\t\t\t/** @type {any} */ (node).value = node[key] = attributes[key];\n\t\t} else if (\n\t\t\tdescriptors[key] &&\n\t\t\tdescriptors[key].set &&\n\t\t\talways_set_through_set_attribute.indexOf(key) === -1\n\t\t) {\n\t\t\tnode[key] = attributes[key];\n\t\t} else {\n\t\t\tattr(node, key, attributes[key]);\n\t\t}\n\t}\n}\n\n/**\n * @param {Element & ElementCSSInlineStyle} node\n * @param {{ [x: string]: string }} attributes\n * @returns {void}\n */\nexport function set_svg_attributes(node, attributes) {\n\tfor (const key in attributes) {\n\t\tattr(node, key, attributes[key]);\n\t}\n}\n\n/**\n * @param {Record<string, unknown>} data_map\n * @returns {void}\n */\nexport function set_custom_element_data_map(node, data_map) {\n\tObject.keys(data_map).forEach((key) => {\n\t\tset_custom_element_data(node, key, data_map[key]);\n\t});\n}\n\n/**\n * @returns {void} */\nexport function set_custom_element_data(node, prop, value) {\n\tconst lower = prop.toLowerCase(); // for backwards compatibility with existing behavior we do lowercase first\n\tif (lower in node) {\n\t\tnode[lower] = typeof node[lower] === 'boolean' && value === '' ? true : value;\n\t} else if (prop in node) {\n\t\tnode[prop] = typeof node[prop] === 'boolean' && value === '' ? true : value;\n\t} else {\n\t\tattr(node, prop, value);\n\t}\n}\n\n/**\n * @param {string} tag\n */\nexport function set_dynamic_element_data(tag) {\n\treturn /-/.test(tag) ? set_custom_element_data_map : set_attributes;\n}\n\n/**\n * @returns {void}\n */\nexport function xlink_attr(node, attribute, value) {\n\tnode.setAttributeNS('http://www.w3.org/1999/xlink', attribute, value);\n}\n\n/**\n * @param {HTMLElement} node\n * @returns {string}\n */\nexport function get_svelte_dataset(node) {\n\treturn node.dataset.svelteH;\n}\n\n/**\n * @returns {unknown[]} */\nexport function get_binding_group_value(group, __value, checked) {\n\tconst value = new Set();\n\tfor (let i = 0; i < group.length; i += 1) {\n\t\tif (group[i].checked) value.add(group[i].__value);\n\t}\n\tif (!checked) {\n\t\tvalue.delete(__value);\n\t}\n\treturn Array.from(value);\n}\n\n/**\n * @param {HTMLInputElement[]} group\n * @returns {{ p(...inputs: HTMLInputElement[]): void; r(): void; }}\n */\nexport function init_binding_group(group) {\n\t/**\n\t * @type {HTMLInputElement[]} */\n\tlet _inputs;\n\treturn {\n\t\t/* push */ p(...inputs) {\n\t\t\t_inputs = inputs;\n\t\t\t_inputs.forEach((input) => group.push(input));\n\t\t},\n\t\t/* remove */ r() {\n\t\t\t_inputs.forEach((input) => group.splice(group.indexOf(input), 1));\n\t\t}\n\t};\n}\n\n/**\n * @param {number[]} indexes\n * @returns {{ u(new_indexes: number[]): void; p(...inputs: HTMLInputElement[]): void; r: () => void; }}\n */\nexport function init_binding_group_dynamic(group, indexes) {\n\t/**\n\t * @type {HTMLInputElement[]} */\n\tlet _group = get_binding_group(group);\n\n\t/**\n\t * @type {HTMLInputElement[]} */\n\tlet _inputs;\n\n\tfunction get_binding_group(group) {\n\t\tfor (let i = 0; i < indexes.length; i++) {\n\t\t\tgroup = group[indexes[i]] = group[indexes[i]] || [];\n\t\t}\n\t\treturn group;\n\t}\n\n\t/**\n\t * @returns {void} */\n\tfunction push() {\n\t\t_inputs.forEach((input) => _group.push(input));\n\t}\n\n\t/**\n\t * @returns {void} */\n\tfunction remove() {\n\t\t_inputs.forEach((input) => _group.splice(_group.indexOf(input), 1));\n\t}\n\treturn {\n\t\t/* update */ u(new_indexes) {\n\t\t\tindexes = new_indexes;\n\t\t\tconst new_group = get_binding_group(group);\n\t\t\tif (new_group !== _group) {\n\t\t\t\tremove();\n\t\t\t\t_group = new_group;\n\t\t\t\tpush();\n\t\t\t}\n\t\t},\n\t\t/* push */ p(...inputs) {\n\t\t\t_inputs = inputs;\n\t\t\tpush();\n\t\t},\n\t\t/* remove */ r: remove\n\t};\n}\n\n/** @returns {number} */\nexport function to_number(value) {\n\treturn value === '' ? null : +value;\n}\n\n/** @returns {any[]} */\nexport function time_ranges_to_array(ranges) {\n\tconst array = [];\n\tfor (let i = 0; i < ranges.length; i += 1) {\n\t\tarray.push({ start: ranges.start(i), end: ranges.end(i) });\n\t}\n\treturn array;\n}\n\n/**\n * @param {Element} element\n * @returns {ChildNode[]}\n */\nexport function children(element) {\n\treturn Array.from(element.childNodes);\n}\n\n/**\n * @param {ChildNodeArray} nodes\n * @returns {void}\n */\nfunction init_claim_info(nodes) {\n\tif (nodes.claim_info === undefined) {\n\t\tnodes.claim_info = { last_index: 0, total_claimed: 0 };\n\t}\n}\n\n/**\n * @template {ChildNodeEx} R\n * @param {ChildNodeArray} nodes\n * @param {(node: ChildNodeEx) => node is R} predicate\n * @param {(node: ChildNodeEx) => ChildNodeEx | undefined} process_node\n * @param {() => R} create_node\n * @param {boolean} dont_update_last_index\n * @returns {R}\n */\nfunction claim_node(nodes, predicate, process_node, create_node, dont_update_last_index = false) {\n\t// Try to find nodes in an order such that we lengthen the longest increasing subsequence\n\tinit_claim_info(nodes);\n\tconst result_node = (() => {\n\t\t// We first try to find an element after the previous one\n\t\tfor (let i = nodes.claim_info.last_index; i < nodes.length; i++) {\n\t\t\tconst node = nodes[i];\n\t\t\tif (predicate(node)) {\n\t\t\t\tconst replacement = process_node(node);\n\t\t\t\tif (replacement === undefined) {\n\t\t\t\t\tnodes.splice(i, 1);\n\t\t\t\t} else {\n\t\t\t\t\tnodes[i] = replacement;\n\t\t\t\t}\n\t\t\t\tif (!dont_update_last_index) {\n\t\t\t\t\tnodes.claim_info.last_index = i;\n\t\t\t\t}\n\t\t\t\treturn node;\n\t\t\t}\n\t\t}\n\t\t// Otherwise, we try to find one before\n\t\t// We iterate in reverse so that we don't go too far back\n\t\tfor (let i = nodes.claim_info.last_index - 1; i >= 0; i--) {\n\t\t\tconst node = nodes[i];\n\t\t\tif (predicate(node)) {\n\t\t\t\tconst replacement = process_node(node);\n\t\t\t\tif (replacement === undefined) {\n\t\t\t\t\tnodes.splice(i, 1);\n\t\t\t\t} else {\n\t\t\t\t\tnodes[i] = replacement;\n\t\t\t\t}\n\t\t\t\tif (!dont_update_last_index) {\n\t\t\t\t\tnodes.claim_info.last_index = i;\n\t\t\t\t} else if (replacement === undefined) {\n\t\t\t\t\t// Since we spliced before the last_index, we decrease it\n\t\t\t\t\tnodes.claim_info.last_index--;\n\t\t\t\t}\n\t\t\t\treturn node;\n\t\t\t}\n\t\t}\n\t\t// If we can't find any matching node, we create a new one\n\t\treturn create_node();\n\t})();\n\tresult_node.claim_order = nodes.claim_info.total_claimed;\n\tnodes.claim_info.total_claimed += 1;\n\treturn result_node;\n}\n\n/**\n * @param {ChildNodeArray} nodes\n * @param {string} name\n * @param {{ [key: string]: boolean }} attributes\n * @param {(name: string) => Element | SVGElement} create_element\n * @returns {Element | SVGElement}\n */\nfunction claim_element_base(nodes, name, attributes, create_element) {\n\treturn claim_node(\n\t\tnodes,\n\t\t/** @returns {node is Element | SVGElement} */\n\t\t(node) => node.nodeName === name,\n\t\t/** @param {Element} node */\n\t\t(node) => {\n\t\t\tconst remove = [];\n\t\t\tfor (let j = 0; j < node.attributes.length; j++) {\n\t\t\t\tconst attribute = node.attributes[j];\n\t\t\t\tif (!attributes[attribute.name]) {\n\t\t\t\t\tremove.push(attribute.name);\n\t\t\t\t}\n\t\t\t}\n\t\t\tremove.forEach((v) => node.removeAttribute(v));\n\t\t\treturn undefined;\n\t\t},\n\t\t() => create_element(name)\n\t);\n}\n\n/**\n * @param {ChildNodeArray} nodes\n * @param {string} name\n * @param {{ [key: string]: boolean }} attributes\n * @returns {Element | SVGElement}\n */\nexport function claim_element(nodes, name, attributes) {\n\treturn claim_element_base(nodes, name, attributes, element);\n}\n\n/**\n * @param {ChildNodeArray} nodes\n * @param {string} name\n * @param {{ [key: string]: boolean }} attributes\n * @returns {Element | SVGElement}\n */\nexport function claim_svg_element(nodes, name, attributes) {\n\treturn claim_element_base(nodes, name, attributes, svg_element);\n}\n\n/**\n * @param {ChildNodeArray} nodes\n * @returns {Text}\n */\nexport function claim_text(nodes, data) {\n\treturn claim_node(\n\t\tnodes,\n\t\t/** @returns {node is Text} */\n\t\t(node) => node.nodeType === 3,\n\t\t/** @param {Text} node */\n\t\t(node) => {\n\t\t\tconst data_str = '' + data;\n\t\t\tif (node.data.startsWith(data_str)) {\n\t\t\t\tif (node.data.length !== data_str.length) {\n\t\t\t\t\treturn node.splitText(data_str.length);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tnode.data = data_str;\n\t\t\t}\n\t\t},\n\t\t() => text(data),\n\t\ttrue // Text nodes should not update last index since it is likely not worth it to eliminate an increasing subsequence of actual elements\n\t);\n}\n\n/**\n * @returns {Text} */\nexport function claim_space(nodes) {\n\treturn claim_text(nodes, ' ');\n}\n\n/**\n * @param {ChildNodeArray} nodes\n * @returns {Comment}\n */\nexport function claim_comment(nodes, data) {\n\treturn claim_node(\n\t\tnodes,\n\t\t/** @returns {node is Comment} */\n\t\t(node) => node.nodeType === 8,\n\t\t/** @param {Comment} node */\n\t\t(node) => {\n\t\t\tnode.data = '' + data;\n\t\t\treturn undefined;\n\t\t},\n\t\t() => comment(data),\n\t\ttrue\n\t);\n}\n\nfunction get_comment_idx(nodes, text, start) {\n\tfor (let i = start; i < nodes.length; i += 1) {\n\t\tconst node = nodes[i];\n\t\tif (node.nodeType === 8 /* comment node */ && node.textContent.trim() === text) {\n\t\t\treturn i;\n\t\t}\n\t}\n\treturn -1;\n}\n\n/**\n * @param {boolean} is_svg\n * @returns {HtmlTagHydration}\n */\nexport function claim_html_tag(nodes, is_svg) {\n\t// find html opening tag\n\tconst start_index = get_comment_idx(nodes, 'HTML_TAG_START', 0);\n\tconst end_index = get_comment_idx(nodes, 'HTML_TAG_END', start_index + 1);\n\tif (start_index === -1 || end_index === -1) {\n\t\treturn new HtmlTagHydration(is_svg);\n\t}\n\n\tinit_claim_info(nodes);\n\tconst html_tag_nodes = nodes.splice(start_index, end_index - start_index + 1);\n\tdetach(html_tag_nodes[0]);\n\tdetach(html_tag_nodes[html_tag_nodes.length - 1]);\n\tconst claimed_nodes = html_tag_nodes.slice(1, html_tag_nodes.length - 1);\n\tif (claimed_nodes.length === 0) {\n\t\treturn new HtmlTagHydration(is_svg);\n\t}\n\tfor (const n of claimed_nodes) {\n\t\tn.claim_order = nodes.claim_info.total_claimed;\n\t\tnodes.claim_info.total_claimed += 1;\n\t}\n\treturn new HtmlTagHydration(is_svg, claimed_nodes);\n}\n\n/**\n * @param {Text} text\n * @param {unknown} data\n * @returns {void}\n */\nexport function set_data(text, data) {\n\tdata = '' + data;\n\tif (text.data === data) return;\n\ttext.data = /** @type {string} */ (data);\n}\n\n/**\n * @param {Text} text\n * @param {unknown} data\n * @returns {void}\n */\nexport function set_data_contenteditable(text, data) {\n\tdata = '' + data;\n\tif (text.wholeText === data) return;\n\ttext.data = /** @type {string} */ (data);\n}\n\n/**\n * @param {Text} text\n * @param {unknown} data\n * @param {string} attr_value\n * @returns {void}\n */\nexport function set_data_maybe_contenteditable(text, data, attr_value) {\n\tif (~contenteditable_truthy_values.indexOf(attr_value)) {\n\t\tset_data_contenteditable(text, data);\n\t} else {\n\t\tset_data(text, data);\n\t}\n}\n\n/**\n * @returns {void} */\nexport function set_input_value(input, value) {\n\tinput.value = value == null ? '' : value;\n}\n\n/**\n * @returns {void} */\nexport function set_input_type(input, type) {\n\ttry {\n\t\tinput.type = type;\n\t} catch (e) {\n\t\t// do nothing\n\t}\n}\n\n/**\n * @returns {void} */\nexport function set_style(node, key, value, important) {\n\tif (value == null) {\n\t\tnode.style.removeProperty(key);\n\t} else {\n\t\tnode.style.setProperty(key, value, important ? 'important' : '');\n\t}\n}\n\n/**\n * @returns {void} */\nexport function select_option(select, value, mounting) {\n\tfor (let i = 0; i < select.options.length; i += 1) {\n\t\tconst option = select.options[i];\n\t\tif (option.__value === value) {\n\t\t\toption.selected = true;\n\t\t\treturn;\n\t\t}\n\t}\n\tif (!mounting || value !== undefined) {\n\t\tselect.selectedIndex = -1; // no option should be selected\n\t}\n}\n\n/**\n * @returns {void} */\nexport function select_options(select, value) {\n\tfor (let i = 0; i < select.options.length; i += 1) {\n\t\tconst option = select.options[i];\n\t\toption.selected = ~value.indexOf(option.__value);\n\t}\n}\n\nexport function select_value(select) {\n\tconst selected_option = select.querySelector(':checked');\n\treturn selected_option && selected_option.__value;\n}\n\nexport function select_multiple_value(select) {\n\treturn [].map.call(select.querySelectorAll(':checked'), (option) => option.__value);\n}\n// unfortunately this can't be a constant as that wouldn't be tree-shakeable\n// so we cache the result instead\n\n/**\n * @type {boolean} */\nlet crossorigin;\n\n/**\n * @returns {boolean} */\nexport function is_crossorigin() {\n\tif (crossorigin === undefined) {\n\t\tcrossorigin = false;\n\t\ttry {\n\t\t\tif (typeof window !== 'undefined' && window.parent) {\n\t\t\t\tvoid window.parent.document;\n\t\t\t}\n\t\t} catch (error) {\n\t\t\tcrossorigin = true;\n\t\t}\n\t}\n\treturn crossorigin;\n}\n\n/**\n * @param {HTMLElement} node\n * @param {() => void} fn\n * @returns {() => void}\n */\nexport function add_iframe_resize_listener(node, fn) {\n\tconst computed_style = getComputedStyle(node);\n\tif (computed_style.position === 'static') {\n\t\tnode.style.position = 'relative';\n\t}\n\tconst iframe = element('iframe');\n\tiframe.setAttribute(\n\t\t'style',\n\t\t'display: block; position: absolute; top: 0; left: 0; width: 100%; height: 100%; ' +\n\t\t\t'overflow: hidden; border: 0; opacity: 0; pointer-events: none; z-index: -1;'\n\t);\n\tiframe.setAttribute('aria-hidden', 'true');\n\tiframe.tabIndex = -1;\n\tconst crossorigin = is_crossorigin();\n\n\t/**\n\t * @type {() => void}\n\t */\n\tlet unsubscribe;\n\tif (crossorigin) {\n\t\tiframe.src = \"data:text/html,<script>onresize=function(){parent.postMessage(0,'*')}</script>\";\n\t\tunsubscribe = listen(\n\t\t\twindow,\n\t\t\t'message',\n\t\t\t/** @param {MessageEvent} event */ (event) => {\n\t\t\t\tif (event.source === iframe.contentWindow) fn();\n\t\t\t}\n\t\t);\n\t} else {\n\t\tiframe.src = 'about:blank';\n\t\tiframe.onload = () => {\n\t\t\tunsubscribe = listen(iframe.contentWindow, 'resize', fn);\n\t\t\t// make sure an initial resize event is fired _after_ the iframe is loaded (which is asynchronous)\n\t\t\t// see https://github.com/sveltejs/svelte/issues/4233\n\t\t\tfn();\n\t\t};\n\t}\n\tappend(node, iframe);\n\treturn () => {\n\t\tif (crossorigin) {\n\t\t\tunsubscribe();\n\t\t} else if (unsubscribe && iframe.contentWindow) {\n\t\t\tunsubscribe();\n\t\t}\n\t\tdetach(iframe);\n\t};\n}\nexport const resize_observer_content_box = /* @__PURE__ */ new ResizeObserverSingleton({\n\tbox: 'content-box'\n});\nexport const resize_observer_border_box = /* @__PURE__ */ new ResizeObserverSingleton({\n\tbox: 'border-box'\n});\nexport const resize_observer_device_pixel_content_box = /* @__PURE__ */ new ResizeObserverSingleton(\n\t{ box: 'device-pixel-content-box' }\n);\nexport { ResizeObserverSingleton };\n\n/**\n * @returns {void} */\nexport function toggle_class(element, name, toggle) {\n\t// The `!!` is required because an `undefined` flag means flipping the current state.\n\telement.classList.toggle(name, !!toggle);\n}\n\n/**\n * @template T\n * @param {string} type\n * @param {T} [detail]\n * @param {{ bubbles?: boolean, cancelable?: boolean }} [options]\n * @returns {CustomEvent<T>}\n */\nexport function custom_event(type, detail, { bubbles = false, cancelable = false } = {}) {\n\treturn new CustomEvent(type, { detail, bubbles, cancelable });\n}\n\n/**\n * @param {string} selector\n * @param {HTMLElement} parent\n * @returns {ChildNodeArray}\n */\nexport function query_selector_all(selector, parent = document.body) {\n\treturn Array.from(parent.querySelectorAll(selector));\n}\n\n/**\n * @param {string} nodeId\n * @param {HTMLElement} head\n * @returns {any[]}\n */\nexport function head_selector(nodeId, head) {\n\tconst result = [];\n\tlet started = 0;\n\tfor (const node of head.childNodes) {\n\t\tif (node.nodeType === 8 /* comment node */) {\n\t\t\tconst comment = node.textContent.trim();\n\t\t\tif (comment === `HEAD_${nodeId}_END`) {\n\t\t\t\tstarted -= 1;\n\t\t\t\tresult.push(node);\n\t\t\t} else if (comment === `HEAD_${nodeId}_START`) {\n\t\t\t\tstarted += 1;\n\t\t\t\tresult.push(node);\n\t\t\t}\n\t\t} else if (started > 0) {\n\t\t\tresult.push(node);\n\t\t}\n\t}\n\treturn result;\n}\n/** */\nexport class HtmlTag {\n\t/**\n\t * @private\n\t * @default false\n\t */\n\tis_svg = false;\n\t/** parent for creating node */\n\te = undefined;\n\t/** html tag nodes */\n\tn = undefined;\n\t/** target */\n\tt = undefined;\n\t/** anchor */\n\ta = undefined;\n\tconstructor(is_svg = false) {\n\t\tthis.is_svg = is_svg;\n\t\tthis.e = this.n = null;\n\t}\n\n\t/**\n\t * @param {string} html\n\t * @returns {void}\n\t */\n\tc(html) {\n\t\tthis.h(html);\n\t}\n\n\t/**\n\t * @param {string} html\n\t * @param {HTMLElement | SVGElement} target\n\t * @param {HTMLElement | SVGElement} anchor\n\t * @returns {void}\n\t */\n\tm(html, target, anchor = null) {\n\t\tif (!this.e) {\n\t\t\tif (this.is_svg)\n\t\t\t\tthis.e = svg_element(/** @type {keyof SVGElementTagNameMap} */ (target.nodeName));\n\t\t\t/** #7364  target for <template> may be provided as #document-fragment(11) */ else\n\t\t\t\tthis.e = element(\n\t\t\t\t\t/** @type {keyof HTMLElementTagNameMap} */ (\n\t\t\t\t\t\ttarget.nodeType === 11 ? 'TEMPLATE' : target.nodeName\n\t\t\t\t\t)\n\t\t\t\t);\n\t\t\tthis.t =\n\t\t\t\ttarget.tagName !== 'TEMPLATE'\n\t\t\t\t\t? target\n\t\t\t\t\t: /** @type {HTMLTemplateElement} */ (target).content;\n\t\t\tthis.c(html);\n\t\t}\n\t\tthis.i(anchor);\n\t}\n\n\t/**\n\t * @param {string} html\n\t * @returns {void}\n\t */\n\th(html) {\n\t\tthis.e.innerHTML = html;\n\t\tthis.n = Array.from(\n\t\t\tthis.e.nodeName === 'TEMPLATE' ? this.e.content.childNodes : this.e.childNodes\n\t\t);\n\t}\n\n\t/**\n\t * @returns {void} */\n\ti(anchor) {\n\t\tfor (let i = 0; i < this.n.length; i += 1) {\n\t\t\tinsert(this.t, this.n[i], anchor);\n\t\t}\n\t}\n\n\t/**\n\t * @param {string} html\n\t * @returns {void}\n\t */\n\tp(html) {\n\t\tthis.d();\n\t\tthis.h(html);\n\t\tthis.i(this.a);\n\t}\n\n\t/**\n\t * @returns {void} */\n\td() {\n\t\tthis.n.forEach(detach);\n\t}\n}\n\nexport class HtmlTagHydration extends HtmlTag {\n\t/** @type {Element[]} hydration claimed nodes */\n\tl = undefined;\n\n\tconstructor(is_svg = false, claimed_nodes) {\n\t\tsuper(is_svg);\n\t\tthis.e = this.n = null;\n\t\tthis.l = claimed_nodes;\n\t}\n\n\t/**\n\t * @param {string} html\n\t * @returns {void}\n\t */\n\tc(html) {\n\t\tif (this.l) {\n\t\t\tthis.n = this.l;\n\t\t} else {\n\t\t\tsuper.c(html);\n\t\t}\n\t}\n\n\t/**\n\t * @returns {void} */\n\ti(anchor) {\n\t\tfor (let i = 0; i < this.n.length; i += 1) {\n\t\t\tinsert_hydration(this.t, this.n[i], anchor);\n\t\t}\n\t}\n}\n\n/**\n * @param {NamedNodeMap} attributes\n * @returns {{}}\n */\nexport function attribute_to_object(attributes) {\n\tconst result = {};\n\tfor (const attribute of attributes) {\n\t\tresult[attribute.name] = attribute.value;\n\t}\n\treturn result;\n}\n\nconst escaped = {\n\t'\"': '&quot;',\n\t'&': '&amp;',\n\t'<': '&lt;'\n};\n\nconst regex_attribute_characters_to_escape = /[\"&<]/g;\n\n/**\n * Note that the attribute itself should be surrounded in double quotes\n * @param {any} attribute\n */\nfunction escape_attribute(attribute) {\n\treturn String(attribute).replace(regex_attribute_characters_to_escape, (match) => escaped[match]);\n}\n\n/**\n * @param {Record<string, string>} attributes\n */\nexport function stringify_spread(attributes) {\n\tlet str = ' ';\n\tfor (const key in attributes) {\n\t\tif (attributes[key] != null) {\n\t\t\tstr += `${key}=\"${escape_attribute(attributes[key])}\" `;\n\t\t}\n\t}\n\n\treturn str;\n}\n\n/**\n * @param {HTMLElement} element\n * @returns {{}}\n */\nexport function get_custom_elements_slots(element) {\n\tconst result = {};\n\telement.childNodes.forEach(\n\t\t/** @param {Element} node */ (node) => {\n\t\t\tresult[node.slot || 'default'] = true;\n\t\t}\n\t);\n\treturn result;\n}\n\nexport function construct_svelte_component(component, props) {\n\treturn new component(props);\n}\n\n/**\n * @typedef {Node & {\n * \tclaim_order?: number;\n * \thydrate_init?: true;\n * \tactual_end_child?: NodeEx;\n * \tchildNodes: NodeListOf<NodeEx>;\n * }} NodeEx\n */\n\n/** @typedef {ChildNode & NodeEx} ChildNodeEx */\n\n/** @typedef {NodeEx & { claim_order: number }} NodeEx2 */\n\n/**\n * @typedef {ChildNodeEx[] & {\n * \tclaim_info?: {\n * \t\tlast_index: number;\n * \t\ttotal_claimed: number;\n * \t};\n * }} ChildNodeArray\n */\n","import { custom_event } from './dom.js';\n\nexport let current_component;\n\n/** @returns {void} */\nexport function set_current_component(component) {\n\tcurrent_component = component;\n}\n\nexport function get_current_component() {\n\tif (!current_component) throw new Error('Function called outside component initialization');\n\treturn current_component;\n}\n\n/**\n * Schedules a callback to run immediately before the component is updated after any state change.\n *\n * The first time the callback runs will be before the initial `onMount`\n *\n * https://svelte.dev/docs/svelte#beforeupdate\n * @param {() => any} fn\n * @returns {void}\n */\nexport function beforeUpdate(fn) {\n\tget_current_component().$$.before_update.push(fn);\n}\n\n/**\n * The `onMount` function schedules a callback to run as soon as the component has been mounted to the DOM.\n * It must be called during the component's initialisation (but doesn't need to live *inside* the component;\n * it can be called from an external module).\n *\n * If a function is returned _synchronously_ from `onMount`, it will be called when the component is unmounted.\n *\n * `onMount` does not run inside a [server-side component](https://svelte.dev/docs#run-time-server-side-component-api).\n *\n * https://svelte.dev/docs/svelte#onmount\n * @template T\n * @param {() => import('./private.js').NotFunction<T> | Promise<import('./private.js').NotFunction<T>> | (() => any)} fn\n * @returns {void}\n */\nexport function onMount(fn) {\n\tget_current_component().$$.on_mount.push(fn);\n}\n\n/**\n * Schedules a callback to run immediately after the component has been updated.\n *\n * The first time the callback runs will be after the initial `onMount`\n *\n * https://svelte.dev/docs/svelte#afterupdate\n * @param {() => any} fn\n * @returns {void}\n */\nexport function afterUpdate(fn) {\n\tget_current_component().$$.after_update.push(fn);\n}\n\n/**\n * Schedules a callback to run immediately before the component is unmounted.\n *\n * Out of `onMount`, `beforeUpdate`, `afterUpdate` and `onDestroy`, this is the\n * only one that runs inside a server-side component.\n *\n * https://svelte.dev/docs/svelte#ondestroy\n * @param {() => any} fn\n * @returns {void}\n */\nexport function onDestroy(fn) {\n\tget_current_component().$$.on_destroy.push(fn);\n}\n\n/**\n * Creates an event dispatcher that can be used to dispatch [component events](https://svelte.dev/docs#template-syntax-component-directives-on-eventname).\n * Event dispatchers are functions that can take two arguments: `name` and `detail`.\n *\n * Component events created with `createEventDispatcher` create a\n * [CustomEvent](https://developer.mozilla.org/en-US/docs/Web/API/CustomEvent).\n * These events do not [bubble](https://developer.mozilla.org/en-US/docs/Learn/JavaScript/Building_blocks/Events#Event_bubbling_and_capture).\n * The `detail` argument corresponds to the [CustomEvent.detail](https://developer.mozilla.org/en-US/docs/Web/API/CustomEvent/detail)\n * property and can contain any type of data.\n *\n * The event dispatcher can be typed to narrow the allowed event names and the type of the `detail` argument:\n * ```ts\n * const dispatch = createEventDispatcher<{\n *  loaded: never; // does not take a detail argument\n *  change: string; // takes a detail argument of type string, which is required\n *  optional: number | null; // takes an optional detail argument of type number\n * }>();\n * ```\n *\n * https://svelte.dev/docs/svelte#createeventdispatcher\n * @template {Record<string, any>} [EventMap=any]\n * @returns {import('./public.js').EventDispatcher<EventMap>}\n */\nexport function createEventDispatcher() {\n\tconst component = get_current_component();\n\treturn (type, detail, { cancelable = false } = {}) => {\n\t\tconst callbacks = component.$$.callbacks[type];\n\t\tif (callbacks) {\n\t\t\t// TODO are there situations where events could be dispatched\n\t\t\t// in a server (non-DOM) environment?\n\t\t\tconst event = custom_event(/** @type {string} */ (type), detail, { cancelable });\n\t\t\tcallbacks.slice().forEach((fn) => {\n\t\t\t\tfn.call(component, event);\n\t\t\t});\n\t\t\treturn !event.defaultPrevented;\n\t\t}\n\t\treturn true;\n\t};\n}\n\n/**\n * Associates an arbitrary `context` object with the current component and the specified `key`\n * and returns that object. The context is then available to children of the component\n * (including slotted content) with `getContext`.\n *\n * Like lifecycle functions, this must be called during component initialisation.\n *\n * https://svelte.dev/docs/svelte#setcontext\n * @template T\n * @param {any} key\n * @param {T} context\n * @returns {T}\n */\nexport function setContext(key, context) {\n\tget_current_component().$$.context.set(key, context);\n\treturn context;\n}\n\n/**\n * Retrieves the context that belongs to the closest parent component with the specified `key`.\n * Must be called during component initialisation.\n *\n * https://svelte.dev/docs/svelte#getcontext\n * @template T\n * @param {any} key\n * @returns {T}\n */\nexport function getContext(key) {\n\treturn get_current_component().$$.context.get(key);\n}\n\n/**\n * Retrieves the whole context map that belongs to the closest parent component.\n * Must be called during component initialisation. Useful, for example, if you\n * programmatically create a component and want to pass the existing context to it.\n *\n * https://svelte.dev/docs/svelte#getallcontexts\n * @template {Map<any, any>} [T=Map<any, any>]\n * @returns {T}\n */\nexport function getAllContexts() {\n\treturn get_current_component().$$.context;\n}\n\n/**\n * Checks whether a given `key` has been set in the context of a parent component.\n * Must be called during component initialisation.\n *\n * https://svelte.dev/docs/svelte#hascontext\n * @param {any} key\n * @returns {boolean}\n */\nexport function hasContext(key) {\n\treturn get_current_component().$$.context.has(key);\n}\n\n// TODO figure out if we still want to support\n// shorthand events, or if we want to implement\n// a real bubbling mechanism\n/**\n * @param component\n * @param event\n * @returns {void}\n */\nexport function bubble(component, event) {\n\tconst callbacks = component.$$.callbacks[event.type];\n\tif (callbacks) {\n\t\t// @ts-ignore\n\t\tcallbacks.slice().forEach((fn) => fn.call(this, event));\n\t}\n}\n","import { run_all } from './utils.js';\nimport { current_component, set_current_component } from './lifecycle.js';\n\nexport const dirty_components = [];\nexport const intros = { enabled: false };\nexport const binding_callbacks = [];\n\nlet render_callbacks = [];\n\nconst flush_callbacks = [];\n\nconst resolved_promise = /* @__PURE__ */ Promise.resolve();\n\nlet update_scheduled = false;\n\n/** @returns {void} */\nexport function schedule_update() {\n\tif (!update_scheduled) {\n\t\tupdate_scheduled = true;\n\t\tresolved_promise.then(flush);\n\t}\n}\n\n/** @returns {Promise<void>} */\nexport function tick() {\n\tschedule_update();\n\treturn resolved_promise;\n}\n\n/** @returns {void} */\nexport function add_render_callback(fn) {\n\trender_callbacks.push(fn);\n}\n\n/** @returns {void} */\nexport function add_flush_callback(fn) {\n\tflush_callbacks.push(fn);\n}\n\n// flush() calls callbacks in this order:\n// 1. All beforeUpdate callbacks, in order: parents before children\n// 2. All bind:this callbacks, in reverse order: children before parents.\n// 3. All afterUpdate callbacks, in order: parents before children. EXCEPT\n//    for afterUpdates called during the initial onMount, which are called in\n//    reverse order: children before parents.\n// Since callbacks might update component values, which could trigger another\n// call to flush(), the following steps guard against this:\n// 1. During beforeUpdate, any updated components will be added to the\n//    dirty_components array and will cause a reentrant call to flush(). Because\n//    the flush index is kept outside the function, the reentrant call will pick\n//    up where the earlier call left off and go through all dirty components. The\n//    current_component value is saved and restored so that the reentrant call will\n//    not interfere with the \"parent\" flush() call.\n// 2. bind:this callbacks cannot trigger new flush() calls.\n// 3. During afterUpdate, any updated components will NOT have their afterUpdate\n//    callback called a second time; the seen_callbacks set, outside the flush()\n//    function, guarantees this behavior.\nconst seen_callbacks = new Set();\n\nlet flushidx = 0; // Do *not* move this inside the flush() function\n\n/** @returns {void} */\nexport function flush() {\n\t// Do not reenter flush while dirty components are updated, as this can\n\t// result in an infinite loop. Instead, let the inner flush handle it.\n\t// Reentrancy is ok afterwards for bindings etc.\n\tif (flushidx !== 0) {\n\t\treturn;\n\t}\n\tconst saved_component = current_component;\n\tdo {\n\t\t// first, call beforeUpdate functions\n\t\t// and update components\n\t\ttry {\n\t\t\twhile (flushidx < dirty_components.length) {\n\t\t\t\tconst component = dirty_components[flushidx];\n\t\t\t\tflushidx++;\n\t\t\t\tset_current_component(component);\n\t\t\t\tupdate(component.$$);\n\t\t\t}\n\t\t} catch (e) {\n\t\t\t// reset dirty state to not end up in a deadlocked state and then rethrow\n\t\t\tdirty_components.length = 0;\n\t\t\tflushidx = 0;\n\t\t\tthrow e;\n\t\t}\n\t\tset_current_component(null);\n\t\tdirty_components.length = 0;\n\t\tflushidx = 0;\n\t\twhile (binding_callbacks.length) binding_callbacks.pop()();\n\t\t// then, once components are updated, call\n\t\t// afterUpdate functions. This may cause\n\t\t// subsequent updates...\n\t\tfor (let i = 0; i < render_callbacks.length; i += 1) {\n\t\t\tconst callback = render_callbacks[i];\n\t\t\tif (!seen_callbacks.has(callback)) {\n\t\t\t\t// ...so guard against infinite loops\n\t\t\t\tseen_callbacks.add(callback);\n\t\t\t\tcallback();\n\t\t\t}\n\t\t}\n\t\trender_callbacks.length = 0;\n\t} while (dirty_components.length);\n\twhile (flush_callbacks.length) {\n\t\tflush_callbacks.pop()();\n\t}\n\tupdate_scheduled = false;\n\tseen_callbacks.clear();\n\tset_current_component(saved_component);\n}\n\n/** @returns {void} */\nfunction update($$) {\n\tif ($$.fragment !== null) {\n\t\t$$.update();\n\t\trun_all($$.before_update);\n\t\tconst dirty = $$.dirty;\n\t\t$$.dirty = [-1];\n\t\t$$.fragment && $$.fragment.p($$.ctx, dirty);\n\t\t$$.after_update.forEach(add_render_callback);\n\t}\n}\n\n/**\n * Useful for example to execute remaining `afterUpdate` callbacks before executing `destroy`.\n * @param {Function[]} fns\n * @returns {void}\n */\nexport function flush_render_callbacks(fns) {\n\tconst filtered = [];\n\tconst targets = [];\n\trender_callbacks.forEach((c) => (fns.indexOf(c) === -1 ? filtered.push(c) : targets.push(c)));\n\ttargets.forEach((c) => c());\n\trender_callbacks = filtered;\n}\n","import { identity as linear, is_function, noop, run_all } from './utils.js';\nimport { now } from './environment.js';\nimport { loop } from './loop.js';\nimport { create_rule, delete_rule } from './style_manager.js';\nimport { custom_event } from './dom.js';\nimport { add_render_callback } from './scheduler.js';\n\n/**\n * @type {Promise<void> | null}\n */\nlet promise;\n\n/**\n * @returns {Promise<void>}\n */\nfunction wait() {\n\tif (!promise) {\n\t\tpromise = Promise.resolve();\n\t\tpromise.then(() => {\n\t\t\tpromise = null;\n\t\t});\n\t}\n\treturn promise;\n}\n\n/**\n * @param {Element} node\n * @param {INTRO | OUTRO | boolean} direction\n * @param {'start' | 'end'} kind\n * @returns {void}\n */\nfunction dispatch(node, direction, kind) {\n\tnode.dispatchEvent(custom_event(`${direction ? 'intro' : 'outro'}${kind}`));\n}\n\nconst outroing = new Set();\n\n/**\n * @type {Outro}\n */\nlet outros;\n\n/**\n * @returns {void} */\nexport function group_outros() {\n\toutros = {\n\t\tr: 0,\n\t\tc: [],\n\t\tp: outros // parent group\n\t};\n}\n\n/**\n * @returns {void} */\nexport function check_outros() {\n\tif (!outros.r) {\n\t\trun_all(outros.c);\n\t}\n\toutros = outros.p;\n}\n\n/**\n * @param {import('./private.js').Fragment} block\n * @param {0 | 1} [local]\n * @returns {void}\n */\nexport function transition_in(block, local) {\n\tif (block && block.i) {\n\t\toutroing.delete(block);\n\t\tblock.i(local);\n\t}\n}\n\n/**\n * @param {import('./private.js').Fragment} block\n * @param {0 | 1} local\n * @param {0 | 1} [detach]\n * @param {() => void} [callback]\n * @returns {void}\n */\nexport function transition_out(block, local, detach, callback) {\n\tif (block && block.o) {\n\t\tif (outroing.has(block)) return;\n\t\toutroing.add(block);\n\t\toutros.c.push(() => {\n\t\t\toutroing.delete(block);\n\t\t\tif (callback) {\n\t\t\t\tif (detach) block.d(1);\n\t\t\t\tcallback();\n\t\t\t}\n\t\t});\n\t\tblock.o(local);\n\t} else if (callback) {\n\t\tcallback();\n\t}\n}\n\n/**\n * @type {import('../transition/public.js').TransitionConfig}\n */\nconst null_transition = { duration: 0 };\n\n/**\n * @param {Element & ElementCSSInlineStyle} node\n * @param {TransitionFn} fn\n * @param {any} params\n * @returns {{ start(): void; invalidate(): void; end(): void; }}\n */\nexport function create_in_transition(node, fn, params) {\n\t/**\n\t * @type {TransitionOptions} */\n\tconst options = { direction: 'in' };\n\tlet config = fn(node, params, options);\n\tlet running = false;\n\tlet animation_name;\n\tlet task;\n\tlet uid = 0;\n\n\t/**\n\t * @returns {void} */\n\tfunction cleanup() {\n\t\tif (animation_name) delete_rule(node, animation_name);\n\t}\n\n\t/**\n\t * @returns {void} */\n\tfunction go() {\n\t\tconst {\n\t\t\tdelay = 0,\n\t\t\tduration = 300,\n\t\t\teasing = linear,\n\t\t\ttick = noop,\n\t\t\tcss\n\t\t} = config || null_transition;\n\t\tif (css) animation_name = create_rule(node, 0, 1, duration, delay, easing, css, uid++);\n\t\ttick(0, 1);\n\t\tconst start_time = now() + delay;\n\t\tconst end_time = start_time + duration;\n\t\tif (task) task.abort();\n\t\trunning = true;\n\t\tadd_render_callback(() => dispatch(node, true, 'start'));\n\t\ttask = loop((now) => {\n\t\t\tif (running) {\n\t\t\t\tif (now >= end_time) {\n\t\t\t\t\ttick(1, 0);\n\t\t\t\t\tdispatch(node, true, 'end');\n\t\t\t\t\tcleanup();\n\t\t\t\t\treturn (running = false);\n\t\t\t\t}\n\t\t\t\tif (now >= start_time) {\n\t\t\t\t\tconst t = easing((now - start_time) / duration);\n\t\t\t\t\ttick(t, 1 - t);\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn running;\n\t\t});\n\t}\n\tlet started = false;\n\treturn {\n\t\tstart() {\n\t\t\tif (started) return;\n\t\t\tstarted = true;\n\t\t\tdelete_rule(node);\n\t\t\tif (is_function(config)) {\n\t\t\t\tconfig = config(options);\n\t\t\t\twait().then(go);\n\t\t\t} else {\n\t\t\t\tgo();\n\t\t\t}\n\t\t},\n\t\tinvalidate() {\n\t\t\tstarted = false;\n\t\t},\n\t\tend() {\n\t\t\tif (running) {\n\t\t\t\tcleanup();\n\t\t\t\trunning = false;\n\t\t\t}\n\t\t}\n\t};\n}\n\n/**\n * @param {Element & ElementCSSInlineStyle} node\n * @param {TransitionFn} fn\n * @param {any} params\n * @returns {{ end(reset: any): void; }}\n */\nexport function create_out_transition(node, fn, params) {\n\t/** @type {TransitionOptions} */\n\tconst options = { direction: 'out' };\n\tlet config = fn(node, params, options);\n\tlet running = true;\n\tlet animation_name;\n\tconst group = outros;\n\tgroup.r += 1;\n\t/** @type {boolean} */\n\tlet original_inert_value;\n\n\t/**\n\t * @returns {void} */\n\tfunction go() {\n\t\tconst {\n\t\t\tdelay = 0,\n\t\t\tduration = 300,\n\t\t\teasing = linear,\n\t\t\ttick = noop,\n\t\t\tcss\n\t\t} = config || null_transition;\n\n\t\tif (css) animation_name = create_rule(node, 1, 0, duration, delay, easing, css);\n\n\t\tconst start_time = now() + delay;\n\t\tconst end_time = start_time + duration;\n\t\tadd_render_callback(() => dispatch(node, false, 'start'));\n\n\t\tif ('inert' in node) {\n\t\t\toriginal_inert_value = /** @type {HTMLElement} */ (node).inert;\n\t\t\tnode.inert = true;\n\t\t}\n\n\t\tloop((now) => {\n\t\t\tif (running) {\n\t\t\t\tif (now >= end_time) {\n\t\t\t\t\ttick(0, 1);\n\t\t\t\t\tdispatch(node, false, 'end');\n\t\t\t\t\tif (!--group.r) {\n\t\t\t\t\t\t// this will result in `end()` being called,\n\t\t\t\t\t\t// so we don't need to clean up here\n\t\t\t\t\t\trun_all(group.c);\n\t\t\t\t\t}\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t\tif (now >= start_time) {\n\t\t\t\t\tconst t = easing((now - start_time) / duration);\n\t\t\t\t\ttick(1 - t, t);\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn running;\n\t\t});\n\t}\n\n\tif (is_function(config)) {\n\t\twait().then(() => {\n\t\t\t// @ts-ignore\n\t\t\tconfig = config(options);\n\t\t\tgo();\n\t\t});\n\t} else {\n\t\tgo();\n\t}\n\n\treturn {\n\t\tend(reset) {\n\t\t\tif (reset && 'inert' in node) {\n\t\t\t\tnode.inert = original_inert_value;\n\t\t\t}\n\t\t\tif (reset && config.tick) {\n\t\t\t\tconfig.tick(1, 0);\n\t\t\t}\n\t\t\tif (running) {\n\t\t\t\tif (animation_name) delete_rule(node, animation_name);\n\t\t\t\trunning = false;\n\t\t\t}\n\t\t}\n\t};\n}\n\n/**\n * @param {Element & ElementCSSInlineStyle} node\n * @param {TransitionFn} fn\n * @param {any} params\n * @param {boolean} intro\n * @returns {{ run(b: 0 | 1): void; end(): void; }}\n */\nexport function create_bidirectional_transition(node, fn, params, intro) {\n\t/**\n\t * @type {TransitionOptions} */\n\tconst options = { direction: 'both' };\n\tlet config = fn(node, params, options);\n\tlet t = intro ? 0 : 1;\n\n\t/**\n\t * @type {Program | null} */\n\tlet running_program = null;\n\n\t/**\n\t * @type {PendingProgram | null} */\n\tlet pending_program = null;\n\tlet animation_name = null;\n\n\t/** @type {boolean} */\n\tlet original_inert_value;\n\n\t/**\n\t * @returns {void} */\n\tfunction clear_animation() {\n\t\tif (animation_name) delete_rule(node, animation_name);\n\t}\n\n\t/**\n\t * @param {PendingProgram} program\n\t * @param {number} duration\n\t * @returns {Program}\n\t */\n\tfunction init(program, duration) {\n\t\tconst d = /** @type {Program['d']} */ (program.b - t);\n\t\tduration *= Math.abs(d);\n\t\treturn {\n\t\t\ta: t,\n\t\t\tb: program.b,\n\t\t\td,\n\t\t\tduration,\n\t\t\tstart: program.start,\n\t\t\tend: program.start + duration,\n\t\t\tgroup: program.group\n\t\t};\n\t}\n\n\t/**\n\t * @param {INTRO | OUTRO} b\n\t * @returns {void}\n\t */\n\tfunction go(b) {\n\t\tconst {\n\t\t\tdelay = 0,\n\t\t\tduration = 300,\n\t\t\teasing = linear,\n\t\t\ttick = noop,\n\t\t\tcss\n\t\t} = config || null_transition;\n\n\t\t/**\n\t\t * @type {PendingProgram} */\n\t\tconst program = {\n\t\t\tstart: now() + delay,\n\t\t\tb\n\t\t};\n\n\t\tif (!b) {\n\t\t\t// @ts-ignore todo: improve typings\n\t\t\tprogram.group = outros;\n\t\t\toutros.r += 1;\n\t\t}\n\n\t\tif ('inert' in node) {\n\t\t\tif (b) {\n\t\t\t\tif (original_inert_value !== undefined) {\n\t\t\t\t\t// aborted/reversed outro  restore previous inert value\n\t\t\t\t\tnode.inert = original_inert_value;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\toriginal_inert_value = /** @type {HTMLElement} */ (node).inert;\n\t\t\t\tnode.inert = true;\n\t\t\t}\n\t\t}\n\n\t\tif (running_program || pending_program) {\n\t\t\tpending_program = program;\n\t\t} else {\n\t\t\t// if this is an intro, and there's a delay, we need to do\n\t\t\t// an initial tick and/or apply CSS animation immediately\n\t\t\tif (css) {\n\t\t\t\tclear_animation();\n\t\t\t\tanimation_name = create_rule(node, t, b, duration, delay, easing, css);\n\t\t\t}\n\t\t\tif (b) tick(0, 1);\n\t\t\trunning_program = init(program, duration);\n\t\t\tadd_render_callback(() => dispatch(node, b, 'start'));\n\t\t\tloop((now) => {\n\t\t\t\tif (pending_program && now > pending_program.start) {\n\t\t\t\t\trunning_program = init(pending_program, duration);\n\t\t\t\t\tpending_program = null;\n\t\t\t\t\tdispatch(node, running_program.b, 'start');\n\t\t\t\t\tif (css) {\n\t\t\t\t\t\tclear_animation();\n\t\t\t\t\t\tanimation_name = create_rule(\n\t\t\t\t\t\t\tnode,\n\t\t\t\t\t\t\tt,\n\t\t\t\t\t\t\trunning_program.b,\n\t\t\t\t\t\t\trunning_program.duration,\n\t\t\t\t\t\t\t0,\n\t\t\t\t\t\t\teasing,\n\t\t\t\t\t\t\tconfig.css\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (running_program) {\n\t\t\t\t\tif (now >= running_program.end) {\n\t\t\t\t\t\ttick((t = running_program.b), 1 - t);\n\t\t\t\t\t\tdispatch(node, running_program.b, 'end');\n\t\t\t\t\t\tif (!pending_program) {\n\t\t\t\t\t\t\t// we're done\n\t\t\t\t\t\t\tif (running_program.b) {\n\t\t\t\t\t\t\t\t// intro  we can tidy up immediately\n\t\t\t\t\t\t\t\tclear_animation();\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t// outro  needs to be coordinated\n\t\t\t\t\t\t\t\tif (!--running_program.group.r) run_all(running_program.group.c);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\trunning_program = null;\n\t\t\t\t\t} else if (now >= running_program.start) {\n\t\t\t\t\t\tconst p = now - running_program.start;\n\t\t\t\t\t\tt = running_program.a + running_program.d * easing(p / running_program.duration);\n\t\t\t\t\t\ttick(t, 1 - t);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn !!(running_program || pending_program);\n\t\t\t});\n\t\t}\n\t}\n\treturn {\n\t\trun(b) {\n\t\t\tif (is_function(config)) {\n\t\t\t\twait().then(() => {\n\t\t\t\t\tconst opts = { direction: b ? 'in' : 'out' };\n\t\t\t\t\t// @ts-ignore\n\t\t\t\t\tconfig = config(opts);\n\t\t\t\t\tgo(b);\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tgo(b);\n\t\t\t}\n\t\t},\n\t\tend() {\n\t\t\tclear_animation();\n\t\t\trunning_program = pending_program = null;\n\t\t}\n\t};\n}\n\n/** @typedef {1} INTRO */\n/** @typedef {0} OUTRO */\n/** @typedef {{ direction: 'in' | 'out' | 'both' }} TransitionOptions */\n/** @typedef {(node: Element, params: any, options: TransitionOptions) => import('../transition/public.js').TransitionConfig} TransitionFn */\n\n/**\n * @typedef {Object} Outro\n * @property {number} r\n * @property {Function[]} c\n * @property {Object} p\n */\n\n/**\n * @typedef {Object} PendingProgram\n * @property {number} start\n * @property {INTRO|OUTRO} b\n * @property {Outro} [group]\n */\n\n/**\n * @typedef {Object} Program\n * @property {number} a\n * @property {INTRO|OUTRO} b\n * @property {1|-1} d\n * @property {number} duration\n * @property {number} start\n * @property {number} end\n * @property {Outro} [group]\n */\n","import { transition_in, transition_out } from './transitions.js';\nimport { run_all } from './utils.js';\n\n// general each functions:\n\nexport function ensure_array_like(array_like_or_iterator) {\n\treturn array_like_or_iterator?.length !== undefined\n\t\t? array_like_or_iterator\n\t\t: Array.from(array_like_or_iterator);\n}\n\n// keyed each functions:\n\n/** @returns {void} */\nexport function destroy_block(block, lookup) {\n\tblock.d(1);\n\tlookup.delete(block.key);\n}\n\n/** @returns {void} */\nexport function outro_and_destroy_block(block, lookup) {\n\ttransition_out(block, 1, 1, () => {\n\t\tlookup.delete(block.key);\n\t});\n}\n\n/** @returns {void} */\nexport function fix_and_destroy_block(block, lookup) {\n\tblock.f();\n\tdestroy_block(block, lookup);\n}\n\n/** @returns {void} */\nexport function fix_and_outro_and_destroy_block(block, lookup) {\n\tblock.f();\n\toutro_and_destroy_block(block, lookup);\n}\n\n/** @returns {any[]} */\nexport function update_keyed_each(\n\told_blocks,\n\tdirty,\n\tget_key,\n\tdynamic,\n\tctx,\n\tlist,\n\tlookup,\n\tnode,\n\tdestroy,\n\tcreate_each_block,\n\tnext,\n\tget_context\n) {\n\tlet o = old_blocks.length;\n\tlet n = list.length;\n\tlet i = o;\n\tconst old_indexes = {};\n\twhile (i--) old_indexes[old_blocks[i].key] = i;\n\tconst new_blocks = [];\n\tconst new_lookup = new Map();\n\tconst deltas = new Map();\n\tconst updates = [];\n\ti = n;\n\twhile (i--) {\n\t\tconst child_ctx = get_context(ctx, list, i);\n\t\tconst key = get_key(child_ctx);\n\t\tlet block = lookup.get(key);\n\t\tif (!block) {\n\t\t\tblock = create_each_block(key, child_ctx);\n\t\t\tblock.c();\n\t\t} else if (dynamic) {\n\t\t\t// defer updates until all the DOM shuffling is done\n\t\t\tupdates.push(() => block.p(child_ctx, dirty));\n\t\t}\n\t\tnew_lookup.set(key, (new_blocks[i] = block));\n\t\tif (key in old_indexes) deltas.set(key, Math.abs(i - old_indexes[key]));\n\t}\n\tconst will_move = new Set();\n\tconst did_move = new Set();\n\t/** @returns {void} */\n\tfunction insert(block) {\n\t\ttransition_in(block, 1);\n\t\tblock.m(node, next);\n\t\tlookup.set(block.key, block);\n\t\tnext = block.first;\n\t\tn--;\n\t}\n\twhile (o && n) {\n\t\tconst new_block = new_blocks[n - 1];\n\t\tconst old_block = old_blocks[o - 1];\n\t\tconst new_key = new_block.key;\n\t\tconst old_key = old_block.key;\n\t\tif (new_block === old_block) {\n\t\t\t// do nothing\n\t\t\tnext = new_block.first;\n\t\t\to--;\n\t\t\tn--;\n\t\t} else if (!new_lookup.has(old_key)) {\n\t\t\t// remove old block\n\t\t\tdestroy(old_block, lookup);\n\t\t\to--;\n\t\t} else if (!lookup.has(new_key) || will_move.has(new_key)) {\n\t\t\tinsert(new_block);\n\t\t} else if (did_move.has(old_key)) {\n\t\t\to--;\n\t\t} else if (deltas.get(new_key) > deltas.get(old_key)) {\n\t\t\tdid_move.add(new_key);\n\t\t\tinsert(new_block);\n\t\t} else {\n\t\t\twill_move.add(old_key);\n\t\t\to--;\n\t\t}\n\t}\n\twhile (o--) {\n\t\tconst old_block = old_blocks[o];\n\t\tif (!new_lookup.has(old_block.key)) destroy(old_block, lookup);\n\t}\n\twhile (n) insert(new_blocks[n - 1]);\n\trun_all(updates);\n\treturn new_blocks;\n}\n\n/** @returns {void} */\nexport function validate_each_keys(ctx, list, get_context, get_key) {\n\tconst keys = new Map();\n\tfor (let i = 0; i < list.length; i++) {\n\t\tconst key = get_key(get_context(ctx, list, i));\n\t\tif (keys.has(key)) {\n\t\t\tlet value = '';\n\t\t\ttry {\n\t\t\t\tvalue = `with value '${String(key)}' `;\n\t\t\t} catch (e) {\n\t\t\t\t// can't stringify\n\t\t\t}\n\t\t\tthrow new Error(\n\t\t\t\t`Cannot have duplicate keys in a keyed each: Keys at index ${keys.get(\n\t\t\t\t\tkey\n\t\t\t\t)} and ${i} ${value}are duplicates`\n\t\t\t);\n\t\t}\n\t\tkeys.set(key, i);\n\t}\n}\n","import {\n\tadd_render_callback,\n\tflush,\n\tflush_render_callbacks,\n\tschedule_update,\n\tdirty_components\n} from './scheduler.js';\nimport { current_component, set_current_component } from './lifecycle.js';\nimport { blank_object, is_empty, is_function, run, run_all, noop } from './utils.js';\nimport {\n\tchildren,\n\tdetach,\n\tstart_hydrating,\n\tend_hydrating,\n\tget_custom_elements_slots,\n\tinsert,\n\telement,\n\tattr\n} from './dom.js';\nimport { transition_in } from './transitions.js';\n\n/** @returns {void} */\nexport function bind(component, name, callback) {\n\tconst index = component.$$.props[name];\n\tif (index !== undefined) {\n\t\tcomponent.$$.bound[index] = callback;\n\t\tcallback(component.$$.ctx[index]);\n\t}\n}\n\n/** @returns {void} */\nexport function create_component(block) {\n\tblock && block.c();\n}\n\n/** @returns {void} */\nexport function claim_component(block, parent_nodes) {\n\tblock && block.l(parent_nodes);\n}\n\n/** @returns {void} */\nexport function mount_component(component, target, anchor) {\n\tconst { fragment, after_update } = component.$$;\n\tfragment && fragment.m(target, anchor);\n\t// onMount happens before the initial afterUpdate\n\tadd_render_callback(() => {\n\t\tconst new_on_destroy = component.$$.on_mount.map(run).filter(is_function);\n\t\t// if the component was destroyed immediately\n\t\t// it will update the `$$.on_destroy` reference to `null`.\n\t\t// the destructured on_destroy may still reference to the old array\n\t\tif (component.$$.on_destroy) {\n\t\t\tcomponent.$$.on_destroy.push(...new_on_destroy);\n\t\t} else {\n\t\t\t// Edge case - component was destroyed immediately,\n\t\t\t// most likely as a result of a binding initialising\n\t\t\trun_all(new_on_destroy);\n\t\t}\n\t\tcomponent.$$.on_mount = [];\n\t});\n\tafter_update.forEach(add_render_callback);\n}\n\n/** @returns {void} */\nexport function destroy_component(component, detaching) {\n\tconst $$ = component.$$;\n\tif ($$.fragment !== null) {\n\t\tflush_render_callbacks($$.after_update);\n\t\trun_all($$.on_destroy);\n\t\t$$.fragment && $$.fragment.d(detaching);\n\t\t// TODO null out other refs, including component.$$ (but need to\n\t\t// preserve final state?)\n\t\t$$.on_destroy = $$.fragment = null;\n\t\t$$.ctx = [];\n\t}\n}\n\n/** @returns {void} */\nfunction make_dirty(component, i) {\n\tif (component.$$.dirty[0] === -1) {\n\t\tdirty_components.push(component);\n\t\tschedule_update();\n\t\tcomponent.$$.dirty.fill(0);\n\t}\n\tcomponent.$$.dirty[(i / 31) | 0] |= 1 << i % 31;\n}\n\n// TODO: Document the other params\n/**\n * @param {SvelteComponent} component\n * @param {import('./public.js').ComponentConstructorOptions} options\n *\n * @param {import('./utils.js')['not_equal']} not_equal Used to compare props and state values.\n * @param {(target: Element | ShadowRoot) => void} [append_styles] Function that appends styles to the DOM when the component is first initialised.\n * This will be the `add_css` function from the compiled component.\n *\n * @returns {void}\n */\nexport function init(\n\tcomponent,\n\toptions,\n\tinstance,\n\tcreate_fragment,\n\tnot_equal,\n\tprops,\n\tappend_styles = null,\n\tdirty = [-1]\n) {\n\tconst parent_component = current_component;\n\tset_current_component(component);\n\t/** @type {import('./private.js').T$$} */\n\tconst $$ = (component.$$ = {\n\t\tfragment: null,\n\t\tctx: [],\n\t\t// state\n\t\tprops,\n\t\tupdate: noop,\n\t\tnot_equal,\n\t\tbound: blank_object(),\n\t\t// lifecycle\n\t\ton_mount: [],\n\t\ton_destroy: [],\n\t\ton_disconnect: [],\n\t\tbefore_update: [],\n\t\tafter_update: [],\n\t\tcontext: new Map(options.context || (parent_component ? parent_component.$$.context : [])),\n\t\t// everything else\n\t\tcallbacks: blank_object(),\n\t\tdirty,\n\t\tskip_bound: false,\n\t\troot: options.target || parent_component.$$.root\n\t});\n\tappend_styles && append_styles($$.root);\n\tlet ready = false;\n\t$$.ctx = instance\n\t\t? instance(component, options.props || {}, (i, ret, ...rest) => {\n\t\t\t\tconst value = rest.length ? rest[0] : ret;\n\t\t\t\tif ($$.ctx && not_equal($$.ctx[i], ($$.ctx[i] = value))) {\n\t\t\t\t\tif (!$$.skip_bound && $$.bound[i]) $$.bound[i](value);\n\t\t\t\t\tif (ready) make_dirty(component, i);\n\t\t\t\t}\n\t\t\t\treturn ret;\n\t\t  })\n\t\t: [];\n\t$$.update();\n\tready = true;\n\trun_all($$.before_update);\n\t// `false` as a special case of no DOM component\n\t$$.fragment = create_fragment ? create_fragment($$.ctx) : false;\n\tif (options.target) {\n\t\tif (options.hydrate) {\n\t\t\tstart_hydrating();\n\t\t\t// TODO: what is the correct type here?\n\t\t\t// @ts-expect-error\n\t\t\tconst nodes = children(options.target);\n\t\t\t$$.fragment && $$.fragment.l(nodes);\n\t\t\tnodes.forEach(detach);\n\t\t} else {\n\t\t\t// eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n\t\t\t$$.fragment && $$.fragment.c();\n\t\t}\n\t\tif (options.intro) transition_in(component.$$.fragment);\n\t\tmount_component(component, options.target, options.anchor);\n\t\tend_hydrating();\n\t\tflush();\n\t}\n\tset_current_component(parent_component);\n}\n\nexport let SvelteElement;\n\nif (typeof HTMLElement === 'function') {\n\tSvelteElement = class extends HTMLElement {\n\t\t/** The Svelte component constructor */\n\t\t$$ctor;\n\t\t/** Slots */\n\t\t$$s;\n\t\t/** The Svelte component instance */\n\t\t$$c;\n\t\t/** Whether or not the custom element is connected */\n\t\t$$cn = false;\n\t\t/** Component props data */\n\t\t$$d = {};\n\t\t/** `true` if currently in the process of reflecting component props back to attributes */\n\t\t$$r = false;\n\t\t/** @type {Record<string, CustomElementPropDefinition>} Props definition (name, reflected, type etc) */\n\t\t$$p_d = {};\n\t\t/** @type {Record<string, Function[]>} Event listeners */\n\t\t$$l = {};\n\t\t/** @type {Map<Function, Function>} Event listener unsubscribe functions */\n\t\t$$l_u = new Map();\n\n\t\tconstructor($$componentCtor, $$slots, use_shadow_dom) {\n\t\t\tsuper();\n\t\t\tthis.$$ctor = $$componentCtor;\n\t\t\tthis.$$s = $$slots;\n\t\t\tif (use_shadow_dom) {\n\t\t\t\tthis.attachShadow({ mode: 'open' });\n\t\t\t}\n\t\t}\n\n\t\taddEventListener(type, listener, options) {\n\t\t\t// We can't determine upfront if the event is a custom event or not, so we have to\n\t\t\t// listen to both. If someone uses a custom event with the same name as a regular\n\t\t\t// browser event, this fires twice - we can't avoid that.\n\t\t\tthis.$$l[type] = this.$$l[type] || [];\n\t\t\tthis.$$l[type].push(listener);\n\t\t\tif (this.$$c) {\n\t\t\t\tconst unsub = this.$$c.$on(type, listener);\n\t\t\t\tthis.$$l_u.set(listener, unsub);\n\t\t\t}\n\t\t\tsuper.addEventListener(type, listener, options);\n\t\t}\n\n\t\tremoveEventListener(type, listener, options) {\n\t\t\tsuper.removeEventListener(type, listener, options);\n\t\t\tif (this.$$c) {\n\t\t\t\tconst unsub = this.$$l_u.get(listener);\n\t\t\t\tif (unsub) {\n\t\t\t\t\tunsub();\n\t\t\t\t\tthis.$$l_u.delete(listener);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tasync connectedCallback() {\n\t\t\tthis.$$cn = true;\n\t\t\tif (!this.$$c) {\n\t\t\t\t// We wait one tick to let possible child slot elements be created/mounted\n\t\t\t\tawait Promise.resolve();\n\t\t\t\tif (!this.$$cn || this.$$c) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tfunction create_slot(name) {\n\t\t\t\t\treturn () => {\n\t\t\t\t\t\tlet node;\n\t\t\t\t\t\tconst obj = {\n\t\t\t\t\t\t\tc: function create() {\n\t\t\t\t\t\t\t\tnode = element('slot');\n\t\t\t\t\t\t\t\tif (name !== 'default') {\n\t\t\t\t\t\t\t\t\tattr(node, 'name', name);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t/**\n\t\t\t\t\t\t\t * @param {HTMLElement} target\n\t\t\t\t\t\t\t * @param {HTMLElement} [anchor]\n\t\t\t\t\t\t\t */\n\t\t\t\t\t\t\tm: function mount(target, anchor) {\n\t\t\t\t\t\t\t\tinsert(target, node, anchor);\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\td: function destroy(detaching) {\n\t\t\t\t\t\t\t\tif (detaching) {\n\t\t\t\t\t\t\t\t\tdetach(node);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t};\n\t\t\t\t\t\treturn obj;\n\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t\tconst $$slots = {};\n\t\t\t\tconst existing_slots = get_custom_elements_slots(this);\n\t\t\t\tfor (const name of this.$$s) {\n\t\t\t\t\tif (name in existing_slots) {\n\t\t\t\t\t\t$$slots[name] = [create_slot(name)];\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tfor (const attribute of this.attributes) {\n\t\t\t\t\t// this.$$data takes precedence over this.attributes\n\t\t\t\t\tconst name = this.$$g_p(attribute.name);\n\t\t\t\t\tif (!(name in this.$$d)) {\n\t\t\t\t\t\tthis.$$d[name] = get_custom_element_value(name, attribute.value, this.$$p_d, 'toProp');\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t// Port over props that were set programmatically before ce was initialized\n\t\t\t\tfor (const key in this.$$p_d) {\n\t\t\t\t\tif (!(key in this.$$d) && this[key] !== undefined) {\n\t\t\t\t\t\tthis.$$d[key] = this[key]; // don't transform, these were set through JavaScript\n\t\t\t\t\t\tdelete this[key]; // remove the property that shadows the getter/setter\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tthis.$$c = new this.$$ctor({\n\t\t\t\t\ttarget: this.shadowRoot || this,\n\t\t\t\t\tprops: {\n\t\t\t\t\t\t...this.$$d,\n\t\t\t\t\t\t$$slots,\n\t\t\t\t\t\t$$scope: {\n\t\t\t\t\t\t\tctx: []\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\t// Reflect component props as attributes\n\t\t\t\tconst reflect_attributes = () => {\n\t\t\t\t\tthis.$$r = true;\n\t\t\t\t\tfor (const key in this.$$p_d) {\n\t\t\t\t\t\tthis.$$d[key] = this.$$c.$$.ctx[this.$$c.$$.props[key]];\n\t\t\t\t\t\tif (this.$$p_d[key].reflect) {\n\t\t\t\t\t\t\tconst attribute_value = get_custom_element_value(\n\t\t\t\t\t\t\t\tkey,\n\t\t\t\t\t\t\t\tthis.$$d[key],\n\t\t\t\t\t\t\t\tthis.$$p_d,\n\t\t\t\t\t\t\t\t'toAttribute'\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\tif (attribute_value == null) {\n\t\t\t\t\t\t\t\tthis.removeAttribute(this.$$p_d[key].attribute || key);\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tthis.setAttribute(this.$$p_d[key].attribute || key, attribute_value);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tthis.$$r = false;\n\t\t\t\t};\n\t\t\t\tthis.$$c.$$.after_update.push(reflect_attributes);\n\t\t\t\treflect_attributes(); // once initially because after_update is added too late for first render\n\n\t\t\t\tfor (const type in this.$$l) {\n\t\t\t\t\tfor (const listener of this.$$l[type]) {\n\t\t\t\t\t\tconst unsub = this.$$c.$on(type, listener);\n\t\t\t\t\t\tthis.$$l_u.set(listener, unsub);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tthis.$$l = {};\n\t\t\t}\n\t\t}\n\n\t\t// We don't need this when working within Svelte code, but for compatibility of people using this outside of Svelte\n\t\t// and setting attributes through setAttribute etc, this is helpful\n\t\tattributeChangedCallback(attr, _oldValue, newValue) {\n\t\t\tif (this.$$r) return;\n\t\t\tattr = this.$$g_p(attr);\n\t\t\tthis.$$d[attr] = get_custom_element_value(attr, newValue, this.$$p_d, 'toProp');\n\t\t\tthis.$$c?.$set({ [attr]: this.$$d[attr] });\n\t\t}\n\n\t\tdisconnectedCallback() {\n\t\t\tthis.$$cn = false;\n\t\t\t// In a microtask, because this could be a move within the DOM\n\t\t\tPromise.resolve().then(() => {\n\t\t\t\tif (!this.$$cn && this.$$c) {\n\t\t\t\t\tthis.$$c.$destroy();\n\t\t\t\t\tthis.$$c = undefined;\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\t$$g_p(attribute_name) {\n\t\t\treturn (\n\t\t\t\tObject.keys(this.$$p_d).find(\n\t\t\t\t\t(key) =>\n\t\t\t\t\t\tthis.$$p_d[key].attribute === attribute_name ||\n\t\t\t\t\t\t(!this.$$p_d[key].attribute && key.toLowerCase() === attribute_name)\n\t\t\t\t) || attribute_name\n\t\t\t);\n\t\t}\n\t};\n}\n\n/**\n * @param {string} prop\n * @param {any} value\n * @param {Record<string, CustomElementPropDefinition>} props_definition\n * @param {'toAttribute' | 'toProp'} [transform]\n */\nfunction get_custom_element_value(prop, value, props_definition, transform) {\n\tconst type = props_definition[prop]?.type;\n\tvalue = type === 'Boolean' && typeof value !== 'boolean' ? value != null : value;\n\tif (!transform || !props_definition[prop]) {\n\t\treturn value;\n\t} else if (transform === 'toAttribute') {\n\t\tswitch (type) {\n\t\t\tcase 'Object':\n\t\t\tcase 'Array':\n\t\t\t\treturn value == null ? null : JSON.stringify(value);\n\t\t\tcase 'Boolean':\n\t\t\t\treturn value ? '' : null;\n\t\t\tcase 'Number':\n\t\t\t\treturn value == null ? null : value;\n\t\t\tdefault:\n\t\t\t\treturn value;\n\t\t}\n\t} else {\n\t\tswitch (type) {\n\t\t\tcase 'Object':\n\t\t\tcase 'Array':\n\t\t\t\treturn value && JSON.parse(value);\n\t\t\tcase 'Boolean':\n\t\t\t\treturn value; // conversion already handled above\n\t\t\tcase 'Number':\n\t\t\t\treturn value != null ? +value : value;\n\t\t\tdefault:\n\t\t\t\treturn value;\n\t\t}\n\t}\n}\n\n/**\n * @internal\n *\n * Turn a Svelte component into a custom element.\n * @param {import('./public.js').ComponentType} Component  A Svelte component constructor\n * @param {Record<string, CustomElementPropDefinition>} props_definition  The props to observe\n * @param {string[]} slots  The slots to create\n * @param {string[]} accessors  Other accessors besides the ones for props the component has\n * @param {boolean} use_shadow_dom  Whether to use shadow DOM\n * @param {(ce: new () => HTMLElement) => new () => HTMLElement} [extend]\n */\nexport function create_custom_element(\n\tComponent,\n\tprops_definition,\n\tslots,\n\taccessors,\n\tuse_shadow_dom,\n\textend\n) {\n\tlet Class = class extends SvelteElement {\n\t\tconstructor() {\n\t\t\tsuper(Component, slots, use_shadow_dom);\n\t\t\tthis.$$p_d = props_definition;\n\t\t}\n\t\tstatic get observedAttributes() {\n\t\t\treturn Object.keys(props_definition).map((key) =>\n\t\t\t\t(props_definition[key].attribute || key).toLowerCase()\n\t\t\t);\n\t\t}\n\t};\n\tObject.keys(props_definition).forEach((prop) => {\n\t\tObject.defineProperty(Class.prototype, prop, {\n\t\t\tget() {\n\t\t\t\treturn this.$$c && prop in this.$$c ? this.$$c[prop] : this.$$d[prop];\n\t\t\t},\n\t\t\tset(value) {\n\t\t\t\tvalue = get_custom_element_value(prop, value, props_definition);\n\t\t\t\tthis.$$d[prop] = value;\n\t\t\t\tthis.$$c?.$set({ [prop]: value });\n\t\t\t}\n\t\t});\n\t});\n\taccessors.forEach((accessor) => {\n\t\tObject.defineProperty(Class.prototype, accessor, {\n\t\t\tget() {\n\t\t\t\treturn this.$$c?.[accessor];\n\t\t\t}\n\t\t});\n\t});\n\tif (extend) {\n\t\t// @ts-expect-error - assigning here is fine\n\t\tClass = extend(Class);\n\t}\n\tComponent.element = /** @type {any} */ (Class);\n\treturn Class;\n}\n\n/**\n * Base class for Svelte components. Used when dev=false.\n *\n * @template {Record<string, any>} [Props=any]\n * @template {Record<string, any>} [Events=any]\n */\nexport class SvelteComponent {\n\t/**\n\t * ### PRIVATE API\n\t *\n\t * Do not use, may change at any time\n\t *\n\t * @type {any}\n\t */\n\t$$ = undefined;\n\t/**\n\t * ### PRIVATE API\n\t *\n\t * Do not use, may change at any time\n\t *\n\t * @type {any}\n\t */\n\t$$set = undefined;\n\n\t/** @returns {void} */\n\t$destroy() {\n\t\tdestroy_component(this, 1);\n\t\tthis.$destroy = noop;\n\t}\n\n\t/**\n\t * @template {Extract<keyof Events, string>} K\n\t * @param {K} type\n\t * @param {((e: Events[K]) => void) | null | undefined} callback\n\t * @returns {() => void}\n\t */\n\t$on(type, callback) {\n\t\tif (!is_function(callback)) {\n\t\t\treturn noop;\n\t\t}\n\t\tconst callbacks = this.$$.callbacks[type] || (this.$$.callbacks[type] = []);\n\t\tcallbacks.push(callback);\n\t\treturn () => {\n\t\t\tconst index = callbacks.indexOf(callback);\n\t\t\tif (index !== -1) callbacks.splice(index, 1);\n\t\t};\n\t}\n\n\t/**\n\t * @param {Partial<Props>} props\n\t * @returns {void}\n\t */\n\t$set(props) {\n\t\tif (this.$$set && !is_empty(props)) {\n\t\t\tthis.$$.skip_bound = true;\n\t\t\tthis.$$set(props);\n\t\t\tthis.$$.skip_bound = false;\n\t\t}\n\t}\n}\n\n/**\n * @typedef {Object} CustomElementPropDefinition\n * @property {string} [attribute]\n * @property {boolean} [reflect]\n * @property {'String'|'Boolean'|'Number'|'Array'|'Object'} [type]\n */\n","import { PUBLIC_VERSION } from '../../../shared/version.js';\n\nif (typeof window !== 'undefined')\n\t// @ts-ignore\n\t(window.__svelte || (window.__svelte = { v: new Set() })).v.add(PUBLIC_VERSION);\n","// generated during release, do not modify\n\n/**\n * The current version, as set in package.json.\n *\n * https://svelte.dev/docs/svelte-compiler#svelte-version\n * @type {string}\n */\nexport const VERSION = '4.2.18';\nexport const PUBLIC_VERSION = '4';\n","(function (global, factory) {\n\ttypeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory() :\n\ttypeof define === 'function' && define.amd ? define(factory) :\n\t(global.page = factory());\n}(this, (function () { 'use strict';\n\nvar isarray = Array.isArray || function (arr) {\n  return Object.prototype.toString.call(arr) == '[object Array]';\n};\n\n/**\n * Expose `pathToRegexp`.\n */\nvar pathToRegexp_1 = pathToRegexp;\nvar parse_1 = parse;\nvar compile_1 = compile;\nvar tokensToFunction_1 = tokensToFunction;\nvar tokensToRegExp_1 = tokensToRegExp;\n\n/**\n * The main path matching regexp utility.\n *\n * @type {RegExp}\n */\nvar PATH_REGEXP = new RegExp([\n  // Match escaped characters that would otherwise appear in future matches.\n  // This allows the user to escape special characters that won't transform.\n  '(\\\\\\\\.)',\n  // Match Express-style parameters and un-named parameters with a prefix\n  // and optional suffixes. Matches appear as:\n  //\n  // \"/:test(\\\\d+)?\" => [\"/\", \"test\", \"\\d+\", undefined, \"?\", undefined]\n  // \"/route(\\\\d+)\"  => [undefined, undefined, undefined, \"\\d+\", undefined, undefined]\n  // \"/*\"            => [\"/\", undefined, undefined, undefined, undefined, \"*\"]\n  '([\\\\/.])?(?:(?:\\\\:(\\\\w+)(?:\\\\(((?:\\\\\\\\.|[^()])+)\\\\))?|\\\\(((?:\\\\\\\\.|[^()])+)\\\\))([+*?])?|(\\\\*))'\n].join('|'), 'g');\n\n/**\n * Parse a string for the raw tokens.\n *\n * @param  {String} str\n * @return {Array}\n */\nfunction parse (str) {\n  var tokens = [];\n  var key = 0;\n  var index = 0;\n  var path = '';\n  var res;\n\n  while ((res = PATH_REGEXP.exec(str)) != null) {\n    var m = res[0];\n    var escaped = res[1];\n    var offset = res.index;\n    path += str.slice(index, offset);\n    index = offset + m.length;\n\n    // Ignore already escaped sequences.\n    if (escaped) {\n      path += escaped[1];\n      continue\n    }\n\n    // Push the current path onto the tokens.\n    if (path) {\n      tokens.push(path);\n      path = '';\n    }\n\n    var prefix = res[2];\n    var name = res[3];\n    var capture = res[4];\n    var group = res[5];\n    var suffix = res[6];\n    var asterisk = res[7];\n\n    var repeat = suffix === '+' || suffix === '*';\n    var optional = suffix === '?' || suffix === '*';\n    var delimiter = prefix || '/';\n    var pattern = capture || group || (asterisk ? '.*' : '[^' + delimiter + ']+?');\n\n    tokens.push({\n      name: name || key++,\n      prefix: prefix || '',\n      delimiter: delimiter,\n      optional: optional,\n      repeat: repeat,\n      pattern: escapeGroup(pattern)\n    });\n  }\n\n  // Match any characters still remaining.\n  if (index < str.length) {\n    path += str.substr(index);\n  }\n\n  // If the path exists, push it onto the end.\n  if (path) {\n    tokens.push(path);\n  }\n\n  return tokens\n}\n\n/**\n * Compile a string to a template function for the path.\n *\n * @param  {String}   str\n * @return {Function}\n */\nfunction compile (str) {\n  return tokensToFunction(parse(str))\n}\n\n/**\n * Expose a method for transforming tokens into the path function.\n */\nfunction tokensToFunction (tokens) {\n  // Compile all the tokens into regexps.\n  var matches = new Array(tokens.length);\n\n  // Compile all the patterns before compilation.\n  for (var i = 0; i < tokens.length; i++) {\n    if (typeof tokens[i] === 'object') {\n      matches[i] = new RegExp('^' + tokens[i].pattern + '$');\n    }\n  }\n\n  return function (obj) {\n    var path = '';\n    var data = obj || {};\n\n    for (var i = 0; i < tokens.length; i++) {\n      var token = tokens[i];\n\n      if (typeof token === 'string') {\n        path += token;\n\n        continue\n      }\n\n      var value = data[token.name];\n      var segment;\n\n      if (value == null) {\n        if (token.optional) {\n          continue\n        } else {\n          throw new TypeError('Expected \"' + token.name + '\" to be defined')\n        }\n      }\n\n      if (isarray(value)) {\n        if (!token.repeat) {\n          throw new TypeError('Expected \"' + token.name + '\" to not repeat, but received \"' + value + '\"')\n        }\n\n        if (value.length === 0) {\n          if (token.optional) {\n            continue\n          } else {\n            throw new TypeError('Expected \"' + token.name + '\" to not be empty')\n          }\n        }\n\n        for (var j = 0; j < value.length; j++) {\n          segment = encodeURIComponent(value[j]);\n\n          if (!matches[i].test(segment)) {\n            throw new TypeError('Expected all \"' + token.name + '\" to match \"' + token.pattern + '\", but received \"' + segment + '\"')\n          }\n\n          path += (j === 0 ? token.prefix : token.delimiter) + segment;\n        }\n\n        continue\n      }\n\n      segment = encodeURIComponent(value);\n\n      if (!matches[i].test(segment)) {\n        throw new TypeError('Expected \"' + token.name + '\" to match \"' + token.pattern + '\", but received \"' + segment + '\"')\n      }\n\n      path += token.prefix + segment;\n    }\n\n    return path\n  }\n}\n\n/**\n * Escape a regular expression string.\n *\n * @param  {String} str\n * @return {String}\n */\nfunction escapeString (str) {\n  return str.replace(/([.+*?=^!:${}()[\\]|\\/])/g, '\\\\$1')\n}\n\n/**\n * Escape the capturing group by escaping special characters and meaning.\n *\n * @param  {String} group\n * @return {String}\n */\nfunction escapeGroup (group) {\n  return group.replace(/([=!:$\\/()])/g, '\\\\$1')\n}\n\n/**\n * Attach the keys as a property of the regexp.\n *\n * @param  {RegExp} re\n * @param  {Array}  keys\n * @return {RegExp}\n */\nfunction attachKeys (re, keys) {\n  re.keys = keys;\n  return re\n}\n\n/**\n * Get the flags for a regexp from the options.\n *\n * @param  {Object} options\n * @return {String}\n */\nfunction flags (options) {\n  return options.sensitive ? '' : 'i'\n}\n\n/**\n * Pull out keys from a regexp.\n *\n * @param  {RegExp} path\n * @param  {Array}  keys\n * @return {RegExp}\n */\nfunction regexpToRegexp (path, keys) {\n  // Use a negative lookahead to match only capturing groups.\n  var groups = path.source.match(/\\((?!\\?)/g);\n\n  if (groups) {\n    for (var i = 0; i < groups.length; i++) {\n      keys.push({\n        name: i,\n        prefix: null,\n        delimiter: null,\n        optional: false,\n        repeat: false,\n        pattern: null\n      });\n    }\n  }\n\n  return attachKeys(path, keys)\n}\n\n/**\n * Transform an array into a regexp.\n *\n * @param  {Array}  path\n * @param  {Array}  keys\n * @param  {Object} options\n * @return {RegExp}\n */\nfunction arrayToRegexp (path, keys, options) {\n  var parts = [];\n\n  for (var i = 0; i < path.length; i++) {\n    parts.push(pathToRegexp(path[i], keys, options).source);\n  }\n\n  var regexp = new RegExp('(?:' + parts.join('|') + ')', flags(options));\n\n  return attachKeys(regexp, keys)\n}\n\n/**\n * Create a path regexp from string input.\n *\n * @param  {String} path\n * @param  {Array}  keys\n * @param  {Object} options\n * @return {RegExp}\n */\nfunction stringToRegexp (path, keys, options) {\n  var tokens = parse(path);\n  var re = tokensToRegExp(tokens, options);\n\n  // Attach keys back to the regexp.\n  for (var i = 0; i < tokens.length; i++) {\n    if (typeof tokens[i] !== 'string') {\n      keys.push(tokens[i]);\n    }\n  }\n\n  return attachKeys(re, keys)\n}\n\n/**\n * Expose a function for taking tokens and returning a RegExp.\n *\n * @param  {Array}  tokens\n * @param  {Array}  keys\n * @param  {Object} options\n * @return {RegExp}\n */\nfunction tokensToRegExp (tokens, options) {\n  options = options || {};\n\n  var strict = options.strict;\n  var end = options.end !== false;\n  var route = '';\n  var lastToken = tokens[tokens.length - 1];\n  var endsWithSlash = typeof lastToken === 'string' && /\\/$/.test(lastToken);\n\n  // Iterate over the tokens and create our regexp string.\n  for (var i = 0; i < tokens.length; i++) {\n    var token = tokens[i];\n\n    if (typeof token === 'string') {\n      route += escapeString(token);\n    } else {\n      var prefix = escapeString(token.prefix);\n      var capture = token.pattern;\n\n      if (token.repeat) {\n        capture += '(?:' + prefix + capture + ')*';\n      }\n\n      if (token.optional) {\n        if (prefix) {\n          capture = '(?:' + prefix + '(' + capture + '))?';\n        } else {\n          capture = '(' + capture + ')?';\n        }\n      } else {\n        capture = prefix + '(' + capture + ')';\n      }\n\n      route += capture;\n    }\n  }\n\n  // In non-strict mode we allow a slash at the end of match. If the path to\n  // match already ends with a slash, we remove it for consistency. The slash\n  // is valid at the end of a path match, not in the middle. This is important\n  // in non-ending mode, where \"/test/\" shouldn't match \"/test//route\".\n  if (!strict) {\n    route = (endsWithSlash ? route.slice(0, -2) : route) + '(?:\\\\/(?=$))?';\n  }\n\n  if (end) {\n    route += '$';\n  } else {\n    // In non-ending mode, we need the capturing groups to match as much as\n    // possible by using a positive lookahead to the end or next path segment.\n    route += strict && endsWithSlash ? '' : '(?=\\\\/|$)';\n  }\n\n  return new RegExp('^' + route, flags(options))\n}\n\n/**\n * Normalize the given path string, returning a regular expression.\n *\n * An empty array can be passed in for the keys, which will hold the\n * placeholder key descriptions. For example, using `/user/:id`, `keys` will\n * contain `[{ name: 'id', delimiter: '/', optional: false, repeat: false }]`.\n *\n * @param  {(String|RegExp|Array)} path\n * @param  {Array}                 [keys]\n * @param  {Object}                [options]\n * @return {RegExp}\n */\nfunction pathToRegexp (path, keys, options) {\n  keys = keys || [];\n\n  if (!isarray(keys)) {\n    options = keys;\n    keys = [];\n  } else if (!options) {\n    options = {};\n  }\n\n  if (path instanceof RegExp) {\n    return regexpToRegexp(path, keys, options)\n  }\n\n  if (isarray(path)) {\n    return arrayToRegexp(path, keys, options)\n  }\n\n  return stringToRegexp(path, keys, options)\n}\n\npathToRegexp_1.parse = parse_1;\npathToRegexp_1.compile = compile_1;\npathToRegexp_1.tokensToFunction = tokensToFunction_1;\npathToRegexp_1.tokensToRegExp = tokensToRegExp_1;\n\n/**\n   * Module dependencies.\n   */\n\n  \n\n  /**\n   * Short-cuts for global-object checks\n   */\n\n  var hasDocument = ('undefined' !== typeof document);\n  var hasWindow = ('undefined' !== typeof window);\n  var hasHistory = ('undefined' !== typeof history);\n  var hasProcess = typeof process !== 'undefined';\n\n  /**\n   * Detect click event\n   */\n  var clickEvent = hasDocument && document.ontouchstart ? 'touchstart' : 'click';\n\n  /**\n   * To work properly with the URL\n   * history.location generated polyfill in https://github.com/devote/HTML5-History-API\n   */\n\n  var isLocation = hasWindow && !!(window.history.location || window.location);\n\n  /**\n   * The page instance\n   * @api private\n   */\n  function Page() {\n    // public things\n    this.callbacks = [];\n    this.exits = [];\n    this.current = '';\n    this.len = 0;\n\n    // private things\n    this._decodeURLComponents = true;\n    this._base = '';\n    this._strict = false;\n    this._running = false;\n    this._hashbang = false;\n\n    // bound functions\n    this.clickHandler = this.clickHandler.bind(this);\n    this._onpopstate = this._onpopstate.bind(this);\n  }\n\n  /**\n   * Configure the instance of page. This can be called multiple times.\n   *\n   * @param {Object} options\n   * @api public\n   */\n\n  Page.prototype.configure = function(options) {\n    var opts = options || {};\n\n    this._window = opts.window || (hasWindow && window);\n    this._decodeURLComponents = opts.decodeURLComponents !== false;\n    this._popstate = opts.popstate !== false && hasWindow;\n    this._click = opts.click !== false && hasDocument;\n    this._hashbang = !!opts.hashbang;\n\n    var _window = this._window;\n    if(this._popstate) {\n      _window.addEventListener('popstate', this._onpopstate, false);\n    } else if(hasWindow) {\n      _window.removeEventListener('popstate', this._onpopstate, false);\n    }\n\n    if (this._click) {\n      _window.document.addEventListener(clickEvent, this.clickHandler, false);\n    } else if(hasDocument) {\n      _window.document.removeEventListener(clickEvent, this.clickHandler, false);\n    }\n\n    if(this._hashbang && hasWindow && !hasHistory) {\n      _window.addEventListener('hashchange', this._onpopstate, false);\n    } else if(hasWindow) {\n      _window.removeEventListener('hashchange', this._onpopstate, false);\n    }\n  };\n\n  /**\n   * Get or set basepath to `path`.\n   *\n   * @param {string} path\n   * @api public\n   */\n\n  Page.prototype.base = function(path) {\n    if (0 === arguments.length) return this._base;\n    this._base = path;\n  };\n\n  /**\n   * Gets the `base`, which depends on whether we are using History or\n   * hashbang routing.\n\n   * @api private\n   */\n  Page.prototype._getBase = function() {\n    var base = this._base;\n    if(!!base) return base;\n    var loc = hasWindow && this._window && this._window.location;\n\n    if(hasWindow && this._hashbang && loc && loc.protocol === 'file:') {\n      base = loc.pathname;\n    }\n\n    return base;\n  };\n\n  /**\n   * Get or set strict path matching to `enable`\n   *\n   * @param {boolean} enable\n   * @api public\n   */\n\n  Page.prototype.strict = function(enable) {\n    if (0 === arguments.length) return this._strict;\n    this._strict = enable;\n  };\n\n\n  /**\n   * Bind with the given `options`.\n   *\n   * Options:\n   *\n   *    - `click` bind to click events [true]\n   *    - `popstate` bind to popstate [true]\n   *    - `dispatch` perform initial dispatch [true]\n   *\n   * @param {Object} options\n   * @api public\n   */\n\n  Page.prototype.start = function(options) {\n    var opts = options || {};\n    this.configure(opts);\n\n    if (false === opts.dispatch) return;\n    this._running = true;\n\n    var url;\n    if(isLocation) {\n      var window = this._window;\n      var loc = window.location;\n\n      if(this._hashbang && ~loc.hash.indexOf('#!')) {\n        url = loc.hash.substr(2) + loc.search;\n      } else if (this._hashbang) {\n        url = loc.search + loc.hash;\n      } else {\n        url = loc.pathname + loc.search + loc.hash;\n      }\n    }\n\n    this.replace(url, null, true, opts.dispatch);\n  };\n\n  /**\n   * Unbind click and popstate event handlers.\n   *\n   * @api public\n   */\n\n  Page.prototype.stop = function() {\n    if (!this._running) return;\n    this.current = '';\n    this.len = 0;\n    this._running = false;\n\n    var window = this._window;\n    this._click && window.document.removeEventListener(clickEvent, this.clickHandler, false);\n    hasWindow && window.removeEventListener('popstate', this._onpopstate, false);\n    hasWindow && window.removeEventListener('hashchange', this._onpopstate, false);\n  };\n\n  /**\n   * Show `path` with optional `state` object.\n   *\n   * @param {string} path\n   * @param {Object=} state\n   * @param {boolean=} dispatch\n   * @param {boolean=} push\n   * @return {!Context}\n   * @api public\n   */\n\n  Page.prototype.show = function(path, state, dispatch, push) {\n    var ctx = new Context(path, state, this),\n      prev = this.prevContext;\n    this.prevContext = ctx;\n    this.current = ctx.path;\n    if (false !== dispatch) this.dispatch(ctx, prev);\n    if (false !== ctx.handled && false !== push) ctx.pushState();\n    return ctx;\n  };\n\n  /**\n   * Goes back in the history\n   * Back should always let the current route push state and then go back.\n   *\n   * @param {string} path - fallback path to go back if no more history exists, if undefined defaults to page.base\n   * @param {Object=} state\n   * @api public\n   */\n\n  Page.prototype.back = function(path, state) {\n    var page = this;\n    if (this.len > 0) {\n      var window = this._window;\n      // this may need more testing to see if all browsers\n      // wait for the next tick to go back in history\n      hasHistory && window.history.back();\n      this.len--;\n    } else if (path) {\n      setTimeout(function() {\n        page.show(path, state);\n      });\n    } else {\n      setTimeout(function() {\n        page.show(page._getBase(), state);\n      });\n    }\n  };\n\n  /**\n   * Register route to redirect from one path to other\n   * or just redirect to another route\n   *\n   * @param {string} from - if param 'to' is undefined redirects to 'from'\n   * @param {string=} to\n   * @api public\n   */\n  Page.prototype.redirect = function(from, to) {\n    var inst = this;\n\n    // Define route from a path to another\n    if ('string' === typeof from && 'string' === typeof to) {\n      page.call(this, from, function(e) {\n        setTimeout(function() {\n          inst.replace(/** @type {!string} */ (to));\n        }, 0);\n      });\n    }\n\n    // Wait for the push state and replace it with another\n    if ('string' === typeof from && 'undefined' === typeof to) {\n      setTimeout(function() {\n        inst.replace(from);\n      }, 0);\n    }\n  };\n\n  /**\n   * Replace `path` with optional `state` object.\n   *\n   * @param {string} path\n   * @param {Object=} state\n   * @param {boolean=} init\n   * @param {boolean=} dispatch\n   * @return {!Context}\n   * @api public\n   */\n\n\n  Page.prototype.replace = function(path, state, init, dispatch) {\n    var ctx = new Context(path, state, this),\n      prev = this.prevContext;\n    this.prevContext = ctx;\n    this.current = ctx.path;\n    ctx.init = init;\n    ctx.save(); // save before dispatching, which may redirect\n    if (false !== dispatch) this.dispatch(ctx, prev);\n    return ctx;\n  };\n\n  /**\n   * Dispatch the given `ctx`.\n   *\n   * @param {Context} ctx\n   * @api private\n   */\n\n  Page.prototype.dispatch = function(ctx, prev) {\n    var i = 0, j = 0, page = this;\n\n    function nextExit() {\n      var fn = page.exits[j++];\n      if (!fn) return nextEnter();\n      fn(prev, nextExit);\n    }\n\n    function nextEnter() {\n      var fn = page.callbacks[i++];\n\n      if (ctx.path !== page.current) {\n        ctx.handled = false;\n        return;\n      }\n      if (!fn) return unhandled.call(page, ctx);\n      fn(ctx, nextEnter);\n    }\n\n    if (prev) {\n      nextExit();\n    } else {\n      nextEnter();\n    }\n  };\n\n  /**\n   * Register an exit route on `path` with\n   * callback `fn()`, which will be called\n   * on the previous context when a new\n   * page is visited.\n   */\n  Page.prototype.exit = function(path, fn) {\n    if (typeof path === 'function') {\n      return this.exit('*', path);\n    }\n\n    var route = new Route(path, null, this);\n    for (var i = 1; i < arguments.length; ++i) {\n      this.exits.push(route.middleware(arguments[i]));\n    }\n  };\n\n  /**\n   * Handle \"click\" events.\n   */\n\n  /* jshint +W054 */\n  Page.prototype.clickHandler = function(e) {\n    if (1 !== this._which(e)) return;\n\n    if (e.metaKey || e.ctrlKey || e.shiftKey) return;\n    if (e.defaultPrevented) return;\n\n    // ensure link\n    // use shadow dom when available if not, fall back to composedPath()\n    // for browsers that only have shady\n    var el = e.target;\n    var eventPath = e.path || (e.composedPath ? e.composedPath() : null);\n\n    if(eventPath) {\n      for (var i = 0; i < eventPath.length; i++) {\n        if (!eventPath[i].nodeName) continue;\n        if (eventPath[i].nodeName.toUpperCase() !== 'A') continue;\n        if (!eventPath[i].href) continue;\n\n        el = eventPath[i];\n        break;\n      }\n    }\n\n    // continue ensure link\n    // el.nodeName for svg links are 'a' instead of 'A'\n    while (el && 'A' !== el.nodeName.toUpperCase()) el = el.parentNode;\n    if (!el || 'A' !== el.nodeName.toUpperCase()) return;\n\n    // check if link is inside an svg\n    // in this case, both href and target are always inside an object\n    var svg = (typeof el.href === 'object') && el.href.constructor.name === 'SVGAnimatedString';\n\n    // Ignore if tag has\n    // 1. \"download\" attribute\n    // 2. rel=\"external\" attribute\n    if (el.hasAttribute('download') || el.getAttribute('rel') === 'external') return;\n\n    // ensure non-hash for the same path\n    var link = el.getAttribute('href');\n    if(!this._hashbang && this._samePath(el) && (el.hash || '#' === link)) return;\n\n    // Check for mailto: in the href\n    if (link && link.indexOf('mailto:') > -1) return;\n\n    // check target\n    // svg target is an object and its desired value is in .baseVal property\n    if (svg ? el.target.baseVal : el.target) return;\n\n    // x-origin\n    // note: svg links that are not relative don't call click events (and skip page.js)\n    // consequently, all svg links tested inside page.js are relative and in the same origin\n    if (!svg && !this.sameOrigin(el.href)) return;\n\n    // rebuild path\n    // There aren't .pathname and .search properties in svg links, so we use href\n    // Also, svg href is an object and its desired value is in .baseVal property\n    var path = svg ? el.href.baseVal : (el.pathname + el.search + (el.hash || ''));\n\n    path = path[0] !== '/' ? '/' + path : path;\n\n    // strip leading \"/[drive letter]:\" on NW.js on Windows\n    if (hasProcess && path.match(/^\\/[a-zA-Z]:\\//)) {\n      path = path.replace(/^\\/[a-zA-Z]:\\//, '/');\n    }\n\n    // same page\n    var orig = path;\n    var pageBase = this._getBase();\n\n    if (path.indexOf(pageBase) === 0) {\n      path = path.substr(pageBase.length);\n    }\n\n    if (this._hashbang) path = path.replace('#!', '');\n\n    if (pageBase && orig === path && (!isLocation || this._window.location.protocol !== 'file:')) {\n      return;\n    }\n\n    e.preventDefault();\n    this.show(orig);\n  };\n\n  /**\n   * Handle \"populate\" events.\n   * @api private\n   */\n\n  Page.prototype._onpopstate = (function () {\n    var loaded = false;\n    if ( ! hasWindow ) {\n      return function () {};\n    }\n    if (hasDocument && document.readyState === 'complete') {\n      loaded = true;\n    } else {\n      window.addEventListener('load', function() {\n        setTimeout(function() {\n          loaded = true;\n        }, 0);\n      });\n    }\n    return function onpopstate(e) {\n      if (!loaded) return;\n      var page = this;\n      if (e.state) {\n        var path = e.state.path;\n        page.replace(path, e.state);\n      } else if (isLocation) {\n        var loc = page._window.location;\n        page.show(loc.pathname + loc.search + loc.hash, undefined, undefined, false);\n      }\n    };\n  })();\n\n  /**\n   * Event button.\n   */\n  Page.prototype._which = function(e) {\n    e = e || (hasWindow && this._window.event);\n    return null == e.which ? e.button : e.which;\n  };\n\n  /**\n   * Convert to a URL object\n   * @api private\n   */\n  Page.prototype._toURL = function(href) {\n    var window = this._window;\n    if(typeof URL === 'function' && isLocation) {\n      return new URL(href, window.location.toString());\n    } else if (hasDocument) {\n      var anc = window.document.createElement('a');\n      anc.href = href;\n      return anc;\n    }\n  };\n\n  /**\n   * Check if `href` is the same origin.\n   * @param {string} href\n   * @api public\n   */\n  Page.prototype.sameOrigin = function(href) {\n    if(!href || !isLocation) return false;\n\n    var url = this._toURL(href);\n    var window = this._window;\n\n    var loc = window.location;\n\n    /*\n       When the port is the default http port 80 for http, or 443 for\n       https, internet explorer 11 returns an empty string for loc.port,\n       so we need to compare loc.port with an empty string if url.port\n       is the default port 80 or 443.\n       Also the comparition with `port` is changed from `===` to `==` because\n       `port` can be a string sometimes. This only applies to ie11.\n    */\n    return loc.protocol === url.protocol &&\n      loc.hostname === url.hostname &&\n      (loc.port === url.port || loc.port === '' && (url.port == 80 || url.port == 443)); // jshint ignore:line\n  };\n\n  /**\n   * @api private\n   */\n  Page.prototype._samePath = function(url) {\n    if(!isLocation) return false;\n    var window = this._window;\n    var loc = window.location;\n    return url.pathname === loc.pathname &&\n      url.search === loc.search;\n  };\n\n  /**\n   * Remove URL encoding from the given `str`.\n   * Accommodates whitespace in both x-www-form-urlencoded\n   * and regular percent-encoded form.\n   *\n   * @param {string} val - URL component to decode\n   * @api private\n   */\n  Page.prototype._decodeURLEncodedURIComponent = function(val) {\n    if (typeof val !== 'string') { return val; }\n    return this._decodeURLComponents ? decodeURIComponent(val.replace(/\\+/g, ' ')) : val;\n  };\n\n  /**\n   * Create a new `page` instance and function\n   */\n  function createPage() {\n    var pageInstance = new Page();\n\n    function pageFn(/* args */) {\n      return page.apply(pageInstance, arguments);\n    }\n\n    // Copy all of the things over. In 2.0 maybe we use setPrototypeOf\n    pageFn.callbacks = pageInstance.callbacks;\n    pageFn.exits = pageInstance.exits;\n    pageFn.base = pageInstance.base.bind(pageInstance);\n    pageFn.strict = pageInstance.strict.bind(pageInstance);\n    pageFn.start = pageInstance.start.bind(pageInstance);\n    pageFn.stop = pageInstance.stop.bind(pageInstance);\n    pageFn.show = pageInstance.show.bind(pageInstance);\n    pageFn.back = pageInstance.back.bind(pageInstance);\n    pageFn.redirect = pageInstance.redirect.bind(pageInstance);\n    pageFn.replace = pageInstance.replace.bind(pageInstance);\n    pageFn.dispatch = pageInstance.dispatch.bind(pageInstance);\n    pageFn.exit = pageInstance.exit.bind(pageInstance);\n    pageFn.configure = pageInstance.configure.bind(pageInstance);\n    pageFn.sameOrigin = pageInstance.sameOrigin.bind(pageInstance);\n    pageFn.clickHandler = pageInstance.clickHandler.bind(pageInstance);\n\n    pageFn.create = createPage;\n\n    Object.defineProperty(pageFn, 'len', {\n      get: function(){\n        return pageInstance.len;\n      },\n      set: function(val) {\n        pageInstance.len = val;\n      }\n    });\n\n    Object.defineProperty(pageFn, 'current', {\n      get: function(){\n        return pageInstance.current;\n      },\n      set: function(val) {\n        pageInstance.current = val;\n      }\n    });\n\n    // In 2.0 these can be named exports\n    pageFn.Context = Context;\n    pageFn.Route = Route;\n\n    return pageFn;\n  }\n\n  /**\n   * Register `path` with callback `fn()`,\n   * or route `path`, or redirection,\n   * or `page.start()`.\n   *\n   *   page(fn);\n   *   page('*', fn);\n   *   page('/user/:id', load, user);\n   *   page('/user/' + user.id, { some: 'thing' });\n   *   page('/user/' + user.id);\n   *   page('/from', '/to')\n   *   page();\n   *\n   * @param {string|!Function|!Object} path\n   * @param {Function=} fn\n   * @api public\n   */\n\n  function page(path, fn) {\n    // <callback>\n    if ('function' === typeof path) {\n      return page.call(this, '*', path);\n    }\n\n    // route <path> to <callback ...>\n    if ('function' === typeof fn) {\n      var route = new Route(/** @type {string} */ (path), null, this);\n      for (var i = 1; i < arguments.length; ++i) {\n        this.callbacks.push(route.middleware(arguments[i]));\n      }\n      // show <path> with [state]\n    } else if ('string' === typeof path) {\n      this['string' === typeof fn ? 'redirect' : 'show'](path, fn);\n      // start [options]\n    } else {\n      this.start(path);\n    }\n  }\n\n  /**\n   * Unhandled `ctx`. When it's not the initial\n   * popstate then redirect. If you wish to handle\n   * 404s on your own use `page('*', callback)`.\n   *\n   * @param {Context} ctx\n   * @api private\n   */\n  function unhandled(ctx) {\n    if (ctx.handled) return;\n    var current;\n    var page = this;\n    var window = page._window;\n\n    if (page._hashbang) {\n      current = isLocation && this._getBase() + window.location.hash.replace('#!', '');\n    } else {\n      current = isLocation && window.location.pathname + window.location.search;\n    }\n\n    if (current === ctx.canonicalPath) return;\n    page.stop();\n    ctx.handled = false;\n    isLocation && (window.location.href = ctx.canonicalPath);\n  }\n\n  /**\n   * Escapes RegExp characters in the given string.\n   *\n   * @param {string} s\n   * @api private\n   */\n  function escapeRegExp(s) {\n    return s.replace(/([.+*?=^!:${}()[\\]|/\\\\])/g, '\\\\$1');\n  }\n\n  /**\n   * Initialize a new \"request\" `Context`\n   * with the given `path` and optional initial `state`.\n   *\n   * @constructor\n   * @param {string} path\n   * @param {Object=} state\n   * @api public\n   */\n\n  function Context(path, state, pageInstance) {\n    var _page = this.page = pageInstance || page;\n    var window = _page._window;\n    var hashbang = _page._hashbang;\n\n    var pageBase = _page._getBase();\n    if ('/' === path[0] && 0 !== path.indexOf(pageBase)) path = pageBase + (hashbang ? '#!' : '') + path;\n    var i = path.indexOf('?');\n\n    this.canonicalPath = path;\n    var re = new RegExp('^' + escapeRegExp(pageBase));\n    this.path = path.replace(re, '') || '/';\n    if (hashbang) this.path = this.path.replace('#!', '') || '/';\n\n    this.title = (hasDocument && window.document.title);\n    this.state = state || {};\n    this.state.path = path;\n    this.querystring = ~i ? _page._decodeURLEncodedURIComponent(path.slice(i + 1)) : '';\n    this.pathname = _page._decodeURLEncodedURIComponent(~i ? path.slice(0, i) : path);\n    this.params = {};\n\n    // fragment\n    this.hash = '';\n    if (!hashbang) {\n      if (!~this.path.indexOf('#')) return;\n      var parts = this.path.split('#');\n      this.path = this.pathname = parts[0];\n      this.hash = _page._decodeURLEncodedURIComponent(parts[1]) || '';\n      this.querystring = this.querystring.split('#')[0];\n    }\n  }\n\n  /**\n   * Push state.\n   *\n   * @api private\n   */\n\n  Context.prototype.pushState = function() {\n    var page = this.page;\n    var window = page._window;\n    var hashbang = page._hashbang;\n\n    page.len++;\n    if (hasHistory) {\n        window.history.pushState(this.state, this.title,\n          hashbang && this.path !== '/' ? '#!' + this.path : this.canonicalPath);\n    }\n  };\n\n  /**\n   * Save the context state.\n   *\n   * @api public\n   */\n\n  Context.prototype.save = function() {\n    var page = this.page;\n    if (hasHistory) {\n        page._window.history.replaceState(this.state, this.title,\n          page._hashbang && this.path !== '/' ? '#!' + this.path : this.canonicalPath);\n    }\n  };\n\n  /**\n   * Initialize `Route` with the given HTTP `path`,\n   * and an array of `callbacks` and `options`.\n   *\n   * Options:\n   *\n   *   - `sensitive`    enable case-sensitive routes\n   *   - `strict`       enable strict matching for trailing slashes\n   *\n   * @constructor\n   * @param {string} path\n   * @param {Object=} options\n   * @api private\n   */\n\n  function Route(path, options, page) {\n    var _page = this.page = page || globalPage;\n    var opts = options || {};\n    opts.strict = opts.strict || _page._strict;\n    this.path = (path === '*') ? '(.*)' : path;\n    this.method = 'GET';\n    this.regexp = pathToRegexp_1(this.path, this.keys = [], opts);\n  }\n\n  /**\n   * Return route middleware with\n   * the given callback `fn()`.\n   *\n   * @param {Function} fn\n   * @return {Function}\n   * @api public\n   */\n\n  Route.prototype.middleware = function(fn) {\n    var self = this;\n    return function(ctx, next) {\n      if (self.match(ctx.path, ctx.params)) {\n        ctx.routePath = self.path;\n        return fn(ctx, next);\n      }\n      next();\n    };\n  };\n\n  /**\n   * Check if this route matches `path`, if so\n   * populate `params`.\n   *\n   * @param {string} path\n   * @param {Object} params\n   * @return {boolean}\n   * @api private\n   */\n\n  Route.prototype.match = function(path, params) {\n    var keys = this.keys,\n      qsIndex = path.indexOf('?'),\n      pathname = ~qsIndex ? path.slice(0, qsIndex) : path,\n      m = this.regexp.exec(decodeURIComponent(pathname));\n\n    if (!m) return false;\n\n    delete params[0];\n\n    for (var i = 1, len = m.length; i < len; ++i) {\n      var key = keys[i - 1];\n      var val = this.page._decodeURLEncodedURIComponent(m[i]);\n      if (val !== undefined || !(hasOwnProperty.call(params, key.name))) {\n        params[key.name] = val;\n      }\n    }\n\n    return true;\n  };\n\n\n  /**\n   * Module exports.\n   */\n\n  var globalPage = createPage();\n  var page_js = globalPage;\n  var default_1 = globalPage;\n\npage_js.default = default_1;\n\nreturn page_js;\n\n})));\n","export default function ascending(a, b) {\n  return a == null || b == null ? NaN : a < b ? -1 : a > b ? 1 : a >= b ? 0 : NaN;\n}\n","export default function descending(a, b) {\n  return a == null || b == null ? NaN\n    : b < a ? -1\n    : b > a ? 1\n    : b >= a ? 0\n    : NaN;\n}\n","import ascending from \"./ascending.js\";\nimport descending from \"./descending.js\";\n\nexport default function bisector(f) {\n  let compare1, compare2, delta;\n\n  // If an accessor is specified, promote it to a comparator. In this case we\n  // can test whether the search value is (self-) comparable. We cant do this\n  // for a comparator (except for specific, known comparators) because we cant\n  // tell if the comparator is symmetric, and an asymmetric comparator cant be\n  // used to test whether a single value is comparable.\n  if (f.length !== 2) {\n    compare1 = ascending;\n    compare2 = (d, x) => ascending(f(d), x);\n    delta = (d, x) => f(d) - x;\n  } else {\n    compare1 = f === ascending || f === descending ? f : zero;\n    compare2 = f;\n    delta = f;\n  }\n\n  function left(a, x, lo = 0, hi = a.length) {\n    if (lo < hi) {\n      if (compare1(x, x) !== 0) return hi;\n      do {\n        const mid = (lo + hi) >>> 1;\n        if (compare2(a[mid], x) < 0) lo = mid + 1;\n        else hi = mid;\n      } while (lo < hi);\n    }\n    return lo;\n  }\n\n  function right(a, x, lo = 0, hi = a.length) {\n    if (lo < hi) {\n      if (compare1(x, x) !== 0) return hi;\n      do {\n        const mid = (lo + hi) >>> 1;\n        if (compare2(a[mid], x) <= 0) lo = mid + 1;\n        else hi = mid;\n      } while (lo < hi);\n    }\n    return lo;\n  }\n\n  function center(a, x, lo = 0, hi = a.length) {\n    const i = left(a, x, lo, hi - 1);\n    return i > lo && delta(a[i - 1], x) > -delta(a[i], x) ? i - 1 : i;\n  }\n\n  return {left, center, right};\n}\n\nfunction zero() {\n  return 0;\n}\n","import ascending from \"./ascending.js\";\nimport bisector from \"./bisector.js\";\nimport number from \"./number.js\";\n\nconst ascendingBisect = bisector(ascending);\nexport const bisectRight = ascendingBisect.right;\nexport const bisectLeft = ascendingBisect.left;\nexport const bisectCenter = bisector(number).center;\nexport default bisectRight;\n","export default function number(x) {\n  return x === null ? NaN : +x;\n}\n\nexport function* numbers(values, valueof) {\n  if (valueof === undefined) {\n    for (let value of values) {\n      if (value != null && (value = +value) >= value) {\n        yield value;\n      }\n    }\n  } else {\n    let index = -1;\n    for (let value of values) {\n      if ((value = valueof(value, ++index, values)) != null && (value = +value) >= value) {\n        yield value;\n      }\n    }\n  }\n}\n","const e10 = Math.sqrt(50),\n    e5 = Math.sqrt(10),\n    e2 = Math.sqrt(2);\n\nfunction tickSpec(start, stop, count) {\n  const step = (stop - start) / Math.max(0, count),\n      power = Math.floor(Math.log10(step)),\n      error = step / Math.pow(10, power),\n      factor = error >= e10 ? 10 : error >= e5 ? 5 : error >= e2 ? 2 : 1;\n  let i1, i2, inc;\n  if (power < 0) {\n    inc = Math.pow(10, -power) / factor;\n    i1 = Math.round(start * inc);\n    i2 = Math.round(stop * inc);\n    if (i1 / inc < start) ++i1;\n    if (i2 / inc > stop) --i2;\n    inc = -inc;\n  } else {\n    inc = Math.pow(10, power) * factor;\n    i1 = Math.round(start / inc);\n    i2 = Math.round(stop / inc);\n    if (i1 * inc < start) ++i1;\n    if (i2 * inc > stop) --i2;\n  }\n  if (i2 < i1 && 0.5 <= count && count < 2) return tickSpec(start, stop, count * 2);\n  return [i1, i2, inc];\n}\n\nexport default function ticks(start, stop, count) {\n  stop = +stop, start = +start, count = +count;\n  if (!(count > 0)) return [];\n  if (start === stop) return [start];\n  const reverse = stop < start, [i1, i2, inc] = reverse ? tickSpec(stop, start, count) : tickSpec(start, stop, count);\n  if (!(i2 >= i1)) return [];\n  const n = i2 - i1 + 1, ticks = new Array(n);\n  if (reverse) {\n    if (inc < 0) for (let i = 0; i < n; ++i) ticks[i] = (i2 - i) / -inc;\n    else for (let i = 0; i < n; ++i) ticks[i] = (i2 - i) * inc;\n  } else {\n    if (inc < 0) for (let i = 0; i < n; ++i) ticks[i] = (i1 + i) / -inc;\n    else for (let i = 0; i < n; ++i) ticks[i] = (i1 + i) * inc;\n  }\n  return ticks;\n}\n\nexport function tickIncrement(start, stop, count) {\n  stop = +stop, start = +start, count = +count;\n  return tickSpec(start, stop, count)[2];\n}\n\nexport function tickStep(start, stop, count) {\n  stop = +stop, start = +start, count = +count;\n  const reverse = stop < start, inc = reverse ? tickIncrement(stop, start, count) : tickIncrement(start, stop, count);\n  return (reverse ? -1 : 1) * (inc < 0 ? 1 / -inc : inc);\n}\n","export default function mean(values, valueof) {\n  let count = 0;\n  let sum = 0;\n  if (valueof === undefined) {\n    for (let value of values) {\n      if (value != null && (value = +value) >= value) {\n        ++count, sum += value;\n      }\n    }\n  } else {\n    let index = -1;\n    for (let value of values) {\n      if ((value = valueof(value, ++index, values)) != null && (value = +value) >= value) {\n        ++count, sum += value;\n      }\n    }\n  }\n  if (count) return sum / count;\n}\n","export default function(x) {\n  return x;\n}\n","import identity from \"./identity.js\";\n\nvar top = 1,\n    right = 2,\n    bottom = 3,\n    left = 4,\n    epsilon = 1e-6;\n\nfunction translateX(x) {\n  return \"translate(\" + x + \",0)\";\n}\n\nfunction translateY(y) {\n  return \"translate(0,\" + y + \")\";\n}\n\nfunction number(scale) {\n  return d => +scale(d);\n}\n\nfunction center(scale, offset) {\n  offset = Math.max(0, scale.bandwidth() - offset * 2) / 2;\n  if (scale.round()) offset = Math.round(offset);\n  return d => +scale(d) + offset;\n}\n\nfunction entering() {\n  return !this.__axis;\n}\n\nfunction axis(orient, scale) {\n  var tickArguments = [],\n      tickValues = null,\n      tickFormat = null,\n      tickSizeInner = 6,\n      tickSizeOuter = 6,\n      tickPadding = 3,\n      offset = typeof window !== \"undefined\" && window.devicePixelRatio > 1 ? 0 : 0.5,\n      k = orient === top || orient === left ? -1 : 1,\n      x = orient === left || orient === right ? \"x\" : \"y\",\n      transform = orient === top || orient === bottom ? translateX : translateY;\n\n  function axis(context) {\n    var values = tickValues == null ? (scale.ticks ? scale.ticks.apply(scale, tickArguments) : scale.domain()) : tickValues,\n        format = tickFormat == null ? (scale.tickFormat ? scale.tickFormat.apply(scale, tickArguments) : identity) : tickFormat,\n        spacing = Math.max(tickSizeInner, 0) + tickPadding,\n        range = scale.range(),\n        range0 = +range[0] + offset,\n        range1 = +range[range.length - 1] + offset,\n        position = (scale.bandwidth ? center : number)(scale.copy(), offset),\n        selection = context.selection ? context.selection() : context,\n        path = selection.selectAll(\".domain\").data([null]),\n        tick = selection.selectAll(\".tick\").data(values, scale).order(),\n        tickExit = tick.exit(),\n        tickEnter = tick.enter().append(\"g\").attr(\"class\", \"tick\"),\n        line = tick.select(\"line\"),\n        text = tick.select(\"text\");\n\n    path = path.merge(path.enter().insert(\"path\", \".tick\")\n        .attr(\"class\", \"domain\")\n        .attr(\"stroke\", \"currentColor\"));\n\n    tick = tick.merge(tickEnter);\n\n    line = line.merge(tickEnter.append(\"line\")\n        .attr(\"stroke\", \"currentColor\")\n        .attr(x + \"2\", k * tickSizeInner));\n\n    text = text.merge(tickEnter.append(\"text\")\n        .attr(\"fill\", \"currentColor\")\n        .attr(x, k * spacing)\n        .attr(\"dy\", orient === top ? \"0em\" : orient === bottom ? \"0.71em\" : \"0.32em\"));\n\n    if (context !== selection) {\n      path = path.transition(context);\n      tick = tick.transition(context);\n      line = line.transition(context);\n      text = text.transition(context);\n\n      tickExit = tickExit.transition(context)\n          .attr(\"opacity\", epsilon)\n          .attr(\"transform\", function(d) { return isFinite(d = position(d)) ? transform(d + offset) : this.getAttribute(\"transform\"); });\n\n      tickEnter\n          .attr(\"opacity\", epsilon)\n          .attr(\"transform\", function(d) { var p = this.parentNode.__axis; return transform((p && isFinite(p = p(d)) ? p : position(d)) + offset); });\n    }\n\n    tickExit.remove();\n\n    path\n        .attr(\"d\", orient === left || orient === right\n            ? (tickSizeOuter ? \"M\" + k * tickSizeOuter + \",\" + range0 + \"H\" + offset + \"V\" + range1 + \"H\" + k * tickSizeOuter : \"M\" + offset + \",\" + range0 + \"V\" + range1)\n            : (tickSizeOuter ? \"M\" + range0 + \",\" + k * tickSizeOuter + \"V\" + offset + \"H\" + range1 + \"V\" + k * tickSizeOuter : \"M\" + range0 + \",\" + offset + \"H\" + range1));\n\n    tick\n        .attr(\"opacity\", 1)\n        .attr(\"transform\", function(d) { return transform(position(d) + offset); });\n\n    line\n        .attr(x + \"2\", k * tickSizeInner);\n\n    text\n        .attr(x, k * spacing)\n        .text(format);\n\n    selection.filter(entering)\n        .attr(\"fill\", \"none\")\n        .attr(\"font-size\", 10)\n        .attr(\"font-family\", \"sans-serif\")\n        .attr(\"text-anchor\", orient === right ? \"start\" : orient === left ? \"end\" : \"middle\");\n\n    selection\n        .each(function() { this.__axis = position; });\n  }\n\n  axis.scale = function(_) {\n    return arguments.length ? (scale = _, axis) : scale;\n  };\n\n  axis.ticks = function() {\n    return tickArguments = Array.from(arguments), axis;\n  };\n\n  axis.tickArguments = function(_) {\n    return arguments.length ? (tickArguments = _ == null ? [] : Array.from(_), axis) : tickArguments.slice();\n  };\n\n  axis.tickValues = function(_) {\n    return arguments.length ? (tickValues = _ == null ? null : Array.from(_), axis) : tickValues && tickValues.slice();\n  };\n\n  axis.tickFormat = function(_) {\n    return arguments.length ? (tickFormat = _, axis) : tickFormat;\n  };\n\n  axis.tickSize = function(_) {\n    return arguments.length ? (tickSizeInner = tickSizeOuter = +_, axis) : tickSizeInner;\n  };\n\n  axis.tickSizeInner = function(_) {\n    return arguments.length ? (tickSizeInner = +_, axis) : tickSizeInner;\n  };\n\n  axis.tickSizeOuter = function(_) {\n    return arguments.length ? (tickSizeOuter = +_, axis) : tickSizeOuter;\n  };\n\n  axis.tickPadding = function(_) {\n    return arguments.length ? (tickPadding = +_, axis) : tickPadding;\n  };\n\n  axis.offset = function(_) {\n    return arguments.length ? (offset = +_, axis) : offset;\n  };\n\n  return axis;\n}\n\nexport function axisTop(scale) {\n  return axis(top, scale);\n}\n\nexport function axisRight(scale) {\n  return axis(right, scale);\n}\n\nexport function axisBottom(scale) {\n  return axis(bottom, scale);\n}\n\nexport function axisLeft(scale) {\n  return axis(left, scale);\n}\n","var noop = {value: () => {}};\n\nfunction dispatch() {\n  for (var i = 0, n = arguments.length, _ = {}, t; i < n; ++i) {\n    if (!(t = arguments[i] + \"\") || (t in _) || /[\\s.]/.test(t)) throw new Error(\"illegal type: \" + t);\n    _[t] = [];\n  }\n  return new Dispatch(_);\n}\n\nfunction Dispatch(_) {\n  this._ = _;\n}\n\nfunction parseTypenames(typenames, types) {\n  return typenames.trim().split(/^|\\s+/).map(function(t) {\n    var name = \"\", i = t.indexOf(\".\");\n    if (i >= 0) name = t.slice(i + 1), t = t.slice(0, i);\n    if (t && !types.hasOwnProperty(t)) throw new Error(\"unknown type: \" + t);\n    return {type: t, name: name};\n  });\n}\n\nDispatch.prototype = dispatch.prototype = {\n  constructor: Dispatch,\n  on: function(typename, callback) {\n    var _ = this._,\n        T = parseTypenames(typename + \"\", _),\n        t,\n        i = -1,\n        n = T.length;\n\n    // If no callback was specified, return the callback of the given type and name.\n    if (arguments.length < 2) {\n      while (++i < n) if ((t = (typename = T[i]).type) && (t = get(_[t], typename.name))) return t;\n      return;\n    }\n\n    // If a type was specified, set the callback for the given type and name.\n    // Otherwise, if a null callback was specified, remove callbacks of the given name.\n    if (callback != null && typeof callback !== \"function\") throw new Error(\"invalid callback: \" + callback);\n    while (++i < n) {\n      if (t = (typename = T[i]).type) _[t] = set(_[t], typename.name, callback);\n      else if (callback == null) for (t in _) _[t] = set(_[t], typename.name, null);\n    }\n\n    return this;\n  },\n  copy: function() {\n    var copy = {}, _ = this._;\n    for (var t in _) copy[t] = _[t].slice();\n    return new Dispatch(copy);\n  },\n  call: function(type, that) {\n    if ((n = arguments.length - 2) > 0) for (var args = new Array(n), i = 0, n, t; i < n; ++i) args[i] = arguments[i + 2];\n    if (!this._.hasOwnProperty(type)) throw new Error(\"unknown type: \" + type);\n    for (t = this._[type], i = 0, n = t.length; i < n; ++i) t[i].value.apply(that, args);\n  },\n  apply: function(type, that, args) {\n    if (!this._.hasOwnProperty(type)) throw new Error(\"unknown type: \" + type);\n    for (var t = this._[type], i = 0, n = t.length; i < n; ++i) t[i].value.apply(that, args);\n  }\n};\n\nfunction get(type, name) {\n  for (var i = 0, n = type.length, c; i < n; ++i) {\n    if ((c = type[i]).name === name) {\n      return c.value;\n    }\n  }\n}\n\nfunction set(type, name, callback) {\n  for (var i = 0, n = type.length; i < n; ++i) {\n    if (type[i].name === name) {\n      type[i] = noop, type = type.slice(0, i).concat(type.slice(i + 1));\n      break;\n    }\n  }\n  if (callback != null) type.push({name: name, value: callback});\n  return type;\n}\n\nexport default dispatch;\n","export var xhtml = \"http://www.w3.org/1999/xhtml\";\n\nexport default {\n  svg: \"http://www.w3.org/2000/svg\",\n  xhtml: xhtml,\n  xlink: \"http://www.w3.org/1999/xlink\",\n  xml: \"http://www.w3.org/XML/1998/namespace\",\n  xmlns: \"http://www.w3.org/2000/xmlns/\"\n};\n","import namespaces from \"./namespaces.js\";\n\nexport default function(name) {\n  var prefix = name += \"\", i = prefix.indexOf(\":\");\n  if (i >= 0 && (prefix = name.slice(0, i)) !== \"xmlns\") name = name.slice(i + 1);\n  return namespaces.hasOwnProperty(prefix) ? {space: namespaces[prefix], local: name} : name; // eslint-disable-line no-prototype-builtins\n}\n","import namespace from \"./namespace.js\";\nimport {xhtml} from \"./namespaces.js\";\n\nfunction creatorInherit(name) {\n  return function() {\n    var document = this.ownerDocument,\n        uri = this.namespaceURI;\n    return uri === xhtml && document.documentElement.namespaceURI === xhtml\n        ? document.createElement(name)\n        : document.createElementNS(uri, name);\n  };\n}\n\nfunction creatorFixed(fullname) {\n  return function() {\n    return this.ownerDocument.createElementNS(fullname.space, fullname.local);\n  };\n}\n\nexport default function(name) {\n  var fullname = namespace(name);\n  return (fullname.local\n      ? creatorFixed\n      : creatorInherit)(fullname);\n}\n","function none() {}\n\nexport default function(selector) {\n  return selector == null ? none : function() {\n    return this.querySelector(selector);\n  };\n}\n","// Given something array like (or null), returns something that is strictly an\n// array. This is used to ensure that array-like objects passed to d3.selectAll\n// or selection.selectAll are converted into proper arrays when creating a\n// selection; we dont ever want to create a selection backed by a live\n// HTMLCollection or NodeList. However, note that selection.selectAll will use a\n// static NodeList as a group, since it safely derived from querySelectorAll.\nexport default function array(x) {\n  return x == null ? [] : Array.isArray(x) ? x : Array.from(x);\n}\n","function empty() {\n  return [];\n}\n\nexport default function(selector) {\n  return selector == null ? empty : function() {\n    return this.querySelectorAll(selector);\n  };\n}\n","export default function(selector) {\n  return function() {\n    return this.matches(selector);\n  };\n}\n\nexport function childMatcher(selector) {\n  return function(node) {\n    return node.matches(selector);\n  };\n}\n\n","import {childMatcher} from \"../matcher.js\";\n\nvar find = Array.prototype.find;\n\nfunction childFind(match) {\n  return function() {\n    return find.call(this.children, match);\n  };\n}\n\nfunction childFirst() {\n  return this.firstElementChild;\n}\n\nexport default function(match) {\n  return this.select(match == null ? childFirst\n      : childFind(typeof match === \"function\" ? match : childMatcher(match)));\n}\n","import {childMatcher} from \"../matcher.js\";\n\nvar filter = Array.prototype.filter;\n\nfunction children() {\n  return Array.from(this.children);\n}\n\nfunction childrenFilter(match) {\n  return function() {\n    return filter.call(this.children, match);\n  };\n}\n\nexport default function(match) {\n  return this.selectAll(match == null ? children\n      : childrenFilter(typeof match === \"function\" ? match : childMatcher(match)));\n}\n","export default function(update) {\n  return new Array(update.length);\n}\n","import sparse from \"./sparse.js\";\nimport {Selection} from \"./index.js\";\n\nexport default function() {\n  return new Selection(this._enter || this._groups.map(sparse), this._parents);\n}\n\nexport function EnterNode(parent, datum) {\n  this.ownerDocument = parent.ownerDocument;\n  this.namespaceURI = parent.namespaceURI;\n  this._next = null;\n  this._parent = parent;\n  this.__data__ = datum;\n}\n\nEnterNode.prototype = {\n  constructor: EnterNode,\n  appendChild: function(child) { return this._parent.insertBefore(child, this._next); },\n  insertBefore: function(child, next) { return this._parent.insertBefore(child, next); },\n  querySelector: function(selector) { return this._parent.querySelector(selector); },\n  querySelectorAll: function(selector) { return this._parent.querySelectorAll(selector); }\n};\n","import {Selection} from \"./index.js\";\nimport {EnterNode} from \"./enter.js\";\nimport constant from \"../constant.js\";\n\nfunction bindIndex(parent, group, enter, update, exit, data) {\n  var i = 0,\n      node,\n      groupLength = group.length,\n      dataLength = data.length;\n\n  // Put any non-null nodes that fit into update.\n  // Put any null nodes into enter.\n  // Put any remaining data into enter.\n  for (; i < dataLength; ++i) {\n    if (node = group[i]) {\n      node.__data__ = data[i];\n      update[i] = node;\n    } else {\n      enter[i] = new EnterNode(parent, data[i]);\n    }\n  }\n\n  // Put any non-null nodes that dont fit into exit.\n  for (; i < groupLength; ++i) {\n    if (node = group[i]) {\n      exit[i] = node;\n    }\n  }\n}\n\nfunction bindKey(parent, group, enter, update, exit, data, key) {\n  var i,\n      node,\n      nodeByKeyValue = new Map,\n      groupLength = group.length,\n      dataLength = data.length,\n      keyValues = new Array(groupLength),\n      keyValue;\n\n  // Compute the key for each node.\n  // If multiple nodes have the same key, the duplicates are added to exit.\n  for (i = 0; i < groupLength; ++i) {\n    if (node = group[i]) {\n      keyValues[i] = keyValue = key.call(node, node.__data__, i, group) + \"\";\n      if (nodeByKeyValue.has(keyValue)) {\n        exit[i] = node;\n      } else {\n        nodeByKeyValue.set(keyValue, node);\n      }\n    }\n  }\n\n  // Compute the key for each datum.\n  // If there a node associated with this key, join and add it to update.\n  // If there is not (or the key is a duplicate), add it to enter.\n  for (i = 0; i < dataLength; ++i) {\n    keyValue = key.call(parent, data[i], i, data) + \"\";\n    if (node = nodeByKeyValue.get(keyValue)) {\n      update[i] = node;\n      node.__data__ = data[i];\n      nodeByKeyValue.delete(keyValue);\n    } else {\n      enter[i] = new EnterNode(parent, data[i]);\n    }\n  }\n\n  // Add any remaining nodes that were not bound to data to exit.\n  for (i = 0; i < groupLength; ++i) {\n    if ((node = group[i]) && (nodeByKeyValue.get(keyValues[i]) === node)) {\n      exit[i] = node;\n    }\n  }\n}\n\nfunction datum(node) {\n  return node.__data__;\n}\n\nexport default function(value, key) {\n  if (!arguments.length) return Array.from(this, datum);\n\n  var bind = key ? bindKey : bindIndex,\n      parents = this._parents,\n      groups = this._groups;\n\n  if (typeof value !== \"function\") value = constant(value);\n\n  for (var m = groups.length, update = new Array(m), enter = new Array(m), exit = new Array(m), j = 0; j < m; ++j) {\n    var parent = parents[j],\n        group = groups[j],\n        groupLength = group.length,\n        data = arraylike(value.call(parent, parent && parent.__data__, j, parents)),\n        dataLength = data.length,\n        enterGroup = enter[j] = new Array(dataLength),\n        updateGroup = update[j] = new Array(dataLength),\n        exitGroup = exit[j] = new Array(groupLength);\n\n    bind(parent, group, enterGroup, updateGroup, exitGroup, data, key);\n\n    // Now connect the enter nodes to their following update node, such that\n    // appendChild can insert the materialized enter node before this node,\n    // rather than at the end of the parent node.\n    for (var i0 = 0, i1 = 0, previous, next; i0 < dataLength; ++i0) {\n      if (previous = enterGroup[i0]) {\n        if (i0 >= i1) i1 = i0 + 1;\n        while (!(next = updateGroup[i1]) && ++i1 < dataLength);\n        previous._next = next || null;\n      }\n    }\n  }\n\n  update = new Selection(update, parents);\n  update._enter = enter;\n  update._exit = exit;\n  return update;\n}\n\n// Given some data, this returns an array-like view of it: an object that\n// exposes a length property and allows numeric indexing. Note that unlike\n// selectAll, this isnt worried about live collections because the resulting\n// array will only be used briefly while data is being bound. (It is possible to\n// cause the data to change while iterating by using a key function, but please\n// dont; wed rather avoid a gratuitous copy.)\nfunction arraylike(data) {\n  return typeof data === \"object\" && \"length\" in data\n    ? data // Array, TypedArray, NodeList, array-like\n    : Array.from(data); // Map, Set, iterable, string, or anything else\n}\n","import {Selection} from \"./index.js\";\n\nexport default function(compare) {\n  if (!compare) compare = ascending;\n\n  function compareNode(a, b) {\n    return a && b ? compare(a.__data__, b.__data__) : !a - !b;\n  }\n\n  for (var groups = this._groups, m = groups.length, sortgroups = new Array(m), j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, sortgroup = sortgroups[j] = new Array(n), node, i = 0; i < n; ++i) {\n      if (node = group[i]) {\n        sortgroup[i] = node;\n      }\n    }\n    sortgroup.sort(compareNode);\n  }\n\n  return new Selection(sortgroups, this._parents).order();\n}\n\nfunction ascending(a, b) {\n  return a < b ? -1 : a > b ? 1 : a >= b ? 0 : NaN;\n}\n","import namespace from \"../namespace.js\";\n\nfunction attrRemove(name) {\n  return function() {\n    this.removeAttribute(name);\n  };\n}\n\nfunction attrRemoveNS(fullname) {\n  return function() {\n    this.removeAttributeNS(fullname.space, fullname.local);\n  };\n}\n\nfunction attrConstant(name, value) {\n  return function() {\n    this.setAttribute(name, value);\n  };\n}\n\nfunction attrConstantNS(fullname, value) {\n  return function() {\n    this.setAttributeNS(fullname.space, fullname.local, value);\n  };\n}\n\nfunction attrFunction(name, value) {\n  return function() {\n    var v = value.apply(this, arguments);\n    if (v == null) this.removeAttribute(name);\n    else this.setAttribute(name, v);\n  };\n}\n\nfunction attrFunctionNS(fullname, value) {\n  return function() {\n    var v = value.apply(this, arguments);\n    if (v == null) this.removeAttributeNS(fullname.space, fullname.local);\n    else this.setAttributeNS(fullname.space, fullname.local, v);\n  };\n}\n\nexport default function(name, value) {\n  var fullname = namespace(name);\n\n  if (arguments.length < 2) {\n    var node = this.node();\n    return fullname.local\n        ? node.getAttributeNS(fullname.space, fullname.local)\n        : node.getAttribute(fullname);\n  }\n\n  return this.each((value == null\n      ? (fullname.local ? attrRemoveNS : attrRemove) : (typeof value === \"function\"\n      ? (fullname.local ? attrFunctionNS : attrFunction)\n      : (fullname.local ? attrConstantNS : attrConstant)))(fullname, value));\n}\n","export default function(node) {\n  return (node.ownerDocument && node.ownerDocument.defaultView) // node is a Node\n      || (node.document && node) // node is a Window\n      || node.defaultView; // node is a Document\n}\n","import defaultView from \"../window.js\";\n\nfunction styleRemove(name) {\n  return function() {\n    this.style.removeProperty(name);\n  };\n}\n\nfunction styleConstant(name, value, priority) {\n  return function() {\n    this.style.setProperty(name, value, priority);\n  };\n}\n\nfunction styleFunction(name, value, priority) {\n  return function() {\n    var v = value.apply(this, arguments);\n    if (v == null) this.style.removeProperty(name);\n    else this.style.setProperty(name, v, priority);\n  };\n}\n\nexport default function(name, value, priority) {\n  return arguments.length > 1\n      ? this.each((value == null\n            ? styleRemove : typeof value === \"function\"\n            ? styleFunction\n            : styleConstant)(name, value, priority == null ? \"\" : priority))\n      : styleValue(this.node(), name);\n}\n\nexport function styleValue(node, name) {\n  return node.style.getPropertyValue(name)\n      || defaultView(node).getComputedStyle(node, null).getPropertyValue(name);\n}\n","function propertyRemove(name) {\n  return function() {\n    delete this[name];\n  };\n}\n\nfunction propertyConstant(name, value) {\n  return function() {\n    this[name] = value;\n  };\n}\n\nfunction propertyFunction(name, value) {\n  return function() {\n    var v = value.apply(this, arguments);\n    if (v == null) delete this[name];\n    else this[name] = v;\n  };\n}\n\nexport default function(name, value) {\n  return arguments.length > 1\n      ? this.each((value == null\n          ? propertyRemove : typeof value === \"function\"\n          ? propertyFunction\n          : propertyConstant)(name, value))\n      : this.node()[name];\n}\n","function classArray(string) {\n  return string.trim().split(/^|\\s+/);\n}\n\nfunction classList(node) {\n  return node.classList || new ClassList(node);\n}\n\nfunction ClassList(node) {\n  this._node = node;\n  this._names = classArray(node.getAttribute(\"class\") || \"\");\n}\n\nClassList.prototype = {\n  add: function(name) {\n    var i = this._names.indexOf(name);\n    if (i < 0) {\n      this._names.push(name);\n      this._node.setAttribute(\"class\", this._names.join(\" \"));\n    }\n  },\n  remove: function(name) {\n    var i = this._names.indexOf(name);\n    if (i >= 0) {\n      this._names.splice(i, 1);\n      this._node.setAttribute(\"class\", this._names.join(\" \"));\n    }\n  },\n  contains: function(name) {\n    return this._names.indexOf(name) >= 0;\n  }\n};\n\nfunction classedAdd(node, names) {\n  var list = classList(node), i = -1, n = names.length;\n  while (++i < n) list.add(names[i]);\n}\n\nfunction classedRemove(node, names) {\n  var list = classList(node), i = -1, n = names.length;\n  while (++i < n) list.remove(names[i]);\n}\n\nfunction classedTrue(names) {\n  return function() {\n    classedAdd(this, names);\n  };\n}\n\nfunction classedFalse(names) {\n  return function() {\n    classedRemove(this, names);\n  };\n}\n\nfunction classedFunction(names, value) {\n  return function() {\n    (value.apply(this, arguments) ? classedAdd : classedRemove)(this, names);\n  };\n}\n\nexport default function(name, value) {\n  var names = classArray(name + \"\");\n\n  if (arguments.length < 2) {\n    var list = classList(this.node()), i = -1, n = names.length;\n    while (++i < n) if (!list.contains(names[i])) return false;\n    return true;\n  }\n\n  return this.each((typeof value === \"function\"\n      ? classedFunction : value\n      ? classedTrue\n      : classedFalse)(names, value));\n}\n","function textRemove() {\n  this.textContent = \"\";\n}\n\nfunction textConstant(value) {\n  return function() {\n    this.textContent = value;\n  };\n}\n\nfunction textFunction(value) {\n  return function() {\n    var v = value.apply(this, arguments);\n    this.textContent = v == null ? \"\" : v;\n  };\n}\n\nexport default function(value) {\n  return arguments.length\n      ? this.each(value == null\n          ? textRemove : (typeof value === \"function\"\n          ? textFunction\n          : textConstant)(value))\n      : this.node().textContent;\n}\n","function htmlRemove() {\n  this.innerHTML = \"\";\n}\n\nfunction htmlConstant(value) {\n  return function() {\n    this.innerHTML = value;\n  };\n}\n\nfunction htmlFunction(value) {\n  return function() {\n    var v = value.apply(this, arguments);\n    this.innerHTML = v == null ? \"\" : v;\n  };\n}\n\nexport default function(value) {\n  return arguments.length\n      ? this.each(value == null\n          ? htmlRemove : (typeof value === \"function\"\n          ? htmlFunction\n          : htmlConstant)(value))\n      : this.node().innerHTML;\n}\n","function raise() {\n  if (this.nextSibling) this.parentNode.appendChild(this);\n}\n\nexport default function() {\n  return this.each(raise);\n}\n","function lower() {\n  if (this.previousSibling) this.parentNode.insertBefore(this, this.parentNode.firstChild);\n}\n\nexport default function() {\n  return this.each(lower);\n}\n","import creator from \"../creator.js\";\nimport selector from \"../selector.js\";\n\nfunction constantNull() {\n  return null;\n}\n\nexport default function(name, before) {\n  var create = typeof name === \"function\" ? name : creator(name),\n      select = before == null ? constantNull : typeof before === \"function\" ? before : selector(before);\n  return this.select(function() {\n    return this.insertBefore(create.apply(this, arguments), select.apply(this, arguments) || null);\n  });\n}\n","function remove() {\n  var parent = this.parentNode;\n  if (parent) parent.removeChild(this);\n}\n\nexport default function() {\n  return this.each(remove);\n}\n","function selection_cloneShallow() {\n  var clone = this.cloneNode(false), parent = this.parentNode;\n  return parent ? parent.insertBefore(clone, this.nextSibling) : clone;\n}\n\nfunction selection_cloneDeep() {\n  var clone = this.cloneNode(true), parent = this.parentNode;\n  return parent ? parent.insertBefore(clone, this.nextSibling) : clone;\n}\n\nexport default function(deep) {\n  return this.select(deep ? selection_cloneDeep : selection_cloneShallow);\n}\n","function contextListener(listener) {\n  return function(event) {\n    listener.call(this, event, this.__data__);\n  };\n}\n\nfunction parseTypenames(typenames) {\n  return typenames.trim().split(/^|\\s+/).map(function(t) {\n    var name = \"\", i = t.indexOf(\".\");\n    if (i >= 0) name = t.slice(i + 1), t = t.slice(0, i);\n    return {type: t, name: name};\n  });\n}\n\nfunction onRemove(typename) {\n  return function() {\n    var on = this.__on;\n    if (!on) return;\n    for (var j = 0, i = -1, m = on.length, o; j < m; ++j) {\n      if (o = on[j], (!typename.type || o.type === typename.type) && o.name === typename.name) {\n        this.removeEventListener(o.type, o.listener, o.options);\n      } else {\n        on[++i] = o;\n      }\n    }\n    if (++i) on.length = i;\n    else delete this.__on;\n  };\n}\n\nfunction onAdd(typename, value, options) {\n  return function() {\n    var on = this.__on, o, listener = contextListener(value);\n    if (on) for (var j = 0, m = on.length; j < m; ++j) {\n      if ((o = on[j]).type === typename.type && o.name === typename.name) {\n        this.removeEventListener(o.type, o.listener, o.options);\n        this.addEventListener(o.type, o.listener = listener, o.options = options);\n        o.value = value;\n        return;\n      }\n    }\n    this.addEventListener(typename.type, listener, options);\n    o = {type: typename.type, name: typename.name, value: value, listener: listener, options: options};\n    if (!on) this.__on = [o];\n    else on.push(o);\n  };\n}\n\nexport default function(typename, value, options) {\n  var typenames = parseTypenames(typename + \"\"), i, n = typenames.length, t;\n\n  if (arguments.length < 2) {\n    var on = this.node().__on;\n    if (on) for (var j = 0, m = on.length, o; j < m; ++j) {\n      for (i = 0, o = on[j]; i < n; ++i) {\n        if ((t = typenames[i]).type === o.type && t.name === o.name) {\n          return o.value;\n        }\n      }\n    }\n    return;\n  }\n\n  on = value ? onAdd : onRemove;\n  for (i = 0; i < n; ++i) this.each(on(typenames[i], value, options));\n  return this;\n}\n","import defaultView from \"../window.js\";\n\nfunction dispatchEvent(node, type, params) {\n  var window = defaultView(node),\n      event = window.CustomEvent;\n\n  if (typeof event === \"function\") {\n    event = new event(type, params);\n  } else {\n    event = window.document.createEvent(\"Event\");\n    if (params) event.initEvent(type, params.bubbles, params.cancelable), event.detail = params.detail;\n    else event.initEvent(type, false, false);\n  }\n\n  node.dispatchEvent(event);\n}\n\nfunction dispatchConstant(type, params) {\n  return function() {\n    return dispatchEvent(this, type, params);\n  };\n}\n\nfunction dispatchFunction(type, params) {\n  return function() {\n    return dispatchEvent(this, type, params.apply(this, arguments));\n  };\n}\n\nexport default function(type, params) {\n  return this.each((typeof params === \"function\"\n      ? dispatchFunction\n      : dispatchConstant)(type, params));\n}\n","import selection_select from \"./select.js\";\nimport selection_selectAll from \"./selectAll.js\";\nimport selection_selectChild from \"./selectChild.js\";\nimport selection_selectChildren from \"./selectChildren.js\";\nimport selection_filter from \"./filter.js\";\nimport selection_data from \"./data.js\";\nimport selection_enter from \"./enter.js\";\nimport selection_exit from \"./exit.js\";\nimport selection_join from \"./join.js\";\nimport selection_merge from \"./merge.js\";\nimport selection_order from \"./order.js\";\nimport selection_sort from \"./sort.js\";\nimport selection_call from \"./call.js\";\nimport selection_nodes from \"./nodes.js\";\nimport selection_node from \"./node.js\";\nimport selection_size from \"./size.js\";\nimport selection_empty from \"./empty.js\";\nimport selection_each from \"./each.js\";\nimport selection_attr from \"./attr.js\";\nimport selection_style from \"./style.js\";\nimport selection_property from \"./property.js\";\nimport selection_classed from \"./classed.js\";\nimport selection_text from \"./text.js\";\nimport selection_html from \"./html.js\";\nimport selection_raise from \"./raise.js\";\nimport selection_lower from \"./lower.js\";\nimport selection_append from \"./append.js\";\nimport selection_insert from \"./insert.js\";\nimport selection_remove from \"./remove.js\";\nimport selection_clone from \"./clone.js\";\nimport selection_datum from \"./datum.js\";\nimport selection_on from \"./on.js\";\nimport selection_dispatch from \"./dispatch.js\";\nimport selection_iterator from \"./iterator.js\";\n\nexport var root = [null];\n\nexport function Selection(groups, parents) {\n  this._groups = groups;\n  this._parents = parents;\n}\n\nfunction selection() {\n  return new Selection([[document.documentElement]], root);\n}\n\nfunction selection_selection() {\n  return this;\n}\n\nSelection.prototype = selection.prototype = {\n  constructor: Selection,\n  select: selection_select,\n  selectAll: selection_selectAll,\n  selectChild: selection_selectChild,\n  selectChildren: selection_selectChildren,\n  filter: selection_filter,\n  data: selection_data,\n  enter: selection_enter,\n  exit: selection_exit,\n  join: selection_join,\n  merge: selection_merge,\n  selection: selection_selection,\n  order: selection_order,\n  sort: selection_sort,\n  call: selection_call,\n  nodes: selection_nodes,\n  node: selection_node,\n  size: selection_size,\n  empty: selection_empty,\n  each: selection_each,\n  attr: selection_attr,\n  style: selection_style,\n  property: selection_property,\n  classed: selection_classed,\n  text: selection_text,\n  html: selection_html,\n  raise: selection_raise,\n  lower: selection_lower,\n  append: selection_append,\n  insert: selection_insert,\n  remove: selection_remove,\n  clone: selection_clone,\n  datum: selection_datum,\n  on: selection_on,\n  dispatch: selection_dispatch,\n  [Symbol.iterator]: selection_iterator\n};\n\nexport default selection;\n","import {Selection, root} from \"./selection/index.js\";\n\nexport default function(selector) {\n  return typeof selector === \"string\"\n      ? new Selection([[document.querySelector(selector)]], [document.documentElement])\n      : new Selection([[selector]], root);\n}\n","import array from \"./array.js\";\nimport {Selection, root} from \"./selection/index.js\";\n\nexport default function(selector) {\n  return typeof selector === \"string\"\n      ? new Selection([document.querySelectorAll(selector)], [document.documentElement])\n      : new Selection([array(selector)], root);\n}\n","export default function(constructor, factory, prototype) {\n  constructor.prototype = factory.prototype = prototype;\n  prototype.constructor = constructor;\n}\n\nexport function extend(parent, definition) {\n  var prototype = Object.create(parent.prototype);\n  for (var key in definition) prototype[key] = definition[key];\n  return prototype;\n}\n","import define, {extend} from \"./define.js\";\n\nexport function Color() {}\n\nexport var darker = 0.7;\nexport var brighter = 1 / darker;\n\nvar reI = \"\\\\s*([+-]?\\\\d+)\\\\s*\",\n    reN = \"\\\\s*([+-]?(?:\\\\d*\\\\.)?\\\\d+(?:[eE][+-]?\\\\d+)?)\\\\s*\",\n    reP = \"\\\\s*([+-]?(?:\\\\d*\\\\.)?\\\\d+(?:[eE][+-]?\\\\d+)?)%\\\\s*\",\n    reHex = /^#([0-9a-f]{3,8})$/,\n    reRgbInteger = new RegExp(`^rgb\\\\(${reI},${reI},${reI}\\\\)$`),\n    reRgbPercent = new RegExp(`^rgb\\\\(${reP},${reP},${reP}\\\\)$`),\n    reRgbaInteger = new RegExp(`^rgba\\\\(${reI},${reI},${reI},${reN}\\\\)$`),\n    reRgbaPercent = new RegExp(`^rgba\\\\(${reP},${reP},${reP},${reN}\\\\)$`),\n    reHslPercent = new RegExp(`^hsl\\\\(${reN},${reP},${reP}\\\\)$`),\n    reHslaPercent = new RegExp(`^hsla\\\\(${reN},${reP},${reP},${reN}\\\\)$`);\n\nvar named = {\n  aliceblue: 0xf0f8ff,\n  antiquewhite: 0xfaebd7,\n  aqua: 0x00ffff,\n  aquamarine: 0x7fffd4,\n  azure: 0xf0ffff,\n  beige: 0xf5f5dc,\n  bisque: 0xffe4c4,\n  black: 0x000000,\n  blanchedalmond: 0xffebcd,\n  blue: 0x0000ff,\n  blueviolet: 0x8a2be2,\n  brown: 0xa52a2a,\n  burlywood: 0xdeb887,\n  cadetblue: 0x5f9ea0,\n  chartreuse: 0x7fff00,\n  chocolate: 0xd2691e,\n  coral: 0xff7f50,\n  cornflowerblue: 0x6495ed,\n  cornsilk: 0xfff8dc,\n  crimson: 0xdc143c,\n  cyan: 0x00ffff,\n  darkblue: 0x00008b,\n  darkcyan: 0x008b8b,\n  darkgoldenrod: 0xb8860b,\n  darkgray: 0xa9a9a9,\n  darkgreen: 0x006400,\n  darkgrey: 0xa9a9a9,\n  darkkhaki: 0xbdb76b,\n  darkmagenta: 0x8b008b,\n  darkolivegreen: 0x556b2f,\n  darkorange: 0xff8c00,\n  darkorchid: 0x9932cc,\n  darkred: 0x8b0000,\n  darksalmon: 0xe9967a,\n  darkseagreen: 0x8fbc8f,\n  darkslateblue: 0x483d8b,\n  darkslategray: 0x2f4f4f,\n  darkslategrey: 0x2f4f4f,\n  darkturquoise: 0x00ced1,\n  darkviolet: 0x9400d3,\n  deeppink: 0xff1493,\n  deepskyblue: 0x00bfff,\n  dimgray: 0x696969,\n  dimgrey: 0x696969,\n  dodgerblue: 0x1e90ff,\n  firebrick: 0xb22222,\n  floralwhite: 0xfffaf0,\n  forestgreen: 0x228b22,\n  fuchsia: 0xff00ff,\n  gainsboro: 0xdcdcdc,\n  ghostwhite: 0xf8f8ff,\n  gold: 0xffd700,\n  goldenrod: 0xdaa520,\n  gray: 0x808080,\n  green: 0x008000,\n  greenyellow: 0xadff2f,\n  grey: 0x808080,\n  honeydew: 0xf0fff0,\n  hotpink: 0xff69b4,\n  indianred: 0xcd5c5c,\n  indigo: 0x4b0082,\n  ivory: 0xfffff0,\n  khaki: 0xf0e68c,\n  lavender: 0xe6e6fa,\n  lavenderblush: 0xfff0f5,\n  lawngreen: 0x7cfc00,\n  lemonchiffon: 0xfffacd,\n  lightblue: 0xadd8e6,\n  lightcoral: 0xf08080,\n  lightcyan: 0xe0ffff,\n  lightgoldenrodyellow: 0xfafad2,\n  lightgray: 0xd3d3d3,\n  lightgreen: 0x90ee90,\n  lightgrey: 0xd3d3d3,\n  lightpink: 0xffb6c1,\n  lightsalmon: 0xffa07a,\n  lightseagreen: 0x20b2aa,\n  lightskyblue: 0x87cefa,\n  lightslategray: 0x778899,\n  lightslategrey: 0x778899,\n  lightsteelblue: 0xb0c4de,\n  lightyellow: 0xffffe0,\n  lime: 0x00ff00,\n  limegreen: 0x32cd32,\n  linen: 0xfaf0e6,\n  magenta: 0xff00ff,\n  maroon: 0x800000,\n  mediumaquamarine: 0x66cdaa,\n  mediumblue: 0x0000cd,\n  mediumorchid: 0xba55d3,\n  mediumpurple: 0x9370db,\n  mediumseagreen: 0x3cb371,\n  mediumslateblue: 0x7b68ee,\n  mediumspringgreen: 0x00fa9a,\n  mediumturquoise: 0x48d1cc,\n  mediumvioletred: 0xc71585,\n  midnightblue: 0x191970,\n  mintcream: 0xf5fffa,\n  mistyrose: 0xffe4e1,\n  moccasin: 0xffe4b5,\n  navajowhite: 0xffdead,\n  navy: 0x000080,\n  oldlace: 0xfdf5e6,\n  olive: 0x808000,\n  olivedrab: 0x6b8e23,\n  orange: 0xffa500,\n  orangered: 0xff4500,\n  orchid: 0xda70d6,\n  palegoldenrod: 0xeee8aa,\n  palegreen: 0x98fb98,\n  paleturquoise: 0xafeeee,\n  palevioletred: 0xdb7093,\n  papayawhip: 0xffefd5,\n  peachpuff: 0xffdab9,\n  peru: 0xcd853f,\n  pink: 0xffc0cb,\n  plum: 0xdda0dd,\n  powderblue: 0xb0e0e6,\n  purple: 0x800080,\n  rebeccapurple: 0x663399,\n  red: 0xff0000,\n  rosybrown: 0xbc8f8f,\n  royalblue: 0x4169e1,\n  saddlebrown: 0x8b4513,\n  salmon: 0xfa8072,\n  sandybrown: 0xf4a460,\n  seagreen: 0x2e8b57,\n  seashell: 0xfff5ee,\n  sienna: 0xa0522d,\n  silver: 0xc0c0c0,\n  skyblue: 0x87ceeb,\n  slateblue: 0x6a5acd,\n  slategray: 0x708090,\n  slategrey: 0x708090,\n  snow: 0xfffafa,\n  springgreen: 0x00ff7f,\n  steelblue: 0x4682b4,\n  tan: 0xd2b48c,\n  teal: 0x008080,\n  thistle: 0xd8bfd8,\n  tomato: 0xff6347,\n  turquoise: 0x40e0d0,\n  violet: 0xee82ee,\n  wheat: 0xf5deb3,\n  white: 0xffffff,\n  whitesmoke: 0xf5f5f5,\n  yellow: 0xffff00,\n  yellowgreen: 0x9acd32\n};\n\ndefine(Color, color, {\n  copy(channels) {\n    return Object.assign(new this.constructor, this, channels);\n  },\n  displayable() {\n    return this.rgb().displayable();\n  },\n  hex: color_formatHex, // Deprecated! Use color.formatHex.\n  formatHex: color_formatHex,\n  formatHex8: color_formatHex8,\n  formatHsl: color_formatHsl,\n  formatRgb: color_formatRgb,\n  toString: color_formatRgb\n});\n\nfunction color_formatHex() {\n  return this.rgb().formatHex();\n}\n\nfunction color_formatHex8() {\n  return this.rgb().formatHex8();\n}\n\nfunction color_formatHsl() {\n  return hslConvert(this).formatHsl();\n}\n\nfunction color_formatRgb() {\n  return this.rgb().formatRgb();\n}\n\nexport default function color(format) {\n  var m, l;\n  format = (format + \"\").trim().toLowerCase();\n  return (m = reHex.exec(format)) ? (l = m[1].length, m = parseInt(m[1], 16), l === 6 ? rgbn(m) // #ff0000\n      : l === 3 ? new Rgb((m >> 8 & 0xf) | (m >> 4 & 0xf0), (m >> 4 & 0xf) | (m & 0xf0), ((m & 0xf) << 4) | (m & 0xf), 1) // #f00\n      : l === 8 ? rgba(m >> 24 & 0xff, m >> 16 & 0xff, m >> 8 & 0xff, (m & 0xff) / 0xff) // #ff000000\n      : l === 4 ? rgba((m >> 12 & 0xf) | (m >> 8 & 0xf0), (m >> 8 & 0xf) | (m >> 4 & 0xf0), (m >> 4 & 0xf) | (m & 0xf0), (((m & 0xf) << 4) | (m & 0xf)) / 0xff) // #f000\n      : null) // invalid hex\n      : (m = reRgbInteger.exec(format)) ? new Rgb(m[1], m[2], m[3], 1) // rgb(255, 0, 0)\n      : (m = reRgbPercent.exec(format)) ? new Rgb(m[1] * 255 / 100, m[2] * 255 / 100, m[3] * 255 / 100, 1) // rgb(100%, 0%, 0%)\n      : (m = reRgbaInteger.exec(format)) ? rgba(m[1], m[2], m[3], m[4]) // rgba(255, 0, 0, 1)\n      : (m = reRgbaPercent.exec(format)) ? rgba(m[1] * 255 / 100, m[2] * 255 / 100, m[3] * 255 / 100, m[4]) // rgb(100%, 0%, 0%, 1)\n      : (m = reHslPercent.exec(format)) ? hsla(m[1], m[2] / 100, m[3] / 100, 1) // hsl(120, 50%, 50%)\n      : (m = reHslaPercent.exec(format)) ? hsla(m[1], m[2] / 100, m[3] / 100, m[4]) // hsla(120, 50%, 50%, 1)\n      : named.hasOwnProperty(format) ? rgbn(named[format]) // eslint-disable-line no-prototype-builtins\n      : format === \"transparent\" ? new Rgb(NaN, NaN, NaN, 0)\n      : null;\n}\n\nfunction rgbn(n) {\n  return new Rgb(n >> 16 & 0xff, n >> 8 & 0xff, n & 0xff, 1);\n}\n\nfunction rgba(r, g, b, a) {\n  if (a <= 0) r = g = b = NaN;\n  return new Rgb(r, g, b, a);\n}\n\nexport function rgbConvert(o) {\n  if (!(o instanceof Color)) o = color(o);\n  if (!o) return new Rgb;\n  o = o.rgb();\n  return new Rgb(o.r, o.g, o.b, o.opacity);\n}\n\nexport function rgb(r, g, b, opacity) {\n  return arguments.length === 1 ? rgbConvert(r) : new Rgb(r, g, b, opacity == null ? 1 : opacity);\n}\n\nexport function Rgb(r, g, b, opacity) {\n  this.r = +r;\n  this.g = +g;\n  this.b = +b;\n  this.opacity = +opacity;\n}\n\ndefine(Rgb, rgb, extend(Color, {\n  brighter(k) {\n    k = k == null ? brighter : Math.pow(brighter, k);\n    return new Rgb(this.r * k, this.g * k, this.b * k, this.opacity);\n  },\n  darker(k) {\n    k = k == null ? darker : Math.pow(darker, k);\n    return new Rgb(this.r * k, this.g * k, this.b * k, this.opacity);\n  },\n  rgb() {\n    return this;\n  },\n  clamp() {\n    return new Rgb(clampi(this.r), clampi(this.g), clampi(this.b), clampa(this.opacity));\n  },\n  displayable() {\n    return (-0.5 <= this.r && this.r < 255.5)\n        && (-0.5 <= this.g && this.g < 255.5)\n        && (-0.5 <= this.b && this.b < 255.5)\n        && (0 <= this.opacity && this.opacity <= 1);\n  },\n  hex: rgb_formatHex, // Deprecated! Use color.formatHex.\n  formatHex: rgb_formatHex,\n  formatHex8: rgb_formatHex8,\n  formatRgb: rgb_formatRgb,\n  toString: rgb_formatRgb\n}));\n\nfunction rgb_formatHex() {\n  return `#${hex(this.r)}${hex(this.g)}${hex(this.b)}`;\n}\n\nfunction rgb_formatHex8() {\n  return `#${hex(this.r)}${hex(this.g)}${hex(this.b)}${hex((isNaN(this.opacity) ? 1 : this.opacity) * 255)}`;\n}\n\nfunction rgb_formatRgb() {\n  const a = clampa(this.opacity);\n  return `${a === 1 ? \"rgb(\" : \"rgba(\"}${clampi(this.r)}, ${clampi(this.g)}, ${clampi(this.b)}${a === 1 ? \")\" : `, ${a})`}`;\n}\n\nfunction clampa(opacity) {\n  return isNaN(opacity) ? 1 : Math.max(0, Math.min(1, opacity));\n}\n\nfunction clampi(value) {\n  return Math.max(0, Math.min(255, Math.round(value) || 0));\n}\n\nfunction hex(value) {\n  value = clampi(value);\n  return (value < 16 ? \"0\" : \"\") + value.toString(16);\n}\n\nfunction hsla(h, s, l, a) {\n  if (a <= 0) h = s = l = NaN;\n  else if (l <= 0 || l >= 1) h = s = NaN;\n  else if (s <= 0) h = NaN;\n  return new Hsl(h, s, l, a);\n}\n\nexport function hslConvert(o) {\n  if (o instanceof Hsl) return new Hsl(o.h, o.s, o.l, o.opacity);\n  if (!(o instanceof Color)) o = color(o);\n  if (!o) return new Hsl;\n  if (o instanceof Hsl) return o;\n  o = o.rgb();\n  var r = o.r / 255,\n      g = o.g / 255,\n      b = o.b / 255,\n      min = Math.min(r, g, b),\n      max = Math.max(r, g, b),\n      h = NaN,\n      s = max - min,\n      l = (max + min) / 2;\n  if (s) {\n    if (r === max) h = (g - b) / s + (g < b) * 6;\n    else if (g === max) h = (b - r) / s + 2;\n    else h = (r - g) / s + 4;\n    s /= l < 0.5 ? max + min : 2 - max - min;\n    h *= 60;\n  } else {\n    s = l > 0 && l < 1 ? 0 : h;\n  }\n  return new Hsl(h, s, l, o.opacity);\n}\n\nexport function hsl(h, s, l, opacity) {\n  return arguments.length === 1 ? hslConvert(h) : new Hsl(h, s, l, opacity == null ? 1 : opacity);\n}\n\nfunction Hsl(h, s, l, opacity) {\n  this.h = +h;\n  this.s = +s;\n  this.l = +l;\n  this.opacity = +opacity;\n}\n\ndefine(Hsl, hsl, extend(Color, {\n  brighter(k) {\n    k = k == null ? brighter : Math.pow(brighter, k);\n    return new Hsl(this.h, this.s, this.l * k, this.opacity);\n  },\n  darker(k) {\n    k = k == null ? darker : Math.pow(darker, k);\n    return new Hsl(this.h, this.s, this.l * k, this.opacity);\n  },\n  rgb() {\n    var h = this.h % 360 + (this.h < 0) * 360,\n        s = isNaN(h) || isNaN(this.s) ? 0 : this.s,\n        l = this.l,\n        m2 = l + (l < 0.5 ? l : 1 - l) * s,\n        m1 = 2 * l - m2;\n    return new Rgb(\n      hsl2rgb(h >= 240 ? h - 240 : h + 120, m1, m2),\n      hsl2rgb(h, m1, m2),\n      hsl2rgb(h < 120 ? h + 240 : h - 120, m1, m2),\n      this.opacity\n    );\n  },\n  clamp() {\n    return new Hsl(clamph(this.h), clampt(this.s), clampt(this.l), clampa(this.opacity));\n  },\n  displayable() {\n    return (0 <= this.s && this.s <= 1 || isNaN(this.s))\n        && (0 <= this.l && this.l <= 1)\n        && (0 <= this.opacity && this.opacity <= 1);\n  },\n  formatHsl() {\n    const a = clampa(this.opacity);\n    return `${a === 1 ? \"hsl(\" : \"hsla(\"}${clamph(this.h)}, ${clampt(this.s) * 100}%, ${clampt(this.l) * 100}%${a === 1 ? \")\" : `, ${a})`}`;\n  }\n}));\n\nfunction clamph(value) {\n  value = (value || 0) % 360;\n  return value < 0 ? value + 360 : value;\n}\n\nfunction clampt(value) {\n  return Math.max(0, Math.min(1, value || 0));\n}\n\n/* From FvD 13.37, CSS Color Module Level 3 */\nfunction hsl2rgb(h, m1, m2) {\n  return (h < 60 ? m1 + (m2 - m1) * h / 60\n      : h < 180 ? m2\n      : h < 240 ? m1 + (m2 - m1) * (240 - h) / 60\n      : m1) * 255;\n}\n","import {Selection} from \"./index.js\";\nimport selector from \"../selector.js\";\n\nexport default function(select) {\n  if (typeof select !== \"function\") select = selector(select);\n\n  for (var groups = this._groups, m = groups.length, subgroups = new Array(m), j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, subgroup = subgroups[j] = new Array(n), node, subnode, i = 0; i < n; ++i) {\n      if ((node = group[i]) && (subnode = select.call(node, node.__data__, i, group))) {\n        if (\"__data__\" in node) subnode.__data__ = node.__data__;\n        subgroup[i] = subnode;\n      }\n    }\n  }\n\n  return new Selection(subgroups, this._parents);\n}\n","import {Selection} from \"./index.js\";\nimport array from \"../array.js\";\nimport selectorAll from \"../selectorAll.js\";\n\nfunction arrayAll(select) {\n  return function() {\n    return array(select.apply(this, arguments));\n  };\n}\n\nexport default function(select) {\n  if (typeof select === \"function\") select = arrayAll(select);\n  else select = selectorAll(select);\n\n  for (var groups = this._groups, m = groups.length, subgroups = [], parents = [], j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, node, i = 0; i < n; ++i) {\n      if (node = group[i]) {\n        subgroups.push(select.call(node, node.__data__, i, group));\n        parents.push(node);\n      }\n    }\n  }\n\n  return new Selection(subgroups, parents);\n}\n","import {Selection} from \"./index.js\";\nimport matcher from \"../matcher.js\";\n\nexport default function(match) {\n  if (typeof match !== \"function\") match = matcher(match);\n\n  for (var groups = this._groups, m = groups.length, subgroups = new Array(m), j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, subgroup = subgroups[j] = [], node, i = 0; i < n; ++i) {\n      if ((node = group[i]) && match.call(node, node.__data__, i, group)) {\n        subgroup.push(node);\n      }\n    }\n  }\n\n  return new Selection(subgroups, this._parents);\n}\n","export default function(x) {\n  return function() {\n    return x;\n  };\n}\n","import sparse from \"./sparse.js\";\nimport {Selection} from \"./index.js\";\n\nexport default function() {\n  return new Selection(this._exit || this._groups.map(sparse), this._parents);\n}\n","export default function(onenter, onupdate, onexit) {\n  var enter = this.enter(), update = this, exit = this.exit();\n  if (typeof onenter === \"function\") {\n    enter = onenter(enter);\n    if (enter) enter = enter.selection();\n  } else {\n    enter = enter.append(onenter + \"\");\n  }\n  if (onupdate != null) {\n    update = onupdate(update);\n    if (update) update = update.selection();\n  }\n  if (onexit == null) exit.remove(); else onexit(exit);\n  return enter && update ? enter.merge(update).order() : update;\n}\n","import {Selection} from \"./index.js\";\n\nexport default function(context) {\n  var selection = context.selection ? context.selection() : context;\n\n  for (var groups0 = this._groups, groups1 = selection._groups, m0 = groups0.length, m1 = groups1.length, m = Math.min(m0, m1), merges = new Array(m0), j = 0; j < m; ++j) {\n    for (var group0 = groups0[j], group1 = groups1[j], n = group0.length, merge = merges[j] = new Array(n), node, i = 0; i < n; ++i) {\n      if (node = group0[i] || group1[i]) {\n        merge[i] = node;\n      }\n    }\n  }\n\n  for (; j < m0; ++j) {\n    merges[j] = groups0[j];\n  }\n\n  return new Selection(merges, this._parents);\n}\n","export default function() {\n\n  for (var groups = this._groups, j = -1, m = groups.length; ++j < m;) {\n    for (var group = groups[j], i = group.length - 1, next = group[i], node; --i >= 0;) {\n      if (node = group[i]) {\n        if (next && node.compareDocumentPosition(next) ^ 4) next.parentNode.insertBefore(node, next);\n        next = node;\n      }\n    }\n  }\n\n  return this;\n}\n","export default function() {\n  var callback = arguments[0];\n  arguments[0] = this;\n  callback.apply(null, arguments);\n  return this;\n}\n","export default function() {\n  return Array.from(this);\n}\n","export default function() {\n\n  for (var groups = this._groups, j = 0, m = groups.length; j < m; ++j) {\n    for (var group = groups[j], i = 0, n = group.length; i < n; ++i) {\n      var node = group[i];\n      if (node) return node;\n    }\n  }\n\n  return null;\n}\n","export default function() {\n  let size = 0;\n  for (const node of this) ++size; // eslint-disable-line no-unused-vars\n  return size;\n}\n","export default function() {\n  return !this.node();\n}\n","export default function(callback) {\n\n  for (var groups = this._groups, j = 0, m = groups.length; j < m; ++j) {\n    for (var group = groups[j], i = 0, n = group.length, node; i < n; ++i) {\n      if (node = group[i]) callback.call(node, node.__data__, i, group);\n    }\n  }\n\n  return this;\n}\n","import creator from \"../creator.js\";\n\nexport default function(name) {\n  var create = typeof name === \"function\" ? name : creator(name);\n  return this.select(function() {\n    return this.appendChild(create.apply(this, arguments));\n  });\n}\n","export default function(value) {\n  return arguments.length\n      ? this.property(\"__data__\", value)\n      : this.node().__data__;\n}\n","export default function*() {\n  for (var groups = this._groups, j = 0, m = groups.length; j < m; ++j) {\n    for (var group = groups[j], i = 0, n = group.length, node; i < n; ++i) {\n      if (node = group[i]) yield node;\n    }\n  }\n}\n","export default x => () => x;\n","import constant from \"./constant.js\";\n\nfunction linear(a, d) {\n  return function(t) {\n    return a + t * d;\n  };\n}\n\nfunction exponential(a, b, y) {\n  return a = Math.pow(a, y), b = Math.pow(b, y) - a, y = 1 / y, function(t) {\n    return Math.pow(a + t * b, y);\n  };\n}\n\nexport function hue(a, b) {\n  var d = b - a;\n  return d ? linear(a, d > 180 || d < -180 ? d - 360 * Math.round(d / 360) : d) : constant(isNaN(a) ? b : a);\n}\n\nexport function gamma(y) {\n  return (y = +y) === 1 ? nogamma : function(a, b) {\n    return b - a ? exponential(a, b, y) : constant(isNaN(a) ? b : a);\n  };\n}\n\nexport default function nogamma(a, b) {\n  var d = b - a;\n  return d ? linear(a, d) : constant(isNaN(a) ? b : a);\n}\n","import {rgb as colorRgb} from \"d3-color\";\nimport basis from \"./basis.js\";\nimport basisClosed from \"./basisClosed.js\";\nimport nogamma, {gamma} from \"./color.js\";\n\nexport default (function rgbGamma(y) {\n  var color = gamma(y);\n\n  function rgb(start, end) {\n    var r = color((start = colorRgb(start)).r, (end = colorRgb(end)).r),\n        g = color(start.g, end.g),\n        b = color(start.b, end.b),\n        opacity = nogamma(start.opacity, end.opacity);\n    return function(t) {\n      start.r = r(t);\n      start.g = g(t);\n      start.b = b(t);\n      start.opacity = opacity(t);\n      return start + \"\";\n    };\n  }\n\n  rgb.gamma = rgbGamma;\n\n  return rgb;\n})(1);\n\nfunction rgbSpline(spline) {\n  return function(colors) {\n    var n = colors.length,\n        r = new Array(n),\n        g = new Array(n),\n        b = new Array(n),\n        i, color;\n    for (i = 0; i < n; ++i) {\n      color = colorRgb(colors[i]);\n      r[i] = color.r || 0;\n      g[i] = color.g || 0;\n      b[i] = color.b || 0;\n    }\n    r = spline(r);\n    g = spline(g);\n    b = spline(b);\n    color.opacity = 1;\n    return function(t) {\n      color.r = r(t);\n      color.g = g(t);\n      color.b = b(t);\n      return color + \"\";\n    };\n  };\n}\n\nexport var rgbBasis = rgbSpline(basis);\nexport var rgbBasisClosed = rgbSpline(basisClosed);\n","export default function(a, b) {\n  if (!b) b = [];\n  var n = a ? Math.min(b.length, a.length) : 0,\n      c = b.slice(),\n      i;\n  return function(t) {\n    for (i = 0; i < n; ++i) c[i] = a[i] * (1 - t) + b[i] * t;\n    return c;\n  };\n}\n\nexport function isNumberArray(x) {\n  return ArrayBuffer.isView(x) && !(x instanceof DataView);\n}\n","import value from \"./value.js\";\nimport numberArray, {isNumberArray} from \"./numberArray.js\";\n\nexport default function(a, b) {\n  return (isNumberArray(b) ? numberArray : genericArray)(a, b);\n}\n\nexport function genericArray(a, b) {\n  var nb = b ? b.length : 0,\n      na = a ? Math.min(nb, a.length) : 0,\n      x = new Array(na),\n      c = new Array(nb),\n      i;\n\n  for (i = 0; i < na; ++i) x[i] = value(a[i], b[i]);\n  for (; i < nb; ++i) c[i] = b[i];\n\n  return function(t) {\n    for (i = 0; i < na; ++i) c[i] = x[i](t);\n    return c;\n  };\n}\n","export default function(a, b) {\n  var d = new Date;\n  return a = +a, b = +b, function(t) {\n    return d.setTime(a * (1 - t) + b * t), d;\n  };\n}\n","export default function(a, b) {\n  return a = +a, b = +b, function(t) {\n    return a * (1 - t) + b * t;\n  };\n}\n","import value from \"./value.js\";\n\nexport default function(a, b) {\n  var i = {},\n      c = {},\n      k;\n\n  if (a === null || typeof a !== \"object\") a = {};\n  if (b === null || typeof b !== \"object\") b = {};\n\n  for (k in b) {\n    if (k in a) {\n      i[k] = value(a[k], b[k]);\n    } else {\n      c[k] = b[k];\n    }\n  }\n\n  return function(t) {\n    for (k in i) c[k] = i[k](t);\n    return c;\n  };\n}\n","import number from \"./number.js\";\n\nvar reA = /[-+]?(?:\\d+\\.?\\d*|\\.?\\d+)(?:[eE][-+]?\\d+)?/g,\n    reB = new RegExp(reA.source, \"g\");\n\nfunction zero(b) {\n  return function() {\n    return b;\n  };\n}\n\nfunction one(b) {\n  return function(t) {\n    return b(t) + \"\";\n  };\n}\n\nexport default function(a, b) {\n  var bi = reA.lastIndex = reB.lastIndex = 0, // scan index for next number in b\n      am, // current match in a\n      bm, // current match in b\n      bs, // string preceding current number in b, if any\n      i = -1, // index in s\n      s = [], // string constants and placeholders\n      q = []; // number interpolators\n\n  // Coerce inputs to strings.\n  a = a + \"\", b = b + \"\";\n\n  // Interpolate pairs of numbers in a & b.\n  while ((am = reA.exec(a))\n      && (bm = reB.exec(b))) {\n    if ((bs = bm.index) > bi) { // a string precedes the next number in b\n      bs = b.slice(bi, bs);\n      if (s[i]) s[i] += bs; // coalesce with previous string\n      else s[++i] = bs;\n    }\n    if ((am = am[0]) === (bm = bm[0])) { // numbers in a & b match\n      if (s[i]) s[i] += bm; // coalesce with previous string\n      else s[++i] = bm;\n    } else { // interpolate non-matching numbers\n      s[++i] = null;\n      q.push({i: i, x: number(am, bm)});\n    }\n    bi = reB.lastIndex;\n  }\n\n  // Add remains of b.\n  if (bi < b.length) {\n    bs = b.slice(bi);\n    if (s[i]) s[i] += bs; // coalesce with previous string\n    else s[++i] = bs;\n  }\n\n  // Special optimization for only a single match.\n  // Otherwise, interpolate each of the numbers and rejoin the string.\n  return s.length < 2 ? (q[0]\n      ? one(q[0].x)\n      : zero(b))\n      : (b = q.length, function(t) {\n          for (var i = 0, o; i < b; ++i) s[(o = q[i]).i] = o.x(t);\n          return s.join(\"\");\n        });\n}\n","import {color} from \"d3-color\";\nimport rgb from \"./rgb.js\";\nimport {genericArray} from \"./array.js\";\nimport date from \"./date.js\";\nimport number from \"./number.js\";\nimport object from \"./object.js\";\nimport string from \"./string.js\";\nimport constant from \"./constant.js\";\nimport numberArray, {isNumberArray} from \"./numberArray.js\";\n\nexport default function(a, b) {\n  var t = typeof b, c;\n  return b == null || t === \"boolean\" ? constant(b)\n      : (t === \"number\" ? number\n      : t === \"string\" ? ((c = color(b)) ? (b = c, rgb) : string)\n      : b instanceof color ? rgb\n      : b instanceof Date ? date\n      : isNumberArray(b) ? numberArray\n      : Array.isArray(b) ? genericArray\n      : typeof b.valueOf !== \"function\" && typeof b.toString !== \"function\" || isNaN(b) ? object\n      : number)(a, b);\n}\n","export default function(a, b) {\n  return a = +a, b = +b, function(t) {\n    return Math.round(a * (1 - t) + b * t);\n  };\n}\n","var degrees = 180 / Math.PI;\n\nexport var identity = {\n  translateX: 0,\n  translateY: 0,\n  rotate: 0,\n  skewX: 0,\n  scaleX: 1,\n  scaleY: 1\n};\n\nexport default function(a, b, c, d, e, f) {\n  var scaleX, scaleY, skewX;\n  if (scaleX = Math.sqrt(a * a + b * b)) a /= scaleX, b /= scaleX;\n  if (skewX = a * c + b * d) c -= a * skewX, d -= b * skewX;\n  if (scaleY = Math.sqrt(c * c + d * d)) c /= scaleY, d /= scaleY, skewX /= scaleY;\n  if (a * d < b * c) a = -a, b = -b, skewX = -skewX, scaleX = -scaleX;\n  return {\n    translateX: e,\n    translateY: f,\n    rotate: Math.atan2(b, a) * degrees,\n    skewX: Math.atan(skewX) * degrees,\n    scaleX: scaleX,\n    scaleY: scaleY\n  };\n}\n","import decompose, {identity} from \"./decompose.js\";\n\nvar svgNode;\n\n/* eslint-disable no-undef */\nexport function parseCss(value) {\n  const m = new (typeof DOMMatrix === \"function\" ? DOMMatrix : WebKitCSSMatrix)(value + \"\");\n  return m.isIdentity ? identity : decompose(m.a, m.b, m.c, m.d, m.e, m.f);\n}\n\nexport function parseSvg(value) {\n  if (value == null) return identity;\n  if (!svgNode) svgNode = document.createElementNS(\"http://www.w3.org/2000/svg\", \"g\");\n  svgNode.setAttribute(\"transform\", value);\n  if (!(value = svgNode.transform.baseVal.consolidate())) return identity;\n  value = value.matrix;\n  return decompose(value.a, value.b, value.c, value.d, value.e, value.f);\n}\n","import number from \"../number.js\";\nimport {parseCss, parseSvg} from \"./parse.js\";\n\nfunction interpolateTransform(parse, pxComma, pxParen, degParen) {\n\n  function pop(s) {\n    return s.length ? s.pop() + \" \" : \"\";\n  }\n\n  function translate(xa, ya, xb, yb, s, q) {\n    if (xa !== xb || ya !== yb) {\n      var i = s.push(\"translate(\", null, pxComma, null, pxParen);\n      q.push({i: i - 4, x: number(xa, xb)}, {i: i - 2, x: number(ya, yb)});\n    } else if (xb || yb) {\n      s.push(\"translate(\" + xb + pxComma + yb + pxParen);\n    }\n  }\n\n  function rotate(a, b, s, q) {\n    if (a !== b) {\n      if (a - b > 180) b += 360; else if (b - a > 180) a += 360; // shortest path\n      q.push({i: s.push(pop(s) + \"rotate(\", null, degParen) - 2, x: number(a, b)});\n    } else if (b) {\n      s.push(pop(s) + \"rotate(\" + b + degParen);\n    }\n  }\n\n  function skewX(a, b, s, q) {\n    if (a !== b) {\n      q.push({i: s.push(pop(s) + \"skewX(\", null, degParen) - 2, x: number(a, b)});\n    } else if (b) {\n      s.push(pop(s) + \"skewX(\" + b + degParen);\n    }\n  }\n\n  function scale(xa, ya, xb, yb, s, q) {\n    if (xa !== xb || ya !== yb) {\n      var i = s.push(pop(s) + \"scale(\", null, \",\", null, \")\");\n      q.push({i: i - 4, x: number(xa, xb)}, {i: i - 2, x: number(ya, yb)});\n    } else if (xb !== 1 || yb !== 1) {\n      s.push(pop(s) + \"scale(\" + xb + \",\" + yb + \")\");\n    }\n  }\n\n  return function(a, b) {\n    var s = [], // string constants and placeholders\n        q = []; // number interpolators\n    a = parse(a), b = parse(b);\n    translate(a.translateX, a.translateY, b.translateX, b.translateY, s, q);\n    rotate(a.rotate, b.rotate, s, q);\n    skewX(a.skewX, b.skewX, s, q);\n    scale(a.scaleX, a.scaleY, b.scaleX, b.scaleY, s, q);\n    a = b = null; // gc\n    return function(t) {\n      var i = -1, n = q.length, o;\n      while (++i < n) s[(o = q[i]).i] = o.x(t);\n      return s.join(\"\");\n    };\n  };\n}\n\nexport var interpolateTransformCss = interpolateTransform(parseCss, \"px, \", \"px)\", \"deg)\");\nexport var interpolateTransformSvg = interpolateTransform(parseSvg, \", \", \")\", \")\");\n","var frame = 0, // is an animation frame pending?\n    timeout = 0, // is a timeout pending?\n    interval = 0, // are any timers active?\n    pokeDelay = 1000, // how frequently we check for clock skew\n    taskHead,\n    taskTail,\n    clockLast = 0,\n    clockNow = 0,\n    clockSkew = 0,\n    clock = typeof performance === \"object\" && performance.now ? performance : Date,\n    setFrame = typeof window === \"object\" && window.requestAnimationFrame ? window.requestAnimationFrame.bind(window) : function(f) { setTimeout(f, 17); };\n\nexport function now() {\n  return clockNow || (setFrame(clearNow), clockNow = clock.now() + clockSkew);\n}\n\nfunction clearNow() {\n  clockNow = 0;\n}\n\nexport function Timer() {\n  this._call =\n  this._time =\n  this._next = null;\n}\n\nTimer.prototype = timer.prototype = {\n  constructor: Timer,\n  restart: function(callback, delay, time) {\n    if (typeof callback !== \"function\") throw new TypeError(\"callback is not a function\");\n    time = (time == null ? now() : +time) + (delay == null ? 0 : +delay);\n    if (!this._next && taskTail !== this) {\n      if (taskTail) taskTail._next = this;\n      else taskHead = this;\n      taskTail = this;\n    }\n    this._call = callback;\n    this._time = time;\n    sleep();\n  },\n  stop: function() {\n    if (this._call) {\n      this._call = null;\n      this._time = Infinity;\n      sleep();\n    }\n  }\n};\n\nexport function timer(callback, delay, time) {\n  var t = new Timer;\n  t.restart(callback, delay, time);\n  return t;\n}\n\nexport function timerFlush() {\n  now(); // Get the current time, if not already set.\n  ++frame; // Pretend weve set an alarm, if we havent already.\n  var t = taskHead, e;\n  while (t) {\n    if ((e = clockNow - t._time) >= 0) t._call.call(undefined, e);\n    t = t._next;\n  }\n  --frame;\n}\n\nfunction wake() {\n  clockNow = (clockLast = clock.now()) + clockSkew;\n  frame = timeout = 0;\n  try {\n    timerFlush();\n  } finally {\n    frame = 0;\n    nap();\n    clockNow = 0;\n  }\n}\n\nfunction poke() {\n  var now = clock.now(), delay = now - clockLast;\n  if (delay > pokeDelay) clockSkew -= delay, clockLast = now;\n}\n\nfunction nap() {\n  var t0, t1 = taskHead, t2, time = Infinity;\n  while (t1) {\n    if (t1._call) {\n      if (time > t1._time) time = t1._time;\n      t0 = t1, t1 = t1._next;\n    } else {\n      t2 = t1._next, t1._next = null;\n      t1 = t0 ? t0._next = t2 : taskHead = t2;\n    }\n  }\n  taskTail = t0;\n  sleep(time);\n}\n\nfunction sleep(time) {\n  if (frame) return; // Soonest alarm already set, or will be.\n  if (timeout) timeout = clearTimeout(timeout);\n  var delay = time - clockNow; // Strictly less than if we recomputed clockNow.\n  if (delay > 24) {\n    if (time < Infinity) timeout = setTimeout(wake, time - clock.now() - clockSkew);\n    if (interval) interval = clearInterval(interval);\n  } else {\n    if (!interval) clockLast = clock.now(), interval = setInterval(poke, pokeDelay);\n    frame = 1, setFrame(wake);\n  }\n}\n","import {Timer} from \"./timer.js\";\n\nexport default function(callback, delay, time) {\n  var t = new Timer;\n  delay = delay == null ? 0 : +delay;\n  t.restart(elapsed => {\n    t.stop();\n    callback(elapsed + delay);\n  }, delay, time);\n  return t;\n}\n","import {dispatch} from \"d3-dispatch\";\nimport {timer, timeout} from \"d3-timer\";\n\nvar emptyOn = dispatch(\"start\", \"end\", \"cancel\", \"interrupt\");\nvar emptyTween = [];\n\nexport var CREATED = 0;\nexport var SCHEDULED = 1;\nexport var STARTING = 2;\nexport var STARTED = 3;\nexport var RUNNING = 4;\nexport var ENDING = 5;\nexport var ENDED = 6;\n\nexport default function(node, name, id, index, group, timing) {\n  var schedules = node.__transition;\n  if (!schedules) node.__transition = {};\n  else if (id in schedules) return;\n  create(node, id, {\n    name: name,\n    index: index, // For context during callback.\n    group: group, // For context during callback.\n    on: emptyOn,\n    tween: emptyTween,\n    time: timing.time,\n    delay: timing.delay,\n    duration: timing.duration,\n    ease: timing.ease,\n    timer: null,\n    state: CREATED\n  });\n}\n\nexport function init(node, id) {\n  var schedule = get(node, id);\n  if (schedule.state > CREATED) throw new Error(\"too late; already scheduled\");\n  return schedule;\n}\n\nexport function set(node, id) {\n  var schedule = get(node, id);\n  if (schedule.state > STARTED) throw new Error(\"too late; already running\");\n  return schedule;\n}\n\nexport function get(node, id) {\n  var schedule = node.__transition;\n  if (!schedule || !(schedule = schedule[id])) throw new Error(\"transition not found\");\n  return schedule;\n}\n\nfunction create(node, id, self) {\n  var schedules = node.__transition,\n      tween;\n\n  // Initialize the self timer when the transition is created.\n  // Note the actual delay is not known until the first callback!\n  schedules[id] = self;\n  self.timer = timer(schedule, 0, self.time);\n\n  function schedule(elapsed) {\n    self.state = SCHEDULED;\n    self.timer.restart(start, self.delay, self.time);\n\n    // If the elapsed delay is less than our first sleep, start immediately.\n    if (self.delay <= elapsed) start(elapsed - self.delay);\n  }\n\n  function start(elapsed) {\n    var i, j, n, o;\n\n    // If the state is not SCHEDULED, then we previously errored on start.\n    if (self.state !== SCHEDULED) return stop();\n\n    for (i in schedules) {\n      o = schedules[i];\n      if (o.name !== self.name) continue;\n\n      // While this element already has a starting transition during this frame,\n      // defer starting an interrupting transition until that transition has a\n      // chance to tick (and possibly end); see d3/d3-transition#54!\n      if (o.state === STARTED) return timeout(start);\n\n      // Interrupt the active transition, if any.\n      if (o.state === RUNNING) {\n        o.state = ENDED;\n        o.timer.stop();\n        o.on.call(\"interrupt\", node, node.__data__, o.index, o.group);\n        delete schedules[i];\n      }\n\n      // Cancel any pre-empted transitions.\n      else if (+i < id) {\n        o.state = ENDED;\n        o.timer.stop();\n        o.on.call(\"cancel\", node, node.__data__, o.index, o.group);\n        delete schedules[i];\n      }\n    }\n\n    // Defer the first tick to end of the current frame; see d3/d3#1576.\n    // Note the transition may be canceled after start and before the first tick!\n    // Note this must be scheduled before the start event; see d3/d3-transition#16!\n    // Assuming this is successful, subsequent callbacks go straight to tick.\n    timeout(function() {\n      if (self.state === STARTED) {\n        self.state = RUNNING;\n        self.timer.restart(tick, self.delay, self.time);\n        tick(elapsed);\n      }\n    });\n\n    // Dispatch the start event.\n    // Note this must be done before the tween are initialized.\n    self.state = STARTING;\n    self.on.call(\"start\", node, node.__data__, self.index, self.group);\n    if (self.state !== STARTING) return; // interrupted\n    self.state = STARTED;\n\n    // Initialize the tween, deleting null tween.\n    tween = new Array(n = self.tween.length);\n    for (i = 0, j = -1; i < n; ++i) {\n      if (o = self.tween[i].value.call(node, node.__data__, self.index, self.group)) {\n        tween[++j] = o;\n      }\n    }\n    tween.length = j + 1;\n  }\n\n  function tick(elapsed) {\n    var t = elapsed < self.duration ? self.ease.call(null, elapsed / self.duration) : (self.timer.restart(stop), self.state = ENDING, 1),\n        i = -1,\n        n = tween.length;\n\n    while (++i < n) {\n      tween[i].call(node, t);\n    }\n\n    // Dispatch the end event.\n    if (self.state === ENDING) {\n      self.on.call(\"end\", node, node.__data__, self.index, self.group);\n      stop();\n    }\n  }\n\n  function stop() {\n    self.state = ENDED;\n    self.timer.stop();\n    delete schedules[id];\n    for (var i in schedules) return; // eslint-disable-line no-unused-vars\n    delete node.__transition;\n  }\n}\n","import {get, set} from \"./schedule.js\";\n\nfunction tweenRemove(id, name) {\n  var tween0, tween1;\n  return function() {\n    var schedule = set(this, id),\n        tween = schedule.tween;\n\n    // If this node shared tween with the previous node,\n    // just assign the updated shared tween and were done!\n    // Otherwise, copy-on-write.\n    if (tween !== tween0) {\n      tween1 = tween0 = tween;\n      for (var i = 0, n = tween1.length; i < n; ++i) {\n        if (tween1[i].name === name) {\n          tween1 = tween1.slice();\n          tween1.splice(i, 1);\n          break;\n        }\n      }\n    }\n\n    schedule.tween = tween1;\n  };\n}\n\nfunction tweenFunction(id, name, value) {\n  var tween0, tween1;\n  if (typeof value !== \"function\") throw new Error;\n  return function() {\n    var schedule = set(this, id),\n        tween = schedule.tween;\n\n    // If this node shared tween with the previous node,\n    // just assign the updated shared tween and were done!\n    // Otherwise, copy-on-write.\n    if (tween !== tween0) {\n      tween1 = (tween0 = tween).slice();\n      for (var t = {name: name, value: value}, i = 0, n = tween1.length; i < n; ++i) {\n        if (tween1[i].name === name) {\n          tween1[i] = t;\n          break;\n        }\n      }\n      if (i === n) tween1.push(t);\n    }\n\n    schedule.tween = tween1;\n  };\n}\n\nexport default function(name, value) {\n  var id = this._id;\n\n  name += \"\";\n\n  if (arguments.length < 2) {\n    var tween = get(this.node(), id).tween;\n    for (var i = 0, n = tween.length, t; i < n; ++i) {\n      if ((t = tween[i]).name === name) {\n        return t.value;\n      }\n    }\n    return null;\n  }\n\n  return this.each((value == null ? tweenRemove : tweenFunction)(id, name, value));\n}\n\nexport function tweenValue(transition, name, value) {\n  var id = transition._id;\n\n  transition.each(function() {\n    var schedule = set(this, id);\n    (schedule.value || (schedule.value = {}))[name] = value.apply(this, arguments);\n  });\n\n  return function(node) {\n    return get(node, id).value[name];\n  };\n}\n","import {color} from \"d3-color\";\nimport {interpolateNumber, interpolateRgb, interpolateString} from \"d3-interpolate\";\n\nexport default function(a, b) {\n  var c;\n  return (typeof b === \"number\" ? interpolateNumber\n      : b instanceof color ? interpolateRgb\n      : (c = color(b)) ? (b = c, interpolateRgb)\n      : interpolateString)(a, b);\n}\n","import {interpolateTransformSvg as interpolateTransform} from \"d3-interpolate\";\nimport {namespace} from \"d3-selection\";\nimport {tweenValue} from \"./tween.js\";\nimport interpolate from \"./interpolate.js\";\n\nfunction attrRemove(name) {\n  return function() {\n    this.removeAttribute(name);\n  };\n}\n\nfunction attrRemoveNS(fullname) {\n  return function() {\n    this.removeAttributeNS(fullname.space, fullname.local);\n  };\n}\n\nfunction attrConstant(name, interpolate, value1) {\n  var string00,\n      string1 = value1 + \"\",\n      interpolate0;\n  return function() {\n    var string0 = this.getAttribute(name);\n    return string0 === string1 ? null\n        : string0 === string00 ? interpolate0\n        : interpolate0 = interpolate(string00 = string0, value1);\n  };\n}\n\nfunction attrConstantNS(fullname, interpolate, value1) {\n  var string00,\n      string1 = value1 + \"\",\n      interpolate0;\n  return function() {\n    var string0 = this.getAttributeNS(fullname.space, fullname.local);\n    return string0 === string1 ? null\n        : string0 === string00 ? interpolate0\n        : interpolate0 = interpolate(string00 = string0, value1);\n  };\n}\n\nfunction attrFunction(name, interpolate, value) {\n  var string00,\n      string10,\n      interpolate0;\n  return function() {\n    var string0, value1 = value(this), string1;\n    if (value1 == null) return void this.removeAttribute(name);\n    string0 = this.getAttribute(name);\n    string1 = value1 + \"\";\n    return string0 === string1 ? null\n        : string0 === string00 && string1 === string10 ? interpolate0\n        : (string10 = string1, interpolate0 = interpolate(string00 = string0, value1));\n  };\n}\n\nfunction attrFunctionNS(fullname, interpolate, value) {\n  var string00,\n      string10,\n      interpolate0;\n  return function() {\n    var string0, value1 = value(this), string1;\n    if (value1 == null) return void this.removeAttributeNS(fullname.space, fullname.local);\n    string0 = this.getAttributeNS(fullname.space, fullname.local);\n    string1 = value1 + \"\";\n    return string0 === string1 ? null\n        : string0 === string00 && string1 === string10 ? interpolate0\n        : (string10 = string1, interpolate0 = interpolate(string00 = string0, value1));\n  };\n}\n\nexport default function(name, value) {\n  var fullname = namespace(name), i = fullname === \"transform\" ? interpolateTransform : interpolate;\n  return this.attrTween(name, typeof value === \"function\"\n      ? (fullname.local ? attrFunctionNS : attrFunction)(fullname, i, tweenValue(this, \"attr.\" + name, value))\n      : value == null ? (fullname.local ? attrRemoveNS : attrRemove)(fullname)\n      : (fullname.local ? attrConstantNS : attrConstant)(fullname, i, value));\n}\n","import {namespace} from \"d3-selection\";\n\nfunction attrInterpolate(name, i) {\n  return function(t) {\n    this.setAttribute(name, i.call(this, t));\n  };\n}\n\nfunction attrInterpolateNS(fullname, i) {\n  return function(t) {\n    this.setAttributeNS(fullname.space, fullname.local, i.call(this, t));\n  };\n}\n\nfunction attrTweenNS(fullname, value) {\n  var t0, i0;\n  function tween() {\n    var i = value.apply(this, arguments);\n    if (i !== i0) t0 = (i0 = i) && attrInterpolateNS(fullname, i);\n    return t0;\n  }\n  tween._value = value;\n  return tween;\n}\n\nfunction attrTween(name, value) {\n  var t0, i0;\n  function tween() {\n    var i = value.apply(this, arguments);\n    if (i !== i0) t0 = (i0 = i) && attrInterpolate(name, i);\n    return t0;\n  }\n  tween._value = value;\n  return tween;\n}\n\nexport default function(name, value) {\n  var key = \"attr.\" + name;\n  if (arguments.length < 2) return (key = this.tween(key)) && key._value;\n  if (value == null) return this.tween(key, null);\n  if (typeof value !== \"function\") throw new Error;\n  var fullname = namespace(name);\n  return this.tween(key, (fullname.local ? attrTweenNS : attrTween)(fullname, value));\n}\n","import {get, init} from \"./schedule.js\";\n\nfunction delayFunction(id, value) {\n  return function() {\n    init(this, id).delay = +value.apply(this, arguments);\n  };\n}\n\nfunction delayConstant(id, value) {\n  return value = +value, function() {\n    init(this, id).delay = value;\n  };\n}\n\nexport default function(value) {\n  var id = this._id;\n\n  return arguments.length\n      ? this.each((typeof value === \"function\"\n          ? delayFunction\n          : delayConstant)(id, value))\n      : get(this.node(), id).delay;\n}\n","import {get, set} from \"./schedule.js\";\n\nfunction durationFunction(id, value) {\n  return function() {\n    set(this, id).duration = +value.apply(this, arguments);\n  };\n}\n\nfunction durationConstant(id, value) {\n  return value = +value, function() {\n    set(this, id).duration = value;\n  };\n}\n\nexport default function(value) {\n  var id = this._id;\n\n  return arguments.length\n      ? this.each((typeof value === \"function\"\n          ? durationFunction\n          : durationConstant)(id, value))\n      : get(this.node(), id).duration;\n}\n","import {selection} from \"d3-selection\";\n\nvar Selection = selection.prototype.constructor;\n\nexport default function() {\n  return new Selection(this._groups, this._parents);\n}\n","import {interpolateTransformCss as interpolateTransform} from \"d3-interpolate\";\nimport {style} from \"d3-selection\";\nimport {set} from \"./schedule.js\";\nimport {tweenValue} from \"./tween.js\";\nimport interpolate from \"./interpolate.js\";\n\nfunction styleNull(name, interpolate) {\n  var string00,\n      string10,\n      interpolate0;\n  return function() {\n    var string0 = style(this, name),\n        string1 = (this.style.removeProperty(name), style(this, name));\n    return string0 === string1 ? null\n        : string0 === string00 && string1 === string10 ? interpolate0\n        : interpolate0 = interpolate(string00 = string0, string10 = string1);\n  };\n}\n\nfunction styleRemove(name) {\n  return function() {\n    this.style.removeProperty(name);\n  };\n}\n\nfunction styleConstant(name, interpolate, value1) {\n  var string00,\n      string1 = value1 + \"\",\n      interpolate0;\n  return function() {\n    var string0 = style(this, name);\n    return string0 === string1 ? null\n        : string0 === string00 ? interpolate0\n        : interpolate0 = interpolate(string00 = string0, value1);\n  };\n}\n\nfunction styleFunction(name, interpolate, value) {\n  var string00,\n      string10,\n      interpolate0;\n  return function() {\n    var string0 = style(this, name),\n        value1 = value(this),\n        string1 = value1 + \"\";\n    if (value1 == null) string1 = value1 = (this.style.removeProperty(name), style(this, name));\n    return string0 === string1 ? null\n        : string0 === string00 && string1 === string10 ? interpolate0\n        : (string10 = string1, interpolate0 = interpolate(string00 = string0, value1));\n  };\n}\n\nfunction styleMaybeRemove(id, name) {\n  var on0, on1, listener0, key = \"style.\" + name, event = \"end.\" + key, remove;\n  return function() {\n    var schedule = set(this, id),\n        on = schedule.on,\n        listener = schedule.value[key] == null ? remove || (remove = styleRemove(name)) : undefined;\n\n    // If this node shared a dispatch with the previous node,\n    // just assign the updated shared dispatch and were done!\n    // Otherwise, copy-on-write.\n    if (on !== on0 || listener0 !== listener) (on1 = (on0 = on).copy()).on(event, listener0 = listener);\n\n    schedule.on = on1;\n  };\n}\n\nexport default function(name, value, priority) {\n  var i = (name += \"\") === \"transform\" ? interpolateTransform : interpolate;\n  return value == null ? this\n      .styleTween(name, styleNull(name, i))\n      .on(\"end.style.\" + name, styleRemove(name))\n    : typeof value === \"function\" ? this\n      .styleTween(name, styleFunction(name, i, tweenValue(this, \"style.\" + name, value)))\n      .each(styleMaybeRemove(this._id, name))\n    : this\n      .styleTween(name, styleConstant(name, i, value), priority)\n      .on(\"end.style.\" + name, null);\n}\n","import {selection} from \"d3-selection\";\nimport transition_attr from \"./attr.js\";\nimport transition_attrTween from \"./attrTween.js\";\nimport transition_delay from \"./delay.js\";\nimport transition_duration from \"./duration.js\";\nimport transition_ease from \"./ease.js\";\nimport transition_easeVarying from \"./easeVarying.js\";\nimport transition_filter from \"./filter.js\";\nimport transition_merge from \"./merge.js\";\nimport transition_on from \"./on.js\";\nimport transition_remove from \"./remove.js\";\nimport transition_select from \"./select.js\";\nimport transition_selectAll from \"./selectAll.js\";\nimport transition_selection from \"./selection.js\";\nimport transition_style from \"./style.js\";\nimport transition_styleTween from \"./styleTween.js\";\nimport transition_text from \"./text.js\";\nimport transition_textTween from \"./textTween.js\";\nimport transition_transition from \"./transition.js\";\nimport transition_tween from \"./tween.js\";\nimport transition_end from \"./end.js\";\n\nvar id = 0;\n\nexport function Transition(groups, parents, name, id) {\n  this._groups = groups;\n  this._parents = parents;\n  this._name = name;\n  this._id = id;\n}\n\nexport default function transition(name) {\n  return selection().transition(name);\n}\n\nexport function newId() {\n  return ++id;\n}\n\nvar selection_prototype = selection.prototype;\n\nTransition.prototype = transition.prototype = {\n  constructor: Transition,\n  select: transition_select,\n  selectAll: transition_selectAll,\n  selectChild: selection_prototype.selectChild,\n  selectChildren: selection_prototype.selectChildren,\n  filter: transition_filter,\n  merge: transition_merge,\n  selection: transition_selection,\n  transition: transition_transition,\n  call: selection_prototype.call,\n  nodes: selection_prototype.nodes,\n  node: selection_prototype.node,\n  size: selection_prototype.size,\n  empty: selection_prototype.empty,\n  each: selection_prototype.each,\n  on: transition_on,\n  attr: transition_attr,\n  attrTween: transition_attrTween,\n  style: transition_style,\n  styleTween: transition_styleTween,\n  text: transition_text,\n  textTween: transition_textTween,\n  remove: transition_remove,\n  tween: transition_tween,\n  delay: transition_delay,\n  duration: transition_duration,\n  ease: transition_ease,\n  easeVarying: transition_easeVarying,\n  end: transition_end,\n  [Symbol.iterator]: selection_prototype[Symbol.iterator]\n};\n","import {selector} from \"d3-selection\";\nimport {Transition} from \"./index.js\";\nimport schedule, {get} from \"./schedule.js\";\n\nexport default function(select) {\n  var name = this._name,\n      id = this._id;\n\n  if (typeof select !== \"function\") select = selector(select);\n\n  for (var groups = this._groups, m = groups.length, subgroups = new Array(m), j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, subgroup = subgroups[j] = new Array(n), node, subnode, i = 0; i < n; ++i) {\n      if ((node = group[i]) && (subnode = select.call(node, node.__data__, i, group))) {\n        if (\"__data__\" in node) subnode.__data__ = node.__data__;\n        subgroup[i] = subnode;\n        schedule(subgroup[i], name, id, i, subgroup, get(node, id));\n      }\n    }\n  }\n\n  return new Transition(subgroups, this._parents, name, id);\n}\n","import {selectorAll} from \"d3-selection\";\nimport {Transition} from \"./index.js\";\nimport schedule, {get} from \"./schedule.js\";\n\nexport default function(select) {\n  var name = this._name,\n      id = this._id;\n\n  if (typeof select !== \"function\") select = selectorAll(select);\n\n  for (var groups = this._groups, m = groups.length, subgroups = [], parents = [], j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, node, i = 0; i < n; ++i) {\n      if (node = group[i]) {\n        for (var children = select.call(node, node.__data__, i, group), child, inherit = get(node, id), k = 0, l = children.length; k < l; ++k) {\n          if (child = children[k]) {\n            schedule(child, name, id, k, children, inherit);\n          }\n        }\n        subgroups.push(children);\n        parents.push(node);\n      }\n    }\n  }\n\n  return new Transition(subgroups, parents, name, id);\n}\n","import {matcher} from \"d3-selection\";\nimport {Transition} from \"./index.js\";\n\nexport default function(match) {\n  if (typeof match !== \"function\") match = matcher(match);\n\n  for (var groups = this._groups, m = groups.length, subgroups = new Array(m), j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, subgroup = subgroups[j] = [], node, i = 0; i < n; ++i) {\n      if ((node = group[i]) && match.call(node, node.__data__, i, group)) {\n        subgroup.push(node);\n      }\n    }\n  }\n\n  return new Transition(subgroups, this._parents, this._name, this._id);\n}\n","import {Transition} from \"./index.js\";\n\nexport default function(transition) {\n  if (transition._id !== this._id) throw new Error;\n\n  for (var groups0 = this._groups, groups1 = transition._groups, m0 = groups0.length, m1 = groups1.length, m = Math.min(m0, m1), merges = new Array(m0), j = 0; j < m; ++j) {\n    for (var group0 = groups0[j], group1 = groups1[j], n = group0.length, merge = merges[j] = new Array(n), node, i = 0; i < n; ++i) {\n      if (node = group0[i] || group1[i]) {\n        merge[i] = node;\n      }\n    }\n  }\n\n  for (; j < m0; ++j) {\n    merges[j] = groups0[j];\n  }\n\n  return new Transition(merges, this._parents, this._name, this._id);\n}\n","import {Transition, newId} from \"./index.js\";\nimport schedule, {get} from \"./schedule.js\";\n\nexport default function() {\n  var name = this._name,\n      id0 = this._id,\n      id1 = newId();\n\n  for (var groups = this._groups, m = groups.length, j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, node, i = 0; i < n; ++i) {\n      if (node = group[i]) {\n        var inherit = get(node, id0);\n        schedule(node, name, id1, i, group, {\n          time: inherit.time + inherit.delay + inherit.duration,\n          delay: 0,\n          duration: inherit.duration,\n          ease: inherit.ease\n        });\n      }\n    }\n  }\n\n  return new Transition(groups, this._parents, name, id1);\n}\n","import {get, set, init} from \"./schedule.js\";\n\nfunction start(name) {\n  return (name + \"\").trim().split(/^|\\s+/).every(function(t) {\n    var i = t.indexOf(\".\");\n    if (i >= 0) t = t.slice(0, i);\n    return !t || t === \"start\";\n  });\n}\n\nfunction onFunction(id, name, listener) {\n  var on0, on1, sit = start(name) ? init : set;\n  return function() {\n    var schedule = sit(this, id),\n        on = schedule.on;\n\n    // If this node shared a dispatch with the previous node,\n    // just assign the updated shared dispatch and were done!\n    // Otherwise, copy-on-write.\n    if (on !== on0) (on1 = (on0 = on).copy()).on(name, listener);\n\n    schedule.on = on1;\n  };\n}\n\nexport default function(name, listener) {\n  var id = this._id;\n\n  return arguments.length < 2\n      ? get(this.node(), id).on.on(name)\n      : this.each(onFunction(id, name, listener));\n}\n","function styleInterpolate(name, i, priority) {\n  return function(t) {\n    this.style.setProperty(name, i.call(this, t), priority);\n  };\n}\n\nfunction styleTween(name, value, priority) {\n  var t, i0;\n  function tween() {\n    var i = value.apply(this, arguments);\n    if (i !== i0) t = (i0 = i) && styleInterpolate(name, i, priority);\n    return t;\n  }\n  tween._value = value;\n  return tween;\n}\n\nexport default function(name, value, priority) {\n  var key = \"style.\" + (name += \"\");\n  if (arguments.length < 2) return (key = this.tween(key)) && key._value;\n  if (value == null) return this.tween(key, null);\n  if (typeof value !== \"function\") throw new Error;\n  return this.tween(key, styleTween(name, value, priority == null ? \"\" : priority));\n}\n","import {tweenValue} from \"./tween.js\";\n\nfunction textConstant(value) {\n  return function() {\n    this.textContent = value;\n  };\n}\n\nfunction textFunction(value) {\n  return function() {\n    var value1 = value(this);\n    this.textContent = value1 == null ? \"\" : value1;\n  };\n}\n\nexport default function(value) {\n  return this.tween(\"text\", typeof value === \"function\"\n      ? textFunction(tweenValue(this, \"text\", value))\n      : textConstant(value == null ? \"\" : value + \"\"));\n}\n","function textInterpolate(i) {\n  return function(t) {\n    this.textContent = i.call(this, t);\n  };\n}\n\nfunction textTween(value) {\n  var t0, i0;\n  function tween() {\n    var i = value.apply(this, arguments);\n    if (i !== i0) t0 = (i0 = i) && textInterpolate(i);\n    return t0;\n  }\n  tween._value = value;\n  return tween;\n}\n\nexport default function(value) {\n  var key = \"text\";\n  if (arguments.length < 1) return (key = this.tween(key)) && key._value;\n  if (value == null) return this.tween(key, null);\n  if (typeof value !== \"function\") throw new Error;\n  return this.tween(key, textTween(value));\n}\n","function removeFunction(id) {\n  return function() {\n    var parent = this.parentNode;\n    for (var i in this.__transition) if (+i !== id) return;\n    if (parent) parent.removeChild(this);\n  };\n}\n\nexport default function() {\n  return this.on(\"end.remove\", removeFunction(this._id));\n}\n","import {get, set} from \"./schedule.js\";\n\nfunction easeConstant(id, value) {\n  if (typeof value !== \"function\") throw new Error;\n  return function() {\n    set(this, id).ease = value;\n  };\n}\n\nexport default function(value) {\n  var id = this._id;\n\n  return arguments.length\n      ? this.each(easeConstant(id, value))\n      : get(this.node(), id).ease;\n}\n","import {set} from \"./schedule.js\";\n\nfunction easeVarying(id, value) {\n  return function() {\n    var v = value.apply(this, arguments);\n    if (typeof v !== \"function\") throw new Error;\n    set(this, id).ease = v;\n  };\n}\n\nexport default function(value) {\n  if (typeof value !== \"function\") throw new Error;\n  return this.each(easeVarying(this._id, value));\n}\n","import {set} from \"./schedule.js\";\n\nexport default function() {\n  var on0, on1, that = this, id = that._id, size = that.size();\n  return new Promise(function(resolve, reject) {\n    var cancel = {value: reject},\n        end = {value: function() { if (--size === 0) resolve(); }};\n\n    that.each(function() {\n      var schedule = set(this, id),\n          on = schedule.on;\n\n      // If this node shared a dispatch with the previous node,\n      // just assign the updated shared dispatch and were done!\n      // Otherwise, copy-on-write.\n      if (on !== on0) {\n        on1 = (on0 = on).copy();\n        on1._.cancel.push(cancel);\n        on1._.interrupt.push(cancel);\n        on1._.end.push(end);\n      }\n\n      schedule.on = on1;\n    });\n\n    // The selection was empty, resolve end immediately\n    if (size === 0) resolve();\n  });\n}\n","import {Transition, newId} from \"../transition/index.js\";\nimport schedule from \"../transition/schedule.js\";\nimport {easeCubicInOut} from \"d3-ease\";\nimport {now} from \"d3-timer\";\n\nvar defaultTiming = {\n  time: null, // Set on use.\n  delay: 0,\n  duration: 250,\n  ease: easeCubicInOut\n};\n\nfunction inherit(node, id) {\n  var timing;\n  while (!(timing = node.__transition) || !(timing = timing[id])) {\n    if (!(node = node.parentNode)) {\n      throw new Error(`transition ${id} not found`);\n    }\n  }\n  return timing;\n}\n\nexport default function(name) {\n  var id,\n      timing;\n\n  if (name instanceof Transition) {\n    id = name._id, name = name._name;\n  } else {\n    id = newId(), (timing = defaultTiming).time = now(), name = name == null ? null : name + \"\";\n  }\n\n  for (var groups = this._groups, m = groups.length, j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, node, i = 0; i < n; ++i) {\n      if (node = group[i]) {\n        schedule(node, name, id, i, group, timing || inherit(node, id));\n      }\n    }\n  }\n\n  return new Transition(groups, this._parents, name, id);\n}\n","export function cubicIn(t) {\n  return t * t * t;\n}\n\nexport function cubicOut(t) {\n  return --t * t * t + 1;\n}\n\nexport function cubicInOut(t) {\n  return ((t *= 2) <= 1 ? t * t * t : (t -= 2) * t * t + 2) / 2;\n}\n","import {selection} from \"d3-selection\";\nimport selection_interrupt from \"./interrupt.js\";\nimport selection_transition from \"./transition.js\";\n\nselection.prototype.interrupt = selection_interrupt;\nselection.prototype.transition = selection_transition;\n","import interrupt from \"../interrupt.js\";\n\nexport default function(name) {\n  return this.each(function() {\n    interrupt(this, name);\n  });\n}\n","import {STARTING, ENDING, ENDED} from \"./transition/schedule.js\";\n\nexport default function(node, name) {\n  var schedules = node.__transition,\n      schedule,\n      active,\n      empty = true,\n      i;\n\n  if (!schedules) return;\n\n  name = name == null ? null : name + \"\";\n\n  for (i in schedules) {\n    if ((schedule = schedules[i]).name !== name) { empty = false; continue; }\n    active = schedule.state > STARTING && schedule.state < ENDING;\n    schedule.state = ENDED;\n    schedule.timer.stop();\n    schedule.on.call(active ? \"interrupt\" : \"cancel\", node, node.__data__, schedule.index, schedule.group);\n    delete schedules[i];\n  }\n\n  if (empty) delete node.__transition;\n}\n","const pi = Math.PI,\n    tau = 2 * pi,\n    epsilon = 1e-6,\n    tauEpsilon = tau - epsilon;\n\nfunction append(strings) {\n  this._ += strings[0];\n  for (let i = 1, n = strings.length; i < n; ++i) {\n    this._ += arguments[i] + strings[i];\n  }\n}\n\nfunction appendRound(digits) {\n  let d = Math.floor(digits);\n  if (!(d >= 0)) throw new Error(`invalid digits: ${digits}`);\n  if (d > 15) return append;\n  const k = 10 ** d;\n  return function(strings) {\n    this._ += strings[0];\n    for (let i = 1, n = strings.length; i < n; ++i) {\n      this._ += Math.round(arguments[i] * k) / k + strings[i];\n    }\n  };\n}\n\nexport class Path {\n  constructor(digits) {\n    this._x0 = this._y0 = // start of current subpath\n    this._x1 = this._y1 = null; // end of current subpath\n    this._ = \"\";\n    this._append = digits == null ? append : appendRound(digits);\n  }\n  moveTo(x, y) {\n    this._append`M${this._x0 = this._x1 = +x},${this._y0 = this._y1 = +y}`;\n  }\n  closePath() {\n    if (this._x1 !== null) {\n      this._x1 = this._x0, this._y1 = this._y0;\n      this._append`Z`;\n    }\n  }\n  lineTo(x, y) {\n    this._append`L${this._x1 = +x},${this._y1 = +y}`;\n  }\n  quadraticCurveTo(x1, y1, x, y) {\n    this._append`Q${+x1},${+y1},${this._x1 = +x},${this._y1 = +y}`;\n  }\n  bezierCurveTo(x1, y1, x2, y2, x, y) {\n    this._append`C${+x1},${+y1},${+x2},${+y2},${this._x1 = +x},${this._y1 = +y}`;\n  }\n  arcTo(x1, y1, x2, y2, r) {\n    x1 = +x1, y1 = +y1, x2 = +x2, y2 = +y2, r = +r;\n\n    // Is the radius negative? Error.\n    if (r < 0) throw new Error(`negative radius: ${r}`);\n\n    let x0 = this._x1,\n        y0 = this._y1,\n        x21 = x2 - x1,\n        y21 = y2 - y1,\n        x01 = x0 - x1,\n        y01 = y0 - y1,\n        l01_2 = x01 * x01 + y01 * y01;\n\n    // Is this path empty? Move to (x1,y1).\n    if (this._x1 === null) {\n      this._append`M${this._x1 = x1},${this._y1 = y1}`;\n    }\n\n    // Or, is (x1,y1) coincident with (x0,y0)? Do nothing.\n    else if (!(l01_2 > epsilon));\n\n    // Or, are (x0,y0), (x1,y1) and (x2,y2) collinear?\n    // Equivalently, is (x1,y1) coincident with (x2,y2)?\n    // Or, is the radius zero? Line to (x1,y1).\n    else if (!(Math.abs(y01 * x21 - y21 * x01) > epsilon) || !r) {\n      this._append`L${this._x1 = x1},${this._y1 = y1}`;\n    }\n\n    // Otherwise, draw an arc!\n    else {\n      let x20 = x2 - x0,\n          y20 = y2 - y0,\n          l21_2 = x21 * x21 + y21 * y21,\n          l20_2 = x20 * x20 + y20 * y20,\n          l21 = Math.sqrt(l21_2),\n          l01 = Math.sqrt(l01_2),\n          l = r * Math.tan((pi - Math.acos((l21_2 + l01_2 - l20_2) / (2 * l21 * l01))) / 2),\n          t01 = l / l01,\n          t21 = l / l21;\n\n      // If the start tangent is not coincident with (x0,y0), line to.\n      if (Math.abs(t01 - 1) > epsilon) {\n        this._append`L${x1 + t01 * x01},${y1 + t01 * y01}`;\n      }\n\n      this._append`A${r},${r},0,0,${+(y01 * x20 > x01 * y20)},${this._x1 = x1 + t21 * x21},${this._y1 = y1 + t21 * y21}`;\n    }\n  }\n  arc(x, y, r, a0, a1, ccw) {\n    x = +x, y = +y, r = +r, ccw = !!ccw;\n\n    // Is the radius negative? Error.\n    if (r < 0) throw new Error(`negative radius: ${r}`);\n\n    let dx = r * Math.cos(a0),\n        dy = r * Math.sin(a0),\n        x0 = x + dx,\n        y0 = y + dy,\n        cw = 1 ^ ccw,\n        da = ccw ? a0 - a1 : a1 - a0;\n\n    // Is this path empty? Move to (x0,y0).\n    if (this._x1 === null) {\n      this._append`M${x0},${y0}`;\n    }\n\n    // Or, is (x0,y0) not coincident with the previous point? Line to (x0,y0).\n    else if (Math.abs(this._x1 - x0) > epsilon || Math.abs(this._y1 - y0) > epsilon) {\n      this._append`L${x0},${y0}`;\n    }\n\n    // Is this arc empty? Were done.\n    if (!r) return;\n\n    // Does the angle go the wrong way? Flip the direction.\n    if (da < 0) da = da % tau + tau;\n\n    // Is this a complete circle? Draw two arcs to complete the circle.\n    if (da > tauEpsilon) {\n      this._append`A${r},${r},0,1,${cw},${x - dx},${y - dy}A${r},${r},0,1,${cw},${this._x1 = x0},${this._y1 = y0}`;\n    }\n\n    // Is this arc non-empty? Draw an arc!\n    else if (da > epsilon) {\n      this._append`A${r},${r},0,${+(da >= pi)},${cw},${this._x1 = x + r * Math.cos(a1)},${this._y1 = y + r * Math.sin(a1)}`;\n    }\n  }\n  rect(x, y, w, h) {\n    this._append`M${this._x0 = this._x1 = +x},${this._y0 = this._y1 = +y}h${w = +w}v${+h}h${-w}Z`;\n  }\n  toString() {\n    return this._;\n  }\n}\n\nexport function path() {\n  return new Path;\n}\n\n// Allow instanceof d3.path\npath.prototype = Path.prototype;\n\nexport function pathRound(digits = 3) {\n  return new Path(+digits);\n}\n","var EOL = {},\n    EOF = {},\n    QUOTE = 34,\n    NEWLINE = 10,\n    RETURN = 13;\n\nfunction objectConverter(columns) {\n  return new Function(\"d\", \"return {\" + columns.map(function(name, i) {\n    return JSON.stringify(name) + \": d[\" + i + \"] || \\\"\\\"\";\n  }).join(\",\") + \"}\");\n}\n\nfunction customConverter(columns, f) {\n  var object = objectConverter(columns);\n  return function(row, i) {\n    return f(object(row), i, columns);\n  };\n}\n\n// Compute unique columns in order of discovery.\nfunction inferColumns(rows) {\n  var columnSet = Object.create(null),\n      columns = [];\n\n  rows.forEach(function(row) {\n    for (var column in row) {\n      if (!(column in columnSet)) {\n        columns.push(columnSet[column] = column);\n      }\n    }\n  });\n\n  return columns;\n}\n\nfunction pad(value, width) {\n  var s = value + \"\", length = s.length;\n  return length < width ? new Array(width - length + 1).join(0) + s : s;\n}\n\nfunction formatYear(year) {\n  return year < 0 ? \"-\" + pad(-year, 6)\n    : year > 9999 ? \"+\" + pad(year, 6)\n    : pad(year, 4);\n}\n\nfunction formatDate(date) {\n  var hours = date.getUTCHours(),\n      minutes = date.getUTCMinutes(),\n      seconds = date.getUTCSeconds(),\n      milliseconds = date.getUTCMilliseconds();\n  return isNaN(date) ? \"Invalid Date\"\n      : formatYear(date.getUTCFullYear(), 4) + \"-\" + pad(date.getUTCMonth() + 1, 2) + \"-\" + pad(date.getUTCDate(), 2)\n      + (milliseconds ? \"T\" + pad(hours, 2) + \":\" + pad(minutes, 2) + \":\" + pad(seconds, 2) + \".\" + pad(milliseconds, 3) + \"Z\"\n      : seconds ? \"T\" + pad(hours, 2) + \":\" + pad(minutes, 2) + \":\" + pad(seconds, 2) + \"Z\"\n      : minutes || hours ? \"T\" + pad(hours, 2) + \":\" + pad(minutes, 2) + \"Z\"\n      : \"\");\n}\n\nexport default function(delimiter) {\n  var reFormat = new RegExp(\"[\\\"\" + delimiter + \"\\n\\r]\"),\n      DELIMITER = delimiter.charCodeAt(0);\n\n  function parse(text, f) {\n    var convert, columns, rows = parseRows(text, function(row, i) {\n      if (convert) return convert(row, i - 1);\n      columns = row, convert = f ? customConverter(row, f) : objectConverter(row);\n    });\n    rows.columns = columns || [];\n    return rows;\n  }\n\n  function parseRows(text, f) {\n    var rows = [], // output rows\n        N = text.length,\n        I = 0, // current character index\n        n = 0, // current line number\n        t, // current token\n        eof = N <= 0, // current token followed by EOF?\n        eol = false; // current token followed by EOL?\n\n    // Strip the trailing newline.\n    if (text.charCodeAt(N - 1) === NEWLINE) --N;\n    if (text.charCodeAt(N - 1) === RETURN) --N;\n\n    function token() {\n      if (eof) return EOF;\n      if (eol) return eol = false, EOL;\n\n      // Unescape quotes.\n      var i, j = I, c;\n      if (text.charCodeAt(j) === QUOTE) {\n        while (I++ < N && text.charCodeAt(I) !== QUOTE || text.charCodeAt(++I) === QUOTE);\n        if ((i = I) >= N) eof = true;\n        else if ((c = text.charCodeAt(I++)) === NEWLINE) eol = true;\n        else if (c === RETURN) { eol = true; if (text.charCodeAt(I) === NEWLINE) ++I; }\n        return text.slice(j + 1, i - 1).replace(/\"\"/g, \"\\\"\");\n      }\n\n      // Find next delimiter or newline.\n      while (I < N) {\n        if ((c = text.charCodeAt(i = I++)) === NEWLINE) eol = true;\n        else if (c === RETURN) { eol = true; if (text.charCodeAt(I) === NEWLINE) ++I; }\n        else if (c !== DELIMITER) continue;\n        return text.slice(j, i);\n      }\n\n      // Return last token before EOF.\n      return eof = true, text.slice(j, N);\n    }\n\n    while ((t = token()) !== EOF) {\n      var row = [];\n      while (t !== EOL && t !== EOF) row.push(t), t = token();\n      if (f && (row = f(row, n++)) == null) continue;\n      rows.push(row);\n    }\n\n    return rows;\n  }\n\n  function preformatBody(rows, columns) {\n    return rows.map(function(row) {\n      return columns.map(function(column) {\n        return formatValue(row[column]);\n      }).join(delimiter);\n    });\n  }\n\n  function format(rows, columns) {\n    if (columns == null) columns = inferColumns(rows);\n    return [columns.map(formatValue).join(delimiter)].concat(preformatBody(rows, columns)).join(\"\\n\");\n  }\n\n  function formatBody(rows, columns) {\n    if (columns == null) columns = inferColumns(rows);\n    return preformatBody(rows, columns).join(\"\\n\");\n  }\n\n  function formatRows(rows) {\n    return rows.map(formatRow).join(\"\\n\");\n  }\n\n  function formatRow(row) {\n    return row.map(formatValue).join(delimiter);\n  }\n\n  function formatValue(value) {\n    return value == null ? \"\"\n        : value instanceof Date ? formatDate(value)\n        : reFormat.test(value += \"\") ? \"\\\"\" + value.replace(/\"/g, \"\\\"\\\"\") + \"\\\"\"\n        : value;\n  }\n\n  return {\n    parse: parse,\n    parseRows: parseRows,\n    format: format,\n    formatBody: formatBody,\n    formatRows: formatRows,\n    formatRow: formatRow,\n    formatValue: formatValue\n  };\n}\n","import dsv from \"./dsv.js\";\n\nvar csv = dsv(\",\");\n\nexport var csvParse = csv.parse;\nexport var csvParseRows = csv.parseRows;\nexport var csvFormat = csv.format;\nexport var csvFormatBody = csv.formatBody;\nexport var csvFormatRows = csv.formatRows;\nexport var csvFormatRow = csv.formatRow;\nexport var csvFormatValue = csv.formatValue;\n","export default function(x) {\n  return Math.abs(x = Math.round(x)) >= 1e21\n      ? x.toLocaleString(\"en\").replace(/,/g, \"\")\n      : x.toString(10);\n}\n\n// Computes the decimal coefficient and exponent of the specified number x with\n// significant digits p, where x is positive and p is in [1, 21] or undefined.\n// For example, formatDecimalParts(1.23) returns [\"123\", 0].\nexport function formatDecimalParts(x, p) {\n  if ((i = (x = p ? x.toExponential(p - 1) : x.toExponential()).indexOf(\"e\")) < 0) return null; // NaN, Infinity\n  var i, coefficient = x.slice(0, i);\n\n  // The string returned by toExponential either has the form \\d\\.\\d+e[-+]\\d+\n  // (e.g., 1.2e+3) or the form \\de[-+]\\d+ (e.g., 1e+3).\n  return [\n    coefficient.length > 1 ? coefficient[0] + coefficient.slice(2) : coefficient,\n    +x.slice(i + 1)\n  ];\n}\n","import {formatDecimalParts} from \"./formatDecimal.js\";\n\nexport default function(x) {\n  return x = formatDecimalParts(Math.abs(x)), x ? x[1] : NaN;\n}\n","// [[fill]align][sign][symbol][0][width][,][.precision][~][type]\nvar re = /^(?:(.)?([<>=^]))?([+\\-( ])?([$#])?(0)?(\\d+)?(,)?(\\.\\d+)?(~)?([a-z%])?$/i;\n\nexport default function formatSpecifier(specifier) {\n  if (!(match = re.exec(specifier))) throw new Error(\"invalid format: \" + specifier);\n  var match;\n  return new FormatSpecifier({\n    fill: match[1],\n    align: match[2],\n    sign: match[3],\n    symbol: match[4],\n    zero: match[5],\n    width: match[6],\n    comma: match[7],\n    precision: match[8] && match[8].slice(1),\n    trim: match[9],\n    type: match[10]\n  });\n}\n\nformatSpecifier.prototype = FormatSpecifier.prototype; // instanceof\n\nexport function FormatSpecifier(specifier) {\n  this.fill = specifier.fill === undefined ? \" \" : specifier.fill + \"\";\n  this.align = specifier.align === undefined ? \">\" : specifier.align + \"\";\n  this.sign = specifier.sign === undefined ? \"-\" : specifier.sign + \"\";\n  this.symbol = specifier.symbol === undefined ? \"\" : specifier.symbol + \"\";\n  this.zero = !!specifier.zero;\n  this.width = specifier.width === undefined ? undefined : +specifier.width;\n  this.comma = !!specifier.comma;\n  this.precision = specifier.precision === undefined ? undefined : +specifier.precision;\n  this.trim = !!specifier.trim;\n  this.type = specifier.type === undefined ? \"\" : specifier.type + \"\";\n}\n\nFormatSpecifier.prototype.toString = function() {\n  return this.fill\n      + this.align\n      + this.sign\n      + this.symbol\n      + (this.zero ? \"0\" : \"\")\n      + (this.width === undefined ? \"\" : Math.max(1, this.width | 0))\n      + (this.comma ? \",\" : \"\")\n      + (this.precision === undefined ? \"\" : \".\" + Math.max(0, this.precision | 0))\n      + (this.trim ? \"~\" : \"\")\n      + this.type;\n};\n","import {formatDecimalParts} from \"./formatDecimal.js\";\n\nexport var prefixExponent;\n\nexport default function(x, p) {\n  var d = formatDecimalParts(x, p);\n  if (!d) return x + \"\";\n  var coefficient = d[0],\n      exponent = d[1],\n      i = exponent - (prefixExponent = Math.max(-8, Math.min(8, Math.floor(exponent / 3))) * 3) + 1,\n      n = coefficient.length;\n  return i === n ? coefficient\n      : i > n ? coefficient + new Array(i - n + 1).join(\"0\")\n      : i > 0 ? coefficient.slice(0, i) + \".\" + coefficient.slice(i)\n      : \"0.\" + new Array(1 - i).join(\"0\") + formatDecimalParts(x, Math.max(0, p + i - 1))[0]; // less than 1y!\n}\n","import {formatDecimalParts} from \"./formatDecimal.js\";\n\nexport default function(x, p) {\n  var d = formatDecimalParts(x, p);\n  if (!d) return x + \"\";\n  var coefficient = d[0],\n      exponent = d[1];\n  return exponent < 0 ? \"0.\" + new Array(-exponent).join(\"0\") + coefficient\n      : coefficient.length > exponent + 1 ? coefficient.slice(0, exponent + 1) + \".\" + coefficient.slice(exponent + 1)\n      : coefficient + new Array(exponent - coefficient.length + 2).join(\"0\");\n}\n","import formatDecimal from \"./formatDecimal.js\";\nimport formatPrefixAuto from \"./formatPrefixAuto.js\";\nimport formatRounded from \"./formatRounded.js\";\n\nexport default {\n  \"%\": (x, p) => (x * 100).toFixed(p),\n  \"b\": (x) => Math.round(x).toString(2),\n  \"c\": (x) => x + \"\",\n  \"d\": formatDecimal,\n  \"e\": (x, p) => x.toExponential(p),\n  \"f\": (x, p) => x.toFixed(p),\n  \"g\": (x, p) => x.toPrecision(p),\n  \"o\": (x) => Math.round(x).toString(8),\n  \"p\": (x, p) => formatRounded(x * 100, p),\n  \"r\": formatRounded,\n  \"s\": formatPrefixAuto,\n  \"X\": (x) => Math.round(x).toString(16).toUpperCase(),\n  \"x\": (x) => Math.round(x).toString(16)\n};\n","export default function(x) {\n  return x;\n}\n","import exponent from \"./exponent.js\";\nimport formatGroup from \"./formatGroup.js\";\nimport formatNumerals from \"./formatNumerals.js\";\nimport formatSpecifier from \"./formatSpecifier.js\";\nimport formatTrim from \"./formatTrim.js\";\nimport formatTypes from \"./formatTypes.js\";\nimport {prefixExponent} from \"./formatPrefixAuto.js\";\nimport identity from \"./identity.js\";\n\nvar map = Array.prototype.map,\n    prefixes = [\"y\",\"z\",\"a\",\"f\",\"p\",\"n\",\"\",\"m\",\"\",\"k\",\"M\",\"G\",\"T\",\"P\",\"E\",\"Z\",\"Y\"];\n\nexport default function(locale) {\n  var group = locale.grouping === undefined || locale.thousands === undefined ? identity : formatGroup(map.call(locale.grouping, Number), locale.thousands + \"\"),\n      currencyPrefix = locale.currency === undefined ? \"\" : locale.currency[0] + \"\",\n      currencySuffix = locale.currency === undefined ? \"\" : locale.currency[1] + \"\",\n      decimal = locale.decimal === undefined ? \".\" : locale.decimal + \"\",\n      numerals = locale.numerals === undefined ? identity : formatNumerals(map.call(locale.numerals, String)),\n      percent = locale.percent === undefined ? \"%\" : locale.percent + \"\",\n      minus = locale.minus === undefined ? \"\" : locale.minus + \"\",\n      nan = locale.nan === undefined ? \"NaN\" : locale.nan + \"\";\n\n  function newFormat(specifier) {\n    specifier = formatSpecifier(specifier);\n\n    var fill = specifier.fill,\n        align = specifier.align,\n        sign = specifier.sign,\n        symbol = specifier.symbol,\n        zero = specifier.zero,\n        width = specifier.width,\n        comma = specifier.comma,\n        precision = specifier.precision,\n        trim = specifier.trim,\n        type = specifier.type;\n\n    // The \"n\" type is an alias for \",g\".\n    if (type === \"n\") comma = true, type = \"g\";\n\n    // The \"\" type, and any invalid type, is an alias for \".12~g\".\n    else if (!formatTypes[type]) precision === undefined && (precision = 12), trim = true, type = \"g\";\n\n    // If zero fill is specified, padding goes after sign and before digits.\n    if (zero || (fill === \"0\" && align === \"=\")) zero = true, fill = \"0\", align = \"=\";\n\n    // Compute the prefix and suffix.\n    // For SI-prefix, the suffix is lazily computed.\n    var prefix = symbol === \"$\" ? currencyPrefix : symbol === \"#\" && /[boxX]/.test(type) ? \"0\" + type.toLowerCase() : \"\",\n        suffix = symbol === \"$\" ? currencySuffix : /[%p]/.test(type) ? percent : \"\";\n\n    // What format function should we use?\n    // Is this an integer type?\n    // Can this type generate exponential notation?\n    var formatType = formatTypes[type],\n        maybeSuffix = /[defgprs%]/.test(type);\n\n    // Set the default precision if not specified,\n    // or clamp the specified precision to the supported range.\n    // For significant precision, it must be in [1, 21].\n    // For fixed precision, it must be in [0, 20].\n    precision = precision === undefined ? 6\n        : /[gprs]/.test(type) ? Math.max(1, Math.min(21, precision))\n        : Math.max(0, Math.min(20, precision));\n\n    function format(value) {\n      var valuePrefix = prefix,\n          valueSuffix = suffix,\n          i, n, c;\n\n      if (type === \"c\") {\n        valueSuffix = formatType(value) + valueSuffix;\n        value = \"\";\n      } else {\n        value = +value;\n\n        // Determine the sign. -0 is not less than 0, but 1 / -0 is!\n        var valueNegative = value < 0 || 1 / value < 0;\n\n        // Perform the initial formatting.\n        value = isNaN(value) ? nan : formatType(Math.abs(value), precision);\n\n        // Trim insignificant zeros.\n        if (trim) value = formatTrim(value);\n\n        // If a negative value rounds to zero after formatting, and no explicit positive sign is requested, hide the sign.\n        if (valueNegative && +value === 0 && sign !== \"+\") valueNegative = false;\n\n        // Compute the prefix and suffix.\n        valuePrefix = (valueNegative ? (sign === \"(\" ? sign : minus) : sign === \"-\" || sign === \"(\" ? \"\" : sign) + valuePrefix;\n        valueSuffix = (type === \"s\" ? prefixes[8 + prefixExponent / 3] : \"\") + valueSuffix + (valueNegative && sign === \"(\" ? \")\" : \"\");\n\n        // Break the formatted value into the integer value part that can be\n        // grouped, and fractional or exponential suffix part that is not.\n        if (maybeSuffix) {\n          i = -1, n = value.length;\n          while (++i < n) {\n            if (c = value.charCodeAt(i), 48 > c || c > 57) {\n              valueSuffix = (c === 46 ? decimal + value.slice(i + 1) : value.slice(i)) + valueSuffix;\n              value = value.slice(0, i);\n              break;\n            }\n          }\n        }\n      }\n\n      // If the fill character is not \"0\", grouping is applied before padding.\n      if (comma && !zero) value = group(value, Infinity);\n\n      // Compute the padding.\n      var length = valuePrefix.length + value.length + valueSuffix.length,\n          padding = length < width ? new Array(width - length + 1).join(fill) : \"\";\n\n      // If the fill character is \"0\", grouping is applied after padding.\n      if (comma && zero) value = group(padding + value, padding.length ? width - valueSuffix.length : Infinity), padding = \"\";\n\n      // Reconstruct the final output based on the desired alignment.\n      switch (align) {\n        case \"<\": value = valuePrefix + value + valueSuffix + padding; break;\n        case \"=\": value = valuePrefix + padding + value + valueSuffix; break;\n        case \"^\": value = padding.slice(0, length = padding.length >> 1) + valuePrefix + value + valueSuffix + padding.slice(length); break;\n        default: value = padding + valuePrefix + value + valueSuffix; break;\n      }\n\n      return numerals(value);\n    }\n\n    format.toString = function() {\n      return specifier + \"\";\n    };\n\n    return format;\n  }\n\n  function formatPrefix(specifier, value) {\n    var f = newFormat((specifier = formatSpecifier(specifier), specifier.type = \"f\", specifier)),\n        e = Math.max(-8, Math.min(8, Math.floor(exponent(value) / 3))) * 3,\n        k = Math.pow(10, -e),\n        prefix = prefixes[8 + e / 3];\n    return function(value) {\n      return f(k * value) + prefix;\n    };\n  }\n\n  return {\n    format: newFormat,\n    formatPrefix: formatPrefix\n  };\n}\n","import formatLocale from \"./locale.js\";\n\nvar locale;\nexport var format;\nexport var formatPrefix;\n\ndefaultLocale({\n  thousands: \",\",\n  grouping: [3],\n  currency: [\"$\", \"\"]\n});\n\nexport default function defaultLocale(definition) {\n  locale = formatLocale(definition);\n  format = locale.format;\n  formatPrefix = locale.formatPrefix;\n  return locale;\n}\n","export default function(grouping, thousands) {\n  return function(value, width) {\n    var i = value.length,\n        t = [],\n        j = 0,\n        g = grouping[0],\n        length = 0;\n\n    while (i > 0 && g > 0) {\n      if (length + g + 1 > width) g = Math.max(1, width - length);\n      t.push(value.substring(i -= g, i + g));\n      if ((length += g + 1) > width) break;\n      g = grouping[j = (j + 1) % grouping.length];\n    }\n\n    return t.reverse().join(thousands);\n  };\n}\n","export default function(numerals) {\n  return function(value) {\n    return value.replace(/[0-9]/g, function(i) {\n      return numerals[+i];\n    });\n  };\n}\n","// Trims insignificant zeros, e.g., replaces 1.2000k with 1.2k.\nexport default function(s) {\n  out: for (var n = s.length, i = 1, i0 = -1, i1; i < n; ++i) {\n    switch (s[i]) {\n      case \".\": i0 = i1 = i; break;\n      case \"0\": if (i0 === 0) i0 = i; i1 = i; break;\n      default: if (!+s[i]) break out; if (i0 > 0) i0 = 0; break;\n    }\n  }\n  return i0 > 0 ? s.slice(0, i0) + s.slice(i1 + 1) : s;\n}\n","export function initRange(domain, range) {\n  switch (arguments.length) {\n    case 0: break;\n    case 1: this.range(domain); break;\n    default: this.range(range).domain(domain); break;\n  }\n  return this;\n}\n\nexport function initInterpolator(domain, interpolator) {\n  switch (arguments.length) {\n    case 0: break;\n    case 1: {\n      if (typeof domain === \"function\") this.interpolator(domain);\n      else this.range(domain);\n      break;\n    }\n    default: {\n      this.domain(domain);\n      if (typeof interpolator === \"function\") this.interpolator(interpolator);\n      else this.range(interpolator);\n      break;\n    }\n  }\n  return this;\n}\n","export default function number(x) {\n  return +x;\n}\n","import {bisect} from \"d3-array\";\nimport {interpolate as interpolateValue, interpolateNumber, interpolateRound} from \"d3-interpolate\";\nimport constant from \"./constant.js\";\nimport number from \"./number.js\";\n\nvar unit = [0, 1];\n\nexport function identity(x) {\n  return x;\n}\n\nfunction normalize(a, b) {\n  return (b -= (a = +a))\n      ? function(x) { return (x - a) / b; }\n      : constant(isNaN(b) ? NaN : 0.5);\n}\n\nfunction clamper(a, b) {\n  var t;\n  if (a > b) t = a, a = b, b = t;\n  return function(x) { return Math.max(a, Math.min(b, x)); };\n}\n\n// normalize(a, b)(x) takes a domain value x in [a,b] and returns the corresponding parameter t in [0,1].\n// interpolate(a, b)(t) takes a parameter t in [0,1] and returns the corresponding range value x in [a,b].\nfunction bimap(domain, range, interpolate) {\n  var d0 = domain[0], d1 = domain[1], r0 = range[0], r1 = range[1];\n  if (d1 < d0) d0 = normalize(d1, d0), r0 = interpolate(r1, r0);\n  else d0 = normalize(d0, d1), r0 = interpolate(r0, r1);\n  return function(x) { return r0(d0(x)); };\n}\n\nfunction polymap(domain, range, interpolate) {\n  var j = Math.min(domain.length, range.length) - 1,\n      d = new Array(j),\n      r = new Array(j),\n      i = -1;\n\n  // Reverse descending domains.\n  if (domain[j] < domain[0]) {\n    domain = domain.slice().reverse();\n    range = range.slice().reverse();\n  }\n\n  while (++i < j) {\n    d[i] = normalize(domain[i], domain[i + 1]);\n    r[i] = interpolate(range[i], range[i + 1]);\n  }\n\n  return function(x) {\n    var i = bisect(domain, x, 1, j) - 1;\n    return r[i](d[i](x));\n  };\n}\n\nexport function copy(source, target) {\n  return target\n      .domain(source.domain())\n      .range(source.range())\n      .interpolate(source.interpolate())\n      .clamp(source.clamp())\n      .unknown(source.unknown());\n}\n\nexport function transformer() {\n  var domain = unit,\n      range = unit,\n      interpolate = interpolateValue,\n      transform,\n      untransform,\n      unknown,\n      clamp = identity,\n      piecewise,\n      output,\n      input;\n\n  function rescale() {\n    var n = Math.min(domain.length, range.length);\n    if (clamp !== identity) clamp = clamper(domain[0], domain[n - 1]);\n    piecewise = n > 2 ? polymap : bimap;\n    output = input = null;\n    return scale;\n  }\n\n  function scale(x) {\n    return x == null || isNaN(x = +x) ? unknown : (output || (output = piecewise(domain.map(transform), range, interpolate)))(transform(clamp(x)));\n  }\n\n  scale.invert = function(y) {\n    return clamp(untransform((input || (input = piecewise(range, domain.map(transform), interpolateNumber)))(y)));\n  };\n\n  scale.domain = function(_) {\n    return arguments.length ? (domain = Array.from(_, number), rescale()) : domain.slice();\n  };\n\n  scale.range = function(_) {\n    return arguments.length ? (range = Array.from(_), rescale()) : range.slice();\n  };\n\n  scale.rangeRound = function(_) {\n    return range = Array.from(_), interpolate = interpolateRound, rescale();\n  };\n\n  scale.clamp = function(_) {\n    return arguments.length ? (clamp = _ ? true : identity, rescale()) : clamp !== identity;\n  };\n\n  scale.interpolate = function(_) {\n    return arguments.length ? (interpolate = _, rescale()) : interpolate;\n  };\n\n  scale.unknown = function(_) {\n    return arguments.length ? (unknown = _, scale) : unknown;\n  };\n\n  return function(t, u) {\n    transform = t, untransform = u;\n    return rescale();\n  };\n}\n\nexport default function continuous() {\n  return transformer()(identity, identity);\n}\n","export default function constants(x) {\n  return function() {\n    return x;\n  };\n}\n","import {tickStep} from \"d3-array\";\nimport {format, formatPrefix, formatSpecifier, precisionFixed, precisionPrefix, precisionRound} from \"d3-format\";\n\nexport default function tickFormat(start, stop, count, specifier) {\n  var step = tickStep(start, stop, count),\n      precision;\n  specifier = formatSpecifier(specifier == null ? \",f\" : specifier);\n  switch (specifier.type) {\n    case \"s\": {\n      var value = Math.max(Math.abs(start), Math.abs(stop));\n      if (specifier.precision == null && !isNaN(precision = precisionPrefix(step, value))) specifier.precision = precision;\n      return formatPrefix(specifier, value);\n    }\n    case \"\":\n    case \"e\":\n    case \"g\":\n    case \"p\":\n    case \"r\": {\n      if (specifier.precision == null && !isNaN(precision = precisionRound(step, Math.max(Math.abs(start), Math.abs(stop))))) specifier.precision = precision - (specifier.type === \"e\");\n      break;\n    }\n    case \"f\":\n    case \"%\": {\n      if (specifier.precision == null && !isNaN(precision = precisionFixed(step))) specifier.precision = precision - (specifier.type === \"%\") * 2;\n      break;\n    }\n  }\n  return format(specifier);\n}\n","import exponent from \"./exponent.js\";\n\nexport default function(step, value) {\n  return Math.max(0, Math.max(-8, Math.min(8, Math.floor(exponent(value) / 3))) * 3 - exponent(Math.abs(step)));\n}\n","import exponent from \"./exponent.js\";\n\nexport default function(step, max) {\n  step = Math.abs(step), max = Math.abs(max) - step;\n  return Math.max(0, exponent(max) - exponent(step)) + 1;\n}\n","import exponent from \"./exponent.js\";\n\nexport default function(step) {\n  return Math.max(0, -exponent(Math.abs(step)));\n}\n","import {ticks, tickIncrement} from \"d3-array\";\nimport continuous, {copy} from \"./continuous.js\";\nimport {initRange} from \"./init.js\";\nimport tickFormat from \"./tickFormat.js\";\n\nexport function linearish(scale) {\n  var domain = scale.domain;\n\n  scale.ticks = function(count) {\n    var d = domain();\n    return ticks(d[0], d[d.length - 1], count == null ? 10 : count);\n  };\n\n  scale.tickFormat = function(count, specifier) {\n    var d = domain();\n    return tickFormat(d[0], d[d.length - 1], count == null ? 10 : count, specifier);\n  };\n\n  scale.nice = function(count) {\n    if (count == null) count = 10;\n\n    var d = domain();\n    var i0 = 0;\n    var i1 = d.length - 1;\n    var start = d[i0];\n    var stop = d[i1];\n    var prestep;\n    var step;\n    var maxIter = 10;\n\n    if (stop < start) {\n      step = start, start = stop, stop = step;\n      step = i0, i0 = i1, i1 = step;\n    }\n    \n    while (maxIter-- > 0) {\n      step = tickIncrement(start, stop, count);\n      if (step === prestep) {\n        d[i0] = start\n        d[i1] = stop\n        return domain(d);\n      } else if (step > 0) {\n        start = Math.floor(start / step) * step;\n        stop = Math.ceil(stop / step) * step;\n      } else if (step < 0) {\n        start = Math.ceil(start * step) / step;\n        stop = Math.floor(stop * step) / step;\n      } else {\n        break;\n      }\n      prestep = step;\n    }\n\n    return scale;\n  };\n\n  return scale;\n}\n\nexport default function linear() {\n  var scale = continuous();\n\n  scale.copy = function() {\n    return copy(scale, linear());\n  };\n\n  initRange.apply(scale, arguments);\n\n  return linearish(scale);\n}\n","const t0 = new Date, t1 = new Date;\n\nexport function timeInterval(floori, offseti, count, field) {\n\n  function interval(date) {\n    return floori(date = arguments.length === 0 ? new Date : new Date(+date)), date;\n  }\n\n  interval.floor = (date) => {\n    return floori(date = new Date(+date)), date;\n  };\n\n  interval.ceil = (date) => {\n    return floori(date = new Date(date - 1)), offseti(date, 1), floori(date), date;\n  };\n\n  interval.round = (date) => {\n    const d0 = interval(date), d1 = interval.ceil(date);\n    return date - d0 < d1 - date ? d0 : d1;\n  };\n\n  interval.offset = (date, step) => {\n    return offseti(date = new Date(+date), step == null ? 1 : Math.floor(step)), date;\n  };\n\n  interval.range = (start, stop, step) => {\n    const range = [];\n    start = interval.ceil(start);\n    step = step == null ? 1 : Math.floor(step);\n    if (!(start < stop) || !(step > 0)) return range; // also handles Invalid Date\n    let previous;\n    do range.push(previous = new Date(+start)), offseti(start, step), floori(start);\n    while (previous < start && start < stop);\n    return range;\n  };\n\n  interval.filter = (test) => {\n    return timeInterval((date) => {\n      if (date >= date) while (floori(date), !test(date)) date.setTime(date - 1);\n    }, (date, step) => {\n      if (date >= date) {\n        if (step < 0) while (++step <= 0) {\n          while (offseti(date, -1), !test(date)) {} // eslint-disable-line no-empty\n        } else while (--step >= 0) {\n          while (offseti(date, +1), !test(date)) {} // eslint-disable-line no-empty\n        }\n      }\n    });\n  };\n\n  if (count) {\n    interval.count = (start, end) => {\n      t0.setTime(+start), t1.setTime(+end);\n      floori(t0), floori(t1);\n      return Math.floor(count(t0, t1));\n    };\n\n    interval.every = (step) => {\n      step = Math.floor(step);\n      return !isFinite(step) || !(step > 0) ? null\n          : !(step > 1) ? interval\n          : interval.filter(field\n              ? (d) => field(d) % step === 0\n              : (d) => interval.count(0, d) % step === 0);\n    };\n  }\n\n  return interval;\n}\n","import {timeInterval} from \"./interval.js\";\n\nexport const millisecond = timeInterval(() => {\n  // noop\n}, (date, step) => {\n  date.setTime(+date + step);\n}, (start, end) => {\n  return end - start;\n});\n\n// An optimized implementation for this simple case.\nmillisecond.every = (k) => {\n  k = Math.floor(k);\n  if (!isFinite(k) || !(k > 0)) return null;\n  if (!(k > 1)) return millisecond;\n  return timeInterval((date) => {\n    date.setTime(Math.floor(date / k) * k);\n  }, (date, step) => {\n    date.setTime(+date + step * k);\n  }, (start, end) => {\n    return (end - start) / k;\n  });\n};\n\nexport const milliseconds = millisecond.range;\n","export const durationSecond = 1000;\nexport const durationMinute = durationSecond * 60;\nexport const durationHour = durationMinute * 60;\nexport const durationDay = durationHour * 24;\nexport const durationWeek = durationDay * 7;\nexport const durationMonth = durationDay * 30;\nexport const durationYear = durationDay * 365;\n","import {timeInterval} from \"./interval.js\";\nimport {durationSecond} from \"./duration.js\";\n\nexport const second = timeInterval((date) => {\n  date.setTime(date - date.getMilliseconds());\n}, (date, step) => {\n  date.setTime(+date + step * durationSecond);\n}, (start, end) => {\n  return (end - start) / durationSecond;\n}, (date) => {\n  return date.getUTCSeconds();\n});\n\nexport const seconds = second.range;\n","import {timeInterval} from \"./interval.js\";\nimport {durationMinute, durationSecond} from \"./duration.js\";\n\nexport const timeMinute = timeInterval((date) => {\n  date.setTime(date - date.getMilliseconds() - date.getSeconds() * durationSecond);\n}, (date, step) => {\n  date.setTime(+date + step * durationMinute);\n}, (start, end) => {\n  return (end - start) / durationMinute;\n}, (date) => {\n  return date.getMinutes();\n});\n\nexport const timeMinutes = timeMinute.range;\n\nexport const utcMinute = timeInterval((date) => {\n  date.setUTCSeconds(0, 0);\n}, (date, step) => {\n  date.setTime(+date + step * durationMinute);\n}, (start, end) => {\n  return (end - start) / durationMinute;\n}, (date) => {\n  return date.getUTCMinutes();\n});\n\nexport const utcMinutes = utcMinute.range;\n","import {timeInterval} from \"./interval.js\";\nimport {durationHour, durationMinute, durationSecond} from \"./duration.js\";\n\nexport const timeHour = timeInterval((date) => {\n  date.setTime(date - date.getMilliseconds() - date.getSeconds() * durationSecond - date.getMinutes() * durationMinute);\n}, (date, step) => {\n  date.setTime(+date + step * durationHour);\n}, (start, end) => {\n  return (end - start) / durationHour;\n}, (date) => {\n  return date.getHours();\n});\n\nexport const timeHours = timeHour.range;\n\nexport const utcHour = timeInterval((date) => {\n  date.setUTCMinutes(0, 0, 0);\n}, (date, step) => {\n  date.setTime(+date + step * durationHour);\n}, (start, end) => {\n  return (end - start) / durationHour;\n}, (date) => {\n  return date.getUTCHours();\n});\n\nexport const utcHours = utcHour.range;\n","import {timeInterval} from \"./interval.js\";\nimport {durationDay, durationMinute} from \"./duration.js\";\n\nexport const timeDay = timeInterval(\n  date => date.setHours(0, 0, 0, 0),\n  (date, step) => date.setDate(date.getDate() + step),\n  (start, end) => (end - start - (end.getTimezoneOffset() - start.getTimezoneOffset()) * durationMinute) / durationDay,\n  date => date.getDate() - 1\n);\n\nexport const timeDays = timeDay.range;\n\nexport const utcDay = timeInterval((date) => {\n  date.setUTCHours(0, 0, 0, 0);\n}, (date, step) => {\n  date.setUTCDate(date.getUTCDate() + step);\n}, (start, end) => {\n  return (end - start) / durationDay;\n}, (date) => {\n  return date.getUTCDate() - 1;\n});\n\nexport const utcDays = utcDay.range;\n\nexport const unixDay = timeInterval((date) => {\n  date.setUTCHours(0, 0, 0, 0);\n}, (date, step) => {\n  date.setUTCDate(date.getUTCDate() + step);\n}, (start, end) => {\n  return (end - start) / durationDay;\n}, (date) => {\n  return Math.floor(date / durationDay);\n});\n\nexport const unixDays = unixDay.range;\n","import {timeInterval} from \"./interval.js\";\nimport {durationMinute, durationWeek} from \"./duration.js\";\n\nfunction timeWeekday(i) {\n  return timeInterval((date) => {\n    date.setDate(date.getDate() - (date.getDay() + 7 - i) % 7);\n    date.setHours(0, 0, 0, 0);\n  }, (date, step) => {\n    date.setDate(date.getDate() + step * 7);\n  }, (start, end) => {\n    return (end - start - (end.getTimezoneOffset() - start.getTimezoneOffset()) * durationMinute) / durationWeek;\n  });\n}\n\nexport const timeSunday = timeWeekday(0);\nexport const timeMonday = timeWeekday(1);\nexport const timeTuesday = timeWeekday(2);\nexport const timeWednesday = timeWeekday(3);\nexport const timeThursday = timeWeekday(4);\nexport const timeFriday = timeWeekday(5);\nexport const timeSaturday = timeWeekday(6);\n\nexport const timeSundays = timeSunday.range;\nexport const timeMondays = timeMonday.range;\nexport const timeTuesdays = timeTuesday.range;\nexport const timeWednesdays = timeWednesday.range;\nexport const timeThursdays = timeThursday.range;\nexport const timeFridays = timeFriday.range;\nexport const timeSaturdays = timeSaturday.range;\n\nfunction utcWeekday(i) {\n  return timeInterval((date) => {\n    date.setUTCDate(date.getUTCDate() - (date.getUTCDay() + 7 - i) % 7);\n    date.setUTCHours(0, 0, 0, 0);\n  }, (date, step) => {\n    date.setUTCDate(date.getUTCDate() + step * 7);\n  }, (start, end) => {\n    return (end - start) / durationWeek;\n  });\n}\n\nexport const utcSunday = utcWeekday(0);\nexport const utcMonday = utcWeekday(1);\nexport const utcTuesday = utcWeekday(2);\nexport const utcWednesday = utcWeekday(3);\nexport const utcThursday = utcWeekday(4);\nexport const utcFriday = utcWeekday(5);\nexport const utcSaturday = utcWeekday(6);\n\nexport const utcSundays = utcSunday.range;\nexport const utcMondays = utcMonday.range;\nexport const utcTuesdays = utcTuesday.range;\nexport const utcWednesdays = utcWednesday.range;\nexport const utcThursdays = utcThursday.range;\nexport const utcFridays = utcFriday.range;\nexport const utcSaturdays = utcSaturday.range;\n","import {timeInterval} from \"./interval.js\";\n\nexport const timeMonth = timeInterval((date) => {\n  date.setDate(1);\n  date.setHours(0, 0, 0, 0);\n}, (date, step) => {\n  date.setMonth(date.getMonth() + step);\n}, (start, end) => {\n  return end.getMonth() - start.getMonth() + (end.getFullYear() - start.getFullYear()) * 12;\n}, (date) => {\n  return date.getMonth();\n});\n\nexport const timeMonths = timeMonth.range;\n\nexport const utcMonth = timeInterval((date) => {\n  date.setUTCDate(1);\n  date.setUTCHours(0, 0, 0, 0);\n}, (date, step) => {\n  date.setUTCMonth(date.getUTCMonth() + step);\n}, (start, end) => {\n  return end.getUTCMonth() - start.getUTCMonth() + (end.getUTCFullYear() - start.getUTCFullYear()) * 12;\n}, (date) => {\n  return date.getUTCMonth();\n});\n\nexport const utcMonths = utcMonth.range;\n","import {timeInterval} from \"./interval.js\";\n\nexport const timeYear = timeInterval((date) => {\n  date.setMonth(0, 1);\n  date.setHours(0, 0, 0, 0);\n}, (date, step) => {\n  date.setFullYear(date.getFullYear() + step);\n}, (start, end) => {\n  return end.getFullYear() - start.getFullYear();\n}, (date) => {\n  return date.getFullYear();\n});\n\n// An optimized implementation for this simple case.\ntimeYear.every = (k) => {\n  return !isFinite(k = Math.floor(k)) || !(k > 0) ? null : timeInterval((date) => {\n    date.setFullYear(Math.floor(date.getFullYear() / k) * k);\n    date.setMonth(0, 1);\n    date.setHours(0, 0, 0, 0);\n  }, (date, step) => {\n    date.setFullYear(date.getFullYear() + step * k);\n  });\n};\n\nexport const timeYears = timeYear.range;\n\nexport const utcYear = timeInterval((date) => {\n  date.setUTCMonth(0, 1);\n  date.setUTCHours(0, 0, 0, 0);\n}, (date, step) => {\n  date.setUTCFullYear(date.getUTCFullYear() + step);\n}, (start, end) => {\n  return end.getUTCFullYear() - start.getUTCFullYear();\n}, (date) => {\n  return date.getUTCFullYear();\n});\n\n// An optimized implementation for this simple case.\nutcYear.every = (k) => {\n  return !isFinite(k = Math.floor(k)) || !(k > 0) ? null : timeInterval((date) => {\n    date.setUTCFullYear(Math.floor(date.getUTCFullYear() / k) * k);\n    date.setUTCMonth(0, 1);\n    date.setUTCHours(0, 0, 0, 0);\n  }, (date, step) => {\n    date.setUTCFullYear(date.getUTCFullYear() + step * k);\n  });\n};\n\nexport const utcYears = utcYear.range;\n","import {bisector, tickStep} from \"d3-array\";\nimport {durationDay, durationHour, durationMinute, durationMonth, durationSecond, durationWeek, durationYear} from \"./duration.js\";\nimport {millisecond} from \"./millisecond.js\";\nimport {second} from \"./second.js\";\nimport {timeMinute, utcMinute} from \"./minute.js\";\nimport {timeHour, utcHour} from \"./hour.js\";\nimport {timeDay, unixDay} from \"./day.js\";\nimport {timeSunday, utcSunday} from \"./week.js\";\nimport {timeMonth, utcMonth} from \"./month.js\";\nimport {timeYear, utcYear} from \"./year.js\";\n\nfunction ticker(year, month, week, day, hour, minute) {\n\n  const tickIntervals = [\n    [second,  1,      durationSecond],\n    [second,  5,  5 * durationSecond],\n    [second, 15, 15 * durationSecond],\n    [second, 30, 30 * durationSecond],\n    [minute,  1,      durationMinute],\n    [minute,  5,  5 * durationMinute],\n    [minute, 15, 15 * durationMinute],\n    [minute, 30, 30 * durationMinute],\n    [  hour,  1,      durationHour  ],\n    [  hour,  3,  3 * durationHour  ],\n    [  hour,  6,  6 * durationHour  ],\n    [  hour, 12, 12 * durationHour  ],\n    [   day,  1,      durationDay   ],\n    [   day,  2,  2 * durationDay   ],\n    [  week,  1,      durationWeek  ],\n    [ month,  1,      durationMonth ],\n    [ month,  3,  3 * durationMonth ],\n    [  year,  1,      durationYear  ]\n  ];\n\n  function ticks(start, stop, count) {\n    const reverse = stop < start;\n    if (reverse) [start, stop] = [stop, start];\n    const interval = count && typeof count.range === \"function\" ? count : tickInterval(start, stop, count);\n    const ticks = interval ? interval.range(start, +stop + 1) : []; // inclusive stop\n    return reverse ? ticks.reverse() : ticks;\n  }\n\n  function tickInterval(start, stop, count) {\n    const target = Math.abs(stop - start) / count;\n    const i = bisector(([,, step]) => step).right(tickIntervals, target);\n    if (i === tickIntervals.length) return year.every(tickStep(start / durationYear, stop / durationYear, count));\n    if (i === 0) return millisecond.every(Math.max(tickStep(start, stop, count), 1));\n    const [t, step] = tickIntervals[target / tickIntervals[i - 1][2] < tickIntervals[i][2] / target ? i - 1 : i];\n    return t.every(step);\n  }\n\n  return [ticks, tickInterval];\n}\n\nconst [utcTicks, utcTickInterval] = ticker(utcYear, utcMonth, utcSunday, unixDay, utcHour, utcMinute);\nconst [timeTicks, timeTickInterval] = ticker(timeYear, timeMonth, timeSunday, timeDay, timeHour, timeMinute);\n\nexport {utcTicks, utcTickInterval, timeTicks, timeTickInterval};\n","import {\n  timeDay,\n  timeSunday,\n  timeMonday,\n  timeThursday,\n  timeYear,\n  utcDay,\n  utcSunday,\n  utcMonday,\n  utcThursday,\n  utcYear\n} from \"d3-time\";\n\nfunction localDate(d) {\n  if (0 <= d.y && d.y < 100) {\n    var date = new Date(-1, d.m, d.d, d.H, d.M, d.S, d.L);\n    date.setFullYear(d.y);\n    return date;\n  }\n  return new Date(d.y, d.m, d.d, d.H, d.M, d.S, d.L);\n}\n\nfunction utcDate(d) {\n  if (0 <= d.y && d.y < 100) {\n    var date = new Date(Date.UTC(-1, d.m, d.d, d.H, d.M, d.S, d.L));\n    date.setUTCFullYear(d.y);\n    return date;\n  }\n  return new Date(Date.UTC(d.y, d.m, d.d, d.H, d.M, d.S, d.L));\n}\n\nfunction newDate(y, m, d) {\n  return {y: y, m: m, d: d, H: 0, M: 0, S: 0, L: 0};\n}\n\nexport default function formatLocale(locale) {\n  var locale_dateTime = locale.dateTime,\n      locale_date = locale.date,\n      locale_time = locale.time,\n      locale_periods = locale.periods,\n      locale_weekdays = locale.days,\n      locale_shortWeekdays = locale.shortDays,\n      locale_months = locale.months,\n      locale_shortMonths = locale.shortMonths;\n\n  var periodRe = formatRe(locale_periods),\n      periodLookup = formatLookup(locale_periods),\n      weekdayRe = formatRe(locale_weekdays),\n      weekdayLookup = formatLookup(locale_weekdays),\n      shortWeekdayRe = formatRe(locale_shortWeekdays),\n      shortWeekdayLookup = formatLookup(locale_shortWeekdays),\n      monthRe = formatRe(locale_months),\n      monthLookup = formatLookup(locale_months),\n      shortMonthRe = formatRe(locale_shortMonths),\n      shortMonthLookup = formatLookup(locale_shortMonths);\n\n  var formats = {\n    \"a\": formatShortWeekday,\n    \"A\": formatWeekday,\n    \"b\": formatShortMonth,\n    \"B\": formatMonth,\n    \"c\": null,\n    \"d\": formatDayOfMonth,\n    \"e\": formatDayOfMonth,\n    \"f\": formatMicroseconds,\n    \"g\": formatYearISO,\n    \"G\": formatFullYearISO,\n    \"H\": formatHour24,\n    \"I\": formatHour12,\n    \"j\": formatDayOfYear,\n    \"L\": formatMilliseconds,\n    \"m\": formatMonthNumber,\n    \"M\": formatMinutes,\n    \"p\": formatPeriod,\n    \"q\": formatQuarter,\n    \"Q\": formatUnixTimestamp,\n    \"s\": formatUnixTimestampSeconds,\n    \"S\": formatSeconds,\n    \"u\": formatWeekdayNumberMonday,\n    \"U\": formatWeekNumberSunday,\n    \"V\": formatWeekNumberISO,\n    \"w\": formatWeekdayNumberSunday,\n    \"W\": formatWeekNumberMonday,\n    \"x\": null,\n    \"X\": null,\n    \"y\": formatYear,\n    \"Y\": formatFullYear,\n    \"Z\": formatZone,\n    \"%\": formatLiteralPercent\n  };\n\n  var utcFormats = {\n    \"a\": formatUTCShortWeekday,\n    \"A\": formatUTCWeekday,\n    \"b\": formatUTCShortMonth,\n    \"B\": formatUTCMonth,\n    \"c\": null,\n    \"d\": formatUTCDayOfMonth,\n    \"e\": formatUTCDayOfMonth,\n    \"f\": formatUTCMicroseconds,\n    \"g\": formatUTCYearISO,\n    \"G\": formatUTCFullYearISO,\n    \"H\": formatUTCHour24,\n    \"I\": formatUTCHour12,\n    \"j\": formatUTCDayOfYear,\n    \"L\": formatUTCMilliseconds,\n    \"m\": formatUTCMonthNumber,\n    \"M\": formatUTCMinutes,\n    \"p\": formatUTCPeriod,\n    \"q\": formatUTCQuarter,\n    \"Q\": formatUnixTimestamp,\n    \"s\": formatUnixTimestampSeconds,\n    \"S\": formatUTCSeconds,\n    \"u\": formatUTCWeekdayNumberMonday,\n    \"U\": formatUTCWeekNumberSunday,\n    \"V\": formatUTCWeekNumberISO,\n    \"w\": formatUTCWeekdayNumberSunday,\n    \"W\": formatUTCWeekNumberMonday,\n    \"x\": null,\n    \"X\": null,\n    \"y\": formatUTCYear,\n    \"Y\": formatUTCFullYear,\n    \"Z\": formatUTCZone,\n    \"%\": formatLiteralPercent\n  };\n\n  var parses = {\n    \"a\": parseShortWeekday,\n    \"A\": parseWeekday,\n    \"b\": parseShortMonth,\n    \"B\": parseMonth,\n    \"c\": parseLocaleDateTime,\n    \"d\": parseDayOfMonth,\n    \"e\": parseDayOfMonth,\n    \"f\": parseMicroseconds,\n    \"g\": parseYear,\n    \"G\": parseFullYear,\n    \"H\": parseHour24,\n    \"I\": parseHour24,\n    \"j\": parseDayOfYear,\n    \"L\": parseMilliseconds,\n    \"m\": parseMonthNumber,\n    \"M\": parseMinutes,\n    \"p\": parsePeriod,\n    \"q\": parseQuarter,\n    \"Q\": parseUnixTimestamp,\n    \"s\": parseUnixTimestampSeconds,\n    \"S\": parseSeconds,\n    \"u\": parseWeekdayNumberMonday,\n    \"U\": parseWeekNumberSunday,\n    \"V\": parseWeekNumberISO,\n    \"w\": parseWeekdayNumberSunday,\n    \"W\": parseWeekNumberMonday,\n    \"x\": parseLocaleDate,\n    \"X\": parseLocaleTime,\n    \"y\": parseYear,\n    \"Y\": parseFullYear,\n    \"Z\": parseZone,\n    \"%\": parseLiteralPercent\n  };\n\n  // These recursive directive definitions must be deferred.\n  formats.x = newFormat(locale_date, formats);\n  formats.X = newFormat(locale_time, formats);\n  formats.c = newFormat(locale_dateTime, formats);\n  utcFormats.x = newFormat(locale_date, utcFormats);\n  utcFormats.X = newFormat(locale_time, utcFormats);\n  utcFormats.c = newFormat(locale_dateTime, utcFormats);\n\n  function newFormat(specifier, formats) {\n    return function(date) {\n      var string = [],\n          i = -1,\n          j = 0,\n          n = specifier.length,\n          c,\n          pad,\n          format;\n\n      if (!(date instanceof Date)) date = new Date(+date);\n\n      while (++i < n) {\n        if (specifier.charCodeAt(i) === 37) {\n          string.push(specifier.slice(j, i));\n          if ((pad = pads[c = specifier.charAt(++i)]) != null) c = specifier.charAt(++i);\n          else pad = c === \"e\" ? \" \" : \"0\";\n          if (format = formats[c]) c = format(date, pad);\n          string.push(c);\n          j = i + 1;\n        }\n      }\n\n      string.push(specifier.slice(j, i));\n      return string.join(\"\");\n    };\n  }\n\n  function newParse(specifier, Z) {\n    return function(string) {\n      var d = newDate(1900, undefined, 1),\n          i = parseSpecifier(d, specifier, string += \"\", 0),\n          week, day;\n      if (i != string.length) return null;\n\n      // If a UNIX timestamp is specified, return it.\n      if (\"Q\" in d) return new Date(d.Q);\n      if (\"s\" in d) return new Date(d.s * 1000 + (\"L\" in d ? d.L : 0));\n\n      // If this is utcParse, never use the local timezone.\n      if (Z && !(\"Z\" in d)) d.Z = 0;\n\n      // The am-pm flag is 0 for AM, and 1 for PM.\n      if (\"p\" in d) d.H = d.H % 12 + d.p * 12;\n\n      // If the month was not specified, inherit from the quarter.\n      if (d.m === undefined) d.m = \"q\" in d ? d.q : 0;\n\n      // Convert day-of-week and week-of-year to day-of-year.\n      if (\"V\" in d) {\n        if (d.V < 1 || d.V > 53) return null;\n        if (!(\"w\" in d)) d.w = 1;\n        if (\"Z\" in d) {\n          week = utcDate(newDate(d.y, 0, 1)), day = week.getUTCDay();\n          week = day > 4 || day === 0 ? utcMonday.ceil(week) : utcMonday(week);\n          week = utcDay.offset(week, (d.V - 1) * 7);\n          d.y = week.getUTCFullYear();\n          d.m = week.getUTCMonth();\n          d.d = week.getUTCDate() + (d.w + 6) % 7;\n        } else {\n          week = localDate(newDate(d.y, 0, 1)), day = week.getDay();\n          week = day > 4 || day === 0 ? timeMonday.ceil(week) : timeMonday(week);\n          week = timeDay.offset(week, (d.V - 1) * 7);\n          d.y = week.getFullYear();\n          d.m = week.getMonth();\n          d.d = week.getDate() + (d.w + 6) % 7;\n        }\n      } else if (\"W\" in d || \"U\" in d) {\n        if (!(\"w\" in d)) d.w = \"u\" in d ? d.u % 7 : \"W\" in d ? 1 : 0;\n        day = \"Z\" in d ? utcDate(newDate(d.y, 0, 1)).getUTCDay() : localDate(newDate(d.y, 0, 1)).getDay();\n        d.m = 0;\n        d.d = \"W\" in d ? (d.w + 6) % 7 + d.W * 7 - (day + 5) % 7 : d.w + d.U * 7 - (day + 6) % 7;\n      }\n\n      // If a time zone is specified, all fields are interpreted as UTC and then\n      // offset according to the specified time zone.\n      if (\"Z\" in d) {\n        d.H += d.Z / 100 | 0;\n        d.M += d.Z % 100;\n        return utcDate(d);\n      }\n\n      // Otherwise, all fields are in local time.\n      return localDate(d);\n    };\n  }\n\n  function parseSpecifier(d, specifier, string, j) {\n    var i = 0,\n        n = specifier.length,\n        m = string.length,\n        c,\n        parse;\n\n    while (i < n) {\n      if (j >= m) return -1;\n      c = specifier.charCodeAt(i++);\n      if (c === 37) {\n        c = specifier.charAt(i++);\n        parse = parses[c in pads ? specifier.charAt(i++) : c];\n        if (!parse || ((j = parse(d, string, j)) < 0)) return -1;\n      } else if (c != string.charCodeAt(j++)) {\n        return -1;\n      }\n    }\n\n    return j;\n  }\n\n  function parsePeriod(d, string, i) {\n    var n = periodRe.exec(string.slice(i));\n    return n ? (d.p = periodLookup.get(n[0].toLowerCase()), i + n[0].length) : -1;\n  }\n\n  function parseShortWeekday(d, string, i) {\n    var n = shortWeekdayRe.exec(string.slice(i));\n    return n ? (d.w = shortWeekdayLookup.get(n[0].toLowerCase()), i + n[0].length) : -1;\n  }\n\n  function parseWeekday(d, string, i) {\n    var n = weekdayRe.exec(string.slice(i));\n    return n ? (d.w = weekdayLookup.get(n[0].toLowerCase()), i + n[0].length) : -1;\n  }\n\n  function parseShortMonth(d, string, i) {\n    var n = shortMonthRe.exec(string.slice(i));\n    return n ? (d.m = shortMonthLookup.get(n[0].toLowerCase()), i + n[0].length) : -1;\n  }\n\n  function parseMonth(d, string, i) {\n    var n = monthRe.exec(string.slice(i));\n    return n ? (d.m = monthLookup.get(n[0].toLowerCase()), i + n[0].length) : -1;\n  }\n\n  function parseLocaleDateTime(d, string, i) {\n    return parseSpecifier(d, locale_dateTime, string, i);\n  }\n\n  function parseLocaleDate(d, string, i) {\n    return parseSpecifier(d, locale_date, string, i);\n  }\n\n  function parseLocaleTime(d, string, i) {\n    return parseSpecifier(d, locale_time, string, i);\n  }\n\n  function formatShortWeekday(d) {\n    return locale_shortWeekdays[d.getDay()];\n  }\n\n  function formatWeekday(d) {\n    return locale_weekdays[d.getDay()];\n  }\n\n  function formatShortMonth(d) {\n    return locale_shortMonths[d.getMonth()];\n  }\n\n  function formatMonth(d) {\n    return locale_months[d.getMonth()];\n  }\n\n  function formatPeriod(d) {\n    return locale_periods[+(d.getHours() >= 12)];\n  }\n\n  function formatQuarter(d) {\n    return 1 + ~~(d.getMonth() / 3);\n  }\n\n  function formatUTCShortWeekday(d) {\n    return locale_shortWeekdays[d.getUTCDay()];\n  }\n\n  function formatUTCWeekday(d) {\n    return locale_weekdays[d.getUTCDay()];\n  }\n\n  function formatUTCShortMonth(d) {\n    return locale_shortMonths[d.getUTCMonth()];\n  }\n\n  function formatUTCMonth(d) {\n    return locale_months[d.getUTCMonth()];\n  }\n\n  function formatUTCPeriod(d) {\n    return locale_periods[+(d.getUTCHours() >= 12)];\n  }\n\n  function formatUTCQuarter(d) {\n    return 1 + ~~(d.getUTCMonth() / 3);\n  }\n\n  return {\n    format: function(specifier) {\n      var f = newFormat(specifier += \"\", formats);\n      f.toString = function() { return specifier; };\n      return f;\n    },\n    parse: function(specifier) {\n      var p = newParse(specifier += \"\", false);\n      p.toString = function() { return specifier; };\n      return p;\n    },\n    utcFormat: function(specifier) {\n      var f = newFormat(specifier += \"\", utcFormats);\n      f.toString = function() { return specifier; };\n      return f;\n    },\n    utcParse: function(specifier) {\n      var p = newParse(specifier += \"\", true);\n      p.toString = function() { return specifier; };\n      return p;\n    }\n  };\n}\n\nvar pads = {\"-\": \"\", \"_\": \" \", \"0\": \"0\"},\n    numberRe = /^\\s*\\d+/, // note: ignores next directive\n    percentRe = /^%/,\n    requoteRe = /[\\\\^$*+?|[\\]().{}]/g;\n\nfunction pad(value, fill, width) {\n  var sign = value < 0 ? \"-\" : \"\",\n      string = (sign ? -value : value) + \"\",\n      length = string.length;\n  return sign + (length < width ? new Array(width - length + 1).join(fill) + string : string);\n}\n\nfunction requote(s) {\n  return s.replace(requoteRe, \"\\\\$&\");\n}\n\nfunction formatRe(names) {\n  return new RegExp(\"^(?:\" + names.map(requote).join(\"|\") + \")\", \"i\");\n}\n\nfunction formatLookup(names) {\n  return new Map(names.map((name, i) => [name.toLowerCase(), i]));\n}\n\nfunction parseWeekdayNumberSunday(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 1));\n  return n ? (d.w = +n[0], i + n[0].length) : -1;\n}\n\nfunction parseWeekdayNumberMonday(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 1));\n  return n ? (d.u = +n[0], i + n[0].length) : -1;\n}\n\nfunction parseWeekNumberSunday(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 2));\n  return n ? (d.U = +n[0], i + n[0].length) : -1;\n}\n\nfunction parseWeekNumberISO(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 2));\n  return n ? (d.V = +n[0], i + n[0].length) : -1;\n}\n\nfunction parseWeekNumberMonday(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 2));\n  return n ? (d.W = +n[0], i + n[0].length) : -1;\n}\n\nfunction parseFullYear(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 4));\n  return n ? (d.y = +n[0], i + n[0].length) : -1;\n}\n\nfunction parseYear(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 2));\n  return n ? (d.y = +n[0] + (+n[0] > 68 ? 1900 : 2000), i + n[0].length) : -1;\n}\n\nfunction parseZone(d, string, i) {\n  var n = /^(Z)|([+-]\\d\\d)(?::?(\\d\\d))?/.exec(string.slice(i, i + 6));\n  return n ? (d.Z = n[1] ? 0 : -(n[2] + (n[3] || \"00\")), i + n[0].length) : -1;\n}\n\nfunction parseQuarter(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 1));\n  return n ? (d.q = n[0] * 3 - 3, i + n[0].length) : -1;\n}\n\nfunction parseMonthNumber(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 2));\n  return n ? (d.m = n[0] - 1, i + n[0].length) : -1;\n}\n\nfunction parseDayOfMonth(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 2));\n  return n ? (d.d = +n[0], i + n[0].length) : -1;\n}\n\nfunction parseDayOfYear(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 3));\n  return n ? (d.m = 0, d.d = +n[0], i + n[0].length) : -1;\n}\n\nfunction parseHour24(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 2));\n  return n ? (d.H = +n[0], i + n[0].length) : -1;\n}\n\nfunction parseMinutes(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 2));\n  return n ? (d.M = +n[0], i + n[0].length) : -1;\n}\n\nfunction parseSeconds(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 2));\n  return n ? (d.S = +n[0], i + n[0].length) : -1;\n}\n\nfunction parseMilliseconds(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 3));\n  return n ? (d.L = +n[0], i + n[0].length) : -1;\n}\n\nfunction parseMicroseconds(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 6));\n  return n ? (d.L = Math.floor(n[0] / 1000), i + n[0].length) : -1;\n}\n\nfunction parseLiteralPercent(d, string, i) {\n  var n = percentRe.exec(string.slice(i, i + 1));\n  return n ? i + n[0].length : -1;\n}\n\nfunction parseUnixTimestamp(d, string, i) {\n  var n = numberRe.exec(string.slice(i));\n  return n ? (d.Q = +n[0], i + n[0].length) : -1;\n}\n\nfunction parseUnixTimestampSeconds(d, string, i) {\n  var n = numberRe.exec(string.slice(i));\n  return n ? (d.s = +n[0], i + n[0].length) : -1;\n}\n\nfunction formatDayOfMonth(d, p) {\n  return pad(d.getDate(), p, 2);\n}\n\nfunction formatHour24(d, p) {\n  return pad(d.getHours(), p, 2);\n}\n\nfunction formatHour12(d, p) {\n  return pad(d.getHours() % 12 || 12, p, 2);\n}\n\nfunction formatDayOfYear(d, p) {\n  return pad(1 + timeDay.count(timeYear(d), d), p, 3);\n}\n\nfunction formatMilliseconds(d, p) {\n  return pad(d.getMilliseconds(), p, 3);\n}\n\nfunction formatMicroseconds(d, p) {\n  return formatMilliseconds(d, p) + \"000\";\n}\n\nfunction formatMonthNumber(d, p) {\n  return pad(d.getMonth() + 1, p, 2);\n}\n\nfunction formatMinutes(d, p) {\n  return pad(d.getMinutes(), p, 2);\n}\n\nfunction formatSeconds(d, p) {\n  return pad(d.getSeconds(), p, 2);\n}\n\nfunction formatWeekdayNumberMonday(d) {\n  var day = d.getDay();\n  return day === 0 ? 7 : day;\n}\n\nfunction formatWeekNumberSunday(d, p) {\n  return pad(timeSunday.count(timeYear(d) - 1, d), p, 2);\n}\n\nfunction dISO(d) {\n  var day = d.getDay();\n  return (day >= 4 || day === 0) ? timeThursday(d) : timeThursday.ceil(d);\n}\n\nfunction formatWeekNumberISO(d, p) {\n  d = dISO(d);\n  return pad(timeThursday.count(timeYear(d), d) + (timeYear(d).getDay() === 4), p, 2);\n}\n\nfunction formatWeekdayNumberSunday(d) {\n  return d.getDay();\n}\n\nfunction formatWeekNumberMonday(d, p) {\n  return pad(timeMonday.count(timeYear(d) - 1, d), p, 2);\n}\n\nfunction formatYear(d, p) {\n  return pad(d.getFullYear() % 100, p, 2);\n}\n\nfunction formatYearISO(d, p) {\n  d = dISO(d);\n  return pad(d.getFullYear() % 100, p, 2);\n}\n\nfunction formatFullYear(d, p) {\n  return pad(d.getFullYear() % 10000, p, 4);\n}\n\nfunction formatFullYearISO(d, p) {\n  var day = d.getDay();\n  d = (day >= 4 || day === 0) ? timeThursday(d) : timeThursday.ceil(d);\n  return pad(d.getFullYear() % 10000, p, 4);\n}\n\nfunction formatZone(d) {\n  var z = d.getTimezoneOffset();\n  return (z > 0 ? \"-\" : (z *= -1, \"+\"))\n      + pad(z / 60 | 0, \"0\", 2)\n      + pad(z % 60, \"0\", 2);\n}\n\nfunction formatUTCDayOfMonth(d, p) {\n  return pad(d.getUTCDate(), p, 2);\n}\n\nfunction formatUTCHour24(d, p) {\n  return pad(d.getUTCHours(), p, 2);\n}\n\nfunction formatUTCHour12(d, p) {\n  return pad(d.getUTCHours() % 12 || 12, p, 2);\n}\n\nfunction formatUTCDayOfYear(d, p) {\n  return pad(1 + utcDay.count(utcYear(d), d), p, 3);\n}\n\nfunction formatUTCMilliseconds(d, p) {\n  return pad(d.getUTCMilliseconds(), p, 3);\n}\n\nfunction formatUTCMicroseconds(d, p) {\n  return formatUTCMilliseconds(d, p) + \"000\";\n}\n\nfunction formatUTCMonthNumber(d, p) {\n  return pad(d.getUTCMonth() + 1, p, 2);\n}\n\nfunction formatUTCMinutes(d, p) {\n  return pad(d.getUTCMinutes(), p, 2);\n}\n\nfunction formatUTCSeconds(d, p) {\n  return pad(d.getUTCSeconds(), p, 2);\n}\n\nfunction formatUTCWeekdayNumberMonday(d) {\n  var dow = d.getUTCDay();\n  return dow === 0 ? 7 : dow;\n}\n\nfunction formatUTCWeekNumberSunday(d, p) {\n  return pad(utcSunday.count(utcYear(d) - 1, d), p, 2);\n}\n\nfunction UTCdISO(d) {\n  var day = d.getUTCDay();\n  return (day >= 4 || day === 0) ? utcThursday(d) : utcThursday.ceil(d);\n}\n\nfunction formatUTCWeekNumberISO(d, p) {\n  d = UTCdISO(d);\n  return pad(utcThursday.count(utcYear(d), d) + (utcYear(d).getUTCDay() === 4), p, 2);\n}\n\nfunction formatUTCWeekdayNumberSunday(d) {\n  return d.getUTCDay();\n}\n\nfunction formatUTCWeekNumberMonday(d, p) {\n  return pad(utcMonday.count(utcYear(d) - 1, d), p, 2);\n}\n\nfunction formatUTCYear(d, p) {\n  return pad(d.getUTCFullYear() % 100, p, 2);\n}\n\nfunction formatUTCYearISO(d, p) {\n  d = UTCdISO(d);\n  return pad(d.getUTCFullYear() % 100, p, 2);\n}\n\nfunction formatUTCFullYear(d, p) {\n  return pad(d.getUTCFullYear() % 10000, p, 4);\n}\n\nfunction formatUTCFullYearISO(d, p) {\n  var day = d.getUTCDay();\n  d = (day >= 4 || day === 0) ? utcThursday(d) : utcThursday.ceil(d);\n  return pad(d.getUTCFullYear() % 10000, p, 4);\n}\n\nfunction formatUTCZone() {\n  return \"+0000\";\n}\n\nfunction formatLiteralPercent() {\n  return \"%\";\n}\n\nfunction formatUnixTimestamp(d) {\n  return +d;\n}\n\nfunction formatUnixTimestampSeconds(d) {\n  return Math.floor(+d / 1000);\n}\n","import formatLocale from \"./locale.js\";\n\nvar locale;\nexport var timeFormat;\nexport var timeParse;\nexport var utcFormat;\nexport var utcParse;\n\ndefaultLocale({\n  dateTime: \"%x, %X\",\n  date: \"%-m/%-d/%Y\",\n  time: \"%-I:%M:%S %p\",\n  periods: [\"AM\", \"PM\"],\n  days: [\"Sunday\", \"Monday\", \"Tuesday\", \"Wednesday\", \"Thursday\", \"Friday\", \"Saturday\"],\n  shortDays: [\"Sun\", \"Mon\", \"Tue\", \"Wed\", \"Thu\", \"Fri\", \"Sat\"],\n  months: [\"January\", \"February\", \"March\", \"April\", \"May\", \"June\", \"July\", \"August\", \"September\", \"October\", \"November\", \"December\"],\n  shortMonths: [\"Jan\", \"Feb\", \"Mar\", \"Apr\", \"May\", \"Jun\", \"Jul\", \"Aug\", \"Sep\", \"Oct\", \"Nov\", \"Dec\"]\n});\n\nexport default function defaultLocale(definition) {\n  locale = formatLocale(definition);\n  timeFormat = locale.format;\n  timeParse = locale.parse;\n  utcFormat = locale.utcFormat;\n  utcParse = locale.utcParse;\n  return locale;\n}\n","import {timeYear, timeMonth, timeWeek, timeDay, timeHour, timeMinute, timeSecond, timeTicks, timeTickInterval} from \"d3-time\";\nimport {timeFormat} from \"d3-time-format\";\nimport continuous, {copy} from \"./continuous.js\";\nimport {initRange} from \"./init.js\";\nimport nice from \"./nice.js\";\n\nfunction date(t) {\n  return new Date(t);\n}\n\nfunction number(t) {\n  return t instanceof Date ? +t : +new Date(+t);\n}\n\nexport function calendar(ticks, tickInterval, year, month, week, day, hour, minute, second, format) {\n  var scale = continuous(),\n      invert = scale.invert,\n      domain = scale.domain;\n\n  var formatMillisecond = format(\".%L\"),\n      formatSecond = format(\":%S\"),\n      formatMinute = format(\"%I:%M\"),\n      formatHour = format(\"%I %p\"),\n      formatDay = format(\"%a %d\"),\n      formatWeek = format(\"%b %d\"),\n      formatMonth = format(\"%B\"),\n      formatYear = format(\"%Y\");\n\n  function tickFormat(date) {\n    return (second(date) < date ? formatMillisecond\n        : minute(date) < date ? formatSecond\n        : hour(date) < date ? formatMinute\n        : day(date) < date ? formatHour\n        : month(date) < date ? (week(date) < date ? formatDay : formatWeek)\n        : year(date) < date ? formatMonth\n        : formatYear)(date);\n  }\n\n  scale.invert = function(y) {\n    return new Date(invert(y));\n  };\n\n  scale.domain = function(_) {\n    return arguments.length ? domain(Array.from(_, number)) : domain().map(date);\n  };\n\n  scale.ticks = function(interval) {\n    var d = domain();\n    return ticks(d[0], d[d.length - 1], interval == null ? 10 : interval);\n  };\n\n  scale.tickFormat = function(count, specifier) {\n    return specifier == null ? tickFormat : format(specifier);\n  };\n\n  scale.nice = function(interval) {\n    var d = domain();\n    if (!interval || typeof interval.range !== \"function\") interval = tickInterval(d[0], d[d.length - 1], interval == null ? 10 : interval);\n    return interval ? domain(nice(d, interval)) : scale;\n  };\n\n  scale.copy = function() {\n    return copy(scale, calendar(ticks, tickInterval, year, month, week, day, hour, minute, second, format));\n  };\n\n  return scale;\n}\n\nexport default function time() {\n  return initRange.apply(calendar(timeTicks, timeTickInterval, timeYear, timeMonth, timeWeek, timeDay, timeHour, timeMinute, timeSecond, timeFormat).domain([new Date(2000, 0, 1), new Date(2000, 0, 2)]), arguments);\n}\n","export default function nice(domain, interval) {\n  domain = domain.slice();\n\n  var i0 = 0,\n      i1 = domain.length - 1,\n      x0 = domain[i0],\n      x1 = domain[i1],\n      t;\n\n  if (x1 < x0) {\n    t = i0, i0 = i1, i1 = t;\n    t = x0, x0 = x1, x1 = t;\n  }\n\n  domain[i0] = interval.floor(x0);\n  domain[i1] = interval.ceil(x1);\n  return domain;\n}\n","export default function(x) {\n  return function constant() {\n    return x;\n  };\n}\n","export const abs = Math.abs;\nexport const atan2 = Math.atan2;\nexport const cos = Math.cos;\nexport const max = Math.max;\nexport const min = Math.min;\nexport const sin = Math.sin;\nexport const sqrt = Math.sqrt;\n\nexport const epsilon = 1e-12;\nexport const pi = Math.PI;\nexport const halfPi = pi / 2;\nexport const tau = 2 * pi;\n\nexport function acos(x) {\n  return x > 1 ? 0 : x < -1 ? pi : Math.acos(x);\n}\n\nexport function asin(x) {\n  return x >= 1 ? halfPi : x <= -1 ? -halfPi : Math.asin(x);\n}\n","import {Path} from \"d3-path\";\n\nexport function withPath(shape) {\n  let digits = 3;\n\n  shape.digits = function(_) {\n    if (!arguments.length) return digits;\n    if (_ == null) {\n      digits = null;\n    } else {\n      const d = Math.floor(_);\n      if (!(d >= 0)) throw new RangeError(`invalid digits: ${_}`);\n      digits = d;\n    }\n    return shape;\n  };\n\n  return () => new Path(digits);\n}\n","import constant from \"./constant.js\";\nimport {abs, acos, asin, atan2, cos, epsilon, halfPi, max, min, pi, sin, sqrt, tau} from \"./math.js\";\nimport {withPath} from \"./path.js\";\n\nfunction arcInnerRadius(d) {\n  return d.innerRadius;\n}\n\nfunction arcOuterRadius(d) {\n  return d.outerRadius;\n}\n\nfunction arcStartAngle(d) {\n  return d.startAngle;\n}\n\nfunction arcEndAngle(d) {\n  return d.endAngle;\n}\n\nfunction arcPadAngle(d) {\n  return d && d.padAngle; // Note: optional!\n}\n\nfunction intersect(x0, y0, x1, y1, x2, y2, x3, y3) {\n  var x10 = x1 - x0, y10 = y1 - y0,\n      x32 = x3 - x2, y32 = y3 - y2,\n      t = y32 * x10 - x32 * y10;\n  if (t * t < epsilon) return;\n  t = (x32 * (y0 - y2) - y32 * (x0 - x2)) / t;\n  return [x0 + t * x10, y0 + t * y10];\n}\n\n// Compute perpendicular offset line of length rc.\n// http://mathworld.wolfram.com/Circle-LineIntersection.html\nfunction cornerTangents(x0, y0, x1, y1, r1, rc, cw) {\n  var x01 = x0 - x1,\n      y01 = y0 - y1,\n      lo = (cw ? rc : -rc) / sqrt(x01 * x01 + y01 * y01),\n      ox = lo * y01,\n      oy = -lo * x01,\n      x11 = x0 + ox,\n      y11 = y0 + oy,\n      x10 = x1 + ox,\n      y10 = y1 + oy,\n      x00 = (x11 + x10) / 2,\n      y00 = (y11 + y10) / 2,\n      dx = x10 - x11,\n      dy = y10 - y11,\n      d2 = dx * dx + dy * dy,\n      r = r1 - rc,\n      D = x11 * y10 - x10 * y11,\n      d = (dy < 0 ? -1 : 1) * sqrt(max(0, r * r * d2 - D * D)),\n      cx0 = (D * dy - dx * d) / d2,\n      cy0 = (-D * dx - dy * d) / d2,\n      cx1 = (D * dy + dx * d) / d2,\n      cy1 = (-D * dx + dy * d) / d2,\n      dx0 = cx0 - x00,\n      dy0 = cy0 - y00,\n      dx1 = cx1 - x00,\n      dy1 = cy1 - y00;\n\n  // Pick the closer of the two intersection points.\n  // TODO Is there a faster way to determine which intersection to use?\n  if (dx0 * dx0 + dy0 * dy0 > dx1 * dx1 + dy1 * dy1) cx0 = cx1, cy0 = cy1;\n\n  return {\n    cx: cx0,\n    cy: cy0,\n    x01: -ox,\n    y01: -oy,\n    x11: cx0 * (r1 / r - 1),\n    y11: cy0 * (r1 / r - 1)\n  };\n}\n\nexport default function() {\n  var innerRadius = arcInnerRadius,\n      outerRadius = arcOuterRadius,\n      cornerRadius = constant(0),\n      padRadius = null,\n      startAngle = arcStartAngle,\n      endAngle = arcEndAngle,\n      padAngle = arcPadAngle,\n      context = null,\n      path = withPath(arc);\n\n  function arc() {\n    var buffer,\n        r,\n        r0 = +innerRadius.apply(this, arguments),\n        r1 = +outerRadius.apply(this, arguments),\n        a0 = startAngle.apply(this, arguments) - halfPi,\n        a1 = endAngle.apply(this, arguments) - halfPi,\n        da = abs(a1 - a0),\n        cw = a1 > a0;\n\n    if (!context) context = buffer = path();\n\n    // Ensure that the outer radius is always larger than the inner radius.\n    if (r1 < r0) r = r1, r1 = r0, r0 = r;\n\n    // Is it a point?\n    if (!(r1 > epsilon)) context.moveTo(0, 0);\n\n    // Or is it a circle or annulus?\n    else if (da > tau - epsilon) {\n      context.moveTo(r1 * cos(a0), r1 * sin(a0));\n      context.arc(0, 0, r1, a0, a1, !cw);\n      if (r0 > epsilon) {\n        context.moveTo(r0 * cos(a1), r0 * sin(a1));\n        context.arc(0, 0, r0, a1, a0, cw);\n      }\n    }\n\n    // Or is it a circular or annular sector?\n    else {\n      var a01 = a0,\n          a11 = a1,\n          a00 = a0,\n          a10 = a1,\n          da0 = da,\n          da1 = da,\n          ap = padAngle.apply(this, arguments) / 2,\n          rp = (ap > epsilon) && (padRadius ? +padRadius.apply(this, arguments) : sqrt(r0 * r0 + r1 * r1)),\n          rc = min(abs(r1 - r0) / 2, +cornerRadius.apply(this, arguments)),\n          rc0 = rc,\n          rc1 = rc,\n          t0,\n          t1;\n\n      // Apply padding? Note that since r1  r0, da1  da0.\n      if (rp > epsilon) {\n        var p0 = asin(rp / r0 * sin(ap)),\n            p1 = asin(rp / r1 * sin(ap));\n        if ((da0 -= p0 * 2) > epsilon) p0 *= (cw ? 1 : -1), a00 += p0, a10 -= p0;\n        else da0 = 0, a00 = a10 = (a0 + a1) / 2;\n        if ((da1 -= p1 * 2) > epsilon) p1 *= (cw ? 1 : -1), a01 += p1, a11 -= p1;\n        else da1 = 0, a01 = a11 = (a0 + a1) / 2;\n      }\n\n      var x01 = r1 * cos(a01),\n          y01 = r1 * sin(a01),\n          x10 = r0 * cos(a10),\n          y10 = r0 * sin(a10);\n\n      // Apply rounded corners?\n      if (rc > epsilon) {\n        var x11 = r1 * cos(a11),\n            y11 = r1 * sin(a11),\n            x00 = r0 * cos(a00),\n            y00 = r0 * sin(a00),\n            oc;\n\n        // Restrict the corner radius according to the sector angle. If this\n        // intersection fails, its probably because the arc is too small, so\n        // disable the corner radius entirely.\n        if (da < pi) {\n          if (oc = intersect(x01, y01, x00, y00, x11, y11, x10, y10)) {\n            var ax = x01 - oc[0],\n                ay = y01 - oc[1],\n                bx = x11 - oc[0],\n                by = y11 - oc[1],\n                kc = 1 / sin(acos((ax * bx + ay * by) / (sqrt(ax * ax + ay * ay) * sqrt(bx * bx + by * by))) / 2),\n                lc = sqrt(oc[0] * oc[0] + oc[1] * oc[1]);\n            rc0 = min(rc, (r0 - lc) / (kc - 1));\n            rc1 = min(rc, (r1 - lc) / (kc + 1));\n          } else {\n            rc0 = rc1 = 0;\n          }\n        }\n      }\n\n      // Is the sector collapsed to a line?\n      if (!(da1 > epsilon)) context.moveTo(x01, y01);\n\n      // Does the sectors outer ring have rounded corners?\n      else if (rc1 > epsilon) {\n        t0 = cornerTangents(x00, y00, x01, y01, r1, rc1, cw);\n        t1 = cornerTangents(x11, y11, x10, y10, r1, rc1, cw);\n\n        context.moveTo(t0.cx + t0.x01, t0.cy + t0.y01);\n\n        // Have the corners merged?\n        if (rc1 < rc) context.arc(t0.cx, t0.cy, rc1, atan2(t0.y01, t0.x01), atan2(t1.y01, t1.x01), !cw);\n\n        // Otherwise, draw the two corners and the ring.\n        else {\n          context.arc(t0.cx, t0.cy, rc1, atan2(t0.y01, t0.x01), atan2(t0.y11, t0.x11), !cw);\n          context.arc(0, 0, r1, atan2(t0.cy + t0.y11, t0.cx + t0.x11), atan2(t1.cy + t1.y11, t1.cx + t1.x11), !cw);\n          context.arc(t1.cx, t1.cy, rc1, atan2(t1.y11, t1.x11), atan2(t1.y01, t1.x01), !cw);\n        }\n      }\n\n      // Or is the outer ring just a circular arc?\n      else context.moveTo(x01, y01), context.arc(0, 0, r1, a01, a11, !cw);\n\n      // Is there no inner ring, and its a circular sector?\n      // Or perhaps its an annular sector collapsed due to padding?\n      if (!(r0 > epsilon) || !(da0 > epsilon)) context.lineTo(x10, y10);\n\n      // Does the sectors inner ring (or point) have rounded corners?\n      else if (rc0 > epsilon) {\n        t0 = cornerTangents(x10, y10, x11, y11, r0, -rc0, cw);\n        t1 = cornerTangents(x01, y01, x00, y00, r0, -rc0, cw);\n\n        context.lineTo(t0.cx + t0.x01, t0.cy + t0.y01);\n\n        // Have the corners merged?\n        if (rc0 < rc) context.arc(t0.cx, t0.cy, rc0, atan2(t0.y01, t0.x01), atan2(t1.y01, t1.x01), !cw);\n\n        // Otherwise, draw the two corners and the ring.\n        else {\n          context.arc(t0.cx, t0.cy, rc0, atan2(t0.y01, t0.x01), atan2(t0.y11, t0.x11), !cw);\n          context.arc(0, 0, r0, atan2(t0.cy + t0.y11, t0.cx + t0.x11), atan2(t1.cy + t1.y11, t1.cx + t1.x11), cw);\n          context.arc(t1.cx, t1.cy, rc0, atan2(t1.y11, t1.x11), atan2(t1.y01, t1.x01), !cw);\n        }\n      }\n\n      // Or is the inner ring just a circular arc?\n      else context.arc(0, 0, r0, a10, a00, cw);\n    }\n\n    context.closePath();\n\n    if (buffer) return context = null, buffer + \"\" || null;\n  }\n\n  arc.centroid = function() {\n    var r = (+innerRadius.apply(this, arguments) + +outerRadius.apply(this, arguments)) / 2,\n        a = (+startAngle.apply(this, arguments) + +endAngle.apply(this, arguments)) / 2 - pi / 2;\n    return [cos(a) * r, sin(a) * r];\n  };\n\n  arc.innerRadius = function(_) {\n    return arguments.length ? (innerRadius = typeof _ === \"function\" ? _ : constant(+_), arc) : innerRadius;\n  };\n\n  arc.outerRadius = function(_) {\n    return arguments.length ? (outerRadius = typeof _ === \"function\" ? _ : constant(+_), arc) : outerRadius;\n  };\n\n  arc.cornerRadius = function(_) {\n    return arguments.length ? (cornerRadius = typeof _ === \"function\" ? _ : constant(+_), arc) : cornerRadius;\n  };\n\n  arc.padRadius = function(_) {\n    return arguments.length ? (padRadius = _ == null ? null : typeof _ === \"function\" ? _ : constant(+_), arc) : padRadius;\n  };\n\n  arc.startAngle = function(_) {\n    return arguments.length ? (startAngle = typeof _ === \"function\" ? _ : constant(+_), arc) : startAngle;\n  };\n\n  arc.endAngle = function(_) {\n    return arguments.length ? (endAngle = typeof _ === \"function\" ? _ : constant(+_), arc) : endAngle;\n  };\n\n  arc.padAngle = function(_) {\n    return arguments.length ? (padAngle = typeof _ === \"function\" ? _ : constant(+_), arc) : padAngle;\n  };\n\n  arc.context = function(_) {\n    return arguments.length ? ((context = _ == null ? null : _), arc) : context;\n  };\n\n  return arc;\n}\n","function Linear(context) {\n  this._context = context;\n}\n\nLinear.prototype = {\n  areaStart: function() {\n    this._line = 0;\n  },\n  areaEnd: function() {\n    this._line = NaN;\n  },\n  lineStart: function() {\n    this._point = 0;\n  },\n  lineEnd: function() {\n    if (this._line || (this._line !== 0 && this._point === 1)) this._context.closePath();\n    this._line = 1 - this._line;\n  },\n  point: function(x, y) {\n    x = +x, y = +y;\n    switch (this._point) {\n      case 0: this._point = 1; this._line ? this._context.lineTo(x, y) : this._context.moveTo(x, y); break;\n      case 1: this._point = 2; // falls through\n      default: this._context.lineTo(x, y); break;\n    }\n  }\n};\n\nexport default function(context) {\n  return new Linear(context);\n}\n","export function x(p) {\n  return p[0];\n}\n\nexport function y(p) {\n  return p[1];\n}\n","import array from \"./array.js\";\nimport constant from \"./constant.js\";\nimport curveLinear from \"./curve/linear.js\";\nimport {withPath} from \"./path.js\";\nimport {x as pointX, y as pointY} from \"./point.js\";\n\nexport default function(x, y) {\n  var defined = constant(true),\n      context = null,\n      curve = curveLinear,\n      output = null,\n      path = withPath(line);\n\n  x = typeof x === \"function\" ? x : (x === undefined) ? pointX : constant(x);\n  y = typeof y === \"function\" ? y : (y === undefined) ? pointY : constant(y);\n\n  function line(data) {\n    var i,\n        n = (data = array(data)).length,\n        d,\n        defined0 = false,\n        buffer;\n\n    if (context == null) output = curve(buffer = path());\n\n    for (i = 0; i <= n; ++i) {\n      if (!(i < n && defined(d = data[i], i, data)) === defined0) {\n        if (defined0 = !defined0) output.lineStart();\n        else output.lineEnd();\n      }\n      if (defined0) output.point(+x(d, i, data), +y(d, i, data));\n    }\n\n    if (buffer) return output = null, buffer + \"\" || null;\n  }\n\n  line.x = function(_) {\n    return arguments.length ? (x = typeof _ === \"function\" ? _ : constant(+_), line) : x;\n  };\n\n  line.y = function(_) {\n    return arguments.length ? (y = typeof _ === \"function\" ? _ : constant(+_), line) : y;\n  };\n\n  line.defined = function(_) {\n    return arguments.length ? (defined = typeof _ === \"function\" ? _ : constant(!!_), line) : defined;\n  };\n\n  line.curve = function(_) {\n    return arguments.length ? (curve = _, context != null && (output = curve(context)), line) : curve;\n  };\n\n  line.context = function(_) {\n    return arguments.length ? (_ == null ? context = output = null : output = curve(context = _), line) : context;\n  };\n\n  return line;\n}\n","export var slice = Array.prototype.slice;\n\nexport default function(x) {\n  return typeof x === \"object\" && \"length\" in x\n    ? x // Array, TypedArray, NodeList, array-like\n    : Array.from(x); // Map, Set, iterable, string, or anything else\n}\n","function sign(x) {\n  return x < 0 ? -1 : 1;\n}\n\n// Calculate the slopes of the tangents (Hermite-type interpolation) based on\n// the following paper: Steffen, M. 1990. A Simple Method for Monotonic\n// Interpolation in One Dimension. Astronomy and Astrophysics, Vol. 239, NO.\n// NOV(II), P. 443, 1990.\nfunction slope3(that, x2, y2) {\n  var h0 = that._x1 - that._x0,\n      h1 = x2 - that._x1,\n      s0 = (that._y1 - that._y0) / (h0 || h1 < 0 && -0),\n      s1 = (y2 - that._y1) / (h1 || h0 < 0 && -0),\n      p = (s0 * h1 + s1 * h0) / (h0 + h1);\n  return (sign(s0) + sign(s1)) * Math.min(Math.abs(s0), Math.abs(s1), 0.5 * Math.abs(p)) || 0;\n}\n\n// Calculate a one-sided slope.\nfunction slope2(that, t) {\n  var h = that._x1 - that._x0;\n  return h ? (3 * (that._y1 - that._y0) / h - t) / 2 : t;\n}\n\n// According to https://en.wikipedia.org/wiki/Cubic_Hermite_spline#Representations\n// \"you can express cubic Hermite interpolation in terms of cubic Bzier curves\n// with respect to the four values p0, p0 + m0 / 3, p1 - m1 / 3, p1\".\nfunction point(that, t0, t1) {\n  var x0 = that._x0,\n      y0 = that._y0,\n      x1 = that._x1,\n      y1 = that._y1,\n      dx = (x1 - x0) / 3;\n  that._context.bezierCurveTo(x0 + dx, y0 + dx * t0, x1 - dx, y1 - dx * t1, x1, y1);\n}\n\nfunction MonotoneX(context) {\n  this._context = context;\n}\n\nMonotoneX.prototype = {\n  areaStart: function() {\n    this._line = 0;\n  },\n  areaEnd: function() {\n    this._line = NaN;\n  },\n  lineStart: function() {\n    this._x0 = this._x1 =\n    this._y0 = this._y1 =\n    this._t0 = NaN;\n    this._point = 0;\n  },\n  lineEnd: function() {\n    switch (this._point) {\n      case 2: this._context.lineTo(this._x1, this._y1); break;\n      case 3: point(this, this._t0, slope2(this, this._t0)); break;\n    }\n    if (this._line || (this._line !== 0 && this._point === 1)) this._context.closePath();\n    this._line = 1 - this._line;\n  },\n  point: function(x, y) {\n    var t1 = NaN;\n\n    x = +x, y = +y;\n    if (x === this._x1 && y === this._y1) return; // Ignore coincident points.\n    switch (this._point) {\n      case 0: this._point = 1; this._line ? this._context.lineTo(x, y) : this._context.moveTo(x, y); break;\n      case 1: this._point = 2; break;\n      case 2: this._point = 3; point(this, slope2(this, t1 = slope3(this, x, y)), t1); break;\n      default: point(this, this._t0, t1 = slope3(this, x, y)); break;\n    }\n\n    this._x0 = this._x1, this._x1 = x;\n    this._y0 = this._y1, this._y1 = y;\n    this._t0 = t1;\n  }\n}\n\nfunction MonotoneY(context) {\n  this._context = new ReflectContext(context);\n}\n\n(MonotoneY.prototype = Object.create(MonotoneX.prototype)).point = function(x, y) {\n  MonotoneX.prototype.point.call(this, y, x);\n};\n\nfunction ReflectContext(context) {\n  this._context = context;\n}\n\nReflectContext.prototype = {\n  moveTo: function(x, y) { this._context.moveTo(y, x); },\n  closePath: function() { this._context.closePath(); },\n  lineTo: function(x, y) { this._context.lineTo(y, x); },\n  bezierCurveTo: function(x1, y1, x2, y2, x, y) { this._context.bezierCurveTo(y1, x1, y2, x2, y, x); }\n};\n\nexport function monotoneX(context) {\n  return new MonotoneX(context);\n}\n\nexport function monotoneY(context) {\n  return new MonotoneY(context);\n}\n","export function Transform(k, x, y) {\n  this.k = k;\n  this.x = x;\n  this.y = y;\n}\n\nTransform.prototype = {\n  constructor: Transform,\n  scale: function(k) {\n    return k === 1 ? this : new Transform(this.k * k, this.x, this.y);\n  },\n  translate: function(x, y) {\n    return x === 0 & y === 0 ? this : new Transform(this.k, this.x + this.k * x, this.y + this.k * y);\n  },\n  apply: function(point) {\n    return [point[0] * this.k + this.x, point[1] * this.k + this.y];\n  },\n  applyX: function(x) {\n    return x * this.k + this.x;\n  },\n  applyY: function(y) {\n    return y * this.k + this.y;\n  },\n  invert: function(location) {\n    return [(location[0] - this.x) / this.k, (location[1] - this.y) / this.k];\n  },\n  invertX: function(x) {\n    return (x - this.x) / this.k;\n  },\n  invertY: function(y) {\n    return (y - this.y) / this.k;\n  },\n  rescaleX: function(x) {\n    return x.copy().domain(x.range().map(this.invertX, this).map(x.invert, x));\n  },\n  rescaleY: function(y) {\n    return y.copy().domain(y.range().map(this.invertY, this).map(y.invert, y));\n  },\n  toString: function() {\n    return \"translate(\" + this.x + \",\" + this.y + \") scale(\" + this.k + \")\";\n  }\n};\n\nexport var identity = new Transform(1, 0, 0);\n\ntransform.prototype = Transform.prototype;\n\nexport default function transform(node) {\n  while (!node.__zoom) if (!(node = node.parentNode)) return identity;\n  return node.__zoom;\n}\n","/******************************************************************************\nCopyright (c) Microsoft Corporation.\n\nPermission to use, copy, modify, and/or distribute this software for any\npurpose with or without fee is hereby granted.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\nPERFORMANCE OF THIS SOFTWARE.\n***************************************************************************** */\n/* global Reflect, Promise, SuppressedError, Symbol */\n\nvar extendStatics = function(d, b) {\n  extendStatics = Object.setPrototypeOf ||\n      ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n      function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n  return extendStatics(d, b);\n};\n\nexport function __extends(d, b) {\n  if (typeof b !== \"function\" && b !== null)\n      throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n  extendStatics(d, b);\n  function __() { this.constructor = d; }\n  d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n}\n\nexport var __assign = function() {\n  __assign = Object.assign || function __assign(t) {\n      for (var s, i = 1, n = arguments.length; i < n; i++) {\n          s = arguments[i];\n          for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n      }\n      return t;\n  }\n  return __assign.apply(this, arguments);\n}\n\nexport function __rest(s, e) {\n  var t = {};\n  for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n      t[p] = s[p];\n  if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n      for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n          if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n              t[p[i]] = s[p[i]];\n      }\n  return t;\n}\n\nexport function __decorate(decorators, target, key, desc) {\n  var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n  else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n}\n\nexport function __param(paramIndex, decorator) {\n  return function (target, key) { decorator(target, key, paramIndex); }\n}\n\nexport function __esDecorate(ctor, descriptorIn, decorators, contextIn, initializers, extraInitializers) {\n  function accept(f) { if (f !== void 0 && typeof f !== \"function\") throw new TypeError(\"Function expected\"); return f; }\n  var kind = contextIn.kind, key = kind === \"getter\" ? \"get\" : kind === \"setter\" ? \"set\" : \"value\";\n  var target = !descriptorIn && ctor ? contextIn[\"static\"] ? ctor : ctor.prototype : null;\n  var descriptor = descriptorIn || (target ? Object.getOwnPropertyDescriptor(target, contextIn.name) : {});\n  var _, done = false;\n  for (var i = decorators.length - 1; i >= 0; i--) {\n      var context = {};\n      for (var p in contextIn) context[p] = p === \"access\" ? {} : contextIn[p];\n      for (var p in contextIn.access) context.access[p] = contextIn.access[p];\n      context.addInitializer = function (f) { if (done) throw new TypeError(\"Cannot add initializers after decoration has completed\"); extraInitializers.push(accept(f || null)); };\n      var result = (0, decorators[i])(kind === \"accessor\" ? { get: descriptor.get, set: descriptor.set } : descriptor[key], context);\n      if (kind === \"accessor\") {\n          if (result === void 0) continue;\n          if (result === null || typeof result !== \"object\") throw new TypeError(\"Object expected\");\n          if (_ = accept(result.get)) descriptor.get = _;\n          if (_ = accept(result.set)) descriptor.set = _;\n          if (_ = accept(result.init)) initializers.unshift(_);\n      }\n      else if (_ = accept(result)) {\n          if (kind === \"field\") initializers.unshift(_);\n          else descriptor[key] = _;\n      }\n  }\n  if (target) Object.defineProperty(target, contextIn.name, descriptor);\n  done = true;\n};\n\nexport function __runInitializers(thisArg, initializers, value) {\n  var useValue = arguments.length > 2;\n  for (var i = 0; i < initializers.length; i++) {\n      value = useValue ? initializers[i].call(thisArg, value) : initializers[i].call(thisArg);\n  }\n  return useValue ? value : void 0;\n};\n\nexport function __propKey(x) {\n  return typeof x === \"symbol\" ? x : \"\".concat(x);\n};\n\nexport function __setFunctionName(f, name, prefix) {\n  if (typeof name === \"symbol\") name = name.description ? \"[\".concat(name.description, \"]\") : \"\";\n  return Object.defineProperty(f, \"name\", { configurable: true, value: prefix ? \"\".concat(prefix, \" \", name) : name });\n};\n\nexport function __metadata(metadataKey, metadataValue) {\n  if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\n}\n\nexport function __awaiter(thisArg, _arguments, P, generator) {\n  function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n  return new (P || (P = Promise))(function (resolve, reject) {\n      function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n      function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n      function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n      step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n}\n\nexport function __generator(thisArg, body) {\n  var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n  return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n  function verb(n) { return function (v) { return step([n, v]); }; }\n  function step(op) {\n      if (f) throw new TypeError(\"Generator is already executing.\");\n      while (g && (g = 0, op[0] && (_ = 0)), _) try {\n          if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n          if (y = 0, t) op = [op[0] & 2, t.value];\n          switch (op[0]) {\n              case 0: case 1: t = op; break;\n              case 4: _.label++; return { value: op[1], done: false };\n              case 5: _.label++; y = op[1]; op = [0]; continue;\n              case 7: op = _.ops.pop(); _.trys.pop(); continue;\n              default:\n                  if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                  if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                  if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                  if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                  if (t[2]) _.ops.pop();\n                  _.trys.pop(); continue;\n          }\n          op = body.call(thisArg, _);\n      } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n      if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n  }\n}\n\nexport var __createBinding = Object.create ? (function(o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  var desc = Object.getOwnPropertyDescriptor(m, k);\n  if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n  }\n  Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  o[k2] = m[k];\n});\n\nexport function __exportStar(m, o) {\n  for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(o, p)) __createBinding(o, m, p);\n}\n\nexport function __values(o) {\n  var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\n  if (m) return m.call(o);\n  if (o && typeof o.length === \"number\") return {\n      next: function () {\n          if (o && i >= o.length) o = void 0;\n          return { value: o && o[i++], done: !o };\n      }\n  };\n  throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\n}\n\nexport function __read(o, n) {\n  var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n  if (!m) return o;\n  var i = m.call(o), r, ar = [], e;\n  try {\n      while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n  }\n  catch (error) { e = { error: error }; }\n  finally {\n      try {\n          if (r && !r.done && (m = i[\"return\"])) m.call(i);\n      }\n      finally { if (e) throw e.error; }\n  }\n  return ar;\n}\n\n/** @deprecated */\nexport function __spread() {\n  for (var ar = [], i = 0; i < arguments.length; i++)\n      ar = ar.concat(__read(arguments[i]));\n  return ar;\n}\n\n/** @deprecated */\nexport function __spreadArrays() {\n  for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\n  for (var r = Array(s), k = 0, i = 0; i < il; i++)\n      for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\n          r[k] = a[j];\n  return r;\n}\n\nexport function __spreadArray(to, from, pack) {\n  if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\n      if (ar || !(i in from)) {\n          if (!ar) ar = Array.prototype.slice.call(from, 0, i);\n          ar[i] = from[i];\n      }\n  }\n  return to.concat(ar || Array.prototype.slice.call(from));\n}\n\nexport function __await(v) {\n  return this instanceof __await ? (this.v = v, this) : new __await(v);\n}\n\nexport function __asyncGenerator(thisArg, _arguments, generator) {\n  if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\n  var g = generator.apply(thisArg, _arguments || []), i, q = [];\n  return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\", awaitReturn), i[Symbol.asyncIterator] = function () { return this; }, i;\n  function awaitReturn(f) { return function (v) { return Promise.resolve(v).then(f, reject); }; }\n  function verb(n, f) { if (g[n]) { i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; if (f) i[n] = f(i[n]); } }\n  function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\n  function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\n  function fulfill(value) { resume(\"next\", value); }\n  function reject(value) { resume(\"throw\", value); }\n  function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\n}\n\nexport function __asyncDelegator(o) {\n  var i, p;\n  return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\n  function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: false } : f ? f(v) : v; } : f; }\n}\n\nexport function __asyncValues(o) {\n  if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\n  var m = o[Symbol.asyncIterator], i;\n  return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\n  function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\n  function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\n}\n\nexport function __makeTemplateObject(cooked, raw) {\n  if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\n  return cooked;\n};\n\nvar __setModuleDefault = Object.create ? (function(o, v) {\n  Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n  o[\"default\"] = v;\n};\n\nexport function __importStar(mod) {\n  if (mod && mod.__esModule) return mod;\n  var result = {};\n  if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n  __setModuleDefault(result, mod);\n  return result;\n}\n\nexport function __importDefault(mod) {\n  return (mod && mod.__esModule) ? mod : { default: mod };\n}\n\nexport function __classPrivateFieldGet(receiver, state, kind, f) {\n  if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a getter\");\n  if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot read private member from an object whose class did not declare it\");\n  return kind === \"m\" ? f : kind === \"a\" ? f.call(receiver) : f ? f.value : state.get(receiver);\n}\n\nexport function __classPrivateFieldSet(receiver, state, value, kind, f) {\n  if (kind === \"m\") throw new TypeError(\"Private method is not writable\");\n  if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a setter\");\n  if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot write private member to an object whose class did not declare it\");\n  return (kind === \"a\" ? f.call(receiver, value) : f ? f.value = value : state.set(receiver, value)), value;\n}\n\nexport function __classPrivateFieldIn(state, receiver) {\n  if (receiver === null || (typeof receiver !== \"object\" && typeof receiver !== \"function\")) throw new TypeError(\"Cannot use 'in' operator on non-object\");\n  return typeof state === \"function\" ? receiver === state : state.has(receiver);\n}\n\nexport function __addDisposableResource(env, value, async) {\n  if (value !== null && value !== void 0) {\n    if (typeof value !== \"object\" && typeof value !== \"function\") throw new TypeError(\"Object expected.\");\n    var dispose, inner;\n    if (async) {\n      if (!Symbol.asyncDispose) throw new TypeError(\"Symbol.asyncDispose is not defined.\");\n      dispose = value[Symbol.asyncDispose];\n    }\n    if (dispose === void 0) {\n      if (!Symbol.dispose) throw new TypeError(\"Symbol.dispose is not defined.\");\n      dispose = value[Symbol.dispose];\n      if (async) inner = dispose;\n    }\n    if (typeof dispose !== \"function\") throw new TypeError(\"Object not disposable.\");\n    if (inner) dispose = function() { try { inner.call(this); } catch (e) { return Promise.reject(e); } };\n    env.stack.push({ value: value, dispose: dispose, async: async });\n  }\n  else if (async) {\n    env.stack.push({ async: true });\n  }\n  return value;\n}\n\nvar _SuppressedError = typeof SuppressedError === \"function\" ? SuppressedError : function (error, suppressed, message) {\n  var e = new Error(message);\n  return e.name = \"SuppressedError\", e.error = error, e.suppressed = suppressed, e;\n};\n\nexport function __disposeResources(env) {\n  function fail(e) {\n    env.error = env.hasError ? new _SuppressedError(e, env.error, \"An error was suppressed during disposal.\") : e;\n    env.hasError = true;\n  }\n  function next() {\n    while (env.stack.length) {\n      var rec = env.stack.pop();\n      try {\n        var result = rec.dispose && rec.dispose.call(rec.value);\n        if (rec.async) return Promise.resolve(result).then(next, function(e) { fail(e); return next(); });\n      }\n      catch (e) {\n          fail(e);\n      }\n    }\n    if (env.hasError) throw env.error;\n  }\n  return next();\n}\n\nexport default {\n  __extends,\n  __assign,\n  __rest,\n  __decorate,\n  __param,\n  __metadata,\n  __awaiter,\n  __generator,\n  __createBinding,\n  __exportStar,\n  __values,\n  __read,\n  __spread,\n  __spreadArrays,\n  __spreadArray,\n  __await,\n  __asyncGenerator,\n  __asyncDelegator,\n  __asyncValues,\n  __makeTemplateObject,\n  __importStar,\n  __importDefault,\n  __classPrivateFieldGet,\n  __classPrivateFieldSet,\n  __classPrivateFieldIn,\n  __addDisposableResource,\n  __disposeResources,\n};\n","/**\r\n * ============================================================================\r\n * MAIN CLASS\r\n * ============================================================================\r\n * @hidden\r\n */\r\n/**\r\n * Represents a relative value (percent).\r\n *\r\n * The Percent object, can be instantiated using two ways:\r\n *\r\n * * Via `new Percent(X)`.\r\n * * Via `am5.percent(X)`.\r\n *\r\n * You can also use shortcut functions for `0%`, `50%`, and `100%`:\r\n * * `am5.p0`\r\n * * `am5.p50`\r\n * * `am5.p100`\r\n */\r\nexport class Percent {\r\n    /**\r\n     * Constructor.\r\n     *\r\n     * @param percent  Percent value\r\n     */\r\n    constructor(percent) {\r\n        /**\r\n         * Value in percent.\r\n         */\r\n        Object.defineProperty(this, \"_value\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        this._value = percent;\r\n    }\r\n    /**\r\n     * Relative value.\r\n     *\r\n     * E.g. 100% is 1, 50% is 0.5, etc.\r\n     *\r\n     * This is useful to apply transformations to other values. E.g.:\r\n     *\r\n     * ```TypeScript\r\n     * let value = 256;\r\n     * let percent = new am5.p50;\r\n     * console.log(value * percent.value); // outputs 128\r\n     * ```\r\n     * ```JavaScript\r\n     * var value = 256;\r\n     * var percent = new am5.p50;\r\n     * console.log(value * percent.value); // outputs 128\r\n     * ```\r\n     *\r\n     * Alternatively, you can use `am5.percent()` helper function:\r\n     *\r\n     * ```TypeScript\r\n     * let value = 256;\r\n     * let percent = am5.p50;\r\n     * console.log(value * percent.value); // outputs 128\r\n     * ```\r\n     * ```JavaScript\r\n     * var value = 256;\r\n     * var percent = am5.p50;\r\n     * console.log(value * percent.value); // outputs 128\r\n     * ```\r\n     *\r\n     * @readonly\r\n     * @return Relative value\r\n     */\r\n    get value() {\r\n        return this._value / 100;\r\n    }\r\n    /**\r\n     * Value in percent.\r\n     *\r\n     * @readonly\r\n     * @return Percent\r\n     */\r\n    get percent() {\r\n        return this._value;\r\n    }\r\n    toString() {\r\n        return \"\" + this._value + \"%\";\r\n    }\r\n    interpolate(min, max) {\r\n        return min + (this.value * (max - min));\r\n    }\r\n    static normalize(percent, min, max) {\r\n        if (percent instanceof Percent) {\r\n            return percent;\r\n        }\r\n        else {\r\n            if (min === max) {\r\n                return new Percent(0);\r\n            }\r\n            else {\r\n                return new Percent(Math.min(Math.max((percent - min) * (1 / (max - min)), 0), 1) * 100);\r\n            }\r\n        }\r\n    }\r\n}\r\n/**\r\n * Converts numeric percent value to a proper [[Percent]] object.\r\n *\r\n * ```TypeScript\r\n * pieSeries.set(\"radius\", am5.percent(80));\r\n * ```\r\n * ```JavaScript\r\n * pieSeries.set(\"radius\", am5.percent(80));\r\n * ```\r\n *\r\n * @param value  Percent\r\n * @return Percent object\r\n */\r\nexport function percent(value) {\r\n    return new Percent(value);\r\n}\r\n/**\r\n * A shortcut function to `am5.percent(0)`.\r\n */\r\nexport const p0 = percent(0);\r\n/**\r\n * A shortcut function to `am5.percent(100)`.\r\n */\r\nexport const p100 = percent(100);\r\n/**\r\n * A shortcut function to `am5.percent(50)`.\r\n */\r\nexport const p50 = percent(50);\r\n/**\r\n * Checks if value is a [[Percent]] object.\r\n *\r\n * @ignore Exclude from docs\r\n * @param value  Input value\r\n * @return Is percent?\r\n */\r\nexport function isPercent(value) {\r\n    return value instanceof Percent;\r\n}\r\n//# sourceMappingURL=Percent.js.map","/**\r\n * A collection of utility functions for various type checks and conversion\r\n * @hidden\r\n */\r\n/**\r\n * ============================================================================\r\n * TYPE CHECK\r\n * ============================================================================\r\n * @hidden\r\n */\r\n/**\r\n * Returns `true` if value is not a number (NaN).\r\n *\r\n * @param value Input value\r\n * @return Is NaN?\r\n */\r\nexport function isNaN(value) {\r\n    return Number(value) !== value;\r\n}\r\n/**\r\n * Returns a type of the value.\r\n *\r\n * @param value  Input value\r\n * @return Type of the value\r\n * @ignore\r\n */\r\nexport function getType(value) {\r\n    return ({}).toString.call(value);\r\n}\r\n/**\r\n * Asserts that the condition is true.\r\n *\r\n * @param condition  Condition to check\r\n * @param message    Message to display in the error\r\n * @ignore\r\n */\r\nexport function assert(condition, message = \"Assertion failed\") {\r\n    if (!condition) {\r\n        throw new Error(message);\r\n    }\r\n}\r\n/**\r\n * ============================================================================\r\n * QUICK CONVERSION\r\n * ============================================================================\r\n * @hidden\r\n */\r\n/**\r\n * Converts any value into a `number`.\r\n *\r\n * @param value  Source value\r\n * @return Number representation of value\r\n */\r\nexport function toNumber(value) {\r\n    if (value != null && !isNumber(value)) {\r\n        let converted = Number(value);\r\n        if (isNaN(converted) && isString(value) && value != \"\") {\r\n            return toNumber(value.replace(/[^0-9.\\-]+/g, ''));\r\n        }\r\n        return converted;\r\n    }\r\n    return value;\r\n}\r\n/**\r\n * Converts anything to Date object.\r\n *\r\n * @param value  A value of any type\r\n * @return Date object representing a value\r\n */\r\nexport function toDate(value) {\r\n    if (isDate(value)) {\r\n        // TODO maybe don't create a new Date ?\r\n        return new Date(value);\r\n    }\r\n    else if (isNumber(value)) {\r\n        return new Date(value);\r\n    }\r\n    else {\r\n        // Try converting to number (assuming timestamp)\r\n        let num = Number(value);\r\n        if (!isNumber(num)) {\r\n            return new Date(value);\r\n        }\r\n        else {\r\n            return new Date(num);\r\n        }\r\n    }\r\n}\r\n/**\r\n * Converts numeric value into string. Deals with large or small numbers that\r\n * would otherwise use exponents.\r\n *\r\n * @param value  Numeric value\r\n * @return Numeric value as string\r\n */\r\nexport function numberToString(value) {\r\n    // TODO handle Infinity and -Infinity\r\n    if (isNaN(value)) {\r\n        return \"NaN\";\r\n    }\r\n    if (value === Infinity) {\r\n        return \"Infinity\";\r\n    }\r\n    if (value === -Infinity) {\r\n        return \"-Infinity\";\r\n    }\r\n    // Negative 0\r\n    if ((value === 0) && (1 / value === -Infinity)) {\r\n        return \"-0\";\r\n    }\r\n    // Preserve negative and deal with absoute values\r\n    let negative = value < 0;\r\n    value = Math.abs(value);\r\n    // TODO test this\r\n    let parsed = /^([0-9]+)(?:\\.([0-9]+))?(?:e[\\+\\-]([0-9]+))?$/.exec(\"\" + value);\r\n    let digits = parsed[1];\r\n    let decimals = parsed[2] || \"\";\r\n    let res;\r\n    // Leave the nummber as it is if it does not use exponents\r\n    if (parsed[3] === undefined) {\r\n        res = (decimals === \"\" ? digits : digits + \".\" + decimals);\r\n    }\r\n    else {\r\n        let exponent = +parsed[3];\r\n        // Deal with decimals\r\n        if (value < 1) {\r\n            let zeros = exponent - 1;\r\n            res = \"0.\" + repeat(\"0\", zeros) + digits + decimals;\r\n            // Deal with integers\r\n        }\r\n        else {\r\n            let zeros = exponent - decimals.length;\r\n            if (zeros === 0) {\r\n                res = digits + decimals;\r\n            }\r\n            else if (zeros < 0) {\r\n                res = digits + decimals.slice(0, zeros) + \".\" + decimals.slice(zeros);\r\n            }\r\n            else {\r\n                res = digits + decimals + repeat(\"0\", zeros);\r\n            }\r\n        }\r\n    }\r\n    return negative ? \"-\" + res : res;\r\n}\r\n/**\r\n * Repeats a `string` number of times as set in `amount`.\r\n *\r\n * @ignore Exclude from docs\r\n * @todo Make this faster\r\n * @param string  Source string\r\n * @param amount  Number of times to repeat string\r\n * @return New string\r\n */\r\nexport function repeat(string, amount) {\r\n    return new Array(amount + 1).join(string);\r\n}\r\n/**\r\n * ============================================================================\r\n * TYPE CHECK\r\n * ============================================================================\r\n * @hidden\r\n */\r\n/**\r\n * Checks if parameter is `Date`.\r\n *\r\n * @param value  Input value\r\n * @return Is Date?\r\n */\r\nexport function isDate(value) {\r\n    return getType(value) === \"[object Date]\";\r\n}\r\n/**\r\n * Checks if parameter is `string`.\r\n *\r\n * @param value  Input value\r\n * @return Is string?\r\n */\r\nexport function isString(value) {\r\n    return typeof value === \"string\";\r\n}\r\n/**\r\n * Checks if parameter is `number`.\r\n *\r\n * @param value  Input value\r\n * @return Is number?\r\n */\r\nexport function isNumber(value) {\r\n    return typeof value === \"number\" && Number(value) == value;\r\n}\r\n/**\r\n * Checks if parameter is `object`.\r\n *\r\n * @param value  Input value\r\n * @return Is object?\r\n */\r\nexport function isObject(value) {\r\n    return typeof value === \"object\" && value !== null;\r\n}\r\n/**\r\n * Checks if parameter is `Array`.\r\n *\r\n * @param value  Input value\r\n * @return Is Array?\r\n */\r\nexport function isArray(value) {\r\n    return Array.isArray(value);\r\n}\r\n/**\r\n * ============================================================================\r\n * STATIC CONSTANTS\r\n * ============================================================================\r\n * @hidden\r\n */\r\n/**\r\n * @ignore Exclude from docs\r\n */\r\nexport const PLACEHOLDER = \"____\";\r\n/**\r\n * @ignore Exclude from docs\r\n */\r\nexport const PLACEHOLDER2 = \"____\";\r\n//# sourceMappingURL=Type.js.map","import * as $type from \"./Type\";\r\n/**\r\n * ============================================================================\r\n * UTILITY FUNCTIONS\r\n * ============================================================================\r\n * @hidden\r\n */\r\n/**\r\n * Searches `array` for `value`.\r\n *\r\n * Returns -1 if not found.\r\n *\r\n * @param array  Source array\r\n * @param value  Value to search\r\n * @returns Index\r\n */\r\nexport function indexOf(array, value) {\r\n    const length = array.length;\r\n    for (let i = 0; i < length; ++i) {\r\n        // TODO handle NaN\r\n        if (array[i] === value) {\r\n            return i;\r\n        }\r\n    }\r\n    return -1;\r\n}\r\n/**\r\n * Calls `test` for each element in `array`.\r\n *\r\n * If `test` returns `true` then it immediately returns `true`.\r\n *\r\n * If `test` returns `false` for all of the elements in `array` then it returns `false`.\r\n *\r\n * @param array  Source array\r\n * @param test   Function which is called on each element\r\n * @returns Whether `test` returned true or not\r\n */\r\nexport function any(array, test) {\r\n    const length = array.length;\r\n    for (let i = 0; i < length; ++i) {\r\n        if (test(array[i])) {\r\n            return true;\r\n        }\r\n    }\r\n    return false;\r\n}\r\n/**\r\n * Calls `fn` function for every member of array and returns a new array out\r\n * of all outputs.\r\n *\r\n * @param array  Source array\r\n * @param fn     Callback function\r\n * @returns New array\r\n */\r\nexport function map(array, fn) {\r\n    const length = array.length;\r\n    const output = new Array(length);\r\n    for (let i = 0; i < length; ++i) {\r\n        output[i] = fn(array[i], i);\r\n    }\r\n    return output;\r\n}\r\n/**\r\n * Iterates through all items in array and calls `fn` function for each of\r\n * them.\r\n *\r\n * @param array  Source array\r\n * @param fn     Callback function\r\n */\r\nexport function each(array, fn) {\r\n    const length = array.length;\r\n    for (let i = 0; i < length; ++i) {\r\n        fn(array[i], i);\r\n    }\r\n}\r\n/**\r\n * Iterates through all items in array in reverse order and calls `fn` function for each of\r\n * them.\r\n *\r\n * @param array  Source array\r\n * @param fn     Callback function\r\n */\r\nexport function eachReverse(array, fn) {\r\n    let i = array.length;\r\n    while (i > 0) {\r\n        --i;\r\n        fn(array[i], i);\r\n    }\r\n}\r\n/**\r\n * Iterates through all items in array and calls `fn` function for each of\r\n * them.\r\n *\r\n * If `fn` call evaluates to `false`, further iteration is cancelled.\r\n *\r\n * @param array  Source array\r\n * @param fn     Callback function\r\n */\r\nexport function eachContinue(array, fn) {\r\n    const length = array.length;\r\n    for (let i = 0; i < length; ++i) {\r\n        if (!fn(array[i], i)) {\r\n            break;\r\n        }\r\n    }\r\n}\r\n/**\r\n * Shifts an item at `index` towards beginning of the array.\r\n *\r\n * @param array  Source array\r\n * @param index  Target element index\r\n */\r\nexport function shiftLeft(array, index) {\r\n    const length = array.length;\r\n    for (let i = index; i < length; ++i) {\r\n        array[i - index] = array[i];\r\n    }\r\n    array.length = length - index;\r\n}\r\n/**\r\n * Returns the last item of the array.\r\n *\r\n * @param array  Source array\r\n * @returns Last item\r\n */\r\nexport function last(array) {\r\n    const length = array.length;\r\n    return length ? array[length - 1] : undefined;\r\n}\r\n/**\r\n * Returns the first item of the array.\r\n *\r\n * @param array  Source array\r\n * @returns Last item\r\n */\r\nexport function first(array) {\r\n    return array[0];\r\n}\r\n/**\r\n * Inserts `element` into `array` at `index`.\r\n *\r\n * Caps `index` to be between `0` and `array.length`\r\n *\r\n * @param array    Source array\r\n * @param element  Item to insert\r\n * @param array    Index to insert item at\r\n */\r\nexport function insert(array, element, index) {\r\n    //if (array) {\r\n    index = Math.max(0, Math.min(index, array.length));\r\n    array.splice(index, 0, element);\r\n    //}\r\n}\r\n/**\r\n * Removes all copies of `element` from `array` (if they exist) and then\r\n * inserts `element` at `index`.\r\n *\r\n * @param array    Source array\r\n * @param element  Item\r\n * @param array    Index to move item to\r\n */\r\nexport function setIndex(array, element, index) {\r\n    remove(array, element);\r\n    insert(array, element, index);\r\n}\r\n/**\r\n * Pushes all of the elements from `input` into `array`.\r\n *\r\n * @param array  Output array\r\n * @param input  Input array\r\n */\r\nexport function pushAll(array, input) {\r\n    const length = input.length;\r\n    for (let i = 0; i < length; ++i) {\r\n        array.push(input[i]);\r\n    }\r\n}\r\n/**\r\n * Removes `element` from `array`.\r\n *\r\n * If there are multiple copies of `element`, they are all removed.\r\n *\r\n * @param array    Source array\r\n * @param element  Item to remove\r\n */\r\nexport function remove(array, element) {\r\n    let found = false;\r\n    let index = 0;\r\n    for (;;) {\r\n        index = array.indexOf(element, index);\r\n        if (index === -1) {\r\n            return found;\r\n        }\r\n        else {\r\n            found = true;\r\n            array.splice(index, 1);\r\n        }\r\n    }\r\n}\r\nexport function removeFirst(array, element) {\r\n    let index = array.indexOf(element);\r\n    if (index !== -1) {\r\n        array.splice(index, 1);\r\n        return true;\r\n    }\r\n    else {\r\n        return false;\r\n    }\r\n}\r\n/**\r\n * Adds an `element` to `array`.\r\n *\r\n * If array already contains and item like this, it is removed before adding\r\n * it again.\r\n *\r\n * Optionally `toIndex` can be specified to add element at specific index.\r\n *\r\n * @param array    Source array\r\n * @param element  Item to add\r\n * @param array    Index to move item to\r\n */\r\nexport function move(array, element, toIndex) {\r\n    // @todo this implementation must be the same as the List.moveValue method\r\n    // @todo don't do anything if the desired index is the same as the current index\r\n    let index = indexOf(array, element);\r\n    // @todo remove all old values rather than only the first ?\r\n    if (index !== -1) {\r\n        removeIndex(array, index);\r\n    }\r\n    if (toIndex == null) {\r\n        array.push(element);\r\n    }\r\n    else {\r\n        insertIndex(array, toIndex, element);\r\n    }\r\n}\r\n/**\r\n * Inserts `element` into `array` at `index`.\r\n *\r\n * If `index` is not provided, it will insert `element` at the end of `array`.\r\n *\r\n * @param array    Source array\r\n * @param element  Item to add\r\n * @param array    Index to add item at\r\n */\r\nexport function add(array, element, index) {\r\n    // Append to the end if index is not set\r\n    if (!$type.isNumber(index)) {\r\n        array.push(element);\r\n    }\r\n    // Add to the beginning of array if index is 0\r\n    else if (index === 0) {\r\n        array.unshift(element);\r\n    }\r\n    // Add to indicated place if index is set\r\n    else {\r\n        array.splice(index, 0, element);\r\n    }\r\n}\r\n/**\r\n * Pushes `element` into `array` if it doesn't already exist.\r\n *\r\n * @param array    Source array\r\n * @param element  Item to add\r\n */\r\nexport function pushOne(array, element) {\r\n    if (array.indexOf(element) === -1) {\r\n        array.push(element);\r\n    }\r\n}\r\n/**\r\n * Removes `element` from `array` (if it exists) and then inserts `element` at\r\n * `index`.\r\n *\r\n * If `index` is not provided, it will insert `element` at the end of `array`.\r\n *\r\n * @param array    Source array\r\n * @param element  Item to remove\r\n * @param array    Index to move item to\r\n */\r\nexport function replace(array, element, index) {\r\n    // check if exists\r\n    let ind = array.indexOf(element);\r\n    // remove if exists\r\n    if (ind !== -1) {\r\n        array.splice(ind, 1);\r\n    }\r\n    // add to end if index is not set\r\n    if (!$type.isNumber(index)) {\r\n        array.push(element);\r\n    }\r\n    // add to indicated place if index is set\r\n    else {\r\n        array.splice(index, 0, element);\r\n    }\r\n}\r\n/**\r\n * Wraps `input` in an array, if it isn't already an array.\r\n *\r\n * @param input  Source value\r\n * @return An array\r\n */\r\nexport function toArray(input) {\r\n    if (Array.isArray(input)) {\r\n        return input;\r\n    }\r\n    else {\r\n        return [input];\r\n    }\r\n}\r\n/**\r\n * Returns `true` if `element` exists in `array`.\r\n *\r\n * @param array    Source array\r\n * @param element  Item to search for\r\n * @returns Item in array?\r\n */\r\nexport function has(array, element) {\r\n    return indexOf(array, element) !== -1;\r\n}\r\n/**\r\n * Returns a shallow copy of `array`.\r\n *\r\n * @param array  Source array\r\n * @returns Copy of the array\r\n */\r\nexport function copy(array) {\r\n    const length = array.length;\r\n    // It's faster to create the array with a pre-defined length\r\n    const output = new Array(length);\r\n    for (let i = 0; i < length; ++i) {\r\n        // Because the array has a pre-defined length, we have to assign rather than push\r\n        // This is also faster than pushing\r\n        output[i] = array[i];\r\n    }\r\n    return output;\r\n}\r\n/**\r\n * Returns a copy of `array` which contains all the elements between `start`\r\n * and `end`. (including `start` and excluding `end`)\r\n *\r\n * If `end` is not provided, it defaults to `array.length`.\r\n *\r\n * @param array  Source array\r\n * @param start  Start index\r\n * @param end    End index\r\n * @returns Part of the array\r\n */\r\nexport function slice(array, start, end = array.length) {\r\n    const output = new Array(end - start);\r\n    for (let i = start; i < end; ++i) {\r\n        output[i - start] = array[i];\r\n    }\r\n    return output;\r\n}\r\n/**\r\n * Inserts a value into array at specific index.\r\n *\r\n * @param array  Source array\r\n * @param index  Index\r\n * @param value  Value to insert\r\n */\r\nexport function insertIndex(array, index, value) {\r\n    array.splice(index, 0, value);\r\n}\r\n/**\r\n * Removes a value from array at specific index.\r\n *\r\n * @param array  Source array\r\n * @param index  Index\r\n */\r\nexport function removeIndex(array, index) {\r\n    array.splice(index, 1);\r\n}\r\n/**\r\n * Searches the array using custom function and returns index of the item if\r\n * found.\r\n *\r\n * Will call `matches` function on all items of the array. If return value\r\n * evaluates to `true`, index is returned.\r\n *\r\n * Otherwise returns -1.\r\n *\r\n * @param array    Source array\r\n * @param matches  Search function\r\n * @returns Index of the item if found\r\n */\r\nexport function findIndex(array, matches) {\r\n    const length = array.length;\r\n    for (let i = 0; i < length; ++i) {\r\n        if (matches(array[i], i)) {\r\n            return i;\r\n        }\r\n    }\r\n    return -1;\r\n}\r\n/**\r\n * This is the same as `findIndex` except it searches from right to left.\r\n *\r\n * @param array    Source array\r\n * @param matches  Search function\r\n * @returns Index of the item if found\r\n */\r\nexport function findIndexReverse(array, matches) {\r\n    let i = array.length;\r\n    while (i > 0) {\r\n        --i;\r\n        if (matches(array[i], i)) {\r\n            return i;\r\n        }\r\n    }\r\n    return -1;\r\n}\r\n/**\r\n * Searches the array using custom function and returns item if found.\r\n *\r\n * Will call `matches` function on all items of the array. If return value\r\n * evaluates to `true`, index is returned.\r\n *\r\n * Otherwise returns `undefined`.\r\n *\r\n * @param array    Source array\r\n * @param matches  Search function\r\n * @returns Item if found\r\n */\r\nexport function find(array, matches) {\r\n    const index = findIndex(array, matches);\r\n    if (index !== -1) {\r\n        return array[index];\r\n    }\r\n}\r\n/**\r\n * This is the same as `find` except it searches from right to left.\r\n *\r\n * @param array    Source array\r\n * @param matches  Search function\r\n * @returns Item if found\r\n */\r\nexport function findReverse(array, matches) {\r\n    const index = findIndexReverse(array, matches);\r\n    if (index !== -1) {\r\n        return array[index];\r\n    }\r\n}\r\n/**\r\n * Searches the array using custom function and returns item if found.\r\n *\r\n * Will call `matches` function on all items of the array. If value\r\n * is not `undefined`, it returns it.\r\n *\r\n * Otherwise returns `undefined`.\r\n *\r\n * @param array    Source array\r\n * @param matches  Search function\r\n * @returns Item if found\r\n */\r\nexport function findMap(array, matches) {\r\n    const length = array.length;\r\n    for (let i = 0; i < length; ++i) {\r\n        const value = matches(array[i], i);\r\n        if (value !== undefined) {\r\n            return value;\r\n        }\r\n    }\r\n}\r\n/**\r\n * Iterates through all items in array and calls `fn` function for each of\r\n * them.\r\n *\r\n * @param array  Source array\r\n * @param fn     Callback function\r\n */\r\nexport function shuffle(array) {\r\n    // https://stackoverflow.com/a/2450976/449477\r\n    let currentIndex = array.length, temporaryValue, randomIndex;\r\n    // While there remain elements to shuffle...\r\n    while (0 !== currentIndex) {\r\n        // Pick a remaining element...\r\n        randomIndex = Math.floor(Math.random() * currentIndex);\r\n        currentIndex -= 1;\r\n        // And swap it with the current element.\r\n        temporaryValue = array[currentIndex];\r\n        array[currentIndex] = array[randomIndex];\r\n        array[randomIndex] = temporaryValue;\r\n    }\r\n}\r\n/**\r\n * Orders an array using specific `ordering` function and returns right-most index of\r\n * the `value`.\r\n *\r\n * @ignore Exclude from docs\r\n * @param array     Source array\r\n * @param ordering  An ordering function\r\n * @returns Result of the search\r\n */\r\nexport function getSortedIndex(array, ordering) {\r\n    let start = 0;\r\n    let end = array.length;\r\n    let found = false;\r\n    while (start < end) {\r\n        // TODO is this faster/slower than using Math.floor ?\r\n        const pivot = (start + end) >> 1;\r\n        const order = ordering(array[pivot]);\r\n        // less\r\n        if (order < 0) {\r\n            start = pivot + 1;\r\n            // equal\r\n        }\r\n        else if (order === 0) {\r\n            found = true;\r\n            start = pivot + 1;\r\n            // more\r\n        }\r\n        else {\r\n            end = pivot;\r\n        }\r\n    }\r\n    return {\r\n        found: found,\r\n        index: (found ? start - 1 : start)\r\n    };\r\n}\r\n/**\r\n * Orders an array using specific `ordering` function and returns left-most index of\r\n * the `value`.\r\n *\r\n * @ignore Exclude from docs\r\n * @param array     Source array\r\n * @param ordering  An ordering function\r\n * @returns Result of the search\r\n */\r\nexport function getFirstSortedIndex(array, ordering) {\r\n    let start = 0;\r\n    let end = array.length;\r\n    let found = false;\r\n    while (start < end) {\r\n        // TODO is this faster/slower than using Math.floor ?\r\n        const pivot = (start + end) >> 1;\r\n        const order = ordering(array[pivot]);\r\n        // less\r\n        if (order < 0) {\r\n            start = pivot + 1;\r\n            // equal\r\n        }\r\n        else if (order === 0) {\r\n            found = true;\r\n            end = pivot;\r\n            // more\r\n        }\r\n        else {\r\n            end = pivot;\r\n        }\r\n    }\r\n    return {\r\n        found: found,\r\n        index: start\r\n    };\r\n}\r\nexport function keepIf(array, keep) {\r\n    let i = array.length;\r\n    while (i > 0) {\r\n        --i;\r\n        if (!keep(array[i])) {\r\n            array.splice(i, 1);\r\n        }\r\n    }\r\n}\r\n//# sourceMappingURL=Array.js.map","import * as $array from \"./Array\";\r\nexport function keys(object) {\r\n    return Object.keys(object);\r\n}\r\n/**\r\n * Returns an array of object's property names ordered using specific ordering\r\n * function.\r\n *\r\n * @param object  Source object\r\n * @param order   Ordering function\r\n * @returns Object property names\r\n */\r\nexport function keysOrdered(object, order) {\r\n    return keys(object).sort(order);\r\n}\r\nexport function copy(object) {\r\n    return Object.assign({}, object);\r\n}\r\nexport function each(object, f) {\r\n    keys(object).forEach((key) => {\r\n        f(key, object[key]);\r\n    });\r\n}\r\n/**\r\n * Iterates through all properties of the object calling `fn` for each of them.\r\n *\r\n * If return value of the function evaluates to `false` further iteration is\r\n * cancelled.\r\n *\r\n * @param object  Source object\r\n * @param fn      Callback function\r\n */\r\nexport function eachContinue(object, fn) {\r\n    for (let key in object) {\r\n        if (hasKey(object, key)) {\r\n            if (!fn(key, object[key])) {\r\n                break;\r\n            }\r\n        }\r\n    }\r\n}\r\n/**\r\n * Orders object properties using custom `ord` function and iterates through\r\n * them calling `fn` for each of them.\r\n *\r\n * @param object  Source object\r\n * @param fn      Callback function\r\n * @param order   Ordering function\r\n */\r\nexport function eachOrdered(object, fn, ord) {\r\n    $array.each(keysOrdered(object, ord), (key) => {\r\n        fn(key, object[key]);\r\n    });\r\n}\r\n/**\r\n * Checks if `object` has a specific `key`.\r\n *\r\n * @param object  Source object\r\n * @param key     Property name\r\n * @returns Has key?\r\n */\r\nexport function hasKey(object, key) {\r\n    return {}.hasOwnProperty.call(object, key);\r\n}\r\n/**\r\n * Copies all properties of one object to the other, omitting undefined, but only if property in target object doesn't have a value set.\r\n *\r\n * @param fromObject  Source object\r\n * @param toObject    Target object\r\n * @return Updated target object\r\n * @todo Maybe consolidate with utils.copy?\r\n */\r\nexport function softCopyProperties(source, target) {\r\n    each(source, (key, value) => {\r\n        // only if value is set\r\n        //if ($type.hasValue(value) && !($type.hasValue((<any>target)[key]))) {\r\n        if (value != null && target[key] == null) {\r\n            target[key] = value;\r\n        }\r\n    });\r\n    return target;\r\n}\r\n//# sourceMappingURL=Object.js.map","/**\r\n * ============================================================================\r\n * IMPORTS\r\n * ============================================================================\r\n * @hidden\r\n */\r\nimport * as $array from \"./Array\";\r\n/**\r\n * A base class for disposable objects.\r\n *\r\n * @ignore Exclude from docs\r\n */\r\nexport class DisposerClass {\r\n    /**\r\n     * Constructor.\r\n     */\r\n    constructor() {\r\n        /**\r\n         * Is object disposed?\r\n         */\r\n        Object.defineProperty(this, \"_disposed\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        this._disposed = false;\r\n    }\r\n    /**\r\n     * Checks if object is disposed.\r\n     *\r\n     * @return Disposed?\r\n     */\r\n    isDisposed() {\r\n        return this._disposed;\r\n    }\r\n    /**\r\n     * Disposes the object.\r\n     */\r\n    dispose() {\r\n        if (!this._disposed) {\r\n            this._disposed = true;\r\n            this._dispose();\r\n        }\r\n    }\r\n}\r\n/**\r\n * A class for creating an IDisposer.\r\n *\r\n * @ignore Exclude from docs\r\n */\r\nexport class Disposer {\r\n    /**\r\n     * Constructor.\r\n     *\r\n     * @param dispose  Function that disposes object\r\n     */\r\n    constructor(dispose) {\r\n        /**\r\n         * Is object disposed?\r\n         */\r\n        Object.defineProperty(this, \"_disposed\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        /**\r\n         * Method that disposes the object.\r\n         */\r\n        Object.defineProperty(this, \"_dispose\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        this._disposed = false;\r\n        this._dispose = dispose;\r\n    }\r\n    /**\r\n     * Checks if object is disposed.\r\n     *\r\n     * @return Disposed?\r\n     */\r\n    isDisposed() {\r\n        return this._disposed;\r\n    }\r\n    /**\r\n     * Disposes the object.\r\n     */\r\n    dispose() {\r\n        if (!this._disposed) {\r\n            this._disposed = true;\r\n            this._dispose();\r\n        }\r\n    }\r\n}\r\n/**\r\n * This can be extended by other classes to add a `_disposers` property.\r\n *\r\n * @ignore Exclude from docs\r\n */\r\nexport class ArrayDisposer extends DisposerClass {\r\n    constructor() {\r\n        super(...arguments);\r\n        Object.defineProperty(this, \"_disposers\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: []\r\n        });\r\n    }\r\n    _dispose() {\r\n        $array.each(this._disposers, (x) => {\r\n            x.dispose();\r\n        });\r\n    }\r\n}\r\n/**\r\n * A collection of related disposers that can be disposed in one go.\r\n *\r\n * @ignore Exclude from docs\r\n */\r\nexport class MultiDisposer extends DisposerClass {\r\n    constructor(disposers) {\r\n        super();\r\n        Object.defineProperty(this, \"_disposers\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        this._disposers = disposers;\r\n    }\r\n    _dispose() {\r\n        $array.each(this._disposers, (x) => {\r\n            x.dispose();\r\n        });\r\n    }\r\n    get disposers() {\r\n        return this._disposers;\r\n    }\r\n}\r\n/**\r\n * A special kind of Disposer that has attached value set.\r\n *\r\n * If a new value is set using `set()` method, the old disposer value is\r\n * disposed.\r\n *\r\n * @ignore Exclude from docs\r\n * @todo Description\r\n */\r\nexport class MutableValueDisposer extends DisposerClass {\r\n    constructor() {\r\n        super(...arguments);\r\n        /**\r\n         * Current disposer.\r\n         */\r\n        Object.defineProperty(this, \"_disposer\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        /**\r\n         * Current value.\r\n         */\r\n        Object.defineProperty(this, \"_value\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n    }\r\n    _dispose() {\r\n        if (this._disposer != null) {\r\n            this._disposer.dispose();\r\n            this._disposer = undefined;\r\n        }\r\n    }\r\n    /**\r\n     * Returns current value.\r\n     *\r\n     * @return Value\r\n     */\r\n    get() {\r\n        return this._value;\r\n    }\r\n    /**\r\n     * Sets value and disposes previous disposer if it was set.\r\n     *\r\n     * @param value     New value\r\n     * @param disposer  Disposer\r\n     */\r\n    set(value, disposer) {\r\n        if (this._disposer != null) {\r\n            this._disposer.dispose();\r\n        }\r\n        this._disposer = disposer;\r\n        this._value = value;\r\n    }\r\n    /**\r\n     * Resets the disposer value.\r\n     */\r\n    reset() {\r\n        this.set(undefined, undefined);\r\n    }\r\n}\r\n/**\r\n * @ignore Exclude from docs\r\n * @todo Description\r\n */\r\nexport class CounterDisposer extends Disposer {\r\n    constructor() {\r\n        super(...arguments);\r\n        /**\r\n         * [_counter description]\r\n         *\r\n         * @todo Description\r\n         */\r\n        Object.defineProperty(this, \"_counter\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: 0\r\n        });\r\n    }\r\n    /**\r\n     * [increment description]\r\n     *\r\n     * @todo Description\r\n     */\r\n    increment() {\r\n        // TODO throw an error if it is disposed\r\n        ++this._counter;\r\n        // TODO make this more efficient\r\n        return new Disposer(() => {\r\n            --this._counter;\r\n            if (this._counter === 0) {\r\n                this.dispose();\r\n            }\r\n        });\r\n    }\r\n}\r\n//# sourceMappingURL=Disposer.js.map","import * as $type from \"./Type\";\r\nimport * as $array from \"./Array\";\r\nimport * as $object from \"./Object\";\r\nimport { Disposer, DisposerClass } from \"./Disposer\";\r\n/**\r\n * ============================================================================\r\n * DOM FUNCTIONS\r\n * ============================================================================\r\n * @hidden\r\n */\r\n/**\r\n * Execute a function when DOM is ready.\r\n *\r\n * @since 5.0.2\r\n * @param  f  Callback\r\n */\r\nexport function ready(f) {\r\n    if (document.readyState !== \"loading\") {\r\n        f();\r\n    }\r\n    else {\r\n        const listener = () => {\r\n            if (document.readyState !== \"loading\") {\r\n                document.removeEventListener(\"readystatechange\", listener);\r\n                f();\r\n            }\r\n        };\r\n        document.addEventListener(\"readystatechange\", listener);\r\n    }\r\n}\r\n/**\r\n * Removes a DOM element.\r\n * @param  el  Target element\r\n */\r\nexport function removeElement(el) {\r\n    if (el.parentNode) {\r\n        el.parentNode.removeChild(el);\r\n    }\r\n}\r\n/**\r\n * Function that adds a disposable event listener directly to a DOM element.\r\n *\r\n * @ignore Exclude from docs\r\n * @param dom       A DOM element to add event to\r\n * @param type      Event type\r\n * @param listener  Event listener\r\n * @returns Disposable event\r\n */\r\nexport function addEventListener(dom, type, listener, options) {\r\n    //@todo proper type check for options: EventListenerOptions | boolean (TS for some reason gives error on passive parameter)\r\n    dom.addEventListener(type, listener, options || false);\r\n    return new Disposer(() => {\r\n        dom.removeEventListener(type, listener, options || false);\r\n    });\r\n}\r\n/**\r\n * Function that adds an event listener which is triggered when the browser's zoom changes.\r\n *\r\n * @param listener  Event listener\r\n * @returns Disposable event\r\n */\r\nexport function onZoom(listener) {\r\n    // TODO use matchMedia instead ?\r\n    return addEventListener(window, \"resize\", (_ev) => {\r\n        listener();\r\n    });\r\n}\r\n/**\r\n * @ignore\r\n */\r\nexport function supports(cap) {\r\n    switch (cap) {\r\n        case \"touchevents\":\r\n            //return \"ontouchstart\" in document.documentElement;\r\n            return window.hasOwnProperty(\"TouchEvent\");\r\n        case \"pointerevents\":\r\n            return window.hasOwnProperty(\"PointerEvent\");\r\n        case \"mouseevents\":\r\n            return window.hasOwnProperty(\"MouseEvent\");\r\n        case \"wheelevents\":\r\n            return window.hasOwnProperty(\"WheelEvent\");\r\n        case \"keyboardevents\":\r\n            return window.hasOwnProperty(\"KeyboardEvent\");\r\n    }\r\n    return false;\r\n}\r\n/**\r\n * @ignore\r\n */\r\nexport function getPointerId(event) {\r\n    let id = event.pointerId || 0;\r\n    return id;\r\n}\r\n/**\r\n * Removes focus from any element by shifting focus to body.\r\n *\r\n * @ignore\r\n */\r\nexport function blur() {\r\n    if (document.activeElement && document.activeElement != document.body) {\r\n        if (document.activeElement.blur) {\r\n            document.activeElement.blur();\r\n        }\r\n        else {\r\n            let input = document.createElement(\"button\");\r\n            input.style.position = \"fixed\";\r\n            input.style.top = \"0px\";\r\n            input.style.left = \"-10000px\";\r\n            document.body.appendChild(input);\r\n            input.focus();\r\n            input.blur();\r\n            document.body.removeChild(input);\r\n        }\r\n    }\r\n}\r\n/**\r\n * Focuses element.\r\n *\r\n * @ignore\r\n */\r\nexport function focus(el) {\r\n    if (el) {\r\n        el.focus();\r\n    }\r\n}\r\n/**\r\n * @ignore\r\n */\r\nexport function getRendererEvent(key) {\r\n    if (supports(\"pointerevents\")) {\r\n        return key;\r\n    }\r\n    else if (supports(\"touchevents\")) {\r\n        switch (key) {\r\n            case \"pointerover\": return \"touchstart\";\r\n            case \"pointerout\": return \"touchend\";\r\n            case \"pointerleave\": return \"touchend\";\r\n            case \"pointerdown\": return \"touchstart\";\r\n            case \"pointermove\": return \"touchmove\";\r\n            case \"pointerup\": return \"touchend\";\r\n            case \"click\": return \"click\";\r\n            case \"dblclick\": return \"dblclick\";\r\n        }\r\n    }\r\n    else if (supports(\"mouseevents\")) {\r\n        switch (key) {\r\n            case \"pointerover\": return \"mouseover\";\r\n            case \"pointerout\": return \"mouseout\";\r\n            case \"pointerleave\": return \"mouseleave\";\r\n            case \"pointerdown\": return \"mousedown\";\r\n            case \"pointermove\": return \"mousemove\";\r\n            case \"pointerup\": return \"mouseup\";\r\n            case \"click\": return \"click\";\r\n            case \"dblclick\": return \"dblclick\";\r\n        }\r\n    }\r\n    return key;\r\n}\r\n/**\r\n * Determines if pointer event originated from a touch pointer or mouse.\r\n *\r\n * @param ev  Original event\r\n * @return Touch pointer?\r\n */\r\nexport function isTouchEvent(ev) {\r\n    if (typeof Touch !== \"undefined\" && ev instanceof Touch) {\r\n        return true;\r\n    }\r\n    else if (typeof PointerEvent !== \"undefined\" && ev instanceof PointerEvent && ev.pointerType != null) {\r\n        switch (ev.pointerType) {\r\n            case \"touch\":\r\n            case \"pen\":\r\n            case 2:\r\n                return true;\r\n            case \"mouse\":\r\n            case 4:\r\n                return false;\r\n            default:\r\n                return !(ev instanceof MouseEvent);\r\n        }\r\n    }\r\n    else if (ev.type != null) {\r\n        if (ev.type.match(/^mouse/)) {\r\n            return false;\r\n        }\r\n    }\r\n    return true;\r\n}\r\n/**\r\n * Sets style property on DOM element.\r\n *\r\n * @ignore Exclude from docs\r\n */\r\nexport function setStyle(dom, property, value) {\r\n    dom.style[property] = value;\r\n}\r\nexport function getStyle(dom, property) {\r\n    return dom.style[property];\r\n}\r\n/**\r\n * Gets the target of the event, works for shadow DOM too.\r\n */\r\nexport function getEventTarget(event) {\r\n    if (event.composedPath) {\r\n        const path = event.composedPath();\r\n        if (path.length === 0) {\r\n            return null;\r\n        }\r\n        else {\r\n            return path[0];\r\n        }\r\n    }\r\n    else {\r\n        return event.target;\r\n    }\r\n}\r\n/**\r\n * Checks of element `a` contains element `b`.\r\n *\r\n * @param a  Aleged ascendant\r\n * @param b  Aleged descendant\r\n * @return Contains?\r\n */\r\nexport function contains(a, b) {\r\n    let cursor = b;\r\n    while (true) {\r\n        if (a === cursor) {\r\n            return true;\r\n        }\r\n        else if (cursor.parentNode === null) {\r\n            // TODO better ShadowRoot detection\r\n            if (cursor.host == null) {\r\n                return false;\r\n            }\r\n            else {\r\n                cursor = cursor.host;\r\n            }\r\n        }\r\n        else {\r\n            cursor = cursor.parentNode;\r\n        }\r\n    }\r\n}\r\n/**\r\n * Returns `true` if pointer event originated on an element within Root.\r\n *\r\n * @since 5.2.8\r\n * @param  event   Event\r\n * @param  target  Target element\r\n */\r\nexport function isLocalEvent(event, target) {\r\n    return event.target && contains(target.root.dom, event.target);\r\n}\r\n/**\r\n * Disables or enables interactivity of a DOM element.\r\n *\r\n * @param  target       Target element\r\n * @param  interactive  Interactive?\r\n */\r\nexport function setInteractive(target, interactive) {\r\n    if (interactive) {\r\n        target.style.pointerEvents = \"auto\";\r\n    }\r\n    else {\r\n        target.style.pointerEvents = \"none\";\r\n    }\r\n}\r\nexport function getEventKey(event) {\r\n    if (event.key !== undefined) {\r\n        return event.key;\r\n    }\r\n    switch (event.keyCode) {\r\n        case 9: return \"Tab\";\r\n        case 13: return \"Enter\";\r\n        case 16: return \"Shift\";\r\n        case 17: return \"Control\";\r\n        case 27: return \"Escape\";\r\n        case 32: return \" \";\r\n        case 37: return \"ArrowLeft\";\r\n        case 38: return \"ArrowUp\";\r\n        case 39: return \"ArrowRight\";\r\n        case 40: return \"ArrowDown\";\r\n        case 46: return \"Delete\";\r\n    }\r\n    return \"\" + event.keyCode;\r\n}\r\n/**\r\n * Returns the shadow root of the element or null\r\n *\r\n * @param a  Node\r\n * @return Root\r\n */\r\nexport function getShadowRoot(a) {\r\n    let cursor = a;\r\n    while (true) {\r\n        if (cursor.parentNode === null) {\r\n            // TODO better ShadowRoot detection\r\n            if (cursor.host != null) {\r\n                return cursor;\r\n            }\r\n            else {\r\n                return null;\r\n            }\r\n        }\r\n        else {\r\n            cursor = cursor.parentNode;\r\n        }\r\n    }\r\n}\r\n/**\r\n * [rootStylesheet description]\r\n *\r\n * @ignore Exclude from docs\r\n * @todo Description\r\n */\r\nlet rootStylesheet;\r\n/**\r\n * @ignore Exclude from docs\r\n */\r\nfunction createStylesheet(element, text, nonce = \"\") {\r\n    // TODO use createElementNS ?\r\n    const e = document.createElement(\"style\");\r\n    e.type = \"text/css\";\r\n    if (nonce != \"\") {\r\n        e.setAttribute(\"nonce\", nonce);\r\n    }\r\n    e.textContent = text;\r\n    if (element === null) {\r\n        document.head.appendChild(e);\r\n    }\r\n    else {\r\n        element.appendChild(e);\r\n    }\r\n    return e;\r\n}\r\n/**\r\n * [getStylesheet description]\r\n *\r\n * @ignore Exclude from docs\r\n * @todo Description\r\n * @return [description]\r\n */\r\nfunction getStylesheet(element, nonce = \"\") {\r\n    if (element === null) {\r\n        if (rootStylesheet == null) {\r\n            // TODO use createElementNS ?\r\n            const e = document.createElement(\"style\");\r\n            e.type = \"text/css\";\r\n            if (nonce != \"\") {\r\n                e.setAttribute(\"nonce\", nonce);\r\n            }\r\n            document.head.appendChild(e);\r\n            rootStylesheet = e.sheet;\r\n        }\r\n        return rootStylesheet;\r\n    }\r\n    else {\r\n        // TODO use createElementNS ?\r\n        const e = document.createElement(\"style\");\r\n        e.type = \"text/css\";\r\n        if (nonce != \"\") {\r\n            e.setAttribute(\"nonce\", nonce);\r\n        }\r\n        element.appendChild(e);\r\n        return e.sheet;\r\n    }\r\n}\r\n/**\r\n * [makeStylesheet description]\r\n *\r\n * @ignore Exclude from docs\r\n * @todo Description\r\n * @param selector  [description]\r\n * @return [description]\r\n */\r\nfunction appendStylesheet(root, selector) {\r\n    const index = root.cssRules.length;\r\n    root.insertRule(selector + \"{}\", index);\r\n    return root.cssRules[index];\r\n}\r\n/**\r\n * Defines a class for a CSS rule.\r\n *\r\n * Can be used to dynamically add CSS to the document.\r\n */\r\nexport class StyleRule extends DisposerClass {\r\n    /**\r\n     * Constructor.\r\n     *\r\n     * @param selector  CSS selector\r\n     * @param styles    An object of style attribute - value pairs\r\n     */\r\n    constructor(element, selector, styles, nonce = \"\") {\r\n        super();\r\n        Object.defineProperty(this, \"_root\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        /**\r\n         * CSS rule.\r\n         */\r\n        Object.defineProperty(this, \"_rule\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        this._root = getStylesheet(element, nonce);\r\n        try {\r\n            this._rule = appendStylesheet(this._root, selector);\r\n        }\r\n        catch (err) {\r\n            // Create an empty rule on failed selectors\r\n            this._rule = appendStylesheet(this._root, \":not(*)\");\r\n        }\r\n        $object.each(styles, (key, value) => {\r\n            this.setStyle(key, value);\r\n        });\r\n    }\r\n    /**\r\n     * A CSS selector text.\r\n     *\r\n     * E.g.: `.myClass p`\r\n     *\r\n     * @param selector  CSS selector\r\n     */\r\n    set selector(selector) {\r\n        this._rule.selectorText = selector;\r\n    }\r\n    /**\r\n     * @return CSS selector\r\n     */\r\n    get selector() {\r\n        return this._rule.selectorText;\r\n    }\r\n    // TODO test this\r\n    _dispose() {\r\n        // TODO a bit hacky\r\n        const index = $array.indexOf(this._root.cssRules, this._rule);\r\n        if (index === -1) {\r\n            throw new Error(\"Could not dispose StyleRule\");\r\n        }\r\n        else {\r\n            // TODO if it's empty remove it from the DOM ?\r\n            this._root.deleteRule(index);\r\n        }\r\n    }\r\n    /**\r\n     * Sets the same style properties with browser-specific prefixes.\r\n     *\r\n     * @param name   Attribute name\r\n     * @param value  Attribute value\r\n     */\r\n    _setVendorPrefixName(name, value) {\r\n        const style = this._rule.style;\r\n        style.setProperty(\"-webkit-\" + name, value, \"\");\r\n        style.setProperty(\"-moz-\" + name, value, \"\");\r\n        style.setProperty(\"-ms-\" + name, value, \"\");\r\n        style.setProperty(\"-o-\" + name, value, \"\");\r\n        style.setProperty(name, value, \"\");\r\n    }\r\n    /**\r\n     * Sets a value for specific style attribute.\r\n     *\r\n     * @param name   Attribute\r\n     * @param value  Value\r\n     */\r\n    setStyle(name, value) {\r\n        if (name === \"transition\") {\r\n            this._setVendorPrefixName(name, value);\r\n        }\r\n        else {\r\n            this._rule.style.setProperty(name, value, \"\");\r\n        }\r\n    }\r\n}\r\n/**\r\n * Defines a class for an entire CSS style sheet.\r\n *\r\n * Can be used to dynamically add CSS to the document.\r\n */\r\nexport class StyleSheet extends DisposerClass {\r\n    /**\r\n     * Constructor.\r\n     *\r\n     * @param text  CSS stylesheet\r\n     */\r\n    constructor(element, text, nonce = \"\") {\r\n        super();\r\n        Object.defineProperty(this, \"_element\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        this._element = createStylesheet(element, text, nonce);\r\n    }\r\n    _dispose() {\r\n        if (this._element.parentNode) {\r\n            this._element.parentNode.removeChild(this._element);\r\n        }\r\n    }\r\n}\r\n/**\r\n * Adds a class name to an HTML or SVG element.\r\n *\r\n * @ignore Exclude from docs\r\n * @param element    Element\r\n * @param className  Class name to add\r\n */\r\nexport function addClass(element, className) {\r\n    if (!element) {\r\n        return;\r\n    }\r\n    if (element.classList) {\r\n        const classes = className.split(\" \");\r\n        $array.each(classes, (name) => {\r\n            element.classList.add(name);\r\n        });\r\n    }\r\n    else {\r\n        let currentClassName = element.getAttribute(\"class\");\r\n        if (currentClassName) {\r\n            element.setAttribute(\"class\", currentClassName.split(\" \").filter((item) => {\r\n                return item !== className;\r\n            }).join(\" \") + \" \" + className);\r\n        }\r\n        else {\r\n            element.setAttribute(\"class\", className);\r\n        }\r\n    }\r\n}\r\n/**\r\n * Removes a class name from an HTML or SVG element.\r\n *\r\n * @ignore Exclude from docs\r\n * @param element    Element\r\n * @param className  Class name to add\r\n */\r\nexport function removeClass(element, className) {\r\n    if (!element) {\r\n        return;\r\n    }\r\n    if (element.classList) {\r\n        element.classList.remove(className);\r\n    }\r\n    else {\r\n        let currentClassName = element.getAttribute(\"class\");\r\n        if (currentClassName) {\r\n            element.setAttribute(\"class\", currentClassName.split(\" \").filter((item) => {\r\n                return item !== className;\r\n            }).join(\" \"));\r\n        }\r\n    }\r\n}\r\n// /**\r\n//  * Applies a set of styles to an element. Stores the original styles so they\r\n//  * can be restored later.\r\n//  *\r\n//  * @ignore\r\n//  * @param io      Element\r\n//   */\r\n// export function prepElementForDrag(dom: HTMLElement): void {\r\n// \t// @todo: save current values\r\n// \t// Define possible props\r\n// \tlet props = [\r\n// \t\t\"touchAction\", \"webkitTouchAction\", \"MozTouchAction\", \"MSTouchAction\", \"msTouchAction\", \"oTouchAction\",\r\n// \t\t\"userSelect\", \"webkitUserSelect\", \"MozUserSelect\", \"MSUserSelect\", \"msUserSelect\", \"oUserSelect\",\r\n// \t\t\"touchSelect\", \"webkitTouchSelect\", \"MozTouchSelect\", \"MSTouchSelect\", \"msTouchSelect\", \"oTouchSelect\",\r\n// \t\t\"touchCallout\", \"webkitTouchCallout\", \"MozTouchCallout\", \"MSTouchCallout\", \"msTouchCallout\", \"oTouchCallout\",\r\n// \t\t\"contentZooming\", \"webkitContentZooming\", \"MozContentZooming\", \"MSContentZooming\", \"msContentZooming\", \"oContentZooming\",\r\n// \t\t\"userDrag\", \"webkitUserDrag\", \"MozUserDrag\", \"MSUserDrag\", \"msUserDrag\", \"oUserDrag\"\r\n// \t];\r\n// \tfor (let i = 0; i < props.length; i++) {\r\n// \t\tif (props[i] in dom.style) {\r\n// \t\t\tsetStyle(dom, props[i], \"none\");\r\n// \t\t}\r\n// \t}\r\n// \t// Remove iOS-specific selection;\r\n// \tsetStyle(dom, \"tapHighlightColor\", \"rgba(0, 0, 0, 0)\");\r\n// }\r\n// /**\r\n//  * Restores replaced styles\r\n//  *\r\n//  * @ignore\r\n//  * @param  io  Element\r\n//  */\r\n// export function unprepElementForDrag(dom: HTMLElement): void {\r\n// \t// Define possible props\r\n// \tlet props = [\r\n// \t\t\"touchAction\", \"webkitTouchAction\", \"MozTouchAction\", \"MSTouchAction\", \"msTouchAction\", \"oTouchAction\",\r\n// \t\t\"userSelect\", \"webkitUserSelect\", \"MozUserSelect\", \"MSUserSelect\", \"msUserSelect\", \"oUserSelect\",\r\n// \t\t\"touchSelect\", \"webkitTouchSelect\", \"MozTouchSelect\", \"MSTouchSelect\", \"msTouchSelect\", \"oTouchSelect\",\r\n// \t\t\"touchCallout\", \"webkitTouchCallout\", \"MozTouchCallout\", \"MSTouchCallout\", \"msTouchCallout\", \"oTouchCallout\",\r\n// \t\t\"contentZooming\", \"webkitContentZooming\", \"MozContentZooming\", \"MSContentZooming\", \"msContentZooming\", \"oContentZooming\",\r\n// \t\t\"userDrag\", \"webkitUserDrag\", \"MozUserDrag\", \"MSUserDrag\", \"msUserDrag\", \"oUserDrag\"\r\n// \t];\r\n// \tfor (let i = 0; i < props.length; i++) {\r\n// \t\tif (props[i] in dom.style) {\r\n// \t\t\tsetStyle(dom, props[i], \"\");\r\n// \t\t}\r\n// \t}\r\n// \t// Remove iOS-specific selection;\r\n// \tsetStyle(dom, \"tapHighlightColor\", \"\");\r\n// }\r\nexport function iOS() {\r\n    return /apple/i.test(navigator.vendor) && \"ontouchend\" in document;\r\n}\r\nexport function getSafeResolution() {\r\n    return iOS() ? 1 : undefined;\r\n}\r\nexport function relativeToValue(percent, full) {\r\n    if ($type.isNumber(percent)) {\r\n        return percent;\r\n    }\r\n    else if (percent != null && $type.isNumber(percent.value) && $type.isNumber(full)) {\r\n        return full * percent.value;\r\n    }\r\n    else {\r\n        return 0;\r\n    }\r\n}\r\n/**\r\n * Returns number of decimals\r\n *\r\n * @ignore Exclude from docs\r\n * @param number  Input number\r\n * @return Number of decimals\r\n */\r\nexport function decimalPlaces(number) {\r\n    let match = ('' + number).match(/(?:\\.(\\d+))?(?:[eE]([+-]?\\d+))?$/);\r\n    if (!match) {\r\n        return 0;\r\n    }\r\n    return Math.max(0, (match[1] ? match[1].length : 0) - (match[2] ? +match[2] : 0));\r\n}\r\n/**\r\n * ============================================================================\r\n * STRING FORMATTING FUNCTIONS\r\n * ============================================================================\r\n * @hidden\r\n */\r\n/**\r\n * Pads a string with additional characters to certain length.\r\n *\r\n * @param value  A numeric value\r\n * @param len    Result string length in characters\r\n * @param char   A character to use for padding\r\n * @return Padded value as string\r\n */\r\nexport function padString(value, len = 0, char = \"0\") {\r\n    if (typeof value !== \"string\") {\r\n        value = value.toString();\r\n    }\r\n    return len > value.length ? Array(len - value.length + 1).join(char) + value : value;\r\n}\r\nexport function trimLeft(text) {\r\n    return text.replace(/^[\\s]*/, \"\");\r\n}\r\nexport function trimRight(text) {\r\n    return text.replace(/[\\s]*$/, \"\");\r\n}\r\nexport function trim(text) {\r\n    return trimLeft(trimRight(text));\r\n}\r\nexport function truncateTextWithEllipsis(text, maxLength, breakWords = false, ellipsis = \"...\") {\r\n    if (text.length > maxLength) {\r\n        // Find the last non-alphanumeric character before maxLength\r\n        let lastNonAlphanumericIndex = maxLength - 1;\r\n        while (lastNonAlphanumericIndex >= 0 && text.charAt(lastNonAlphanumericIndex).match(/\\w/)) {\r\n            lastNonAlphanumericIndex--;\r\n        }\r\n        if (lastNonAlphanumericIndex >= 0 && breakWords == false) {\r\n            return text.substring(0, lastNonAlphanumericIndex + 1) + '...';\r\n        }\r\n        else {\r\n            // If no non-alphanumeric character found, truncate without breaking words\r\n            return text.substring(0, maxLength) + ellipsis;\r\n        }\r\n    }\r\n    else {\r\n        return text;\r\n    }\r\n}\r\n/**\r\n * Tries to determine format type.\r\n *\r\n * @ignore Exclude from docs\r\n * @param format  Format string\r\n * @return Format type (\"string\" | \"number\" | \"date\" | \"duration\")\r\n */\r\nexport function getFormat(format) {\r\n    // Undefined?\r\n    if (typeof format === \"undefined\") {\r\n        return \"string\";\r\n    }\r\n    // Cleanup and lowercase format\r\n    format = format.toLowerCase().replace(/^\\[[^\\]]*\\]/, \"\");\r\n    // Remove style tags\r\n    format = format.replace(/\\[[^\\]]+\\]/, \"\");\r\n    // Trim\r\n    format = format.trim();\r\n    // Check for any explicit format hints (i.e. /Date)\r\n    let hints = format.match(/\\/(date|number|duration)$/);\r\n    if (hints) {\r\n        return hints[1];\r\n    }\r\n    // Check for explicit hints\r\n    if (format === \"number\") {\r\n        return \"number\";\r\n    }\r\n    if (format === \"date\") {\r\n        return \"date\";\r\n    }\r\n    if (format === \"duration\") {\r\n        return \"duration\";\r\n    }\r\n    // Detect number formatting symbols\r\n    if (format.match(/[#0]/)) {\r\n        return \"number\";\r\n    }\r\n    // Detect date formatting symbols\r\n    if (format.match(/[ymwdhnsqaxkzgtei]/)) {\r\n        return \"date\";\r\n    }\r\n    // Nothing? Let's display as string\r\n    return \"string\";\r\n}\r\n/**\r\n * Cleans up format:\r\n * * Strips out formatter hints\r\n *\r\n * @ignore Exclude from docs\r\n * @param format  Format\r\n * @return Cleaned format\r\n */\r\nexport function cleanFormat(format) {\r\n    return format.replace(/\\/(date|number|duration)$/i, \"\");\r\n}\r\n/**\r\n * Strips all tags from the string.\r\n *\r\n * @param text  Source string\r\n * @return String without tags\r\n */\r\nexport function stripTags(text) {\r\n    return text ? text.replace(/<[^>]*>/g, \"\") : text;\r\n}\r\n/**\r\n * Removes new lines and tags from a string.\r\n *\r\n * @param text  String to conver\r\n * @return Converted string\r\n */\r\nexport function plainText(text) {\r\n    return text ? stripTags((\"\" + text).replace(/[\\n\\r]+/g, \". \")) : text;\r\n}\r\n/**\r\n * Escapes string so it can safely be used in a Regex.\r\n *\r\n * @param value  Unsescaped string\r\n * @return Escaped string\r\n */\r\nexport function escapeForRgex(value) {\r\n    return value.replace(/[-[\\]{}()*+?.,\\\\^$|#\\s]/g, '\\\\$&');\r\n}\r\n/**\r\n * Adds space before each uppercase letter.\r\n *\r\n * @param   str Input string\r\n * @return      Output string\r\n */\r\nexport function addSpacing(str) {\r\n    let result = \"\";\r\n    for (let i = 0; i < str.length; i++) {\r\n        const char = str.charAt(i);\r\n        if (char.toUpperCase() == char && i != 0) {\r\n            result += \" \";\r\n        }\r\n        result += char;\r\n    }\r\n    return result;\r\n}\r\n/**\r\n * Splits the string into separate characters. Keeps RTL words non-split.\r\n *\r\n * @param   source  Input\r\n * @return          Split text\r\n */\r\nexport function splitString(source) {\r\n    // Regular expression to identify RTL characters\r\n    const rtlChar = /[\\u0590-\\u05FF\\u0600-\\u06FF\\u0750-\\u077F\\u08A0-\\u08FF\\uFB50-\\uFDFF\\uFE70-\\uFEFF]/;\r\n    // Regular expression to capture segments ending with specific Arabic characters\r\n    const splitPattern = /([^]*[])/gi;\r\n    // Split input string into array of words or characters, including whitespace\r\n    let segments = source.split(/(\\s+)/); // Split by whitespace, capturing it\r\n    let result = [];\r\n    segments.forEach(segment => {\r\n        if (segment.match(/^\\s+$/)) {\r\n            // If the segment is purely whitespace\r\n            if (segment = \" \") {\r\n                segment = \"  \";\r\n            }\r\n            result.push(segment);\r\n        }\r\n        else if (rtlChar.test(segment)) {\r\n            // If the segment contains RTL characters, handle special splits\r\n            let parts = segment.split(splitPattern).filter(part => part !== '');\r\n            // Concatenate parts processed by the split pattern directly to result\r\n            result = result.concat(parts);\r\n        }\r\n        else {\r\n            // Treat this segment as LTR: split into characters\r\n            result = result.concat([...segment]);\r\n        }\r\n    });\r\n    return result;\r\n}\r\n/**\r\n * ============================================================================\r\n * DATE-RELATED FUNCTIONS\r\n * ============================================================================\r\n * @hidden\r\n */\r\n/**\r\n * Returns a year day.\r\n *\r\n * @param date  Date\r\n * @param utc   Assume UTC dates?\r\n * @return Year day\r\n * @todo Account for UTC\r\n */\r\nexport function getYearDay(date, utc = false) {\r\n    // TODO: utc needed?\r\n    utc;\r\n    const start = new Date(date.getFullYear(), 0, 0);\r\n    const diff = (date.getTime() - start.getTime()) + ((start.getTimezoneOffset() - date.getTimezoneOffset()) * 60 * 1000);\r\n    const oneDay = 1000 * 60 * 60 * 24;\r\n    return Math.floor(diff / oneDay);\r\n}\r\n/**\r\n * Returns week number for a given date.\r\n *\r\n * @param date  Date\r\n * @param utc   Assume UTC dates?\r\n * @return Week number\r\n * @todo Account for UTC\r\n */\r\nexport function getWeek(date, _utc = false) {\r\n    const d = new Date(Date.UTC(date.getFullYear(), date.getMonth(), date.getDate()));\r\n    const day = d.getUTCDay() || 7;\r\n    d.setUTCDate(d.getUTCDate() + 4 - day);\r\n    const firstDay = new Date(Date.UTC(d.getUTCFullYear(), 0, 1));\r\n    return Math.ceil((((d.getTime() - firstDay.getTime()) / 86400000) + 1) / 7);\r\n}\r\n/**\r\n * Returns a \"week year\" of the given date.\r\n *\r\n * @param date  Date\r\n * @param utc   Assume UTC dates?\r\n * @return Year of week\r\n * @since 5.3.0\r\n * @todo Account for UTC\r\n */\r\nexport function getWeekYear(date, _utc = false) {\r\n    const d = new Date(Date.UTC(date.getFullYear(), date.getMonth(), date.getDate()));\r\n    const day = d.getUTCDay() || 7;\r\n    d.setUTCDate(d.getUTCDate() + 4 - day);\r\n    const firstDay = new Date(Date.UTC(d.getUTCFullYear(), 0, 1));\r\n    return firstDay.getFullYear();\r\n}\r\n/**\r\n * Returns a week number in the month.\r\n *\r\n * @param date  Source Date\r\n * @param utc   Assume UTC dates?\r\n * @return Week number in month\r\n */\r\nexport function getMonthWeek(date, utc = false) {\r\n    const firstWeek = getWeek(new Date(date.getFullYear(), date.getMonth(), 1), utc);\r\n    let currentWeek = getWeek(date, utc);\r\n    if (currentWeek == 1) {\r\n        currentWeek = 53;\r\n    }\r\n    return currentWeek - firstWeek + 1;\r\n}\r\n/**\r\n * Returns a year day out of the given week number.\r\n *\r\n * @param week     Week\r\n * @param year     Year\r\n * @param weekday  Weekday\r\n * @param utc      Assume UTC dates\r\n * @return Day in a year\r\n */\r\nexport function getDayFromWeek(week, year, weekday = 1, utc = false) {\r\n    let date = new Date(year, 0, 4, 0, 0, 0, 0);\r\n    if (utc) {\r\n        date.setUTCFullYear(year);\r\n    }\r\n    let day = week * 7 + weekday - ((date.getDay() || 7) + 3);\r\n    return day;\r\n}\r\n/**\r\n * Returns 12-hour representation out of the 24-hour hours.\r\n *\r\n * @param hours  24-hour number\r\n * @return 12-hour number\r\n */\r\nexport function get12Hours(hours, base) {\r\n    if (hours > 12) {\r\n        hours -= 12;\r\n    }\r\n    else if (hours === 0) {\r\n        hours = 12;\r\n    }\r\n    return base != null ? hours + (base - 1) : hours;\r\n}\r\n/**\r\n * Returns a string name of the time zone.\r\n *\r\n * @param date     Date object\r\n * @param long     Should return long (\"Pacific Standard Time\") or short abbreviation (\"PST\")\r\n * @param savings  Include information if it's in daylight savings mode\r\n * @param utc      Assume UTC dates\r\n * @return Time zone name\r\n */\r\nexport function getTimeZone(date, long = false, savings = false, utc = false, timezone) {\r\n    if (utc) {\r\n        return long ? \"Coordinated Universal Time\" : \"UTC\";\r\n    }\r\n    else if (timezone) {\r\n        const d1 = date.toLocaleString(\"en-US\", { timeZone: timezone });\r\n        const d2 = date.toLocaleString(\"en-US\", { timeZone: timezone, timeZoneName: long ? \"long\" : \"short\" });\r\n        return trim(d2.substr(d1.length));\r\n    }\r\n    let wotz = date.toLocaleString(\"UTC\");\r\n    let wtz = date.toLocaleString(\"UTC\", { timeZoneName: long ? \"long\" : \"short\" }).substr(wotz.length);\r\n    //wtz = wtz.replace(/[+-]+[0-9]+$/, \"\");\r\n    if (savings === false) {\r\n        wtz = wtz.replace(/ (standard|daylight|summer|winter) /i, \" \");\r\n    }\r\n    return trim(wtz);\r\n}\r\nexport function getTimezoneOffset(timezone) {\r\n    const date = new Date(Date.UTC(2012, 0, 1, 0, 0, 0, 0));\r\n    const utcDate = new Date(date.toLocaleString(\"en-US\", { timeZone: \"UTC\" }));\r\n    const tzDate = new Date(date.toLocaleString(\"en-US\", { timeZone: timezone }));\r\n    return (tzDate.getTime() - utcDate.getTime()) / 6e4 * -1;\r\n}\r\nexport function capitalizeFirst(text) {\r\n    return text.charAt(0).toUpperCase() + text.slice(1);\r\n}\r\n/**\r\n * The functions below are taken and adapted from Garry Tan's blog post:\r\n * http://axonflux.com/handy-rgb-to-hsl-and-rgb-to-hsv-color-model-c\r\n *\r\n * The further attributions go mjijackson.com, which now seems to be defunct.\r\n */\r\n/**\r\n * Converts an HSL color value to RGB. Conversion formula\r\n * adapted from http://en.wikipedia.org/wiki/HSL_color_space.\r\n * Assumes h, s, and l are contained in the set [0, 1] and\r\n * returns r, g, and b in the set [0, 255].\r\n *\r\n * Function adapted from:\r\n * http://axonflux.com/handy-rgb-to-hsl-and-rgb-to-hsv-color-model-c\r\n *\r\n * @param h       The hue\r\n * @param s       The saturation\r\n * @param l       The lightness\r\n * @return The RGB representation\r\n */\r\nexport function hslToRgb(color) {\r\n    let r, g, b;\r\n    let h = color.h;\r\n    let s = color.s;\r\n    let l = color.l;\r\n    if (s == 0) {\r\n        r = g = b = l; // achromatic\r\n    }\r\n    else {\r\n        let hue2rgb = function hue2rgb(p, q, t) {\r\n            if (t < 0) {\r\n                t += 1;\r\n            }\r\n            if (t > 1) {\r\n                t -= 1;\r\n            }\r\n            if (t < 1 / 6) {\r\n                return p + (q - p) * 6 * t;\r\n            }\r\n            if (t < 1 / 2) {\r\n                return q;\r\n            }\r\n            if (t < 2 / 3) {\r\n                return p + (q - p) * (2 / 3 - t) * 6;\r\n            }\r\n            return p;\r\n        };\r\n        let q = l < 0.5 ? l * (1 + s) : l + s - l * s;\r\n        let p = 2 * l - q;\r\n        r = hue2rgb(p, q, h + 1 / 3);\r\n        g = hue2rgb(p, q, h);\r\n        b = hue2rgb(p, q, h - 1 / 3);\r\n    }\r\n    return {\r\n        r: Math.round(r * 255),\r\n        g: Math.round(g * 255),\r\n        b: Math.round(b * 255)\r\n    };\r\n}\r\n/**\r\n * Converts an RGB color value to HSL. Conversion formula\r\n * adapted from http://en.wikipedia.org/wiki/HSL_color_space.\r\n * Assumes r, g, and b are contained in the set [0, 255] and\r\n * returns h, s, and l in the set [0, 1].\r\n *\r\n * Function adapted from:\r\n * http://axonflux.com/handy-rgb-to-hsl-and-rgb-to-hsv-color-model-c\r\n *\r\n * @param r       The red color value\r\n * @param g       The green color value\r\n * @param b       The blue color value\r\n * @return The HSL representation\r\n */\r\nexport function rgbToHsl(color) {\r\n    let r = color.r / 255;\r\n    let g = color.g / 255;\r\n    let b = color.b / 255;\r\n    let max = Math.max(r, g, b);\r\n    let min = Math.min(r, g, b);\r\n    let h = 0;\r\n    let s = 0;\r\n    let l = (max + min) / 2;\r\n    if (max === min) {\r\n        h = s = 0; // achromatic\r\n    }\r\n    else {\r\n        let d = max - min;\r\n        s = l > 0.5 ? d / (2 - max - min) : d / (max + min);\r\n        switch (max) {\r\n            case r:\r\n                h = (g - b) / d + (g < b ? 6 : 0);\r\n                break;\r\n            case g:\r\n                h = (b - r) / d + 2;\r\n                break;\r\n            case b:\r\n                h = (r - g) / d + 4;\r\n                break;\r\n        }\r\n        h /= 6;\r\n    }\r\n    return {\r\n        h: h,\r\n        s: s,\r\n        l: l,\r\n    };\r\n}\r\n/**\r\n * Converts HSV to HSL.\r\n *\r\n * https://en.wikipedia.org/wiki/HSL_and_HSV#HSV_to_HSL\r\n */\r\nexport function hsvToHsl(hsv) {\r\n    const l = hsv.v * (1 - (hsv.s / 2));\r\n    const s = (l === 0 || l === 1\r\n        ? 0\r\n        : (hsv.v - l) / Math.min(l, 1 - l));\r\n    return {\r\n        h: hsv.h,\r\n        s,\r\n        l,\r\n        a: hsv.a,\r\n    };\r\n}\r\n/**\r\n * Converts HSL to HSV.\r\n *\r\n * https://en.wikipedia.org/wiki/HSL_and_HSV#HSL_to_HSV\r\n */\r\nexport function hslToHsv(hsl) {\r\n    const v = hsl.l + (hsl.s * Math.min(hsl.l, 1 - hsl.l));\r\n    const s = (v === 0\r\n        ? 0\r\n        : 2 * (1 - (hsl.l / v)));\r\n    return {\r\n        h: hsl.h,\r\n        s,\r\n        v,\r\n        a: hsl.a,\r\n    };\r\n}\r\n/**\r\n * Returns a color that is `percent` brighter than the reference color.\r\n *\r\n * @param color    Reference color\r\n * @param percent  Brightness percent\r\n * @return Hex code of the new color\r\n */\r\nexport function lighten(rgb, percent) {\r\n    if (rgb) {\r\n        return {\r\n            r: Math.max(0, Math.min(255, rgb.r + getLightnessStep(rgb.r, percent))),\r\n            g: Math.max(0, Math.min(255, rgb.g + getLightnessStep(rgb.g, percent))),\r\n            b: Math.max(0, Math.min(255, rgb.b + getLightnessStep(rgb.b, percent))),\r\n            a: rgb.a\r\n        };\r\n    }\r\n    else {\r\n        // TODO is this correct ?\r\n        return rgb;\r\n    }\r\n}\r\n;\r\n/**\r\n * Gets lightness step.\r\n *\r\n * @param value    Value\r\n * @param percent  Percent\r\n * @return Step\r\n */\r\nexport function getLightnessStep(value, percent) {\r\n    let base = percent > 0 ? 255 - value : value;\r\n    return Math.round(base * percent);\r\n}\r\n/**\r\n * Returns a color that is `percent` brighter than the source `color`.\r\n *\r\n * @param color    Source color\r\n * @param percent  Brightness percent\r\n * @return New color\r\n */\r\nexport function brighten(rgb, percent) {\r\n    if (rgb) {\r\n        let base = Math.min(Math.max(rgb.r, rgb.g, rgb.b), 230);\r\n        //let base = Math.max(rgb.r, rgb.g, rgb.b);\r\n        let step = getLightnessStep(base, percent);\r\n        return {\r\n            r: Math.max(0, Math.min(255, Math.round(rgb.r + step))),\r\n            g: Math.max(0, Math.min(255, Math.round(rgb.g + step))),\r\n            b: Math.max(0, Math.min(255, Math.round(rgb.b + step))),\r\n            a: rgb.a\r\n        };\r\n    }\r\n    else {\r\n        // TODO is this correct ?\r\n        return rgb;\r\n    }\r\n}\r\n;\r\n/**\r\n * Returns brightness step.\r\n *\r\n * @ignore Exclude from docs\r\n * @param value    Value\r\n * @param percent  Percent\r\n * @return Step\r\n */\r\nexport function getBrightnessStep(_value, percent) {\r\n    let base = 255; //percent > 0 ? 255 - value : value;\r\n    return Math.round(base * percent);\r\n}\r\n/**\r\n * Returns `true` if color is \"light\". Useful indetermining which contrasting\r\n * color to use for elements over this color. E.g.: you would want to use\r\n * black text over light background, and vice versa.\r\n *\r\n * @param color  Source color\r\n * @return Light?\r\n */\r\nexport function isLight(color) {\r\n    return ((color.r * 299) + (color.g * 587) + (color.b * 114)) / 1000 >= 128;\r\n}\r\n/**\r\n * Returns a new [[iRGB]] object based on `rgb` parameter with specific\r\n * saturation applied.\r\n *\r\n * `saturation` can be in the range of 0 (fully desaturated) to 1 (fully\r\n * saturated).\r\n *\r\n * @param color       Base color\r\n * @param saturation  Saturation (0-1)\r\n * @return New color\r\n */\r\nexport function saturate(rgb, saturation) {\r\n    if (rgb === undefined || saturation == 1) {\r\n        return rgb;\r\n    }\r\n    let hsl = rgbToHsl(rgb);\r\n    hsl.s = saturation;\r\n    return hslToRgb(hsl);\r\n}\r\n/**\r\n * Returns a color which contrasts more with the source `color`.\r\n *\r\n * @param  color             Base color\r\n * @param  lightAlternative  Light option\r\n * @param  darkAlternative   Dark option\r\n * @return New color\r\n */\r\nexport function alternativeColor(color, lightAlternative = { r: 255, g: 255, b: 255 }, darkAlternative = { r: 255, g: 255, b: 255 }) {\r\n    let light = lightAlternative;\r\n    let dark = darkAlternative;\r\n    if (isLight(darkAlternative)) {\r\n        light = darkAlternative;\r\n        dark = lightAlternative;\r\n    }\r\n    return isLight(color) ? dark : light;\r\n}\r\n/**\r\n * @ignore\r\n */\r\nexport function mergeTags(tags1, tags2) {\r\n    if (!tags1) {\r\n        tags1 = [];\r\n    }\r\n    return [...tags1, ...tags2].filter((value, index, self) => {\r\n        return self.indexOf(value) === index;\r\n    });\r\n}\r\n/**\r\n * @ignore\r\n */\r\nexport function sameBounds(a, b) {\r\n    if (!b) {\r\n        return false;\r\n    }\r\n    if (a.left != b.left) {\r\n        return false;\r\n    }\r\n    if (a.right != b.right) {\r\n        return false;\r\n    }\r\n    if (a.top != b.top) {\r\n        return false;\r\n    }\r\n    if (a.bottom != b.bottom) {\r\n        return false;\r\n    }\r\n    return true;\r\n}\r\n//# sourceMappingURL=Utils.js.map","import { range } from \"./Animation\";\r\nimport * as $utils from \"./Utils\";\r\nimport * as $type from \"./Type\";\r\n/**\r\n * @ignore\r\n */\r\nfunction string2hex(string) {\r\n    //string = cssColorNames[string.toLowerCase()] || string;\r\n    if (string[0] === \"#\") {\r\n        string = string.substr(1);\r\n    }\r\n    if (string.length == 3) {\r\n        string = string[0].repeat(2) + string[1].repeat(2) + string[2].repeat(2);\r\n    }\r\n    return parseInt(string, 16);\r\n}\r\n/**\r\n * @ignore\r\n */\r\nexport function rgba2hex(color) {\r\n    color = color.replace(/[ ]/g, \"\");\r\n    // Init\r\n    let matches = color.match(/^rgb\\(([0-9]*),([0-9]*),([0-9]*)\\)/i);\r\n    // Try rgb() format\r\n    if (matches) {\r\n        matches.push(\"1\");\r\n    }\r\n    else {\r\n        matches = color.match(/^rgba\\(([0-9]*),([0-9]*),([0-9]*),([.0-9]*)\\)/i);\r\n        if (!matches) {\r\n            return 0x000000;\r\n        }\r\n    }\r\n    let hex = \"\";\r\n    for (let i = 1; i <= 3; i++) {\r\n        let val = parseInt(matches[i]).toString(16);\r\n        if (val.length == 1) {\r\n            val = \"0\" + val;\r\n        }\r\n        hex += val;\r\n    }\r\n    return string2hex(hex);\r\n}\r\n/**\r\n * Returns a new [[Color]] object base on input.\r\n *\r\n * Accepts parameters in CSS hex or rgb/rtba strings, or hex numbers.\r\n *\r\n * * `\"#f00\"`\r\n * * `\"#ff0000\"`\r\n * * `\"rgb(255, 0, 0)\"`\r\n * * `\"rgba(255, 0, 0, 1)\"`\r\n * * `0xff0000`\r\n *\r\n * @param   input  Input color\r\n * @return         Color\r\n */\r\nexport function color(input) {\r\n    return Color.fromAny(input);\r\n}\r\n/**\r\n * Wherever color needs to be specified in amCharts 5, `Color` object needs to\r\n * be used.\r\n *\r\n * @see {@link https://www.amcharts.com/docs/v5/concepts/colors-gradients-and-patterns/} for more info\r\n * @important\r\n */\r\nexport class Color {\r\n    constructor(hex) {\r\n        Object.defineProperty(this, \"_hex\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        this._hex = hex | 0;\r\n    }\r\n    /**\r\n     * Color numeric value.\r\n     */\r\n    get hex() {\r\n        return this._hex;\r\n    }\r\n    /**\r\n     * Value of color's R channel.\r\n     * @return R value\r\n     */\r\n    get r() {\r\n        return this._hex >>> 16;\r\n    }\r\n    /**\r\n     * Value of color's G channel.\r\n     * @return G value\r\n     */\r\n    get g() {\r\n        return (this._hex >> 8) & 0xFF;\r\n    }\r\n    /**\r\n     * Value of color's B channel.\r\n     * @return B value\r\n     */\r\n    get b() {\r\n        return this._hex & 0xFF;\r\n    }\r\n    /**\r\n     * Returns color CSS representation in form of `rgba(r, g, b, a)` string.\r\n     *\r\n     * @param   alpha  Opacity\r\n     * @return         CSS string\r\n     */\r\n    toCSS(alpha = 1) {\r\n        return \"rgba(\" + this.r + \", \" + this.g + \", \" + this.b + \", \" + alpha + \")\";\r\n    }\r\n    /**\r\n     * Returns color CSS representation in form of `#rgb` string.\r\n     *\r\n     * @return         CSS string\r\n     */\r\n    toCSSHex() {\r\n        return \"#\" + $utils.padString(this.r.toString(16), 2) + $utils.padString(this.g.toString(16), 2) + $utils.padString(this.b.toString(16), 2);\r\n    }\r\n    /**\r\n     * Returns color's HSL info.\r\n     * @param   alpha Opacity\r\n     * @return        HSL info\r\n     */\r\n    toHSL(alpha = 1) {\r\n        return $utils.rgbToHsl({\r\n            r: this.r,\r\n            g: this.g,\r\n            b: this.b,\r\n            a: alpha\r\n        });\r\n    }\r\n    /**\r\n     * Converts HSL values into a new [[Color]] object.\r\n     *\r\n     * @param   h H value\r\n     * @param   s S value\r\n     * @param   l L value\r\n     * @return    Color object\r\n     */\r\n    static fromHSL(h, s, l) {\r\n        const rgb = $utils.hslToRgb({\r\n            h: h,\r\n            s: s,\r\n            l: l\r\n        });\r\n        return this.fromRGB(rgb.r, rgb.g, rgb.b);\r\n    }\r\n    toString() {\r\n        return this.toCSSHex();\r\n    }\r\n    /**\r\n     * Converts hex number into a new [[Color]] object.\r\n     *\r\n     * ```TypeScript\r\n     * Color.fromHex(0xff0000) // red\r\n     * ```\r\n     * ```JavaScript\r\n     * Color.fromHex(0xff0000) // red\r\n     * ```\r\n     *\r\n     * @param   hex  Hex color\r\n     * @return       Color\r\n     */\r\n    static fromHex(hex) {\r\n        return new Color(hex);\r\n    }\r\n    /**\r\n     * Converts RGB values to a new [[Color]] object.\r\n     *\r\n     * @param   r  R value\r\n     * @param   g  G value\r\n     * @param   b  B value\r\n     * @return     Color\r\n     */\r\n    static fromRGB(r, g, b) {\r\n        return new Color((b | 0) + (g << 8) + (r << 16));\r\n    }\r\n    /**\r\n     * Converts RGB string to a new [[Color]] object.\r\n     *\r\n     * ```TypeScript\r\n     * Color.fromString(\"#ff0000\") // red\r\n     * ```\r\n     * ```JavaScript\r\n     * Color.fromString(\"#ff0000\") // red\r\n     * ```\r\n     *\r\n     * @param   s  RGB string\r\n     * @return     Color\r\n     */\r\n    static fromString(s) {\r\n        return new Color(string2hex(s));\r\n    }\r\n    /**\r\n     * Converts CSS rgba() syntax to a new [[Color]] object.\r\n     *\r\n     * ```TypeScript\r\n     * Color.fromCSS(\"rgba(255, 0, 0, 1)\") // red\r\n     * ```\r\n     * ```JavaScript\r\n     * Color.fromCSS(\"rgba(255, 0, 0, 1)\") // red\r\n     * ```\r\n     *\r\n     * @param  {string} s [description]\r\n     * @return {Color}    [description]\r\n     */\r\n    static fromCSS(s) {\r\n        return new Color(rgba2hex(s));\r\n    }\r\n    /**\r\n     * Convert to color from virtually anything.\r\n     *\r\n     * Will throw an exception if unable to resolve the color.\r\n     *\r\n     * @param   s  Source\r\n     * @return     Color\r\n     */\r\n    static fromAny(s) {\r\n        if ($type.isString(s)) {\r\n            if (s[0] == \"#\") {\r\n                return Color.fromString(s);\r\n            }\r\n            else if (s.substr(0, 3) == \"rgb\") {\r\n                return Color.fromCSS(s);\r\n            }\r\n        }\r\n        else if ($type.isNumber(s)) {\r\n            return Color.fromHex(s);\r\n        }\r\n        else if (s instanceof Color) {\r\n            return Color.fromHex(s.hex);\r\n        }\r\n        throw new Error(\"Unknown color syntax: \" + s);\r\n    }\r\n    /**\r\n     * Returns a new [[Color]] object based on either `lightAlternative` or\r\n     * `darkAlternative` depending on which one is more contrasting with\r\n     * the `color`.\r\n     *\r\n     * @param   color             Reference color\r\n     * @param   lightAlternative  Light color\r\n     * @param   darkAlternative   Dark color\r\n     * @return                    Alternative color\r\n     */\r\n    static alternative(color, lightAlternative, darkAlternative) {\r\n        const rgb = $utils.alternativeColor({ r: color.r, g: color.g, b: color.b }, lightAlternative ? { r: lightAlternative.r, g: lightAlternative.g, b: lightAlternative.b } : undefined, darkAlternative ? { r: darkAlternative.r, g: darkAlternative.g, b: darkAlternative.b } : undefined);\r\n        return this.fromRGB(rgb.r, rgb.g, rgb.b);\r\n    }\r\n    /**\r\n     * Returns an intermediate Color between two reference colors depending on\r\n     * the progress (`diff`) between the two.\r\n     *\r\n     * @param   diff  Progress\r\n     * @param   from  Source color\r\n     * @param   to    Target color\r\n     * @param   mode  Interpolation mode\r\n     * @return        Color\r\n     */\r\n    static interpolate(diff, from, to, mode = \"rgb\") {\r\n        if (mode == \"hsl\") {\r\n            const fromHSL = from.toHSL();\r\n            const toHSL = to.toHSL();\r\n            return Color.fromHSL(range(diff, fromHSL.h, toHSL.h), range(diff, fromHSL.s, toHSL.s), range(diff, fromHSL.l, toHSL.l));\r\n        }\r\n        else {\r\n            return Color.fromRGB(range(diff, from.r, to.r), range(diff, from.g, to.g), range(diff, from.b, to.b));\r\n        }\r\n    }\r\n    /**\r\n     * Returns a new [[Color]] lightened by `percent` value.\r\n     *\r\n     * Use negative value to darken the color.\r\n     *\r\n     * @param   color    Source color\r\n     * @param   percent  Percent\r\n     * @return           New color\r\n     */\r\n    static lighten(color, percent) {\r\n        const rgb = $utils.lighten({ r: color.r, g: color.g, b: color.b }, percent);\r\n        return Color.fromRGB(rgb.r, rgb.g, rgb.b);\r\n    }\r\n    /**\r\n     * Returns a new [[Color]] brightened by `percent` value.\r\n     *\r\n     * Use negative value to dim the color.\r\n     *\r\n     * @param   color    Source color\r\n     * @param   percent  Percent\r\n     * @return           New color\r\n     */\r\n    static brighten(color, percent) {\r\n        const rgb = $utils.brighten({ r: color.r, g: color.g, b: color.b }, percent);\r\n        return Color.fromRGB(rgb.r, rgb.g, rgb.b);\r\n    }\r\n    /**\r\n     * Returns a new [[Color]] saturated by `percent` value.\r\n     *\r\n     * Value range is between `0` (fully desaturated), to `1` (full color).\r\n     *\r\n     * @param   color    Source color\r\n     * @param   percent  Percent\r\n     * @return           New color\r\n     */\r\n    static saturate(color, percent) {\r\n        const rgb = $utils.saturate({ r: color.r, g: color.g, b: color.b }, percent);\r\n        return Color.fromRGB(rgb.r, rgb.g, rgb.b);\r\n    }\r\n}\r\n//# sourceMappingURL=Color.js.map","/**\r\n * Event Dispatcher module is used for registering listeners and dispatching\r\n * events across amCharts system.\r\n */\r\n/**\r\n * ============================================================================\r\n * IMPORTS\r\n * ============================================================================\r\n * @hidden\r\n */\r\nimport { Disposer, MultiDisposer } from \"./Disposer\";\r\nimport * as $array from \"./Array\";\r\nimport * as $type from \"./Type\";\r\n/**\r\n * Universal Event Dispatcher.\r\n *\r\n * @see {@link https://www.amcharts.com/docs/v5/concepts/events/} for more info\r\n */\r\nexport class EventDispatcher {\r\n    /**\r\n     * Constructor\r\n     */\r\n    constructor() {\r\n        Object.defineProperty(this, \"_listeners\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"_killed\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"_disabled\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"_iterating\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"_enabled\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"_disposed\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        this._listeners = [];\r\n        this._killed = [];\r\n        this._disabled = {};\r\n        this._iterating = 0;\r\n        this._enabled = true;\r\n        this._disposed = false;\r\n    }\r\n    /**\r\n     * Returns if this object has been already disposed.\r\n     *\r\n     * @return Disposed?\r\n     */\r\n    isDisposed() {\r\n        return this._disposed;\r\n    }\r\n    /**\r\n     * Dispose (destroy) this object.\r\n     */\r\n    dispose() {\r\n        if (!this._disposed) {\r\n            this._disposed = true;\r\n            const a = this._listeners;\r\n            this._iterating = 1;\r\n            this._listeners = null;\r\n            this._disabled = null;\r\n            try {\r\n                $array.each(a, (x) => {\r\n                    x.disposer.dispose();\r\n                });\r\n            }\r\n            finally {\r\n                this._killed = null;\r\n                this._iterating = null;\r\n            }\r\n        }\r\n    }\r\n    /**\r\n     * Checks if this particular event dispatcher has any listeners set.\r\n     *\r\n     * @return Has listeners?\r\n     */\r\n    hasListeners() {\r\n        return this._listeners.length !== 0;\r\n    }\r\n    /**\r\n     * Checks if this particular event dispatcher has any particular listeners set.\r\n     *\r\n     * @return Has particular event listeners?\r\n     */\r\n    hasListenersByType(type) {\r\n        return $array.any(this._listeners, (x) => (x.type === null || x.type === type) && !x.killed);\r\n    }\r\n    /**\r\n     * Enable dispatching of events if they were previously disabled by\r\n     * `disable()`.\r\n     */\r\n    enable() {\r\n        this._enabled = true;\r\n    }\r\n    /**\r\n     * Disable dispatching of events until re-enabled by `enable()`.\r\n     */\r\n    disable() {\r\n        this._enabled = false;\r\n    }\r\n    /**\r\n     * Enable dispatching particular event, if it was disabled before by\r\n     * `disableType()`.\r\n     *\r\n     * @param type Event type\r\n     */\r\n    enableType(type) {\r\n        delete this._disabled[type];\r\n    }\r\n    /**\r\n     * Disable dispatching of events for a certain event type.\r\n     *\r\n     * Optionally, can set how many dispatches to skip before automatically\r\n     * re-enabling the dispatching.\r\n     *\r\n     * @param type    Event type\r\n     * @param amount  Number of event dispatches to skip\r\n     */\r\n    disableType(type, amount = Infinity) {\r\n        this._disabled[type] = amount;\r\n    }\r\n    /**\r\n     * Removes listener from dispatcher.\r\n     *\r\n     * Will throw an exception if such listener does not exists.\r\n     *\r\n     * @param listener Listener to remove\r\n     */\r\n    _removeListener(listener) {\r\n        if (this._iterating === 0) {\r\n            const index = this._listeners.indexOf(listener);\r\n            if (index === -1) {\r\n                throw new Error(\"Invalid state: could not remove listener\");\r\n            }\r\n            this._listeners.splice(index, 1);\r\n        }\r\n        else {\r\n            this._killed.push(listener);\r\n        }\r\n    }\r\n    /**\r\n     * Removes existing listener by certain parameters.\r\n     *\r\n     * @param once         Listener's once setting\r\n     * @param type         Listener's type\r\n     * @param callback     Callback function\r\n     * @param context      Callback context\r\n     */\r\n    _removeExistingListener(once, type, callback, context) {\r\n        if (this._disposed) {\r\n            throw new Error(\"EventDispatcher is disposed\");\r\n        }\r\n        this._eachListener((info) => {\r\n            if (info.once === once && // TODO is this correct ?\r\n                info.type === type &&\r\n                (callback === undefined || info.callback === callback) &&\r\n                info.context === context) {\r\n                info.disposer.dispose();\r\n            }\r\n        });\r\n    }\r\n    /**\r\n     * Checks if dispatching for particular event type is enabled.\r\n     *\r\n     * @param type  Event type\r\n     * @return Enabled?\r\n     */\r\n    isEnabled(type) {\r\n        if (this._disposed) {\r\n            throw new Error(\"EventDispatcher is disposed\");\r\n        }\r\n        // TODO is this check correct ?\r\n        return this._enabled && this._listeners.length > 0 && this.hasListenersByType(type) && this._disabled[type] === undefined;\r\n    }\r\n    /**\r\n     * Removes all listeners of a particular event type\r\n     *\r\n     * @param type  Listener's type\r\n     */\r\n    removeType(type) {\r\n        if (this._disposed) {\r\n            throw new Error(\"EventDispatcher is disposed\");\r\n        }\r\n        this._eachListener((info) => {\r\n            if (info.type === type) {\r\n                info.disposer.dispose();\r\n            }\r\n        });\r\n    }\r\n    /**\r\n     * Checks if there's already a listener with specific parameters.\r\n     *\r\n     * @param type      Listener's type\r\n     * @param callback  Callback function\r\n     * @param context   Callback context\r\n     * @return Has listener?\r\n     */\r\n    has(type, callback, context) {\r\n        const index = $array.findIndex(this._listeners, (info) => {\r\n            return info.once !== true && // Ignoring \"once\" listeners\r\n                info.type === type &&\r\n                (callback === undefined || info.callback === callback) &&\r\n                info.context === context;\r\n        });\r\n        return index !== -1;\r\n    }\r\n    /**\r\n     * Checks whether event of the particular type should be dispatched.\r\n     *\r\n     * @param type  Event type\r\n     * @return Dispatch?\r\n     */\r\n    _shouldDispatch(type) {\r\n        if (this._disposed) {\r\n            throw new Error(\"EventDispatcher is disposed\");\r\n        }\r\n        const count = this._disabled[type];\r\n        if (!$type.isNumber(count)) {\r\n            return this._enabled;\r\n        }\r\n        else {\r\n            if (count <= 1) {\r\n                delete this._disabled[type];\r\n            }\r\n            else {\r\n                --this._disabled[type];\r\n            }\r\n            return false;\r\n        }\r\n    }\r\n    /**\r\n     * [_eachListener description]\r\n     *\r\n     * All of this extra code is needed when a listener is removed while iterating\r\n     *\r\n     * @todo Description\r\n     * @param fn [description]\r\n     */\r\n    _eachListener(fn) {\r\n        ++this._iterating;\r\n        try {\r\n            $array.each(this._listeners, fn);\r\n        }\r\n        finally {\r\n            --this._iterating;\r\n            // TODO should this be inside or outside the finally ?\r\n            if (this._iterating === 0 && this._killed.length !== 0) {\r\n                // Remove killed listeners\r\n                $array.each(this._killed, (killed) => {\r\n                    this._removeListener(killed);\r\n                });\r\n                this._killed.length = 0;\r\n            }\r\n        }\r\n    }\r\n    /**\r\n     * Dispatches an event immediately without waiting for next cycle.\r\n     *\r\n     * @param type   Event type\r\n     * @param event  Event object\r\n     * @todo automatically add in type and target properties if they are missing\r\n     */\r\n    dispatch(type, event) {\r\n        if (this._shouldDispatch(type)) {\r\n            // TODO check if it's faster to use an object of listeners rather than a single big array\r\n            // TODO if the function throws, maybe it should keep going ?\r\n            this._eachListener((listener) => {\r\n                if (!listener.killed && (listener.type === null || listener.type === type)) {\r\n                    listener.dispatch(type, event);\r\n                }\r\n            });\r\n        }\r\n    }\r\n    /**\r\n     * Shelves the event to be dispatched within next update cycle.\r\n     *\r\n     * @param type   Event type\r\n     * @param event  Event object\r\n     * @todo automatically add in type and target properties if they are missing\r\n     */\r\n    /*public dispatchLater<Key extends keyof T>(type: Key, event: T[Key]): void {\r\n        if (this._shouldDispatch(type)) {\r\n            this._eachListener((listener) => {\r\n                // TODO check if it's faster to use an object of listeners rather than a single big array\r\n                if (!listener.killed && (listener.type === null || listener.type === type)) {\r\n                    // TODO if the function throws, maybe it should keep going ?\r\n                    // TODO dispatch during the update cycle, rather than using whenIdle\r\n                    $async.whenIdle(() => {\r\n                        if (!listener.killed) {\r\n                            listener.dispatch(type, event);\r\n                        }\r\n                    });\r\n                }\r\n            });\r\n        }\r\n    }*/\r\n    /**\r\n     * Creates, catalogs and returns an [[EventListener]].\r\n     *\r\n     * Event listener can be disposed.\r\n     *\r\n     * @param once         Listener's once setting\r\n     * @param type         Listener's type\r\n     * @param callback     Callback function\r\n     * @param context      Callback context\r\n     * @param shouldClone  Whether the listener should be copied when the EventDispatcher is copied\r\n     * @param dispatch\r\n     * @returns An event listener\r\n     */\r\n    _on(once, type, callback, context, shouldClone, dispatch) {\r\n        if (this._disposed) {\r\n            throw new Error(\"EventDispatcher is disposed\");\r\n        }\r\n        this._removeExistingListener(once, type, callback, context);\r\n        const info = {\r\n            type: type,\r\n            callback: callback,\r\n            context: context,\r\n            shouldClone: shouldClone,\r\n            dispatch: dispatch,\r\n            killed: false,\r\n            once: once,\r\n            disposer: new Disposer(() => {\r\n                info.killed = true;\r\n                this._removeListener(info);\r\n            })\r\n        };\r\n        this._listeners.push(info);\r\n        return info;\r\n    }\r\n    /**\r\n     * Creates an event listener to be invoked on **any** event.\r\n     *\r\n     * @param callback     Callback function\r\n     * @param context      Callback context\r\n     * @param shouldClone  Whether the listener should be copied when the EventDispatcher is copied\r\n     * @returns A disposable event listener\r\n     */\r\n    onAll(callback, context, shouldClone = true) {\r\n        return this._on(false, null, callback, context, shouldClone, (_type, event) => callback.call(context, event)).disposer;\r\n    }\r\n    /**\r\n     * Creates an event listener to be invoked on a specific event type.\r\n     *\r\n     * ```TypeScript\r\n     * button.events.once(\"click\", (ev) => {\r\n     *   console.log(\"Button clicked\");\r\n     * }, this);\r\n     * ```\r\n     * ```JavaScript\r\n     * button.events.once(\"click\", (ev) => {\r\n     *   console.log(\"Button clicked\");\r\n     * }, this);\r\n     * ```\r\n     *\r\n     * The above will invoke our custom event handler whenever series we put\r\n     * event on is hidden.\r\n     *\r\n     * @param type         Listener's type\r\n     * @param callback     Callback function\r\n     * @param context      Callback context\r\n     * @param shouldClone  Whether the listener should be copied when the EventDispatcher is copied\r\n     * @returns A disposable event listener\r\n     */\r\n    on(type, callback, context, shouldClone = true) {\r\n        return this._on(false, type, callback, context, shouldClone, (_type, event) => callback.call(context, event)).disposer;\r\n    }\r\n    /**\r\n     * Creates an event listener to be invoked on a specific event type once.\r\n     *\r\n     * Once the event listener is invoked, it is automatically disposed.\r\n     *\r\n     * ```TypeScript\r\n     * button.events.once(\"click\", (ev) => {\r\n     *   console.log(\"Button clicked\");\r\n     * }, this);\r\n     * ```\r\n     * ```JavaScript\r\n     * button.events.once(\"click\", (ev) => {\r\n     *   console.log(\"Button clicked\");\r\n     * }, this);\r\n     * ```\r\n     *\r\n     * The above will invoke our custom event handler the first time series we\r\n     * put event on is hidden.\r\n     *\r\n     * @param type         Listener's type\r\n     * @param callback     Callback function\r\n     * @param context      Callback context\r\n     * @param shouldClone  Whether the listener should be copied when the EventDispatcher is copied\r\n     * @returns A disposable event listener\r\n     */\r\n    once(type, callback, context, shouldClone = true) {\r\n        const x = this._on(true, type, callback, context, shouldClone, (_type, event) => {\r\n            x.disposer.dispose();\r\n            callback.call(context, event);\r\n        });\r\n        // TODO maybe this should return a different Disposer ?\r\n        return x.disposer;\r\n    }\r\n    /**\r\n     * Removes the event listener with specific parameters.\r\n     *\r\n     * @param type         Listener's type\r\n     * @param callback     Callback function\r\n     * @param context      Callback context\r\n     */\r\n    off(type, callback, context) {\r\n        this._removeExistingListener(false, type, callback, context);\r\n    }\r\n    /**\r\n     * Copies all dispatcher parameters, including listeners, from another event\r\n     * dispatcher.\r\n     *\r\n     * @param source Source event dispatcher\r\n     * @ignore\r\n     */\r\n    copyFrom(source) {\r\n        if (this._disposed) {\r\n            throw new Error(\"EventDispatcher is disposed\");\r\n        }\r\n        if (source === this) {\r\n            throw new Error(\"Cannot copyFrom the same TargetedEventDispatcher\");\r\n        }\r\n        const disposers = [];\r\n        $array.each(source._listeners, (x) => {\r\n            // TODO is this correct ?\r\n            if (!x.killed && x.shouldClone) {\r\n                if (x.type === null) {\r\n                    disposers.push(this.onAll(x.callback, x.context));\r\n                }\r\n                else if (x.once) {\r\n                    disposers.push(this.once(x.type, x.callback, x.context));\r\n                }\r\n                else {\r\n                    disposers.push(this.on(x.type, x.callback, x.context));\r\n                }\r\n            }\r\n        });\r\n        return new MultiDisposer(disposers);\r\n    }\r\n}\r\n/**\r\n * A version of the [[EventDispatcher]] that dispatches events for a specific\r\n * target object.\r\n *\r\n * @ignore\r\n */\r\nexport class TargetedEventDispatcher extends EventDispatcher {\r\n    /**\r\n     * Constructor\r\n     *\r\n     * @param target Event dispatcher target\r\n     */\r\n    constructor(target) {\r\n        super();\r\n        /**\r\n         * A target object which is originating events using this dispatcher.\r\n         */\r\n        Object.defineProperty(this, \"target\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        this.target = target;\r\n    }\r\n    /**\r\n     * Copies all dispatcher parameters, including listeners, from another event\r\n     * dispatcher.\r\n     *\r\n     * @param source Source event dispatcher\r\n     * @ignore\r\n     */\r\n    copyFrom(source) {\r\n        if (this._disposed) {\r\n            throw new Error(\"EventDispatcher is disposed\");\r\n        }\r\n        if (source === this) {\r\n            throw new Error(\"Cannot copyFrom the same TargetedEventDispatcher\");\r\n        }\r\n        const disposers = [];\r\n        $array.each(source._listeners, (x) => {\r\n            // TODO very hacky\r\n            if (x.context === source.target) {\r\n                return;\r\n            }\r\n            // TODO is this correct ?\r\n            if (!x.killed && x.shouldClone) {\r\n                if (x.type === null) {\r\n                    disposers.push(this.onAll(x.callback, x.context));\r\n                }\r\n                else if (x.once) {\r\n                    disposers.push(this.once(x.type, x.callback, x.context));\r\n                }\r\n                else {\r\n                    disposers.push(this.on(x.type, x.callback, x.context));\r\n                }\r\n            }\r\n        });\r\n        return new MultiDisposer(disposers);\r\n    }\r\n}\r\n//# sourceMappingURL=EventDispatcher.js.map","import { __awaiter } from \"tslib\";\r\nimport { Percent } from \"./Percent\";\r\nimport { Color } from \"./Color\";\r\nimport { EventDispatcher } from \"./EventDispatcher\";\r\nimport * as $object from \"./Object\";\r\n/**\r\n * @ignore\r\n */\r\nexport function waitForAnimations(animations) {\r\n    return __awaiter(this, void 0, void 0, function* () {\r\n        if (animations !== undefined) {\r\n            const promises = [];\r\n            $object.each(animations, (_, animation) => {\r\n                promises.push(animation.waitForStop());\r\n            });\r\n            yield Promise.all(promises);\r\n        }\r\n    });\r\n}\r\n/**\r\n * @ignore\r\n */\r\nexport function normalize(value, min, max) {\r\n    if (min === max) {\r\n        return 0;\r\n    }\r\n    else {\r\n        return Math.min(Math.max((value - min) * (1 / (max - min)), 0), 1);\r\n    }\r\n}\r\n/**\r\n * @ignore\r\n */\r\nexport function range(diff, from, to) {\r\n    return from + (diff * (to - from));\r\n}\r\n/**\r\n * @ignore\r\n */\r\nexport function defaultInterpolate(diff, from, to) {\r\n    if (diff >= 1) {\r\n        return to;\r\n    }\r\n    else {\r\n        return from;\r\n    }\r\n}\r\n/**\r\n * @ignore\r\n */\r\nexport function percentInterpolate(diff, from, to) {\r\n    return new Percent(range(diff, from.percent, to.percent));\r\n}\r\n/**\r\n * @ignore\r\n */\r\nexport function colorInterpolate(diff, from, to) {\r\n    return Color.interpolate(diff, from, to);\r\n}\r\n/**\r\n * @ignore\r\n */\r\nexport function getInterpolate(from, to) {\r\n    if (typeof from === \"number\" && typeof to === \"number\") {\r\n        return range;\r\n    }\r\n    if (from instanceof Percent && to instanceof Percent) {\r\n        return percentInterpolate;\r\n    }\r\n    if (from instanceof Color && to instanceof Color) {\r\n        return colorInterpolate;\r\n    }\r\n    return defaultInterpolate;\r\n}\r\nexport var AnimationState;\r\n(function (AnimationState) {\r\n    AnimationState[AnimationState[\"Stopped\"] = 0] = \"Stopped\";\r\n    AnimationState[AnimationState[\"Playing\"] = 1] = \"Playing\";\r\n    AnimationState[AnimationState[\"Paused\"] = 2] = \"Paused\";\r\n})(AnimationState || (AnimationState = {}));\r\n/**\r\n * @ignore\r\n */\r\nexport class AnimationTime {\r\n    constructor(entity, duration) {\r\n        Object.defineProperty(this, \"_entity\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"_duration\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"_playingDuration\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: null\r\n        });\r\n        Object.defineProperty(this, \"_startingTime\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: null\r\n        });\r\n        Object.defineProperty(this, \"_current\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: 0\r\n        });\r\n        Object.defineProperty(this, \"_from\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: 0\r\n        });\r\n        Object.defineProperty(this, \"_to\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: 0\r\n        });\r\n        Object.defineProperty(this, \"events\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: new EventDispatcher()\r\n        });\r\n        Object.defineProperty(this, \"easing\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        this._entity = entity;\r\n        this._duration = duration;\r\n    }\r\n    _stopEvent() {\r\n        const type = \"stopped\";\r\n        if (this.events.isEnabled(type)) {\r\n            this.events.dispatch(type, { type: type, target: this });\r\n        }\r\n    }\r\n    _runAnimation(currentTime) {\r\n        if (this._playingDuration !== null) {\r\n            if (this._startingTime === null) {\r\n                this._startingTime = currentTime;\r\n                return AnimationState.Playing;\r\n            }\r\n            else {\r\n                const diff = (currentTime - this._startingTime) / this._playingDuration;\r\n                if (diff >= 1) {\r\n                    this._playingDuration = null;\r\n                    this._startingTime = null;\r\n                    this._from = this._to;\r\n                    this._current = this._to;\r\n                    this._entity.markDirty();\r\n                    this._stopEvent();\r\n                    const type = \"ended\";\r\n                    if (this.events.isEnabled(type)) {\r\n                        this.events.dispatch(type, { type: type, target: this });\r\n                    }\r\n                    return AnimationState.Stopped;\r\n                }\r\n                else {\r\n                    this._current = range(diff, this._from, this._to);\r\n                    this._entity.markDirty();\r\n                    const type = \"progress\";\r\n                    if (this.events.isEnabled(type)) {\r\n                        this.events.dispatch(type, { type: type, target: this, progress: diff });\r\n                    }\r\n                    return AnimationState.Playing;\r\n                }\r\n            }\r\n        }\r\n        else {\r\n            return AnimationState.Stopped;\r\n        }\r\n    }\r\n    _play() {\r\n        this._from = this._current;\r\n        if (this._playingDuration === null) {\r\n            this._entity._root._addAnimation(this);\r\n            const type = \"started\";\r\n            if (this.events.isEnabled(type)) {\r\n                this.events.dispatch(type, { type: type, target: this });\r\n            }\r\n        }\r\n        else {\r\n            this._startingTime = null;\r\n        }\r\n        this._playingDuration = Math.abs(this._to - this._from) * this._duration;\r\n    }\r\n    get duration() {\r\n        return this._duration;\r\n    }\r\n    set duration(value) {\r\n        if (this._duration !== value) {\r\n            this._duration = value;\r\n            if (value === 0) {\r\n                this.jumpTo(this._to);\r\n            }\r\n            else if (this._current !== this._to) {\r\n                this._play();\r\n            }\r\n        }\r\n    }\r\n    get current() {\r\n        if (this.easing) {\r\n            return this.easing(this._current);\r\n        }\r\n        else {\r\n            return this._current;\r\n        }\r\n    }\r\n    stop() {\r\n        this.jumpTo(this._current);\r\n    }\r\n    jumpTo(value) {\r\n        if (this._current !== value) {\r\n            this._entity.markDirty();\r\n        }\r\n        if (this._playingDuration !== null) {\r\n            this._stopEvent();\r\n        }\r\n        this._playingDuration = null;\r\n        this._startingTime = null;\r\n        this._current = value;\r\n        this._from = value;\r\n        this._to = value;\r\n    }\r\n    tweenTo(value) {\r\n        if (this._current === value || this._duration === 0) {\r\n            this.jumpTo(value);\r\n        }\r\n        else {\r\n            if (this._to !== value) {\r\n                this._to = value;\r\n                this._play();\r\n            }\r\n        }\r\n    }\r\n}\r\n/*export class AnimationValue extends AnimationTime {\r\n    public _min: number;\r\n    public _max: number;\r\n\r\n    constructor(entity: Entity, duration: number, min: number, max: number) {\r\n        super(entity, duration);\r\n        this._min = min;\r\n        this._max = max;\r\n    }\r\n\r\n    public get min(): number {\r\n        return this._min;\r\n    }\r\n\r\n    public set min(value: number) {\r\n        if (this._min !== value) {\r\n            this._min = value;\r\n            this._entity.markDirty();\r\n        }\r\n    }\r\n\r\n    public get max(): number {\r\n        return this._max;\r\n    }\r\n\r\n    public set max(value: number) {\r\n        if (this._max !== value) {\r\n            this._max = value;\r\n            this._entity.markDirty();\r\n        }\r\n    }\r\n\r\n    public currentValue(): number {\r\n        return range(super.currentTime(), this._min, this._max);\r\n    }\r\n\r\n    public jumpToValue(value: number) {\r\n        super.jumpToTime(normalize(value, this._min, this._max));\r\n    }\r\n\r\n    public tweenToValue(value: number) {\r\n        super.tweenToTime(normalize(value, this._min, this._max));\r\n    }\r\n}\r\n*/\r\n//# sourceMappingURL=Animation.js.map","import { EventDispatcher } from \"./EventDispatcher\";\r\nimport * as $array from \"./Array\";\r\n/**\r\n * Checks if specific index fits into length.\r\n *\r\n * @param index  Index\r\n * @param len    Length\r\n * @ignore\r\n */\r\nfunction checkBounds(index, len) {\r\n    if (!(index >= 0 && index < len)) {\r\n        throw new Error(\"Index out of bounds: \" + index);\r\n    }\r\n}\r\n/**\r\n * A List class is used to hold a number of indexed items of the same type.\r\n */\r\nexport class List {\r\n    /**\r\n     * Constructor\r\n     *\r\n     * @param initial  Inital list of values to add to list\r\n     */\r\n    constructor(initial = []) {\r\n        /**\r\n         * List values.\r\n         */\r\n        Object.defineProperty(this, \"_values\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"events\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: new EventDispatcher()\r\n        });\r\n        this._values = initial;\r\n    }\r\n    /**\r\n     * An array of values in the list.\r\n     *\r\n     * Do not use this property to add values. Rather use dedicated methods, like\r\n     * `push()`, `removeIndex()`, etc.\r\n     *\r\n     * @readonly\r\n     * @return List values\r\n     */\r\n    get values() {\r\n        return this._values;\r\n    }\r\n    /**\r\n     * Checks if list contains specific item reference.\r\n     *\r\n     * @param item  Item to search for\r\n     * @return `true` if found, `false` if not found\r\n     */\r\n    contains(value) {\r\n        return this._values.indexOf(value) !== -1;\r\n    }\r\n    /**\r\n     * Removes specific item from the list.\r\n     *\r\n     * @param item An item to remove\r\n     */\r\n    removeValue(value) {\r\n        let i = 0;\r\n        let length = this._values.length;\r\n        while (i < length) {\r\n            // TODO handle NaN\r\n            if (this._values[i] === value) {\r\n                this.removeIndex(i);\r\n                --length;\r\n            }\r\n            else {\r\n                ++i;\r\n            }\r\n        }\r\n    }\r\n    /**\r\n     * Searches the list for specific item and returns its index.\r\n     *\r\n     * @param item  An item to search for\r\n     * @return Index or -1 if not found\r\n     */\r\n    indexOf(value) {\r\n        return $array.indexOf(this._values, value);\r\n    }\r\n    /**\r\n     * Number of items in list.\r\n     *\r\n     * @readonly\r\n     * @return Number of items\r\n     */\r\n    get length() {\r\n        return this._values.length;\r\n    }\r\n    /**\r\n     * Checks if there's a value at specific index.\r\n     *\r\n     * @param index  Index\r\n     * @return Value exists?\r\n     */\r\n    hasIndex(index) {\r\n        return index >= 0 && index < this._values.length;\r\n    }\r\n    /**\r\n     * Returns an item at specified index.\r\n     *\r\n     * @param index  Index\r\n     * @return List item\r\n     */\r\n    getIndex(index) {\r\n        return this._values[index];\r\n    }\r\n    _onPush(newValue) {\r\n        if (this.events.isEnabled(\"push\")) {\r\n            this.events.dispatch(\"push\", {\r\n                type: \"push\",\r\n                target: this,\r\n                newValue\r\n            });\r\n        }\r\n    }\r\n    _onInsertIndex(index, newValue) {\r\n        if (this.events.isEnabled(\"insertIndex\")) {\r\n            this.events.dispatch(\"insertIndex\", {\r\n                type: \"insertIndex\",\r\n                target: this,\r\n                index,\r\n                newValue\r\n            });\r\n        }\r\n    }\r\n    _onSetIndex(index, oldValue, newValue) {\r\n        if (this.events.isEnabled(\"setIndex\")) {\r\n            this.events.dispatch(\"setIndex\", {\r\n                type: \"setIndex\",\r\n                target: this,\r\n                index,\r\n                oldValue,\r\n                newValue\r\n            });\r\n        }\r\n    }\r\n    _onRemoveIndex(index, oldValue) {\r\n        if (this.events.isEnabled(\"removeIndex\")) {\r\n            this.events.dispatch(\"removeIndex\", {\r\n                type: \"removeIndex\",\r\n                target: this,\r\n                index,\r\n                oldValue\r\n            });\r\n        }\r\n    }\r\n    _onMoveIndex(oldIndex, newIndex, value) {\r\n        if (this.events.isEnabled(\"moveIndex\")) {\r\n            this.events.dispatch(\"moveIndex\", {\r\n                type: \"moveIndex\",\r\n                target: this,\r\n                oldIndex,\r\n                newIndex,\r\n                value,\r\n            });\r\n        }\r\n    }\r\n    _onClear(oldValues) {\r\n        if (this.events.isEnabled(\"clear\")) {\r\n            this.events.dispatch(\"clear\", {\r\n                type: \"clear\",\r\n                target: this,\r\n                oldValues\r\n            });\r\n        }\r\n    }\r\n    /**\r\n     * Sets value at specific index.\r\n     *\r\n     * If there's already a value at the index, it is overwritten.\r\n     *\r\n     * @param index  Index\r\n     * @param value  New value\r\n     * @return New value\r\n     */\r\n    setIndex(index, value) {\r\n        checkBounds(index, this._values.length);\r\n        const oldValue = this._values[index];\r\n        // Do nothing if the old value and the new value are the same\r\n        if (oldValue !== value) {\r\n            this._values[index] = value;\r\n            this._onSetIndex(index, oldValue, value);\r\n        }\r\n        return oldValue;\r\n    }\r\n    /**\r\n     * Adds an item to the list at a specific index, which pushes all the other\r\n     * items further down the list.\r\n     *\r\n     * @param index Index\r\n     * @param item  An item to add\r\n     */\r\n    insertIndex(index, value) {\r\n        checkBounds(index, this._values.length + 1);\r\n        $array.insertIndex(this._values, index, value);\r\n        this._onInsertIndex(index, value);\r\n        return value;\r\n    }\r\n    /**\r\n     * Swaps indexes of two items in the list.\r\n     *\r\n     * @param a  Item 1\r\n     * @param b  Item 2\r\n     */\r\n    swap(a, b) {\r\n        const len = this._values.length;\r\n        checkBounds(a, len);\r\n        checkBounds(b, len);\r\n        if (a !== b) {\r\n            const value_a = this._values[a];\r\n            const value_b = this._values[b];\r\n            this._values[a] = value_b;\r\n            this._onSetIndex(a, value_a, value_b);\r\n            this._values[b] = value_a;\r\n            this._onSetIndex(b, value_b, value_a);\r\n        }\r\n    }\r\n    /**\r\n     * Removes a value at specific index.\r\n     *\r\n     * @param index  Index of value to remove\r\n     * @return Removed value\r\n     */\r\n    removeIndex(index) {\r\n        checkBounds(index, this._values.length);\r\n        const oldValue = this._values[index];\r\n        $array.removeIndex(this._values, index);\r\n        this._onRemoveIndex(index, oldValue);\r\n        return oldValue;\r\n    }\r\n    /**\r\n     * Moves an item to a specific index within the list.\r\n     *\r\n     * If the index is not specified it will move the item to the end of the\r\n     * list.\r\n     *\r\n     * @param value  Item to move\r\n     * @param index  Index to place item at\r\n     */\r\n    moveValue(value, toIndex) {\r\n        // TODO don't do anything if the desired index is the same as the current index\r\n        let index = this.indexOf(value);\r\n        // TODO remove all old values rather than only the first ?\r\n        if (index !== -1) {\r\n            $array.removeIndex(this._values, index);\r\n            if (toIndex == null) {\r\n                const toIndex = this._values.length;\r\n                this._values.push(value);\r\n                this._onMoveIndex(index, toIndex, value);\r\n            }\r\n            else {\r\n                $array.insertIndex(this._values, toIndex, value);\r\n                this._onMoveIndex(index, toIndex, value);\r\n            }\r\n        }\r\n        else if (toIndex == null) {\r\n            this._values.push(value);\r\n            this._onPush(value);\r\n        }\r\n        else {\r\n            $array.insertIndex(this._values, toIndex, value);\r\n            this._onInsertIndex(toIndex, value);\r\n        }\r\n        return value;\r\n    }\r\n    /**\r\n     * Adds an item to the end of the list.\r\n     *\r\n     * @param item  An item to add\r\n     */\r\n    push(value) {\r\n        this._values.push(value);\r\n        this._onPush(value);\r\n        return value;\r\n    }\r\n    /**\r\n     * Adds an item as a first item in the list.\r\n     *\r\n     * @param item  An item to add\r\n     */\r\n    unshift(value) {\r\n        this.insertIndex(0, value);\r\n        return value;\r\n    }\r\n    /**\r\n     * Adds multiple items to the list.\r\n     *\r\n     * @param items  An Array of items to add\r\n     */\r\n    pushAll(values) {\r\n        $array.each(values, (value) => {\r\n            this.push(value);\r\n        });\r\n    }\r\n    /**\r\n     * Copies and adds items from abother list.\r\n     *\r\n     * @param source  A list top copy items from\r\n     */\r\n    copyFrom(source) {\r\n        this.pushAll(source._values);\r\n    }\r\n    /**\r\n     * Returns the last item from the list, and removes it.\r\n     *\r\n     * @return Item\r\n     */\r\n    pop() {\r\n        let index = this._values.length - 1;\r\n        return index < 0 ? undefined : this.removeIndex(this._values.length - 1);\r\n    }\r\n    /**\r\n     * Returns the first item from the list, and removes it.\r\n     *\r\n     * @return Item\r\n     */\r\n    shift() {\r\n        return this._values.length ? this.removeIndex(0) : undefined;\r\n    }\r\n    /**\r\n     * Sets multiple items to the list.\r\n     *\r\n     * All current items are removed.\r\n     *\r\n     * @param newArray  New items\r\n     */\r\n    setAll(newArray) {\r\n        const old = this._values;\r\n        this._values = [];\r\n        this._onClear(old);\r\n        $array.each(newArray, (value) => {\r\n            this._values.push(value);\r\n            this._onPush(value);\r\n        });\r\n    }\r\n    /**\r\n     * Removes all items from the list.\r\n     */\r\n    clear() {\r\n        this.setAll([]);\r\n    }\r\n    /**\r\n     * Returns an ES6 iterator for the list.\r\n     */\r\n    *[Symbol.iterator]() {\r\n        const length = this._values.length;\r\n        for (let i = 0; i < length; ++i) {\r\n            yield this._values[i];\r\n        }\r\n    }\r\n    /**\r\n     * Calls `f` for each element in the list.\r\n     *\r\n     * `f` should have at least one parameter defined which will get a current\r\n     * item, with optional second argument - index.\r\n     */\r\n    each(f) {\r\n        $array.each(this._values, f);\r\n    }\r\n    /**\r\n     * Calls `f` for each element in the list, from right to left.\r\n     *\r\n     * `f` should have at least one parameter defined which will get a current\r\n     * item, with optional second argument - index.\r\n     */\r\n    eachReverse(f) {\r\n        $array.eachReverse(this._values, f);\r\n    }\r\n}\r\n/**\r\n * A version of a [[List]] where the elements are disposed automatically when\r\n * removed from the list, unless `autoDispose` is set to `false`.\r\n */\r\nexport class ListAutoDispose extends List {\r\n    constructor() {\r\n        super(...arguments);\r\n        /**\r\n         * Automatically disposes elements that are removed from the list.\r\n         *\r\n         * @default true\r\n         */\r\n        Object.defineProperty(this, \"autoDispose\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: true\r\n        });\r\n        Object.defineProperty(this, \"_disposed\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: false\r\n        });\r\n    }\r\n    _onSetIndex(index, oldValue, newValue) {\r\n        if (this.autoDispose) {\r\n            oldValue.dispose();\r\n        }\r\n        super._onSetIndex(index, oldValue, newValue);\r\n    }\r\n    _onRemoveIndex(index, oldValue) {\r\n        if (this.autoDispose) {\r\n            oldValue.dispose();\r\n        }\r\n        super._onRemoveIndex(index, oldValue);\r\n    }\r\n    _onClear(oldValues) {\r\n        if (this.autoDispose) {\r\n            $array.each(oldValues, (x) => {\r\n                x.dispose();\r\n            });\r\n        }\r\n        super._onClear(oldValues);\r\n    }\r\n    isDisposed() {\r\n        return this._disposed;\r\n    }\r\n    dispose() {\r\n        if (!this._disposed) {\r\n            this._disposed = true;\r\n            if (this.autoDispose) {\r\n                $array.each(this._values, (x) => {\r\n                    x.dispose();\r\n                });\r\n            }\r\n        }\r\n    }\r\n}\r\n/**\r\n * A version of a [[List]] that is able to create new elements as well as\r\n * apply additional settings to newly created items.\r\n *\r\n * @see {@link https://www.amcharts.com/docs/v5/concepts/settings/list-templates/} for more info\r\n */\r\nexport class ListTemplate extends ListAutoDispose {\r\n    constructor(template, make) {\r\n        super();\r\n        Object.defineProperty(this, \"template\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"make\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        this.template = template;\r\n        this.make = make;\r\n    }\r\n}\r\n//# sourceMappingURL=List.js.map","import { List } from \"./List\";\r\nimport * as $array from \"./Array\";\r\n/**\r\n * A version of [[List]] to hold children of the [[Container]].\r\n *\r\n * @see {@link https://www.amcharts.com/docs/v5/concepts/common-elements/containers/} for more info\r\n */\r\nexport class Children extends List {\r\n    constructor(container) {\r\n        super();\r\n        Object.defineProperty(this, \"_disposed\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: false\r\n        });\r\n        Object.defineProperty(this, \"_container\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"_events\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        this._container = container;\r\n        this._events = this.events.onAll((change) => {\r\n            if (change.type === \"clear\") {\r\n                $array.each(change.oldValues, (x) => {\r\n                    this._onRemoved(x);\r\n                });\r\n            }\r\n            else if (change.type === \"push\") {\r\n                this._onInserted(change.newValue);\r\n            }\r\n            else if (change.type === \"setIndex\") {\r\n                this._onRemoved(change.oldValue);\r\n                this._onInserted(change.newValue, change.index);\r\n            }\r\n            else if (change.type === \"insertIndex\") {\r\n                this._onInserted(change.newValue, change.index);\r\n            }\r\n            else if (change.type === \"removeIndex\") {\r\n                this._onRemoved(change.oldValue);\r\n            }\r\n            else if (change.type === \"moveIndex\") {\r\n                this._onRemoved(change.value);\r\n                this._onInserted(change.value, change.newIndex);\r\n            }\r\n            else {\r\n                throw new Error(\"Unknown IListEvent type\");\r\n            }\r\n        });\r\n    }\r\n    _onInserted(child, index) {\r\n        child._setParent(this._container, true);\r\n        const childrenDisplay = this._container._childrenDisplay;\r\n        if (index === undefined) {\r\n            childrenDisplay.addChild(child._display);\r\n        }\r\n        else {\r\n            childrenDisplay.addChildAt(child._display, index);\r\n        }\r\n    }\r\n    _onRemoved(child) {\r\n        this._container._childrenDisplay.removeChild(child._display);\r\n        this._container.markDirtyBounds();\r\n        this._container.markDirty();\r\n    }\r\n    /**\r\n     * Returns `true` if obejct is disposed.\r\n     */\r\n    isDisposed() {\r\n        return this._disposed;\r\n    }\r\n    /**\r\n     * Permanently dispose this object.\r\n     */\r\n    dispose() {\r\n        if (!this._disposed) {\r\n            this._disposed = true;\r\n            this._events.dispose();\r\n            $array.each(this.values, (child) => {\r\n                child.dispose();\r\n            });\r\n        }\r\n    }\r\n}\r\n//# sourceMappingURL=Children.js.map","import { isNumber } from \"./Type\";\r\n/**\r\n * ============================================================================\r\n * CONSTANTS\r\n * ============================================================================\r\n * @hidden\r\n */\r\nexport const PI = Math.PI;\r\nexport const HALFPI = PI / 2;\r\nexport const RADIANS = PI / 180;\r\nexport const DEGREES = 180 / PI;\r\n/**\r\n * Rounds the numeric value to whole number or specific precision of set.\r\n *\r\n * @param value      Value\r\n * @param precision  Precision (number of decimal points)\r\n * @param floor  In case value ends with 0.5 and precision is 0, we might need to floor the value instead of ceiling it.\r\n * @return Rounded value\r\n */\r\nexport function round(value, precision, floor) {\r\n    if (!isNumber(precision) || precision <= 0) {\r\n        let rounded = Math.round(value);\r\n        if (floor) {\r\n            if (rounded - value == 0.5) {\r\n                rounded--;\r\n            }\r\n        }\r\n        return rounded;\r\n    }\r\n    else {\r\n        let d = Math.pow(10, precision);\r\n        return Math.round(value * d) / d;\r\n    }\r\n}\r\n/**\r\n * Ceils the numeric value to whole number or specific precision of set.\r\n *\r\n * @param value      Value\r\n * @param precision  Precision (number of decimal points)\r\n * @return Rounded value\r\n */\r\nexport function ceil(value, precision) {\r\n    if (!isNumber(precision) || precision <= 0) {\r\n        return Math.ceil(value);\r\n    }\r\n    else {\r\n        let d = Math.pow(10, precision);\r\n        return Math.ceil(value * d) / d;\r\n    }\r\n}\r\n/**\r\n * [getCubicControlPointA description]\r\n *\r\n * @ignore Exclude from docs\r\n * @todo Description\r\n * @param p0        [description]\r\n * @param p1        [description]\r\n * @param p2        [description]\r\n * @param p3        [description]\r\n * @param tensionX  [description]\r\n * @param tensionY  [description]\r\n * @return [description]\r\n */\r\nexport function getCubicControlPointA(p0, p1, p2, tensionX, tensionY) {\r\n    return { x: ((-p0.x + p1.x / tensionX + p2.x) * tensionX), y: ((-p0.y + p1.y / tensionY + p2.y) * tensionY) };\r\n}\r\n/**\r\n * [getCubicControlPointB description]\r\n *\r\n * @ignore Exclude from docs\r\n * @todo Description\r\n * @param p0        [description]\r\n * @param p1        [description]\r\n * @param p2        [description]\r\n * @param p3        [description]\r\n * @param tensionX  [description]\r\n * @param tensionY  [description]\r\n * @return [description]\r\n */\r\nexport function getCubicControlPointB(p1, p2, p3, tensionX, tensionY) {\r\n    return { x: ((p1.x + p2.x / tensionX - p3.x) * tensionX), y: ((p1.y + p2.y / tensionY - p3.y) * tensionY) };\r\n}\r\nexport function fitToRange(value, min, max) {\r\n    return Math.min(Math.max(value, min), max);\r\n}\r\n/**\r\n * Returns sine of an angle specified in degrees.\r\n *\r\n * @param value  Value\r\n * @return Sine\r\n */\r\nexport function sin(angle) {\r\n    return Math.sin(RADIANS * angle);\r\n}\r\n/**\r\n * Returns tan of an angle specified in degrees.\r\n *\r\n * @param value  Value\r\n * @return Sine\r\n */\r\nexport function tan(angle) {\r\n    return Math.tan(RADIANS * angle);\r\n}\r\n/**\r\n * Returns cosine of an angle specified in degrees.\r\n *\r\n * @param value  Value\r\n * @return Cosine\r\n */\r\nexport function cos(angle) {\r\n    return Math.cos(RADIANS * angle);\r\n}\r\n// 0 to 360\r\nexport function normalizeAngle(value) {\r\n    value = value % 360;\r\n    if (value < 0) {\r\n        value += 360;\r\n    }\r\n    return value;\r\n}\r\n// TODO this doesn't work properly for skewing, and it's probably broken for rotation too\r\nexport function getArcBounds(cx, cy, startAngle, endAngle, radius) {\r\n    let minX = Number.MAX_VALUE;\r\n    let minY = Number.MAX_VALUE;\r\n    let maxX = -Number.MAX_VALUE;\r\n    let maxY = -Number.MAX_VALUE;\r\n    let bpoints = [];\r\n    bpoints.push(getArcPoint(radius, startAngle));\r\n    bpoints.push(getArcPoint(radius, endAngle));\r\n    let fromAngle = Math.min(Math.floor(startAngle / 90) * 90, Math.floor(endAngle / 90) * 90);\r\n    let toAngle = Math.max(Math.ceil(startAngle / 90) * 90, Math.ceil(endAngle / 90) * 90);\r\n    for (let angle = fromAngle; angle <= toAngle; angle += 90) {\r\n        if (angle >= startAngle && angle <= endAngle) {\r\n            bpoints.push(getArcPoint(radius, angle));\r\n        }\r\n    }\r\n    for (let i = 0; i < bpoints.length; i++) {\r\n        let pt = bpoints[i];\r\n        if (pt.x < minX) {\r\n            minX = pt.x;\r\n        }\r\n        if (pt.y < minY) {\r\n            minY = pt.y;\r\n        }\r\n        if (pt.x > maxX) {\r\n            maxX = pt.x;\r\n        }\r\n        if (pt.y > maxY) {\r\n            maxY = pt.y;\r\n        }\r\n    }\r\n    return ({ left: cx + minX, top: cy + minY, right: cx + maxX, bottom: cy + maxY });\r\n}\r\n/**\r\n * Returns point on arc\r\n *\r\n * @param center point\r\n * @param radius\r\n * @param arc\r\n * @return {boolean}\r\n */\r\nexport function getArcPoint(radius, arc) {\r\n    return ({ x: radius * cos(arc), y: radius * sin(arc) });\r\n}\r\nexport function mergeBounds(bounds) {\r\n    const len = bounds.length;\r\n    if (len > 0) {\r\n        let bound = bounds[0];\r\n        let left = bound.left;\r\n        let top = bound.top;\r\n        let right = bound.right;\r\n        let bottom = bound.bottom;\r\n        if (len > 1) {\r\n            for (let i = 1; i < len; i++) {\r\n                bound = bounds[i];\r\n                left = Math.min(bound.left, left);\r\n                right = Math.max(bound.right, right);\r\n                top = Math.min(bound.top, top);\r\n                bottom = Math.max(bound.bottom, bottom);\r\n            }\r\n        }\r\n        return { left, right, top, bottom };\r\n    }\r\n    return { left: 0, right: 0, top: 0, bottom: 0 };\r\n}\r\nexport function fitAngleToRange(value, startAngle, endAngle) {\r\n    if (startAngle > endAngle) {\r\n        let temp = startAngle;\r\n        startAngle = endAngle;\r\n        endAngle = temp;\r\n    }\r\n    value = normalizeAngle(value);\r\n    let count = (startAngle - normalizeAngle(startAngle)) / 360;\r\n    if (value < startAngle) {\r\n        value += 360 * (count + 1);\r\n    }\r\n    let maxEnd = startAngle + (endAngle - startAngle) / 2 + 180;\r\n    let maxStart = startAngle + (endAngle - startAngle) / 2 - 180;\r\n    if (value > endAngle) {\r\n        if (value - 360 > startAngle) {\r\n            value -= 360;\r\n        }\r\n        else {\r\n            if (value < maxEnd) {\r\n                value = endAngle;\r\n            }\r\n            else {\r\n                value = startAngle;\r\n            }\r\n        }\r\n    }\r\n    if (value < startAngle) {\r\n        if (value > maxStart) {\r\n            value = startAngle;\r\n        }\r\n        else {\r\n            value = endAngle;\r\n        }\r\n    }\r\n    return value;\r\n}\r\nexport function inBounds(point, bounds) {\r\n    if (point.x >= bounds.left && point.y >= bounds.top && point.x <= bounds.right && point.y <= bounds.bottom) {\r\n        return true;\r\n    }\r\n    return false;\r\n}\r\nexport function getAngle(point1, point2) {\r\n    if (!point2) {\r\n        point2 = { x: point1.x * 2, y: point1.y * 2 };\r\n    }\r\n    let diffX = point2.x - point1.x;\r\n    let diffY = point2.y - point1.y;\r\n    let angle = Math.atan2(diffY, diffX) * DEGREES;\r\n    if (angle < 0) {\r\n        angle += 360;\r\n    }\r\n    return normalizeAngle(angle);\r\n}\r\n/**\r\n * [getPointOnQuadraticCurve description]\r\n *\r\n * @ignore Exclude from docs\r\n * @todo Description\r\n * @param pointA        [description]\r\n * @param pointB        [description]\r\n * @param controlPoint  [description]\r\n * @param position      [description]\r\n * @return [description]\r\n */\r\nexport function getPointOnQuadraticCurve(pointA, pointB, controlPoint, position) {\r\n    let x = (1 - position) * (1 - position) * pointA.x + 2 * (1 - position) * position * controlPoint.x + position * position * pointB.x;\r\n    let y = (1 - position) * (1 - position) * pointA.y + 2 * (1 - position) * position * controlPoint.y + position * position * pointB.y;\r\n    return { x: x, y: y };\r\n}\r\nexport function getPointOnLine(pointA, pointB, position) {\r\n    return { x: pointA.x + (pointB.x - pointA.x) * position, y: pointA.y + (pointB.y - pointA.y) * position };\r\n}\r\n/**\r\n * Returns the closest value from the array of values to the reference value.\r\n *\r\n * @param values  Array of values\r\n * @param value   Reference value\r\n * @return Closes value from the array\r\n */\r\nexport function closest(values, referenceValue) {\r\n    return values.reduce(function (prev, curr) {\r\n        return (Math.abs(curr - referenceValue) < Math.abs(prev - referenceValue) ? curr : prev);\r\n    });\r\n}\r\n/**\r\n * Returns true if bounds overlap\r\n * @param bounds1 IBounds\r\n * @param bounds2 IBounds\r\n * @returns boolean\r\n */\r\nexport function boundsOverlap(bounds1, bounds2) {\r\n    const horizontalOverlap = bounds1.left < bounds2.right && bounds1.right > bounds2.left;\r\n    const verticalOverlap = bounds1.top < bounds2.bottom && bounds1.bottom > bounds2.top;\r\n    return horizontalOverlap && verticalOverlap;\r\n}\r\n/**\r\n * Generates points of a spiral\r\n * @param cx\r\n * @param cy\r\n * @param radius\r\n * @param radiusY\r\n * @param innerRadius\r\n * @param step\r\n * @param radiusStep\r\n * @param startAngle\r\n * @param endAngle\r\n * @returns IPoint[]\r\n */\r\nexport function spiralPoints(cx, cy, radius, radiusY, innerRadius, step, radiusStep, startAngle, endAngle) {\r\n    let r = innerRadius + 0.01;\r\n    let angle = startAngle * RADIANS;\r\n    let points = [];\r\n    while (r < radius + radiusStep) {\r\n        let stepSize = step;\r\n        if (stepSize / 2 > r) {\r\n            stepSize = 2 * r;\r\n        }\r\n        angle += 2 * Math.asin(stepSize / 2 / r);\r\n        if (angle * DEGREES > endAngle + ((radius - innerRadius) / radiusStep) * 360) {\r\n            break;\r\n        }\r\n        let degrees = angle * DEGREES;\r\n        let point = { x: cx + r * Math.cos(angle), y: cy + r * radiusY / radius * Math.sin(angle) };\r\n        points.push(point);\r\n        r = innerRadius + degrees / 360 * radiusStep;\r\n    }\r\n    points.shift();\r\n    return points;\r\n}\r\n/**\r\n * Returns true if circles overlap\r\n * @param circle1\r\n * @param circle2\r\n * @returns boolean\r\n */\r\nexport function circlesOverlap(circle1, circle2) {\r\n    return Math.hypot(circle1.x - circle2.x, circle1.y - circle2.y) <= circle1.radius + circle2.radius;\r\n}\r\n//# sourceMappingURL=Math.js.map","/**\r\n * A collection of easing functions\r\n *\r\n * Parts of this collection are taken from D3.js library (https://d3js.org/)\r\n */\r\n/**\r\n * ============================================================================\r\n * IMPORTS\r\n * ============================================================================\r\n * @hidden\r\n */\r\nimport * as $math from \"./Math\";\r\n/**\r\n * The functions below are from D3.js library (https://d3js.org/)\r\n *\r\n * ----------------------------------------------------------------------------\r\n * Copyright 2017 Mike Bostock\r\n *\r\n * Redistribution and use in source and binary forms, with or without\r\n * modification, are permitted provided that the following conditions are met:\r\n *\r\n * 1. Redistributions of source code must retain the above copyright notice,\r\n *\tthis list of conditions and the following disclaimer.\r\n *\r\n * 2. Redistributions in binary form must reproduce the above copyright notice,\r\n *\tthis list of conditions and the following disclaimer in the documentation\r\n *\tand/or other materials provided with the distribution.\r\n *\r\n * 3. Neither the name of the copyright holder nor the names of its\r\n *\tcontributors may be used to endorse or promote products derived from this\r\n *\tsoftware without specific prior written permission.\r\n *\r\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\"\r\n * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\r\n * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE\r\n * ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE\r\n * LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\r\n * CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF\r\n * SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS\r\n * INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN\r\n * CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)\r\n * ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE\r\n * POSSIBILITY OF SUCH DAMAGE.\r\n * ----------------------------------------------------------------------------\r\n * @hidden\r\n */\r\n/**\r\n */\r\nexport function linear(t) {\r\n    return t;\r\n}\r\nexport function quad(t) {\r\n    return t * t;\r\n}\r\nexport function cubic(t) {\r\n    return t * t * t;\r\n}\r\nexport function pow(t, e) {\r\n    return Math.pow(t, e);\r\n}\r\nexport function exp(t) {\r\n    return Math.pow(2, 10 * t - 10);\r\n}\r\nexport function sine(t) {\r\n    return 1 - Math.cos(t * $math.HALFPI);\r\n}\r\nexport function circle(t) {\r\n    return 1 - Math.sqrt(1 - t * t);\r\n}\r\n/**\r\n * ============================================================================\r\n * TRANSFORMERS\r\n * ============================================================================\r\n * @hidden\r\n */\r\n/**\r\n */\r\nexport function yoyo(ease) {\r\n    return function (t) {\r\n        if (t < 0.5) {\r\n            return ease(t * 2.0);\r\n        }\r\n        else {\r\n            return ease((1.0 - t) * 2.0);\r\n        }\r\n    };\r\n}\r\nexport function out(ease) {\r\n    return function (t) {\r\n        return 1.0 - ease(1.0 - t);\r\n    };\r\n}\r\nexport function inOut(ease) {\r\n    return function (t) {\r\n        if (t <= 0.5) {\r\n            return ease(t * 2.0) / 2.0;\r\n        }\r\n        else {\r\n            return 1.0 - (ease((1.0 - t) * 2.0) / 2.0);\r\n        }\r\n    };\r\n}\r\n/**\r\n * ============================================================================\r\n * BOUNCE\r\n * ============================================================================\r\n * @hidden\r\n */\r\nlet b1 = 4 / 11, b2 = 6 / 11, b3 = 8 / 11, b4 = 3 / 4, b5 = 9 / 11, b6 = 10 / 11, b7 = 15 / 16, b8 = 21 / 22, b9 = 63 / 64, b0 = 1 / b1 / b1;\r\nexport function bounce(t) {\r\n    return 1 - bounceOut(1 - t);\r\n}\r\n/**\r\n * @ignore\r\n */\r\nfunction bounceOut(t) {\r\n    t = t;\r\n    if (t < b1) {\r\n        return b0 * t * t;\r\n    }\r\n    else if (t < b3) {\r\n        return b0 * (t -= b2) * t + b4;\r\n    }\r\n    else if (t < b6) {\r\n        return b0 * (t -= b5) * t + b7;\r\n    }\r\n    else {\r\n        return b0 * (t -= b8) * t + b9;\r\n    }\r\n}\r\n/**\r\n * ============================================================================\r\n * ELASTIC\r\n * ============================================================================\r\n * @hidden\r\n */\r\n/**\r\n * @ignore\r\n */\r\nlet tau = 2 * Math.PI;\r\n/**\r\n * @ignore\r\n */\r\nlet amplitude = 1;\r\n/**\r\n * @ignore\r\n */\r\nlet period = 0.3 / tau;\r\n/**\r\n * @ignore\r\n */\r\nlet s = Math.asin(1 / amplitude) * period;\r\nexport function elastic(t) {\r\n    let v = t;\r\n    return amplitude * Math.pow(2, 10 * --v) * Math.sin((s - v) / period);\r\n}\r\n//# sourceMappingURL=Ease.js.map","import * as $object from \"./Object\";\r\nimport * as $ease from \"./Ease\";\r\n/**\r\n * An object representing a collection of setting values to apply as required.\r\n *\r\n * @see {@link https://www.amcharts.com/docs/v5/concepts/settings/states/} for more info\r\n */\r\nexport class State {\r\n    constructor(entity, settings) {\r\n        Object.defineProperty(this, \"_entity\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"_settings\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"_userSettings\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: {}\r\n        });\r\n        this._entity = entity;\r\n        this._settings = settings;\r\n        $object.each(settings, (key) => {\r\n            this._userSettings[key] = true;\r\n        });\r\n    }\r\n    get(key, fallback) {\r\n        const value = this._settings[key];\r\n        if (value !== undefined) {\r\n            return value;\r\n        }\r\n        else {\r\n            return fallback;\r\n        }\r\n    }\r\n    /**\r\n     * @ignore\r\n     */\r\n    setRaw(key, value) {\r\n        this._settings[key] = value;\r\n    }\r\n    /**\r\n     * Sets a setting `value` for the specified `key` to be set when the state\r\n     * is applied.\r\n     *\r\n     * @param   key       Setting key\r\n     * @param   value     Setting value\r\n     * @return            Setting value\r\n     */\r\n    set(key, value) {\r\n        this._userSettings[key] = true;\r\n        this.setRaw(key, value);\r\n    }\r\n    /**\r\n     * Removes a setting value for the specified `key`.\r\n     *\r\n     * @see {@link https://www.amcharts.com/docs/v5/concepts/settings/} for more info\r\n     * @param   key       Setting key\r\n     */\r\n    remove(key) {\r\n        delete this._userSettings[key];\r\n        delete this._settings[key];\r\n    }\r\n    /**\r\n     * Sets multiple settings at once.\r\n     *\r\n     * `settings` must be an object with key: value pairs.\r\n     *\r\n     * @see {@link https://www.amcharts.com/docs/v5/concepts/settings/} for more info\r\n     * @param settings Settings\r\n     */\r\n    setAll(settings) {\r\n        $object.keys(settings).forEach((key) => {\r\n            this.set(key, settings[key]);\r\n        });\r\n    }\r\n    _eachSetting(f) {\r\n        $object.each(this._settings, f);\r\n    }\r\n    /**\r\n     * Applies the state to the target element.\r\n     *\r\n     * All setting values are set immediately.\r\n     */\r\n    apply() {\r\n        const seen = {};\r\n        seen[\"stateAnimationEasing\"] = true;\r\n        seen[\"stateAnimationDuration\"] = true;\r\n        const defaultState = this._entity.states.lookup(\"default\");\r\n        this._eachSetting((key, value) => {\r\n            if (!seen[key]) {\r\n                seen[key] = true;\r\n                // save values to default state\r\n                if (this !== defaultState) {\r\n                    if (!(key in defaultState._settings)) {\r\n                        defaultState._settings[key] = this._entity.get(key);\r\n                    }\r\n                }\r\n                this._entity.set(key, value);\r\n            }\r\n        });\r\n    }\r\n    /**\r\n     * Applies the state to the target element.\r\n     *\r\n     * Returns an object representing all [[Animation]] objects created for\r\n     * each setting key transition.\r\n     *\r\n     * @return           Animations\r\n     */\r\n    applyAnimate(duration) {\r\n        if (duration == null) {\r\n            duration = this._settings.stateAnimationDuration;\r\n        }\r\n        if (duration == null) {\r\n            duration = this.get(\"stateAnimationDuration\", this._entity.get(\"stateAnimationDuration\", 0));\r\n        }\r\n        let easing = this._settings.stateAnimationEasing;\r\n        if (easing == null) {\r\n            easing = this.get(\"stateAnimationEasing\", this._entity.get(\"stateAnimationEasing\", $ease.cubic));\r\n        }\r\n        const defaultState = this._entity.states.lookup(\"default\");\r\n        const seen = {};\r\n        seen[\"stateAnimationEasing\"] = true;\r\n        seen[\"stateAnimationDuration\"] = true;\r\n        const animations = {};\r\n        this._eachSetting((key, value) => {\r\n            if (!seen[key]) {\r\n                seen[key] = true;\r\n                // save values to default state\r\n                if (this != defaultState) {\r\n                    if (!(key in defaultState._settings)) {\r\n                        defaultState._settings[key] = this._entity.get(key);\r\n                    }\r\n                }\r\n                const animation = this._entity.animate({\r\n                    key: key,\r\n                    to: value,\r\n                    duration: duration,\r\n                    easing: easing\r\n                });\r\n                if (animation) {\r\n                    animations[key] = animation;\r\n                }\r\n            }\r\n        });\r\n        return animations;\r\n    }\r\n}\r\n/**\r\n * Collection of [[State]] objects for an element.\r\n *\r\n * @see {@link https://www.amcharts.com/docs/v5/concepts/settings/states/} for more info\r\n */\r\nexport class States {\r\n    constructor(entity) {\r\n        Object.defineProperty(this, \"_states\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: {}\r\n        });\r\n        Object.defineProperty(this, \"_entity\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        this._entity = entity;\r\n    }\r\n    /**\r\n     * Checks if a state by `name` exists. Returns it there is one.\r\n     *\r\n     * @param  name  State name\r\n     * @return       State\r\n     */\r\n    lookup(name) {\r\n        return this._states[name];\r\n    }\r\n    /**\r\n     * Sets supplied `settings` on a state by the `name`.\r\n     *\r\n     * If such state does not yet exists, it is created.\r\n     *\r\n     * @param   name      State name\r\n     * @param   settings  Settings\r\n     * @return            New State\r\n     */\r\n    create(name, settings) {\r\n        const state = this._states[name];\r\n        if (state) {\r\n            state.setAll(settings);\r\n            return state;\r\n        }\r\n        else {\r\n            const state = new State(this._entity, settings);\r\n            this._states[name] = state;\r\n            return state;\r\n        }\r\n    }\r\n    /**\r\n     * Removes the state called `name`.\r\n     *\r\n     * @param   name      State name\r\n     */\r\n    remove(name) {\r\n        delete this._states[name];\r\n    }\r\n    /**\r\n     * Applies a named state to the target element.\r\n     *\r\n     * @param  newState  State name\r\n     */\r\n    apply(newState) {\r\n        const state = this._states[newState];\r\n        if (state) {\r\n            state.apply();\r\n        }\r\n        this._entity._applyState(newState);\r\n    }\r\n    /**\r\n     * Applies a named state to the element.\r\n     *\r\n     * Returns an object representing all [[Animation]] objects created for\r\n     * each setting key transition.\r\n     *\r\n     * @param   newState  State name\r\n     * @return            Animations\r\n     */\r\n    applyAnimate(newState, duration) {\r\n        let animations;\r\n        const state = this._states[newState];\r\n        if (state) {\r\n            animations = state.applyAnimate(duration);\r\n        }\r\n        this._entity._applyStateAnimated(newState, duration);\r\n        return animations;\r\n    }\r\n}\r\n//# sourceMappingURL=States.js.map","/**\r\n * @ignore\r\n */\r\nexport class Registry {\r\n    constructor() {\r\n        /**\r\n         * Currently running version of amCharts.\r\n         */\r\n        Object.defineProperty(this, \"version\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: \"5.10.1\"\r\n        });\r\n        /**\r\n         * List of applied licenses.\r\n         * @ignore\r\n         */\r\n        Object.defineProperty(this, \"licenses\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: []\r\n        });\r\n        /**\r\n         * Entities that have their `id` setting set.\r\n         */\r\n        Object.defineProperty(this, \"entitiesById\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: {}\r\n        });\r\n        /**\r\n         * All created [[Root]] elements.\r\n         */\r\n        Object.defineProperty(this, \"rootElements\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: []\r\n        });\r\n    }\r\n}\r\n/**\r\n    * @ignore\r\n */\r\nexport const registry = new Registry();\r\n/**\r\n * Adds a license, e.g.:\r\n *\r\n * ```TypeScript\r\n * am5.addLicense(\"xxxxxxxx\");\r\n * ```\r\n * ```JavaScript\r\n * am5.addLicense(\"xxxxxxxx\");\r\n * ```\r\n *\r\n * Multiple licenses can be added to cover for multiple products.\r\n *\r\n * @param  license  License key\r\n */\r\nexport function addLicense(license) {\r\n    registry.licenses.push(license);\r\n}\r\n/**\r\n * Disposes all [[Root]] elements.\r\n */\r\nexport function disposeAllRootElements() {\r\n    let root;\r\n    while (root = registry.rootElements.pop()) {\r\n        root.dispose();\r\n    }\r\n}\r\n/**\r\n * Finds and returns a `Root` element assigned to a container with `id`.\r\n *\r\n * @param   id  Container ID\r\n * @return      Root\r\n * @since 5.9.2\r\n */\r\nexport function getRootById(id) {\r\n    let found;\r\n    registry.rootElements.forEach((item) => {\r\n        if (item.dom.id == id) {\r\n            found = item;\r\n        }\r\n    });\r\n    return found;\r\n}\r\n//# sourceMappingURL=Registry.js.map","/**\r\n * @ignore\r\n */\r\nexport function compare(left, right) {\r\n    if (left === right) {\r\n        return 0;\r\n    }\r\n    else if (left < right) {\r\n        return -1;\r\n    }\r\n    else {\r\n        return 1;\r\n    }\r\n}\r\n/**\r\n * @ignore\r\n */\r\nexport function compareArray(left, right, f) {\r\n    const leftLength = left.length;\r\n    const rightLength = right.length;\r\n    const length = Math.min(leftLength, rightLength);\r\n    for (let i = 0; i < length; ++i) {\r\n        const order = f(left[i], right[i]);\r\n        if (order !== 0) {\r\n            return order;\r\n        }\r\n    }\r\n    return compare(leftLength, rightLength);\r\n}\r\n/**\r\n * @ignore\r\n */\r\nexport function reverse(order) {\r\n    if (order < 0) {\r\n        return 1;\r\n    }\r\n    else if (order > 0) {\r\n        return -1;\r\n    }\r\n    else {\r\n        return 0;\r\n    }\r\n}\r\n/**\r\n * @ignore\r\n */\r\nexport function compareNumber(a, b) {\r\n    if (a === b) {\r\n        return 0;\r\n    }\r\n    else if (a < b) {\r\n        return -1;\r\n    }\r\n    else {\r\n        return 1;\r\n    }\r\n}\r\n//# sourceMappingURL=Order.js.map","import { Disposer } from \"./Disposer\";\r\nimport { EventDispatcher } from \"./EventDispatcher\";\r\nimport { AnimationState, getInterpolate } from \"./Animation\";\r\nimport { States } from \"./States\";\r\nimport { registry } from \"../Registry\";\r\nimport * as $object from \"./Object\";\r\nimport * as $ease from \"./Ease\";\r\nimport * as $array from \"./Array\";\r\nimport * as $order from \"./Order\";\r\n/**\r\n * Allows to dynamically modify setting value of its target element.\r\n *\r\n * @see {@link https://www.amcharts.com/docs/v5/concepts/settings/adapters/} for more info\r\n */\r\nexport class Adapters {\r\n    constructor(entity) {\r\n        Object.defineProperty(this, \"_entity\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"_callbacks\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: {}\r\n        });\r\n        Object.defineProperty(this, \"_disabled\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: {}\r\n        });\r\n        this._entity = entity;\r\n    }\r\n    /**\r\n     * Add a function (`callback`) that will modify value for setting `key`.\r\n     *\r\n     * @see {@link https://www.amcharts.com/docs/v5/concepts/settings/adapters/} for more info\r\n     */\r\n    add(key, callback) {\r\n        let callbacks = this._callbacks[key];\r\n        if (callbacks === undefined) {\r\n            callbacks = this._callbacks[key] = [];\r\n        }\r\n        callbacks.push(callback);\r\n        this._entity._markDirtyKey(key);\r\n        return new Disposer(() => {\r\n            if ($array.removeFirst(callbacks, callback)) {\r\n                this._entity._markDirtyKey(key);\r\n            }\r\n        });\r\n    }\r\n    /**\r\n     * Removes all adapters for the specific key.\r\n     *\r\n     * @since 5.1.0\r\n     */\r\n    remove(key) {\r\n        const callbacks = this._callbacks[key];\r\n        if (callbacks !== undefined) {\r\n            delete this._callbacks[key];\r\n            if (callbacks.length !== 0) {\r\n                this._entity._markDirtyKey(key);\r\n            }\r\n        }\r\n    }\r\n    /**\r\n     * Enables (previously disabled) adapters for specific key.\r\n     *\r\n     * @since 5.1.0\r\n     */\r\n    enable(key) {\r\n        if (this._disabled[key]) {\r\n            delete this._disabled[key];\r\n            this._entity._markDirtyKey(key);\r\n        }\r\n    }\r\n    /**\r\n     * Disables all adapters for specific key.\r\n     *\r\n     * @since 5.1.0\r\n     */\r\n    disable(key) {\r\n        if (!this._disabled[key]) {\r\n            this._disabled[key] = true;\r\n            this._entity._markDirtyKey(key);\r\n        }\r\n    }\r\n    /**\r\n     * @ignore\r\n     */\r\n    fold(key, value) {\r\n        if (!this._disabled[key]) {\r\n            const callbacks = this._callbacks[key];\r\n            if (callbacks !== undefined) {\r\n                for (let i = 0, len = callbacks.length; i < len; ++i) {\r\n                    value = callbacks[i](value, this._entity, key);\r\n                }\r\n            }\r\n        }\r\n        return value;\r\n    }\r\n}\r\n/**\r\n * Animation object.\r\n *\r\n * @see {@link https://www.amcharts.com/docs/v5/concepts/animations/} for more info\r\n */\r\nexport class Animation {\r\n    constructor(animation, from, to, duration, easing, loops, startingTime) {\r\n        Object.defineProperty(this, \"_animation\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"_from\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"_to\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"_duration\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"_easing\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"_loops\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"_interpolate\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"_oldTime\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"_time\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: 0\r\n        });\r\n        Object.defineProperty(this, \"_stopped\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: false\r\n        });\r\n        Object.defineProperty(this, \"_playing\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: true\r\n        });\r\n        Object.defineProperty(this, \"events\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: new EventDispatcher()\r\n        });\r\n        this._animation = animation;\r\n        this._from = from;\r\n        this._to = to;\r\n        this._duration = duration;\r\n        this._easing = easing;\r\n        this._loops = loops;\r\n        this._interpolate = getInterpolate(from, to);\r\n        this._oldTime = startingTime;\r\n    }\r\n    get to() {\r\n        return this._to;\r\n    }\r\n    get from() {\r\n        return this._from;\r\n    }\r\n    get playing() {\r\n        return this._playing;\r\n    }\r\n    get stopped() {\r\n        return this._stopped;\r\n    }\r\n    stop() {\r\n        if (!this._stopped) {\r\n            this._stopped = true;\r\n            this._playing = false;\r\n            if (this.events.isEnabled(\"stopped\")) {\r\n                this.events.dispatch(\"stopped\", {\r\n                    type: \"stopped\",\r\n                    target: this,\r\n                });\r\n            }\r\n        }\r\n    }\r\n    pause() {\r\n        this._playing = false;\r\n        this._oldTime = null;\r\n    }\r\n    play() {\r\n        if (!this._stopped && !this._playing) {\r\n            this._playing = true;\r\n            this._animation._startAnimation();\r\n        }\r\n    }\r\n    get percentage() {\r\n        return this._time / this._duration;\r\n    }\r\n    waitForStop() {\r\n        return new Promise((resolve, _reject) => {\r\n            if (this._stopped) {\r\n                resolve();\r\n            }\r\n            else {\r\n                const listener = () => {\r\n                    stopped.dispose();\r\n                    resolve();\r\n                };\r\n                const stopped = this.events.on(\"stopped\", listener);\r\n            }\r\n        });\r\n    }\r\n    _checkEnded() {\r\n        if (this._loops > 1) {\r\n            --this._loops;\r\n            return false;\r\n        }\r\n        else {\r\n            return true;\r\n        }\r\n    }\r\n    _run(currentTime) {\r\n        if (this._oldTime !== null) {\r\n            this._time += currentTime - this._oldTime;\r\n            if (this._time > this._duration) {\r\n                this._time = this._duration;\r\n            }\r\n        }\r\n        this._oldTime = currentTime;\r\n    }\r\n    _reset(currentTime) {\r\n        this._oldTime = currentTime;\r\n        this._time = 0;\r\n    }\r\n    _value(diff) {\r\n        return this._interpolate(this._easing(diff), this._from, this._to);\r\n    }\r\n}\r\n/**\r\n * @ignore\r\n */\r\nlet counter = 0;\r\n/**\r\n * Base class for [[Entity]] objects that support Settings.\r\n *\r\n * @see {@link https://www.amcharts.com/docs/v5/concepts/settings/} for more info\r\n */\r\nexport class Settings {\r\n    constructor(settings) {\r\n        /**\r\n         * Unique ID.\r\n         */\r\n        Object.defineProperty(this, \"uid\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: ++counter\r\n        });\r\n        Object.defineProperty(this, \"_settings\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"_privateSettings\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: {}\r\n        });\r\n        Object.defineProperty(this, \"_settingEvents\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: {}\r\n        });\r\n        Object.defineProperty(this, \"_privateSettingEvents\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: {}\r\n        });\r\n        Object.defineProperty(this, \"_prevSettings\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: {}\r\n        });\r\n        Object.defineProperty(this, \"_prevPrivateSettings\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: {}\r\n        });\r\n        Object.defineProperty(this, \"_animatingSettings\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: {}\r\n        });\r\n        Object.defineProperty(this, \"_animatingPrivateSettings\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: {}\r\n        });\r\n        Object.defineProperty(this, \"_disposed\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: false\r\n        });\r\n        // TODO move this into Entity\r\n        Object.defineProperty(this, \"_userProperties\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: {}\r\n        });\r\n        this._settings = settings;\r\n    }\r\n    _checkDirty() {\r\n        $object.keys(this._settings).forEach((key) => {\r\n            this._userProperties[key] = true;\r\n            this._markDirtyKey(key);\r\n        });\r\n    }\r\n    /**\r\n     * @ignore\r\n     */\r\n    resetUserSettings() {\r\n        this._userProperties = {};\r\n    }\r\n    _runAnimation(currentTime) {\r\n        let state = AnimationState.Stopped;\r\n        if (!this.isDisposed()) {\r\n            let playing = false;\r\n            let paused = false;\r\n            $object.each(this._animatingSettings, (key, animation) => {\r\n                if (animation.stopped) {\r\n                    this._stopAnimation(key);\r\n                }\r\n                else if (animation.playing) {\r\n                    animation._run(currentTime);\r\n                    const diff = animation.percentage;\r\n                    if (diff >= 1) {\r\n                        if (animation._checkEnded()) {\r\n                            this.set(key, animation._value(1));\r\n                        }\r\n                        else {\r\n                            playing = true;\r\n                            animation._reset(currentTime);\r\n                            this._set(key, animation._value(1));\r\n                        }\r\n                    }\r\n                    else {\r\n                        playing = true;\r\n                        this._set(key, animation._value(diff));\r\n                    }\r\n                }\r\n                else {\r\n                    paused = true;\r\n                }\r\n            });\r\n            $object.each(this._animatingPrivateSettings, (key, animation) => {\r\n                if (animation.stopped) {\r\n                    this._stopAnimationPrivate(key);\r\n                }\r\n                else if (animation.playing) {\r\n                    animation._run(currentTime);\r\n                    const diff = animation.percentage;\r\n                    if (diff >= 1) {\r\n                        if (animation._checkEnded()) {\r\n                            this.setPrivate(key, animation._value(1));\r\n                        }\r\n                        else {\r\n                            playing = true;\r\n                            animation._reset(currentTime);\r\n                            this._setPrivate(key, animation._value(1));\r\n                        }\r\n                    }\r\n                    else {\r\n                        playing = true;\r\n                        this._setPrivate(key, animation._value(diff));\r\n                    }\r\n                }\r\n                else {\r\n                    paused = true;\r\n                }\r\n            });\r\n            if (playing) {\r\n                state = AnimationState.Playing;\r\n            }\r\n            else if (paused) {\r\n                state = AnimationState.Paused;\r\n            }\r\n        }\r\n        return state;\r\n    }\r\n    _markDirtyKey(_key) {\r\n        this.markDirty();\r\n    }\r\n    _markDirtyPrivateKey(_key) {\r\n        this.markDirty();\r\n    }\r\n    /**\r\n     * Sets a callback function to invoke when specific key of settings changes\r\n     * or is set.\r\n     *\r\n     * @see {@link https://www.amcharts.com/docs/v5/concepts/events/#Settings_value_change} for more info\r\n     * @param   key       Settings key\r\n     * @param   callback  Callback\r\n     * @return            Disposer for event\r\n     */\r\n    on(key, callback) {\r\n        let events = this._settingEvents[key];\r\n        if (events === undefined) {\r\n            events = this._settingEvents[key] = [];\r\n        }\r\n        events.push(callback);\r\n        return new Disposer(() => {\r\n            $array.removeFirst(events, callback);\r\n            if (events.length === 0) {\r\n                delete this._settingEvents[key];\r\n            }\r\n        });\r\n    }\r\n    /**\r\n     * Removes a callback for when value of a setting changes.\r\n     *\r\n     * @see {@link https://www.amcharts.com/docs/v5/concepts/events/#Settings_value_change} for more info\r\n     * @param   key       Private settings key\r\n     * @param   callback  Callback\r\n     * @since 5.9.2\r\n     */\r\n    off(key, callback) {\r\n        let events = this._settingEvents[key];\r\n        if (events !== undefined && callback !== undefined) {\r\n            $array.removeFirst(events, callback);\r\n        }\r\n        else {\r\n            delete this._settingEvents[key];\r\n        }\r\n    }\r\n    /**\r\n     * Sets a callback function to invoke when specific key of private settings\r\n     * changes or is set.\r\n     *\r\n     * @see {@link https://www.amcharts.com/docs/v5/concepts/events/#Settings_value_change} for more info\r\n     * @param   key       Private settings key\r\n     * @param   callback  Callback\r\n     * @return            Disposer for event\r\n     */\r\n    onPrivate(key, callback) {\r\n        let events = this._privateSettingEvents[key];\r\n        if (events === undefined) {\r\n            events = this._privateSettingEvents[key] = [];\r\n        }\r\n        events.push(callback);\r\n        return new Disposer(() => {\r\n            $array.removeFirst(events, callback);\r\n            if (events.length === 0) {\r\n                delete this._privateSettingEvents[key];\r\n            }\r\n        });\r\n    }\r\n    /**\r\n     * Removes a callback for when value of a private setting changes.\r\n     *\r\n     * @see {@link https://www.amcharts.com/docs/v5/concepts/events/#Settings_value_change} for more info\r\n     * @param   key       Private settings key\r\n     * @param   callback  Callback\r\n     * @since 5.9.2\r\n     */\r\n    offPrivate(key, callback) {\r\n        let events = this._privateSettingEvents[key];\r\n        if (events !== undefined && callback !== undefined) {\r\n            $array.removeFirst(events, callback);\r\n        }\r\n        else {\r\n            delete this._privateSettingEvents[key];\r\n        }\r\n    }\r\n    /**\r\n     * @ignore\r\n     */\r\n    getRaw(key, fallback) {\r\n        const value = this._settings[key];\r\n        if (value !== undefined) {\r\n            return value;\r\n        }\r\n        else {\r\n            return fallback;\r\n        }\r\n    }\r\n    /**\r\n     * Returns `true` if the setting exists.\r\n     *\r\n     * @see {@link https://www.amcharts.com/docs/v5/concepts/settings/} for more info\r\n     * @param   key        Settings key\r\n     * @return  {boolean}  Key exists\r\n     */\r\n    has(key) {\r\n        return key in this._settings;\r\n    }\r\n    get(key, fallback) {\r\n        return this.getRaw(key, fallback);\r\n    }\r\n    _sendKeyEvent(key, value) {\r\n        const events = this._settingEvents[key];\r\n        if (events !== undefined) {\r\n            $array.each(events, (callback) => {\r\n                callback(value, this, key);\r\n            });\r\n        }\r\n    }\r\n    _sendPrivateKeyEvent(key, value) {\r\n        const events = this._privateSettingEvents[key];\r\n        if (events !== undefined) {\r\n            $array.each(events, (callback) => {\r\n                callback(value, this, key);\r\n            });\r\n        }\r\n    }\r\n    /**\r\n     * @ignore\r\n     */\r\n    _setRaw(key, old, value) {\r\n        this._prevSettings[key] = old;\r\n        this._sendKeyEvent(key, value);\r\n    }\r\n    /**\r\n     * @ignore\r\n     */\r\n    setRaw(key, value) {\r\n        const old = this._settings[key];\r\n        this._settings[key] = value;\r\n        if (old !== value) {\r\n            this._setRaw(key, old, value);\r\n        }\r\n    }\r\n    /**\r\n     * @ignore\r\n     */\r\n    _set(key, value) {\r\n        const old = this._settings[key];\r\n        this._settings[key] = value;\r\n        if (old !== value) {\r\n            this._setRaw(key, old, value);\r\n            this._markDirtyKey(key);\r\n        }\r\n    }\r\n    _stopAnimation(key) {\r\n        const animation = this._animatingSettings[key];\r\n        if (animation) {\r\n            delete this._animatingSettings[key];\r\n            animation.stop();\r\n        }\r\n    }\r\n    /**\r\n     * Sets a setting `value` for the specified `key`, and returns the same `value`.\r\n     *\r\n     * @see {@link https://www.amcharts.com/docs/v5/concepts/settings/} for more info\r\n     * @param   key       Setting key\r\n     * @param   value     Setting value\r\n     * @return            Setting value\r\n     */\r\n    set(key, value) {\r\n        this._set(key, value);\r\n        this._stopAnimation(key);\r\n        return value;\r\n    }\r\n    /**\r\n     * Removes a setting value for the specified `key`;\r\n     *\r\n     * @see {@link https://www.amcharts.com/docs/v5/concepts/settings/} for more info\r\n     * @param   key       Setting key\r\n     */\r\n    remove(key) {\r\n        if (key in this._settings) {\r\n            this._prevSettings[key] = this._settings[key];\r\n            delete this._settings[key];\r\n            this._sendKeyEvent(key, undefined);\r\n            this._markDirtyKey(key);\r\n        }\r\n        this._stopAnimation(key);\r\n    }\r\n    /**\r\n     * Removes all keys;\r\n     *\r\n     * @see {@link https://www.amcharts.com/docs/v5/concepts/settings/} for more info\r\n     */\r\n    removeAll() {\r\n        $array.each($object.keys(this._settings), (key) => {\r\n            this.remove(key);\r\n        });\r\n    }\r\n    /**\r\n     * Returns a value of a private setting.\r\n     *\r\n     * @see {@link https://www.amcharts.com/docs/v5/concepts/settings/#Private_settings} for more info\r\n     */\r\n    getPrivate(key, fallback) {\r\n        const value = this._privateSettings[key];\r\n        if (value !== undefined) {\r\n            return value;\r\n        }\r\n        else {\r\n            return fallback;\r\n        }\r\n    }\r\n    /**\r\n     * @ignore\r\n     */\r\n    _setPrivateRaw(key, old, value) {\r\n        this._prevPrivateSettings[key] = old;\r\n        this._sendPrivateKeyEvent(key, value);\r\n    }\r\n    /**\r\n     * @ignore\r\n     */\r\n    setPrivateRaw(key, value) {\r\n        const old = this._privateSettings[key];\r\n        this._privateSettings[key] = value;\r\n        if (old !== value) {\r\n            this._setPrivateRaw(key, old, value);\r\n        }\r\n    }\r\n    /**\r\n     * @ignore\r\n     */\r\n    _setPrivate(key, value) {\r\n        const old = this._privateSettings[key];\r\n        this._privateSettings[key] = value;\r\n        if (old !== value) {\r\n            this._setPrivateRaw(key, old, value);\r\n            this._markDirtyPrivateKey(key);\r\n        }\r\n    }\r\n    _stopAnimationPrivate(key) {\r\n        const animation = this._animatingPrivateSettings[key];\r\n        if (animation) {\r\n            animation.stop();\r\n            delete this._animatingPrivateSettings[key];\r\n        }\r\n    }\r\n    /**\r\n     * @ignore\r\n     */\r\n    setPrivate(key, value) {\r\n        this._setPrivate(key, value);\r\n        this._stopAnimationPrivate(key);\r\n        return value;\r\n    }\r\n    /**\r\n     * @ignore\r\n     */\r\n    removePrivate(key) {\r\n        if (key in this._privateSettings) {\r\n            this._prevPrivateSettings[key] = this._privateSettings[key];\r\n            delete this._privateSettings[key];\r\n            this._markDirtyPrivateKey(key);\r\n        }\r\n        this._stopAnimationPrivate(key);\r\n    }\r\n    /**\r\n     * Sets multiple settings at once.\r\n     *\r\n     * `settings` must be an object with key: value pairs.\r\n     *\r\n     * @see {@link https://www.amcharts.com/docs/v5/concepts/settings/} for more info\r\n     * @param settings Settings\r\n     */\r\n    setAll(settings) {\r\n        $object.each(settings, (key, value) => {\r\n            this.set(key, value);\r\n        });\r\n    }\r\n    /**\r\n     * Animates setting values from current/start values to new ones.\r\n     *\r\n     * @see {@link https://www.amcharts.com/docs/v5/concepts/animations/#Animating_settings} for more info\r\n     * @param   options  Animation options\r\n     * @return           Animation object\r\n     */\r\n    animate(options) {\r\n        const key = options.key;\r\n        const to = options.to;\r\n        const duration = options.duration || 0;\r\n        const loops = options.loops || 1;\r\n        const from = (options.from === undefined ? this.get(key) : options.from);\r\n        const easing = (options.easing === undefined ? $ease.linear : options.easing);\r\n        if (duration === 0) {\r\n            this.set(key, to);\r\n        }\r\n        else {\r\n            if (from === undefined || from === to) {\r\n                this.set(key, to);\r\n            }\r\n            else {\r\n                this.set(key, from);\r\n                const animation = this._animatingSettings[key] = new Animation(this, from, to, duration, easing, loops, this._animationTime());\r\n                this._startAnimation();\r\n                return animation;\r\n            }\r\n        }\r\n        const animation = new Animation(this, from, to, duration, easing, loops, null);\r\n        animation.stop();\r\n        return animation;\r\n    }\r\n    /**\r\n     * @ignore\r\n     */\r\n    animatePrivate(options) {\r\n        const key = options.key;\r\n        const to = options.to;\r\n        const duration = options.duration || 0;\r\n        const loops = options.loops || 1;\r\n        const from = (options.from === undefined ? this.getPrivate(key) : options.from);\r\n        const easing = (options.easing === undefined ? $ease.linear : options.easing);\r\n        if (duration === 0) {\r\n            this.setPrivate(key, to);\r\n        }\r\n        else {\r\n            if (from === undefined || from === to) {\r\n                this.setPrivate(key, to);\r\n            }\r\n            else {\r\n                this.setPrivate(key, from);\r\n                const animation = this._animatingPrivateSettings[key] = new Animation(this, from, to, duration, easing, loops, this._animationTime());\r\n                this._startAnimation();\r\n                return animation;\r\n            }\r\n        }\r\n        const animation = new Animation(this, from, to, duration, easing, loops, null);\r\n        animation.stop();\r\n        return animation;\r\n    }\r\n    _dispose() { }\r\n    /**\r\n     * Returns `true` if this element is disposed.\r\n     *\r\n     * @return Disposed\r\n     */\r\n    isDisposed() {\r\n        return this._disposed;\r\n    }\r\n    /**\r\n     * Disposes this object.\r\n     */\r\n    dispose() {\r\n        if (!this._disposed) {\r\n            this._disposed = true;\r\n            this._dispose();\r\n        }\r\n    }\r\n}\r\n/**\r\n * Base class.\r\n *\r\n * @important\r\n */\r\nexport class Entity extends Settings {\r\n    /**\r\n     * IMPORTANT! Do not instantiate this class via `new Class()` syntax.\r\n     *\r\n     * Use static method `Class.new()` instead.\r\n     *\r\n     * @see {@link https://www.amcharts.com/docs/v5/getting-started/#New_element_syntax} for more info\r\n     * @ignore\r\n     */\r\n    constructor(root, settings, isReal, templates = []) {\r\n        super(settings);\r\n        Object.defineProperty(this, \"_root\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"_user_id\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        }); // for testing purposes\r\n        Object.defineProperty(this, \"states\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: new States(this)\r\n        });\r\n        Object.defineProperty(this, \"adapters\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: new Adapters(this)\r\n        });\r\n        Object.defineProperty(this, \"events\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: this._createEvents()\r\n        });\r\n        Object.defineProperty(this, \"_userPrivateProperties\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: {}\r\n        });\r\n        Object.defineProperty(this, \"_dirty\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: {}\r\n        });\r\n        Object.defineProperty(this, \"_dirtyPrivate\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: {}\r\n        });\r\n        Object.defineProperty(this, \"_template\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        // Templates for the themes\r\n        Object.defineProperty(this, \"_templates\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: []\r\n        });\r\n        // Internal templates which can be overridden by the user's templates\r\n        Object.defineProperty(this, \"_internalTemplates\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        // Default themes which can be overridden by the user's themes\r\n        Object.defineProperty(this, \"_defaultThemes\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: []\r\n        });\r\n        // Disposers for all of the templates\r\n        Object.defineProperty(this, \"_templateDisposers\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: []\r\n        });\r\n        Object.defineProperty(this, \"_disposers\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: []\r\n        });\r\n        // Whether the template setup function should be run\r\n        Object.defineProperty(this, \"_runSetup\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: true\r\n        });\r\n        Object.defineProperty(this, \"_disposerProperties\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: {}\r\n        });\r\n        if (!isReal) {\r\n            throw new Error(\"You cannot use `new Class()`, instead use `Class.new()`\");\r\n        }\r\n        this._root = root;\r\n        this._internalTemplates = templates;\r\n        if (settings.id) {\r\n            this._registerId(settings.id);\r\n        }\r\n    }\r\n    /**\r\n     * Use this method to create an instance of this class.\r\n     *\r\n     * @see {@link https://www.amcharts.com/docs/v5/getting-started/#New_element_syntax} for more info\r\n     * @param   root      Root element\r\n     * @param   settings  Settings\r\n     * @param   template  Template\r\n     * @return            Instantiated object\r\n     */\r\n    static new(root, settings, template) {\r\n        const x = (new this(root, settings, true));\r\n        x._template = template;\r\n        x._afterNew();\r\n        return x;\r\n    }\r\n    static _new(root, settings, templates = []) {\r\n        const x = (new this(root, settings, true, templates));\r\n        x._afterNew();\r\n        return x;\r\n    }\r\n    _afterNew() {\r\n        this._checkDirty();\r\n        let shouldApply = false;\r\n        const template = this._template;\r\n        if (template) {\r\n            shouldApply = true;\r\n            template._setObjectTemplate(this);\r\n        }\r\n        $array.each(this._internalTemplates, (template) => {\r\n            shouldApply = true;\r\n            template._setObjectTemplate(this);\r\n        });\r\n        if (shouldApply) {\r\n            this._applyTemplates(false);\r\n        }\r\n        this.states.create(\"default\", {});\r\n        this._setDefaults();\r\n    }\r\n    // This is the same as _afterNew, except it also applies the themes.\r\n    // This should only be used for classes which don't have a parent (because they extend from Entity and not Sprite).\r\n    _afterNewApplyThemes() {\r\n        this._checkDirty();\r\n        const template = this._template;\r\n        if (template) {\r\n            template._setObjectTemplate(this);\r\n        }\r\n        $array.each(this._internalTemplates, (template) => {\r\n            template._setObjectTemplate(this);\r\n        });\r\n        this.states.create(\"default\", {});\r\n        this._setDefaults();\r\n        this._applyThemes();\r\n    }\r\n    _createEvents() {\r\n        return new EventDispatcher();\r\n    }\r\n    /**\r\n     * @ignore\r\n     */\r\n    get classNames() {\r\n        return this.constructor.classNames;\r\n    }\r\n    /**\r\n     * @ignore\r\n     */\r\n    get className() {\r\n        return this.constructor.className;\r\n    }\r\n    _setDefaults() {\r\n    }\r\n    _setDefaultFn(key, f) {\r\n        const value = this.get(key);\r\n        if (value) {\r\n            return value;\r\n        }\r\n        else {\r\n            const value = f();\r\n            this.set(key, value);\r\n            return value;\r\n        }\r\n    }\r\n    _setDefault(key, value) {\r\n        if (!this.has(key)) {\r\n            super.set(key, value);\r\n        }\r\n    }\r\n    _setRawDefault(key, value) {\r\n        if (!this.has(key)) {\r\n            super.setRaw(key, value);\r\n        }\r\n    }\r\n    _clearDirty() {\r\n        $object.keys(this._dirty).forEach((key) => {\r\n            this._dirty[key] = false;\r\n        });\r\n        $object.keys(this._dirtyPrivate).forEach((key) => {\r\n            this._dirtyPrivate[key] = false;\r\n        });\r\n    }\r\n    /**\r\n     * @ignore\r\n     */\r\n    isDirty(key) {\r\n        return !!this._dirty[key];\r\n    }\r\n    /**\r\n     * @ignore\r\n     */\r\n    isPrivateDirty(key) {\r\n        return !!this._dirtyPrivate[key];\r\n    }\r\n    _markDirtyKey(key) {\r\n        this._dirty[key] = true;\r\n        super._markDirtyKey(key);\r\n    }\r\n    _markDirtyPrivateKey(key) {\r\n        this._dirtyPrivate[key] = true;\r\n        super._markDirtyKey(key);\r\n    }\r\n    /**\r\n     * Checks if element is of certain class (or inherits one).\r\n     *\r\n     * @param   type  Class name to check\r\n     * @return {boolean} Is of class?\r\n     */\r\n    isType(type) {\r\n        return this.classNames.indexOf(type) !== -1;\r\n    }\r\n    _pushPropertyDisposer(key, disposer) {\r\n        let disposers = this._disposerProperties[key];\r\n        if (disposers === undefined) {\r\n            disposers = this._disposerProperties[key] = [];\r\n        }\r\n        disposers.push(disposer);\r\n        return disposer;\r\n    }\r\n    _disposeProperty(key) {\r\n        const disposers = this._disposerProperties[key];\r\n        if (disposers !== undefined) {\r\n            $array.each(disposers, (disposer) => {\r\n                disposer.dispose();\r\n            });\r\n            delete this._disposerProperties[key];\r\n        }\r\n    }\r\n    /**\r\n     * @todo needs description\r\n     * @param  value  Template\r\n     */\r\n    set template(value) {\r\n        const template = this._template;\r\n        if (template !== value) {\r\n            this._template = value;\r\n            if (template) {\r\n                template._removeObjectTemplate(this);\r\n            }\r\n            if (value) {\r\n                value._setObjectTemplate(this);\r\n            }\r\n            this._applyTemplates();\r\n        }\r\n    }\r\n    get template() {\r\n        return this._template;\r\n    }\r\n    /**\r\n     * @ignore\r\n     */\r\n    markDirty() {\r\n        this._root._addDirtyEntity(this);\r\n    }\r\n    _startAnimation() {\r\n        this._root._addAnimation(this);\r\n    }\r\n    _animationTime() {\r\n        return this._root.animationTime;\r\n    }\r\n    _applyState(_name) { }\r\n    _applyStateAnimated(_name, _duration) { }\r\n    get(key, fallback) {\r\n        const value = this.adapters.fold(key, this._settings[key]);\r\n        if (value !== undefined) {\r\n            return value;\r\n        }\r\n        else {\r\n            return fallback;\r\n        }\r\n    }\r\n    /**\r\n     * @ignore\r\n     */\r\n    isUserSetting(key) {\r\n        return this._userProperties[key] || false;\r\n    }\r\n    /**\r\n     * Sets a setting `value` for the specified `key`, and returns the same `value`.\r\n     *\r\n     * @see {@link https://www.amcharts.com/docs/v5/concepts/settings/} for more info\r\n     * @param   key       Setting key\r\n     * @param   value     Setting value\r\n     * @return            Setting value\r\n     */\r\n    set(key, value) {\r\n        this._userProperties[key] = true;\r\n        return super.set(key, value);\r\n    }\r\n    /**\r\n     * @ignore\r\n     */\r\n    setRaw(key, value) {\r\n        this._userProperties[key] = true;\r\n        super.setRaw(key, value);\r\n    }\r\n    /**\r\n     * Sets a setting `value` for the specified `key` only if the value for this key was not set previously using set method, and returns the same `value`.\r\n     *\r\n     * @see {@link https://www.amcharts.com/docs/v5/concepts/settings/} for more info\r\n     * @param   key       Setting key\r\n     * @param   value     Setting value\r\n     * @return            Setting value\r\n     */\r\n    _setSoft(key, value) {\r\n        if (!this._userProperties[key]) {\r\n            return super.set(key, value);\r\n        }\r\n        return value;\r\n    }\r\n    /**\r\n     * Removes a setting value for the specified `key`.\r\n     *\r\n     * @see {@link https://www.amcharts.com/docs/v5/concepts/settings/} for more info\r\n     * @param   key       Setting key\r\n     */\r\n    remove(key) {\r\n        delete this._userProperties[key];\r\n        this._removeTemplateProperty(key);\r\n    }\r\n    /**\r\n     * @ignore\r\n     */\r\n    setPrivate(key, value) {\r\n        this._userPrivateProperties[key] = true;\r\n        return super.setPrivate(key, value);\r\n    }\r\n    /**\r\n     * @ignore\r\n     */\r\n    setPrivateRaw(key, value) {\r\n        this._userPrivateProperties[key] = true;\r\n        super.setPrivateRaw(key, value);\r\n    }\r\n    /**\r\n     * @ignore\r\n     */\r\n    removePrivate(key) {\r\n        delete this._userPrivateProperties[key];\r\n        this._removeTemplatePrivateProperty(key);\r\n    }\r\n    _setTemplateProperty(template, key, value) {\r\n        if (!this._userProperties[key]) {\r\n            const match = this._findTemplateByKey(key);\r\n            if (template === match) {\r\n                super.set(key, value);\r\n            }\r\n        }\r\n    }\r\n    _setTemplatePrivateProperty(template, key, value) {\r\n        if (!this._userPrivateProperties[key]) {\r\n            const match = this._findTemplateByPrivateKey(key);\r\n            if (template === match) {\r\n                super.setPrivate(key, value);\r\n            }\r\n        }\r\n    }\r\n    _removeTemplateProperty(key) {\r\n        if (!this._userProperties[key]) {\r\n            const match = this._findTemplateByKey(key);\r\n            if (match) {\r\n                // TODO don't stop the animation if the property didn't change\r\n                super.set(key, match._settings[key]);\r\n            }\r\n            else {\r\n                super.remove(key);\r\n            }\r\n        }\r\n    }\r\n    _removeTemplatePrivateProperty(key) {\r\n        if (!this._userPrivateProperties[key]) {\r\n            const match = this._findTemplateByPrivateKey(key);\r\n            if (match) {\r\n                // TODO don't stop the animation if the property didn't change\r\n                super.setPrivate(key, match._privateSettings[key]);\r\n            }\r\n            else {\r\n                super.removePrivate(key);\r\n            }\r\n        }\r\n    }\r\n    _walkParents(f) {\r\n        f(this._root._rootContainer);\r\n        f(this);\r\n    }\r\n    // TODO faster version of this method which is specialized to just 1 key\r\n    _applyStateByKey(name) {\r\n        const other = this.states.create(name, {});\r\n        const seen = {};\r\n        this._eachTemplate((template) => {\r\n            const state = template.states.lookup(name);\r\n            if (state) {\r\n                state._apply(other, seen);\r\n            }\r\n        });\r\n        $object.each(other._settings, (key) => {\r\n            if (!seen[key] && !other._userSettings[key]) {\r\n                other.remove(key);\r\n            }\r\n        });\r\n    }\r\n    _applyTemplate(template, state) {\r\n        this._templateDisposers.push(template._apply(this, state));\r\n        $object.each(template._settings, (key, value) => {\r\n            if (!state.settings[key] && !this._userProperties[key]) {\r\n                state.settings[key] = true;\r\n                super.set(key, value);\r\n            }\r\n        });\r\n        $object.each(template._privateSettings, (key, value) => {\r\n            if (!state.privateSettings[key] && !this._userPrivateProperties[key]) {\r\n                state.privateSettings[key] = true;\r\n                super.setPrivate(key, value);\r\n            }\r\n        });\r\n        if (this._runSetup && template.setup) {\r\n            this._runSetup = false;\r\n            template.setup(this);\r\n        }\r\n    }\r\n    /**\r\n     * Calls the closure with each template and returns the first template which is true\r\n     */\r\n    _findStaticTemplate(f) {\r\n        if (this._template) {\r\n            if (f(this._template)) {\r\n                return this._template;\r\n            }\r\n        }\r\n    }\r\n    _eachTemplate(f) {\r\n        this._findStaticTemplate((template) => {\r\n            f(template);\r\n            return false;\r\n        });\r\n        // _internalTemplates is sorted with most specific to the right\r\n        $array.eachReverse(this._internalTemplates, f);\r\n        // _templates is sorted with most specific to the left\r\n        $array.each(this._templates, f);\r\n    }\r\n    _applyTemplates(remove = true) {\r\n        if (remove) {\r\n            this._disposeTemplates();\r\n        }\r\n        const state = {\r\n            settings: {},\r\n            privateSettings: {},\r\n            states: {},\r\n        };\r\n        this._eachTemplate((template) => {\r\n            this._applyTemplate(template, state);\r\n        });\r\n        if (remove) {\r\n            $object.each(this._settings, (key) => {\r\n                if (!this._userProperties[key] && !state.settings[key]) {\r\n                    super.remove(key);\r\n                }\r\n            });\r\n            $object.each(this._privateSettings, (key) => {\r\n                if (!this._userPrivateProperties[key] && !state.privateSettings[key]) {\r\n                    super.removePrivate(key);\r\n                }\r\n            });\r\n        }\r\n    }\r\n    _findTemplate(f) {\r\n        const value = this._findStaticTemplate(f);\r\n        if (value === undefined) {\r\n            // _internalTemplates is sorted with most specific to the right\r\n            const value = $array.findReverse(this._internalTemplates, f);\r\n            if (value === undefined) {\r\n                // _templates is sorted with most specific to the left\r\n                return $array.find(this._templates, f);\r\n            }\r\n            else {\r\n                return value;\r\n            }\r\n        }\r\n        else {\r\n            return value;\r\n        }\r\n    }\r\n    _findTemplateByKey(key) {\r\n        return this._findTemplate((template) => {\r\n            return key in template._settings;\r\n        });\r\n    }\r\n    _findTemplateByPrivateKey(key) {\r\n        return this._findTemplate((template) => {\r\n            return key in template._privateSettings;\r\n        });\r\n    }\r\n    _disposeTemplates() {\r\n        $array.each(this._templateDisposers, (disposer) => {\r\n            disposer.dispose();\r\n        });\r\n        this._templateDisposers.length = 0;\r\n    }\r\n    _removeTemplates() {\r\n        $array.each(this._templates, (template) => {\r\n            template._removeObjectTemplate(this);\r\n        });\r\n        this._templates.length = 0;\r\n    }\r\n    _applyThemes(force = false) {\r\n        let isConnected = false;\r\n        const defaults = [];\r\n        let themes = [];\r\n        const themeTags = new Set();\r\n        const tags = this.get(\"themeTagsSelf\");\r\n        if (tags) {\r\n            $array.each(tags, (tag) => {\r\n                themeTags.add(tag);\r\n            });\r\n        }\r\n        this._walkParents((entity) => {\r\n            if (entity === this._root._rootContainer) {\r\n                isConnected = true;\r\n            }\r\n            if (entity._defaultThemes.length > 0) {\r\n                defaults.push(entity._defaultThemes);\r\n            }\r\n            const theme = entity.get(\"themes\");\r\n            if (theme) {\r\n                themes.push(theme);\r\n            }\r\n            const tags = entity.get(\"themeTags\");\r\n            if (tags) {\r\n                $array.each(tags, (tag) => {\r\n                    themeTags.add(tag);\r\n                });\r\n            }\r\n        });\r\n        themes = defaults.concat(themes);\r\n        this._removeTemplates();\r\n        if (isConnected || force) {\r\n            $array.eachReverse(this.classNames, (name) => {\r\n                const allRules = [];\r\n                $array.each(themes, (themes) => {\r\n                    $array.each(themes, (theme) => {\r\n                        const rules = theme._lookupRules(name);\r\n                        if (rules) {\r\n                            $array.eachReverse(rules, (rule) => {\r\n                                const matches = rule.tags.every((tag) => {\r\n                                    return themeTags.has(tag);\r\n                                });\r\n                                if (matches) {\r\n                                    const result = $array.getFirstSortedIndex(allRules, (x) => {\r\n                                        const order = $order.compare(rule.tags.length, x.tags.length);\r\n                                        if (order === 0) {\r\n                                            return $order.compareArray(rule.tags, x.tags, $order.compare);\r\n                                        }\r\n                                        else {\r\n                                            return order;\r\n                                        }\r\n                                    });\r\n                                    allRules.splice(result.index, 0, rule);\r\n                                }\r\n                            });\r\n                        }\r\n                    });\r\n                });\r\n                $array.each(allRules, (rule) => {\r\n                    this._templates.push(rule.template);\r\n                    rule.template._setObjectTemplate(this);\r\n                });\r\n            });\r\n        }\r\n        this._applyTemplates();\r\n        if (isConnected || force) {\r\n            // This causes it to only run the setup function the first time that the themes are applied\r\n            this._runSetup = false;\r\n        }\r\n        return isConnected || force;\r\n    }\r\n    _changed() { }\r\n    _beforeChanged() {\r\n        if (this.isDirty(\"id\")) {\r\n            const id = this.get(\"id\");\r\n            if (id) {\r\n                this._registerId(id);\r\n            }\r\n            const prevId = this._prevSettings.id;\r\n            if (prevId) {\r\n                delete registry.entitiesById[prevId];\r\n            }\r\n        }\r\n    }\r\n    _registerId(id) {\r\n        if (registry.entitiesById[id] && registry.entitiesById[id] !== this) {\r\n            throw new Error(\"An entity with id \\\"\" + id + \"\\\" already exists.\");\r\n        }\r\n        registry.entitiesById[id] = this;\r\n    }\r\n    _afterChanged() { }\r\n    /**\r\n     * @ignore\r\n     */\r\n    addDisposer(disposer) {\r\n        this._disposers.push(disposer);\r\n        return disposer;\r\n    }\r\n    _dispose() {\r\n        super._dispose();\r\n        const template = this._template;\r\n        if (template) {\r\n            template._removeObjectTemplate(this);\r\n        }\r\n        $array.each(this._internalTemplates, (template) => {\r\n            template._removeObjectTemplate(this);\r\n        });\r\n        this._removeTemplates();\r\n        this._disposeTemplates();\r\n        this.events.dispose();\r\n        this._disposers.forEach((x) => {\r\n            x.dispose();\r\n        });\r\n        $object.each(this._disposerProperties, (_, disposers) => {\r\n            $array.each(disposers, (disposer) => {\r\n                disposer.dispose();\r\n            });\r\n        });\r\n        const id = this.get(\"id\");\r\n        if (id) {\r\n            delete registry.entitiesById[id];\r\n        }\r\n    }\r\n    /**\r\n     * Creates and returns a \"disposable\" timeout.\r\n     *\r\n     * @param   fn     Callback\r\n     * @param   delay  Delay in milliseconds\r\n     * @return         Timeout disposer\r\n     */\r\n    setTimeout(fn, delay) {\r\n        const id = setTimeout(() => {\r\n            this.removeDispose(disposer);\r\n            fn();\r\n        }, delay);\r\n        const disposer = new Disposer(() => {\r\n            clearTimeout(id);\r\n        });\r\n        this._disposers.push(disposer);\r\n        return disposer;\r\n    }\r\n    /**\r\n     * @ignore\r\n     */\r\n    removeDispose(target) {\r\n        if (!this.isDisposed()) {\r\n            let index = $array.indexOf(this._disposers, target);\r\n            if (index > -1) {\r\n                this._disposers.splice(index, 1);\r\n            }\r\n        }\r\n        target.dispose();\r\n    }\r\n    /**\r\n     * @ignore\r\n     */\r\n    hasTag(tag) {\r\n        return $array.indexOf(this.get(\"themeTags\", []), tag) !== -1;\r\n    }\r\n    /**\r\n     * @ignore\r\n     */\r\n    addTag(tag) {\r\n        if (!this.hasTag(tag)) {\r\n            const tags = this.get(\"themeTags\", []);\r\n            tags.push(tag);\r\n            this.set(\"themeTags\", tags);\r\n        }\r\n    }\r\n    /**\r\n     * @ignore\r\n     */\r\n    removeTag(tag) {\r\n        if (this.hasTag(tag)) {\r\n            const tags = this.get(\"themeTags\", []);\r\n            $array.remove(tags, tag);\r\n            this.set(\"themeTags\", tags);\r\n        }\r\n    }\r\n    _t(text, locale, ...rest) {\r\n        return this._root.language.translate(text, locale, ...rest);\r\n    }\r\n    /**\r\n     * An instance of [[Root]] object.\r\n     *\r\n     * @readonly\r\n     * @since 5.0.6\r\n     * @return Root object\r\n     */\r\n    get root() {\r\n        return this._root;\r\n    }\r\n}\r\nObject.defineProperty(Entity, \"className\", {\r\n    enumerable: true,\r\n    configurable: true,\r\n    writable: true,\r\n    value: \"Entity\"\r\n});\r\nObject.defineProperty(Entity, \"classNames\", {\r\n    enumerable: true,\r\n    configurable: true,\r\n    writable: true,\r\n    value: [\"Entity\"]\r\n});\r\n//# sourceMappingURL=Entity.js.map","import { EventDispatcher } from \"./EventDispatcher\";\r\nimport { Disposer, MultiDisposer } from \"./Disposer\";\r\nimport * as $array from \"./Array\";\r\nimport * as $object from \"./Object\";\r\nexport class TemplateState {\r\n    constructor(name, template, settings) {\r\n        Object.defineProperty(this, \"_settings\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"_name\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"_template\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        this._name = name;\r\n        this._template = template;\r\n        this._settings = settings;\r\n    }\r\n    get(key, fallback) {\r\n        const value = this._settings[key];\r\n        if (value !== undefined) {\r\n            return value;\r\n        }\r\n        else {\r\n            return fallback;\r\n        }\r\n    }\r\n    set(key, value) {\r\n        this._settings[key] = value;\r\n        // TODO maybe only do this if the value changed ?\r\n        this._template._stateChanged(this._name);\r\n    }\r\n    remove(key) {\r\n        delete this._settings[key];\r\n        // TODO maybe only do this if the value changed ?\r\n        this._template._stateChanged(this._name);\r\n    }\r\n    setAll(settings) {\r\n        $object.keys(settings).forEach((key) => {\r\n            this._settings[key] = settings[key];\r\n        });\r\n        this._template._stateChanged(this._name);\r\n    }\r\n    _apply(other, seen) {\r\n        $object.each(this._settings, (key, value) => {\r\n            if (!seen[key] && !other._userSettings[key]) {\r\n                seen[key] = true;\r\n                other.setRaw(key, value);\r\n            }\r\n        });\r\n    }\r\n}\r\nexport class TemplateStates {\r\n    constructor(template) {\r\n        Object.defineProperty(this, \"_template\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"_states\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: {}\r\n        });\r\n        this._template = template;\r\n    }\r\n    lookup(name) {\r\n        return this._states[name];\r\n    }\r\n    create(name, settings) {\r\n        const state = this._states[name];\r\n        if (state) {\r\n            state.setAll(settings);\r\n            return state;\r\n        }\r\n        else {\r\n            const state = new TemplateState(name, this._template, settings);\r\n            this._states[name] = state;\r\n            this._template._stateChanged(name);\r\n            return state;\r\n        }\r\n    }\r\n    remove(name) {\r\n        delete this._states[name];\r\n        this._template._stateChanged(name);\r\n    }\r\n    _apply(entity, state) {\r\n        $object.each(this._states, (key, value) => {\r\n            let seen = state.states[key];\r\n            if (seen == null) {\r\n                seen = state.states[key] = {};\r\n            }\r\n            const other = entity.states.create(key, {});\r\n            value._apply(other, seen);\r\n        });\r\n    }\r\n}\r\nexport class TemplateAdapters {\r\n    constructor() {\r\n        Object.defineProperty(this, \"_callbacks\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: {}\r\n        });\r\n    }\r\n    add(key, callback) {\r\n        let callbacks = this._callbacks[key];\r\n        if (callbacks === undefined) {\r\n            callbacks = this._callbacks[key] = [];\r\n        }\r\n        callbacks.push(callback);\r\n        return new Disposer(() => {\r\n            $array.removeFirst(callbacks, callback);\r\n            if (callbacks.length === 0) {\r\n                delete this._callbacks[key];\r\n            }\r\n        });\r\n    }\r\n    remove(key) {\r\n        const callbacks = this._callbacks[key];\r\n        if (callbacks !== undefined) {\r\n            delete this._callbacks[key];\r\n        }\r\n    }\r\n    _apply(entity) {\r\n        const disposers = [];\r\n        $object.each(this._callbacks, (key, callbacks) => {\r\n            $array.each(callbacks, (callback) => {\r\n                disposers.push(entity.adapters.add(key, callback));\r\n            });\r\n        });\r\n        return new MultiDisposer(disposers);\r\n    }\r\n}\r\n// TODO maybe extend from Properties ?\r\nexport class Template {\r\n    constructor(settings, isReal) {\r\n        Object.defineProperty(this, \"_settings\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"_privateSettings\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: {}\r\n        });\r\n        // TODO code duplication with Properties\r\n        Object.defineProperty(this, \"_settingEvents\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: {}\r\n        });\r\n        Object.defineProperty(this, \"_privateSettingEvents\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: {}\r\n        });\r\n        Object.defineProperty(this, \"_entities\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: []\r\n        });\r\n        Object.defineProperty(this, \"states\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: new TemplateStates(this)\r\n        });\r\n        Object.defineProperty(this, \"adapters\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: new TemplateAdapters()\r\n        });\r\n        Object.defineProperty(this, \"events\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: new EventDispatcher()\r\n        });\r\n        Object.defineProperty(this, \"setup\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        if (!isReal) {\r\n            throw new Error(\"You cannot use `new Class()`, instead use `Class.new()`\");\r\n        }\r\n        this._settings = settings;\r\n    }\r\n    /**\r\n     * Use this method to create an instance of this class.\r\n     *\r\n     * @see {@link https://www.amcharts.com/docs/v5/getting-started/#New_element_syntax} for more info\r\n     * @param   root      Root element\r\n     * @param   settings  Settings\r\n     * @param   template  Template\r\n     * @return            Instantiated object\r\n     */\r\n    static new(settings) {\r\n        return new Template(settings, true);\r\n    }\r\n    /**\r\n     * Array of all entities using this template.\r\n     */\r\n    get entities() {\r\n        return this._entities;\r\n    }\r\n    get(key, fallback) {\r\n        const value = this._settings[key];\r\n        if (value !== undefined) {\r\n            return value;\r\n        }\r\n        else {\r\n            return fallback;\r\n        }\r\n    }\r\n    setRaw(key, value) {\r\n        this._settings[key] = value;\r\n    }\r\n    set(key, value) {\r\n        if (this._settings[key] !== value) {\r\n            this.setRaw(key, value);\r\n            this._entities.forEach((entity) => {\r\n                entity._setTemplateProperty(this, key, value);\r\n            });\r\n        }\r\n    }\r\n    remove(key) {\r\n        if (key in this._settings) {\r\n            delete this._settings[key];\r\n            this._entities.forEach((entity) => {\r\n                entity._removeTemplateProperty(key);\r\n            });\r\n        }\r\n    }\r\n    removeAll() {\r\n        $object.each(this._settings, (key, _value) => {\r\n            this.remove(key);\r\n        });\r\n    }\r\n    getPrivate(key, fallback) {\r\n        const value = this._privateSettings[key];\r\n        if (value !== undefined) {\r\n            return value;\r\n        }\r\n        else {\r\n            return fallback;\r\n        }\r\n    }\r\n    setPrivateRaw(key, value) {\r\n        this._privateSettings[key] = value;\r\n        return value;\r\n    }\r\n    setPrivate(key, value) {\r\n        if (this._privateSettings[key] !== value) {\r\n            this.setPrivateRaw(key, value);\r\n            this._entities.forEach((entity) => {\r\n                entity._setTemplatePrivateProperty(this, key, value);\r\n            });\r\n        }\r\n        return value;\r\n    }\r\n    removePrivate(key) {\r\n        if (key in this._privateSettings) {\r\n            delete this._privateSettings[key];\r\n            this._entities.forEach((entity) => {\r\n                entity._removeTemplatePrivateProperty(key);\r\n            });\r\n        }\r\n    }\r\n    setAll(value) {\r\n        $object.each(value, (key, value) => {\r\n            this.set(key, value);\r\n        });\r\n    }\r\n    // TODO code duplication with Properties\r\n    on(key, callback) {\r\n        let events = this._settingEvents[key];\r\n        if (events === undefined) {\r\n            events = this._settingEvents[key] = [];\r\n        }\r\n        events.push(callback);\r\n        return new Disposer(() => {\r\n            $array.removeFirst(events, callback);\r\n            if (events.length === 0) {\r\n                delete this._settingEvents[key];\r\n            }\r\n        });\r\n    }\r\n    // TODO code duplication with Properties\r\n    onPrivate(key, callback) {\r\n        let events = this._privateSettingEvents[key];\r\n        if (events === undefined) {\r\n            events = this._privateSettingEvents[key] = [];\r\n        }\r\n        events.push(callback);\r\n        return new Disposer(() => {\r\n            $array.removeFirst(events, callback);\r\n            if (events.length === 0) {\r\n                delete this._privateSettingEvents[key];\r\n            }\r\n        });\r\n    }\r\n    _apply(entity, state) {\r\n        const disposers = [];\r\n        $object.each(this._settingEvents, (key, events) => {\r\n            $array.each(events, (event) => {\r\n                disposers.push(entity.on(key, event));\r\n            });\r\n        });\r\n        $object.each(this._privateSettingEvents, (key, events) => {\r\n            $array.each(events, (event) => {\r\n                disposers.push(entity.onPrivate(key, event));\r\n            });\r\n        });\r\n        this.states._apply(entity, state);\r\n        disposers.push(this.adapters._apply(entity));\r\n        disposers.push(entity.events.copyFrom(this.events));\r\n        return new MultiDisposer(disposers);\r\n    }\r\n    _setObjectTemplate(entity) {\r\n        this._entities.push(entity);\r\n    }\r\n    _removeObjectTemplate(entity) {\r\n        $array.remove(this._entities, entity);\r\n    }\r\n    _stateChanged(name) {\r\n        this._entities.forEach((entity) => {\r\n            entity._applyStateByKey(name);\r\n        });\r\n    }\r\n}\r\n//# sourceMappingURL=Template.js.map","import { __awaiter } from \"tslib\";\r\nimport { Entity } from \"../util/Entity\";\r\nimport { Template } from \"../util/Template\";\r\nimport { Percent } from \"../util/Percent\";\r\nimport { EventDispatcher } from \"../util/EventDispatcher\";\r\nimport { MultiDisposer, CounterDisposer } from \"../util/Disposer\";\r\nimport { waitForAnimations } from \"../util/Animation\";\r\nimport * as $utils from \"../util/Utils\";\r\nimport * as $array from \"../util/Array\";\r\nimport * as $type from \"../util/Type\";\r\nimport * as $object from \"../util/Object\";\r\nimport * as $math from \"../util/Math\";\r\n//import { populateString } from \"../util/PopulateString\";\r\n/**\r\n * An [[EventDispatcher]] for [[Sprite]].\r\n *\r\n * @see {@link https://www.amcharts.com/docs/v5/concepts/events/} for more info\r\n */\r\nclass SpriteEventDispatcher extends EventDispatcher {\r\n    constructor(sprite) {\r\n        super();\r\n        Object.defineProperty(this, \"_sprite\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"_rendererDisposers\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: {}\r\n        });\r\n        Object.defineProperty(this, \"_dispatchParents\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: true\r\n        });\r\n        this._sprite = sprite;\r\n    }\r\n    _makePointerEvent(key, event) {\r\n        return {\r\n            type: key,\r\n            originalEvent: event.event,\r\n            point: event.point,\r\n            simulated: event.simulated,\r\n            native: event.native,\r\n            target: this._sprite\r\n        };\r\n    }\r\n    _onRenderer(key, dispatch) {\r\n        // TODO: is this OK? it'd be good not to require to set this on each individual element\r\n        this._sprite.set(\"interactive\", true);\r\n        this._sprite._display.interactive = true;\r\n        let events = this._rendererDisposers[key];\r\n        if (events === undefined) {\r\n            const disposer = this._sprite._display.on(key, (e) => {\r\n                dispatch.call(this, e);\r\n            });\r\n            events = this._rendererDisposers[key] = new CounterDisposer(() => {\r\n                delete this._rendererDisposers[key];\r\n                disposer.dispose();\r\n            });\r\n        }\r\n        return events.increment();\r\n    }\r\n    _on(once, type, callback, context, shouldClone, dispatch) {\r\n        const info = super._on(once, type, callback, context, shouldClone, dispatch);\r\n        const rendererEvent = SpriteEventDispatcher.RENDERER_EVENTS[type];\r\n        if (rendererEvent !== undefined) {\r\n            info.disposer = new MultiDisposer([\r\n                info.disposer,\r\n                this._onRenderer(type, rendererEvent),\r\n            ]);\r\n        }\r\n        return info;\r\n    }\r\n    /**\r\n     * Will stop any bubbling up of the event to element's parents.\r\n     *\r\n     * Should be called in an event handler, e.g.:\r\n     *\r\n     * ```TypeScript\r\n     * element.events.on(\"pointerdown\", function(ev) {\r\n     *   // Do something here and prevent from \"pointerdown\" bubbling up\r\n     *   // ...\r\n     *   ev.target.events.stopParentDispatch();\r\n     * });\r\n     * ```\r\n     * ```JavaScript\r\n     * element.events.on(\"pointerdown\", function(ev) {\r\n     *   // Do something here and prevent from \"pointerdown\" bubbling up\r\n     *   // ...\r\n     *   ev.target.events.stopParentDispatch();\r\n     * });\r\n     * ```\r\n     */\r\n    stopParentDispatch() {\r\n        this._dispatchParents = false;\r\n    }\r\n    /**\r\n     * @ignore\r\n     */\r\n    dispatchParents(type, event) {\r\n        const old = this._dispatchParents;\r\n        this._dispatchParents = true;\r\n        try {\r\n            this.dispatch(type, event);\r\n            if (this._dispatchParents && this._sprite.parent) {\r\n                this._sprite.parent.events.dispatchParents(type, event);\r\n            }\r\n        }\r\n        finally {\r\n            this._dispatchParents = old;\r\n        }\r\n    }\r\n}\r\nObject.defineProperty(SpriteEventDispatcher, \"RENDERER_EVENTS\", {\r\n    enumerable: true,\r\n    configurable: true,\r\n    writable: true,\r\n    value: {\r\n        \"click\": function (event) {\r\n            if (this.isEnabled(\"click\") && !this._sprite.isDragging() && this._sprite._hasDown() && !this._sprite._hasMoved(this._makePointerEvent(\"click\", event))) {\r\n                this.dispatch(\"click\", this._makePointerEvent(\"click\", event));\r\n            }\r\n        },\r\n        \"rightclick\": function (event) {\r\n            if (this.isEnabled(\"rightclick\")) {\r\n                this.dispatch(\"rightclick\", this._makePointerEvent(\"rightclick\", event));\r\n            }\r\n        },\r\n        \"middleclick\": function (event) {\r\n            if (this.isEnabled(\"middleclick\")) {\r\n                this.dispatch(\"middleclick\", this._makePointerEvent(\"middleclick\", event));\r\n            }\r\n        },\r\n        \"dblclick\": function (event) {\r\n            this.dispatchParents(\"dblclick\", this._makePointerEvent(\"dblclick\", event));\r\n        },\r\n        \"pointerover\": function (event) {\r\n            const sprite = this._sprite;\r\n            let dispatch = true;\r\n            if (sprite.getPrivate(\"trustBounds\")) {\r\n                sprite._getBounds();\r\n                const bounds = sprite.globalBounds();\r\n                if (sprite.isType(\"Graphics\")) {\r\n                    const strokeWidth = sprite.get(\"strokeWidth\", 1) / 2;\r\n                    if (strokeWidth >= 1) {\r\n                        bounds.left -= strokeWidth;\r\n                        bounds.right += strokeWidth;\r\n                        bounds.top -= strokeWidth;\r\n                        bounds.bottom += strokeWidth;\r\n                    }\r\n                }\r\n                if (!$math.inBounds(event.point, bounds)) {\r\n                    dispatch = false;\r\n                    sprite._root._renderer.removeHovering(sprite._display);\r\n                }\r\n            }\r\n            if (dispatch && this.isEnabled(\"pointerover\")) {\r\n                this.dispatch(\"pointerover\", this._makePointerEvent(\"pointerover\", event));\r\n            }\r\n        },\r\n        \"pointerout\": function (event) {\r\n            if (this.isEnabled(\"pointerout\")) {\r\n                this.dispatch(\"pointerout\", this._makePointerEvent(\"pointerout\", event));\r\n            }\r\n        },\r\n        \"pointerdown\": function (event) {\r\n            this.dispatchParents(\"pointerdown\", this._makePointerEvent(\"pointerdown\", event));\r\n        },\r\n        \"pointerup\": function (event) {\r\n            if (this.isEnabled(\"pointerup\")) {\r\n                this.dispatch(\"pointerup\", this._makePointerEvent(\"pointerup\", event));\r\n            }\r\n        },\r\n        \"globalpointerup\": function (event) {\r\n            if (this.isEnabled(\"globalpointerup\")) {\r\n                this.dispatch(\"globalpointerup\", this._makePointerEvent(\"globalpointerup\", event));\r\n            }\r\n        },\r\n        \"globalpointermove\": function (event) {\r\n            if (this.isEnabled(\"globalpointermove\")) {\r\n                this.dispatch(\"globalpointermove\", this._makePointerEvent(\"globalpointermove\", event));\r\n            }\r\n        },\r\n        \"wheel\": function (event) {\r\n            this.dispatchParents(\"wheel\", {\r\n                type: \"wheel\",\r\n                target: this._sprite,\r\n                originalEvent: event.event,\r\n                point: event.point,\r\n            });\r\n        },\r\n    }\r\n});\r\n/**\r\n * A base class for all visual elements.\r\n *\r\n * @important\r\n */\r\nexport class Sprite extends Entity {\r\n    constructor() {\r\n        super(...arguments);\r\n        Object.defineProperty(this, \"_adjustedLocalBounds\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: { left: 0, right: 0, top: 0, bottom: 0 }\r\n        });\r\n        Object.defineProperty(this, \"_localBounds\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: { left: 0, right: 0, top: 0, bottom: 0 }\r\n        });\r\n        Object.defineProperty(this, \"_parent\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"_dataItem\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"_templateField\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"_sizeDirty\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: false\r\n        });\r\n        // Will be true only when dragging\r\n        Object.defineProperty(this, \"_isDragging\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: false\r\n        });\r\n        // The event when the dragging starts\r\n        Object.defineProperty(this, \"_dragEvent\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        // The position when dragging starts\r\n        Object.defineProperty(this, \"_dragPoint\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"_isHidden\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: false\r\n        });\r\n        Object.defineProperty(this, \"_isShowing\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: false\r\n        });\r\n        Object.defineProperty(this, \"_isHiding\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: false\r\n        });\r\n        Object.defineProperty(this, \"_isDown\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: false\r\n        });\r\n        Object.defineProperty(this, \"_downPoint\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"_downPoints\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: {}\r\n        });\r\n        Object.defineProperty(this, \"_toggleDp\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"_dragDp\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"_tooltipDp\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"_hoverDp\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"_focusDp\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"_tooltipMoveDp\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"_tooltipPointerDp\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"_statesHandled\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: false\r\n        });\r\n    }\r\n    _afterNew() {\r\n        this.setPrivateRaw(\"visible\", true);\r\n        super._afterNew();\r\n    }\r\n    /**\r\n     * Marks some setting as dirty. Could be used to trigger adapter.\r\n     * @param key\r\n     */\r\n    markDirtyKey(key) {\r\n        this._markDirtyKey(key);\r\n    }\r\n    _markDirtyKey(key) {\r\n        super._markDirtyKey(key);\r\n        if (key == \"x\" || key == \"y\" || key == \"dx\" || key == \"dy\") {\r\n            this.markDirtyBounds();\r\n            this._addPercentagePositionChildren();\r\n            this.markDirtyPosition();\r\n        }\r\n    }\r\n    _markDirtyPrivateKey(key) {\r\n        super._markDirtyPrivateKey(key);\r\n        if (key == \"x\" || key == \"y\") {\r\n            this.markDirtyPosition();\r\n        }\r\n    }\r\n    _removeTemplateField() {\r\n        if (this._templateField) {\r\n            this._templateField._removeObjectTemplate(this);\r\n        }\r\n    }\r\n    _createEvents() {\r\n        return new SpriteEventDispatcher(this);\r\n    }\r\n    _processTemplateField() {\r\n        let template;\r\n        const field = this.get(\"templateField\");\r\n        if (field) {\r\n            const dataItem = this.dataItem;\r\n            if (dataItem) {\r\n                const context = dataItem.dataContext;\r\n                if (context) {\r\n                    template = context[field];\r\n                    if (!(template instanceof Template) && template) {\r\n                        template = Template.new(template);\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        if (this._templateField !== template) {\r\n            this._removeTemplateField();\r\n            this._templateField = template;\r\n            if (template) {\r\n                template._setObjectTemplate(this);\r\n            }\r\n            this._applyTemplates();\r\n        }\r\n    }\r\n    // TODO change this to run before the element is added to the parent, so that way\r\n    //      it doesn't need to apply the themes twice\r\n    _setDataItem(dataItem) {\r\n        const oldDataItem = this._dataItem;\r\n        this._dataItem = dataItem;\r\n        this._processTemplateField();\r\n        const eventType = \"dataitemchanged\";\r\n        if (dataItem != oldDataItem) {\r\n            if (this.events.isEnabled(eventType)) {\r\n                this.events.dispatch(eventType, {\r\n                    type: eventType,\r\n                    target: this,\r\n                    oldDataItem: oldDataItem,\r\n                    newDataItem: dataItem\r\n                });\r\n            }\r\n        }\r\n    }\r\n    /**\r\n     * A [[DataItem]] used for this element.\r\n     *\r\n     * NOTE: data item is being assigned automatically in most cases where it\r\n     * matters. Use this accessor to set data item only if you know what you're\r\n     * doing.\r\n     *\r\n     * @param  value  Data item\r\n     */\r\n    set dataItem(value) {\r\n        this._setDataItem(value);\r\n    }\r\n    /**\r\n     * @return DataItem\r\n     */\r\n    get dataItem() {\r\n        if (this._dataItem) {\r\n            return this._dataItem;\r\n        }\r\n        else {\r\n            let parent = this._parent;\r\n            while (parent) {\r\n                if (parent._dataItem) {\r\n                    return parent._dataItem;\r\n                }\r\n                else {\r\n                    parent = parent._parent;\r\n                }\r\n            }\r\n        }\r\n    }\r\n    _addPercentageSizeChildren() {\r\n        let parent = this.parent;\r\n        if (parent) {\r\n            if (this.get(\"width\") instanceof Percent || this.get(\"height\") instanceof Percent) {\r\n                $array.pushOne(parent._percentageSizeChildren, this);\r\n            }\r\n            else {\r\n                $array.removeFirst(parent._percentageSizeChildren, this);\r\n            }\r\n        }\r\n    }\r\n    _addPercentagePositionChildren() {\r\n        let parent = this.parent;\r\n        if (parent) {\r\n            if (this.get(\"x\") instanceof Percent || this.get(\"y\") instanceof Percent) {\r\n                $array.pushOne(parent._percentagePositionChildren, this);\r\n            }\r\n            else {\r\n                $array.removeFirst(parent._percentagePositionChildren, this);\r\n            }\r\n        }\r\n    }\r\n    /**\r\n     * @ignore\r\n     */\r\n    markDirtyPosition() {\r\n        this._root._addDirtyPosition(this);\r\n    }\r\n    updatePivotPoint() {\r\n        const bounds = this._localBounds;\r\n        if (bounds) {\r\n            const centerX = this.get(\"centerX\");\r\n            if (centerX != null) {\r\n                this._display.pivot.x = bounds.left + $utils.relativeToValue(centerX, bounds.right - bounds.left);\r\n            }\r\n            const centerY = this.get(\"centerY\");\r\n            if (centerY != null) {\r\n                this._display.pivot.y = bounds.top + $utils.relativeToValue(centerY, bounds.bottom - bounds.top);\r\n            }\r\n        }\r\n    }\r\n    _beforeChanged() {\r\n        super._beforeChanged();\r\n        // handling states in beforeChanged, otherwise states is not applied without animated theme\r\n        this._handleStates();\r\n        if (this.isDirty(\"tooltip\")) {\r\n            const previous = this._prevSettings.tooltip;\r\n            if (previous) {\r\n                previous.dispose();\r\n            }\r\n        }\r\n        if (this.isDirty(\"layer\") || this.isDirty(\"layerMargin\")) {\r\n            this._display.setLayer(this.get(\"layer\"), this.get(\"layerMargin\"));\r\n            this.markDirtyLayer();\r\n        }\r\n        if (this.isDirty(\"tooltipPosition\")) {\r\n            const tooltipMoveDp = this._tooltipMoveDp;\r\n            if (tooltipMoveDp) {\r\n                tooltipMoveDp.dispose();\r\n                this._tooltipMoveDp = undefined;\r\n            }\r\n            const tooltipPointerDp = this._tooltipPointerDp;\r\n            if (tooltipPointerDp) {\r\n                tooltipPointerDp.dispose();\r\n                this._tooltipPointerDp = undefined;\r\n            }\r\n            if (this.get(\"tooltipPosition\") == \"pointer\") {\r\n                if (this.isHover()) {\r\n                    this._tooltipMoveDp = this.events.on(\"globalpointermove\", (e) => {\r\n                        this.showTooltip(e.point);\r\n                    });\r\n                }\r\n                this._tooltipPointerDp = new MultiDisposer([\r\n                    this.events.on(\"pointerover\", () => {\r\n                        this._tooltipMoveDp = this.events.on(\"globalpointermove\", (e) => {\r\n                            this.showTooltip(e.point);\r\n                        });\r\n                    }),\r\n                    this.events.on(\"pointerout\", () => {\r\n                        const tooltipMoveDp = this._tooltipMoveDp;\r\n                        if (tooltipMoveDp) {\r\n                            tooltipMoveDp.dispose();\r\n                            this._tooltipMoveDp = undefined;\r\n                        }\r\n                    })\r\n                ]);\r\n            }\r\n        }\r\n    }\r\n    _handleStates() {\r\n        if (!this._statesHandled) {\r\n            if (this.isDirty(\"active\")) {\r\n                if (this.get(\"active\")) {\r\n                    this.states.applyAnimate(\"active\");\r\n                    this.set(\"ariaChecked\", true);\r\n                }\r\n                else {\r\n                    if (!this.isHidden()) {\r\n                        this.states.applyAnimate(\"default\");\r\n                    }\r\n                    this.set(\"ariaChecked\", false);\r\n                }\r\n                this.markDirtyAccessibility();\r\n            }\r\n            if (this.isDirty(\"disabled\")) {\r\n                if (this.get(\"disabled\")) {\r\n                    this.states.applyAnimate(\"disabled\");\r\n                    this.set(\"ariaChecked\", false);\r\n                }\r\n                else {\r\n                    if (!this.isHidden()) {\r\n                        this.states.applyAnimate(\"default\");\r\n                    }\r\n                    this.set(\"ariaChecked\", true);\r\n                }\r\n                this.markDirtyAccessibility();\r\n            }\r\n            this._statesHandled = true;\r\n        }\r\n    }\r\n    _changed() {\r\n        super._changed();\r\n        const display = this._display;\r\n        const events = this.events;\r\n        if (this.isDirty(\"draggable\")) {\r\n            const draggable = this.get(\"draggable\");\r\n            if (draggable) {\r\n                this.set(\"interactive\", true);\r\n                this._dragDp = new MultiDisposer([\r\n                    events.on(\"pointerdown\", (ev) => {\r\n                        this.dragStart(ev);\r\n                    }),\r\n                    events.on(\"globalpointermove\", (ev) => {\r\n                        this.dragMove(ev);\r\n                    }),\r\n                    events.on(\"globalpointerup\", (ev) => {\r\n                        this.dragStop(ev);\r\n                    })\r\n                ]);\r\n            }\r\n            else {\r\n                if (this._dragDp) {\r\n                    this._dragDp.dispose();\r\n                    this._dragDp = undefined;\r\n                }\r\n            }\r\n            display.cancelTouch = draggable ? true : false;\r\n        }\r\n        if (this.isDirty(\"tooltipText\") || this.isDirty(\"tooltipHTML\") || this.isDirty(\"showTooltipOn\")) {\r\n            const tooltipText = this.get(\"tooltipText\");\r\n            const tooltipHTML = this.get(\"tooltipHTML\");\r\n            const showTooltipOn = this.get(\"showTooltipOn\", \"hover\");\r\n            if (this._tooltipDp) {\r\n                this._tooltipDp.dispose();\r\n                this._tooltipDp = undefined;\r\n            }\r\n            if (tooltipText || tooltipHTML) {\r\n                if (showTooltipOn == \"click\") {\r\n                    this._tooltipDp = new MultiDisposer([\r\n                        events.on(\"click\", () => {\r\n                            this.setTimeout(() => this.showTooltip(), 10);\r\n                        }),\r\n                        $utils.addEventListener(document, \"click\", (_ev) => {\r\n                            this.hideTooltip();\r\n                        })\r\n                    ]);\r\n                    this._disposers.push(this._tooltipDp);\r\n                }\r\n                else if (showTooltipOn == \"always\") {\r\n                    // nothing\r\n                }\r\n                else {\r\n                    this._tooltipDp = new MultiDisposer([\r\n                        events.on(\"pointerover\", () => {\r\n                            this.showTooltip();\r\n                        }),\r\n                        events.on(\"pointerout\", () => {\r\n                            this.hideTooltip();\r\n                        })\r\n                    ]);\r\n                    this._disposers.push(this._tooltipDp);\r\n                }\r\n            }\r\n        }\r\n        if (this.isDirty(\"toggleKey\")) {\r\n            let toggleKey = this.get(\"toggleKey\");\r\n            if (toggleKey && toggleKey != \"none\") {\r\n                this._toggleDp = events.on(\"click\", () => {\r\n                    if (!this._isDragging) {\r\n                        this.set(toggleKey, !this.get(toggleKey));\r\n                    }\r\n                });\r\n            }\r\n            else {\r\n                if (this._toggleDp) {\r\n                    this._toggleDp.dispose();\r\n                    this._toggleDp = undefined;\r\n                }\r\n            }\r\n        }\r\n        if (this.isDirty(\"opacity\")) {\r\n            display.alpha = Math.max(0, this.get(\"opacity\", 1));\r\n            if (this.get(\"focusable\")) {\r\n                this.markDirtyAccessibility();\r\n            }\r\n        }\r\n        if (this.isDirty(\"rotation\")) {\r\n            this.markDirtyBounds();\r\n            display.angle = this.get(\"rotation\", 0);\r\n        }\r\n        if (this.isDirty(\"scale\")) {\r\n            this.markDirtyBounds();\r\n            display.scale = this.get(\"scale\", 0);\r\n        }\r\n        if (this.isDirty(\"centerX\") || this.isDirty(\"centerY\")) {\r\n            this.markDirtyBounds();\r\n            this.updatePivotPoint();\r\n        }\r\n        if (this.isDirty(\"visible\") || this.isPrivateDirty(\"visible\") || this.isDirty(\"forceHidden\")) {\r\n            if (!this.get(\"visible\") || !this.getPrivate(\"visible\") || this.get(\"forceHidden\")) {\r\n                display.visible = false;\r\n                this.hideTooltip();\r\n            }\r\n            else {\r\n                display.visible = true;\r\n            }\r\n            this.markDirtyBounds();\r\n            if (this.get(\"focusable\")) {\r\n                this.markDirtyAccessibility();\r\n            }\r\n        }\r\n        if (this.isDirty(\"width\") || this.isDirty(\"height\")) {\r\n            this.markDirtyBounds();\r\n            this._addPercentageSizeChildren();\r\n            const parent = this.parent;\r\n            if (parent) {\r\n                if ((this.isDirty(\"width\") && this.get(\"width\") instanceof Percent) || (this.isDirty(\"height\") && this.get(\"height\") instanceof Percent)) {\r\n                    parent.markDirty();\r\n                    parent._prevWidth = 0;\r\n                }\r\n            }\r\n            this._sizeDirty = true;\r\n        }\r\n        if (this.isDirty(\"maxWidth\") || this.isDirty(\"maxHeight\") || this.isPrivateDirty(\"width\") || this.isPrivateDirty(\"height\") || this.isDirty(\"minWidth\") || this.isDirty(\"minHeight\") || this.isPrivateDirty(\"maxWidth\") || this.isPrivateDirty(\"maxHeight\") || this.isPrivateDirty(\"minWidth\") || this.isPrivateDirty(\"minHeight\") || this.isDirty(\"marginLeft\") || this.isDirty(\"marginTop\") || this.isDirty(\"marginRight\") || this.isDirty(\"marginBottom\")) {\r\n            this.markDirtyBounds();\r\n            this._sizeDirty = true;\r\n        }\r\n        if (this._sizeDirty) {\r\n            this._updateSize();\r\n        }\r\n        if (this.isDirty(\"wheelable\")) {\r\n            const wheelable = this.get(\"wheelable\");\r\n            if (wheelable) {\r\n                this.set(\"interactive\", true);\r\n            }\r\n            display.wheelable = wheelable ? true : false;\r\n        }\r\n        // Accessibility\r\n        if (this.isDirty(\"tabindexOrder\") || this.isDirty(\"focusableGroup\")) {\r\n            if (this.get(\"focusable\")) {\r\n                this._root._registerTabindexOrder(this);\r\n            }\r\n            else {\r\n                this._root._unregisterTabindexOrder(this);\r\n            }\r\n        }\r\n        if (this.isDirty(\"filter\")) {\r\n            //this.markDirtyBounds();\r\n            display.filter = this.get(\"filter\");\r\n        }\r\n        let filter = this.get(\"filter\", \"\");\r\n        if (this.isDirty(\"blur\")) {\r\n            const blur = this.get(\"blur\", 0);\r\n            if (blur != 0) {\r\n                filter += \" blur(\" + blur + \"px)\";\r\n            }\r\n        }\r\n        if (this.isDirty(\"saturate\")) {\r\n            const saturate = this.get(\"saturate\", 1);\r\n            if (saturate != 1) {\r\n                filter += \" saturate(\" + saturate + \")\";\r\n            }\r\n        }\r\n        if (this.isDirty(\"brightness\")) {\r\n            const brightness = this.get(\"brightness\", 1);\r\n            if (brightness != 1) {\r\n                filter += \" brightness(\" + brightness + \")\";\r\n            }\r\n        }\r\n        if (this.isDirty(\"contrast\")) {\r\n            const contrast = this.get(\"contrast\", 1);\r\n            if (contrast != 1) {\r\n                filter += \" contrast(\" + contrast + \")\";\r\n            }\r\n        }\r\n        if (this.isDirty(\"sepia\")) {\r\n            const sepia = this.get(\"sepia\", 0);\r\n            if (sepia != 0) {\r\n                filter += \" sepia(\" + sepia + \")\";\r\n            }\r\n        }\r\n        if (this.isDirty(\"hue\")) {\r\n            const hue = this.get(\"hue\", 0);\r\n            if (hue != 0) {\r\n                filter += \" hue-rotate(\" + hue + \"deg)\";\r\n            }\r\n        }\r\n        if (this.isDirty(\"invert\")) {\r\n            const invert = this.get(\"invert\", 0);\r\n            if (invert != 0) {\r\n                filter += \" invert(\" + invert + \")\";\r\n            }\r\n        }\r\n        if (filter) {\r\n            display.filter = filter;\r\n        }\r\n        if (this.isDirty(\"cursorOverStyle\")) {\r\n            display.cursorOverStyle = this.get(\"cursorOverStyle\");\r\n        }\r\n        if (this.isDirty(\"hoverOnFocus\")) {\r\n            if (this.get(\"hoverOnFocus\")) {\r\n                this._focusDp = new MultiDisposer([\r\n                    events.on(\"focus\", () => {\r\n                        // TODO: proper hover, not just tooltip\r\n                        this.showTooltip();\r\n                    }),\r\n                    events.on(\"blur\", () => {\r\n                        // TODO: proper hover, not just tooltip\r\n                        this.hideTooltip();\r\n                    })\r\n                ]);\r\n            }\r\n            else {\r\n                if (this._focusDp) {\r\n                    this._focusDp.dispose();\r\n                    this._focusDp = undefined;\r\n                }\r\n            }\r\n        }\r\n        if (this.isDirty(\"focusable\")) {\r\n            if (this.get(\"focusable\")) {\r\n                this._root._registerTabindexOrder(this);\r\n            }\r\n            else {\r\n                this._root._unregisterTabindexOrder(this);\r\n            }\r\n            this.markDirtyAccessibility();\r\n        }\r\n        if (this.isPrivateDirty(\"focusable\")) {\r\n            this.markDirtyAccessibility();\r\n        }\r\n        if (this.isDirty(\"role\") || this.isDirty(\"ariaLive\") || this.isDirty(\"ariaChecked\") || this.isDirty(\"ariaHidden\") || this.isDirty(\"ariaOrientation\") || this.isDirty(\"ariaValueNow\") || this.isDirty(\"ariaValueMin\") || this.isDirty(\"ariaValueMax\") || this.isDirty(\"ariaValueText\") || this.isDirty(\"ariaLabel\") || this.isDirty(\"ariaControls\")) {\r\n            // display.accessibility.ariaLabel = populateString(this, this.get(\"ariaLabel\", \"\"));\r\n            // @todo make sure ariaLabel gets populated in Root\r\n            this.markDirtyAccessibility();\r\n        }\r\n        if (this.isDirty(\"exportable\")) {\r\n            display.exportable = this.get(\"exportable\");\r\n        }\r\n        if (this.isDirty(\"interactive\")) {\r\n            const events = this.events;\r\n            if (this.get(\"interactive\") && !events.isDisposed()) {\r\n                this._hoverDp = new MultiDisposer([\r\n                    events.on(\"click\", (ev) => {\r\n                        if ($utils.isTouchEvent(ev.originalEvent)) {\r\n                            if (!this.getPrivate(\"touchHovering\")) {\r\n                                this.setTimeout(() => {\r\n                                    this._handleOver();\r\n                                    if (this.get(\"tooltipText\") || this.get(\"tooltipHTML\")) {\r\n                                        this.showTooltip();\r\n                                    }\r\n                                    this.setPrivateRaw(\"touchHovering\", true);\r\n                                    this.events.dispatch(\"pointerover\", {\r\n                                        type: \"pointerover\",\r\n                                        target: ev.target,\r\n                                        originalEvent: ev.originalEvent,\r\n                                        point: ev.point,\r\n                                        simulated: ev.simulated\r\n                                    });\r\n                                }, 10);\r\n                            }\r\n                        }\r\n                    }),\r\n                    events.on(\"globalpointerup\", (ev) => {\r\n                        if ($utils.isTouchEvent(ev.originalEvent)) {\r\n                            if (this.getPrivate(\"touchHovering\")) {\r\n                                this._handleOut();\r\n                                if (this.get(\"tooltipText\") || this.get(\"tooltipHTML\")) {\r\n                                    this.hideTooltip();\r\n                                }\r\n                                this.setPrivateRaw(\"touchHovering\", false);\r\n                                this.events.dispatch(\"pointerout\", {\r\n                                    type: \"pointerout\",\r\n                                    target: ev.target,\r\n                                    originalEvent: ev.originalEvent,\r\n                                    point: ev.point,\r\n                                    simulated: ev.simulated\r\n                                });\r\n                            }\r\n                        }\r\n                        if (this._isDown) {\r\n                            this._handleUp(ev);\r\n                        }\r\n                        //this._isDown = false;\r\n                    }),\r\n                    events.on(\"pointerover\", () => {\r\n                        this._handleOver();\r\n                    }),\r\n                    events.on(\"pointerout\", () => {\r\n                        this._handleOut();\r\n                    }),\r\n                    events.on(\"pointerdown\", (e) => {\r\n                        this._handleDown(e);\r\n                    })\r\n                ]);\r\n            }\r\n            else {\r\n                this._display.interactive = false;\r\n                if (this._hoverDp) {\r\n                    this._hoverDp.dispose();\r\n                    this._hoverDp = undefined;\r\n                }\r\n            }\r\n        }\r\n        if (this.isDirty(\"forceInactive\")) {\r\n            this._display.inactive = this.get(\"forceInactive\", null);\r\n        }\r\n        if (this.get(\"showTooltipOn\") == \"always\" && this._display.visible) {\r\n            this.showTooltip();\r\n        }\r\n    }\r\n    /**\r\n     * @ignore\r\n     * @todo should this be user-accessible?\r\n     */\r\n    dragStart(e) {\r\n        this._dragEvent = e;\r\n        this.events.stopParentDispatch();\r\n    }\r\n    /**\r\n     * @ignore\r\n     * @todo should this be user-accessible?\r\n     */\r\n    dragStop(e) {\r\n        this._dragEvent = undefined;\r\n        this._dragPoint = undefined;\r\n        this.events.stopParentDispatch();\r\n        if (this._isDragging) {\r\n            this._isDragging = false;\r\n            const type = \"dragstop\";\r\n            if (this.events.isEnabled(type)) {\r\n                this.events.dispatch(type, {\r\n                    type: type,\r\n                    target: this,\r\n                    originalEvent: e.originalEvent,\r\n                    point: e.point,\r\n                    simulated: e.simulated,\r\n                });\r\n            }\r\n        }\r\n    }\r\n    _handleOver() {\r\n        if (!this.isHidden()) {\r\n            if (this.get(\"active\") && this.states.lookup(\"hoverActive\")) {\r\n                this.states.applyAnimate(\"hoverActive\");\r\n            }\r\n            else if (this.get(\"disabled\") && this.states.lookup(\"hoverDisabled\")) {\r\n                this.states.applyAnimate(\"hoverDisabled\");\r\n            }\r\n            else {\r\n                this.states.applyAnimate(\"hover\");\r\n            }\r\n            if (this.get(\"draggable\") && this._isDown && this.states.lookup(\"down\")) {\r\n                this.states.applyAnimate(\"down\");\r\n            }\r\n        }\r\n    }\r\n    _handleOut() {\r\n        if (!this.isHidden()) {\r\n            if (this.get(\"active\") && this.states.lookup(\"active\")) {\r\n                this.states.applyAnimate(\"active\");\r\n            }\r\n            else if (this.get(\"disabled\") && this.states.lookup(\"disabled\")) {\r\n                this.states.applyAnimate(\"disabled\");\r\n            }\r\n            else {\r\n                if (this.states.lookup(\"hover\") || this.states.lookup(\"hoverActive\")) {\r\n                    this.states.applyAnimate(\"default\");\r\n                }\r\n            }\r\n            if (this.get(\"draggable\") && this._isDown && this.states.lookup(\"down\")) {\r\n                this.states.applyAnimate(\"down\");\r\n            }\r\n        }\r\n    }\r\n    _handleUp(e) {\r\n        if (!this.isHidden()) {\r\n            if (this.get(\"active\") && this.states.lookup(\"active\")) {\r\n                this.states.applyAnimate(\"active\");\r\n            }\r\n            else if (this.get(\"disabled\") && this.states.lookup(\"disabled\")) {\r\n                this.states.applyAnimate(\"disabled\");\r\n            }\r\n            else if (this.states.lookup(\"down\")) {\r\n                if (this.isHover()) {\r\n                    this.states.applyAnimate(\"hover\");\r\n                }\r\n                else {\r\n                    this.states.applyAnimate(\"default\");\r\n                }\r\n            }\r\n            // @todo remove this once migrated to _downPoints\r\n            this._downPoint = undefined;\r\n            const pointerId = $utils.getPointerId(e.originalEvent);\r\n            delete this._downPoints[pointerId];\r\n            if ($object.keys(this._downPoints).length == 0) {\r\n                this._isDown = false;\r\n            }\r\n        }\r\n    }\r\n    _hasMoved(e) {\r\n        // @todo remove this once migrated to _downPoints\r\n        // if (this._downPoint) {\r\n        // \tconst x = Math.abs(this._downPoint.x - e.point.x);\r\n        // \tconst y = Math.abs(this._downPoint.y - e.point.y);\r\n        // \treturn (x > 5) || (y > 5);\r\n        // }\r\n        const pointerId = $utils.getPointerId(e.originalEvent);\r\n        const downPoint = this._downPoints[pointerId];\r\n        if (downPoint) {\r\n            const x = Math.abs(downPoint.x - e.point.x);\r\n            const y = Math.abs(downPoint.y - e.point.y);\r\n            return (x > 5) || (y > 5);\r\n        }\r\n        return false;\r\n    }\r\n    _hasDown() {\r\n        return $object.keys(this._downPoints).length > 0;\r\n    }\r\n    _handleDown(e) {\r\n        const parent = this.parent;\r\n        if (parent && !this.get(\"draggable\")) {\r\n            parent._handleDown(e);\r\n        }\r\n        if (this.get(\"interactive\") && !this.isHidden()) {\r\n            if (this.states.lookup(\"down\")) {\r\n                this.states.applyAnimate(\"down\");\r\n            }\r\n            this._downPoint = {\r\n                x: e.point.x,\r\n                y: e.point.y\r\n            };\r\n            // @todo remove this once migrated to _downPoints\r\n            this._isDown = true;\r\n            const pointerId = $utils.getPointerId(e.originalEvent);\r\n            this._downPoints[pointerId] = {\r\n                x: e.point.x,\r\n                y: e.point.y\r\n            };\r\n        }\r\n    }\r\n    /**\r\n     * @ignore\r\n     * @todo should this be user-accessible?\r\n     */\r\n    dragMove(e) {\r\n        let dragEvent = this._dragEvent;\r\n        if (dragEvent) {\r\n            if (dragEvent.simulated && !e.simulated) {\r\n                return true;\r\n            }\r\n            let angle = 0;\r\n            let parent = this.parent;\r\n            let scale = 1;\r\n            while (parent != null) {\r\n                angle += parent.get(\"rotation\", 0);\r\n                parent = parent.parent;\r\n                if (parent) {\r\n                    scale *= parent.get(\"scale\", 1);\r\n                }\r\n            }\r\n            let x = (e.point.x - dragEvent.point.x) / scale;\r\n            let y = (e.point.y - dragEvent.point.y) / scale;\r\n            const events = this.events;\r\n            if (dragEvent.simulated && !this._isDragging) {\r\n                this._isDragging = true;\r\n                this._dragEvent = e;\r\n                this._dragPoint = {\r\n                    x: this.x(),\r\n                    y: this.y()\r\n                };\r\n                const type = \"dragstart\";\r\n                if (events.isEnabled(type)) {\r\n                    events.dispatch(type, {\r\n                        type: type,\r\n                        target: this,\r\n                        originalEvent: e.originalEvent,\r\n                        point: e.point,\r\n                        simulated: e.simulated,\r\n                    });\r\n                }\r\n            }\r\n            if (this._isDragging) {\r\n                let dragPoint = this._dragPoint;\r\n                this.set(\"x\", dragPoint.x + x * $math.cos(angle) + y * $math.sin(angle));\r\n                this.set(\"y\", dragPoint.y + y * $math.cos(angle) - x * $math.sin(angle));\r\n                const type = \"dragged\";\r\n                if (events.isEnabled(type)) {\r\n                    events.dispatch(type, {\r\n                        type: type,\r\n                        target: this,\r\n                        originalEvent: e.originalEvent,\r\n                        point: e.point,\r\n                        simulated: e.simulated,\r\n                    });\r\n                }\r\n            }\r\n            else {\r\n                if (Math.hypot(x, y) > 5) {\r\n                    this._isDragging = true;\r\n                    this._dragEvent = e;\r\n                    this._dragPoint = {\r\n                        x: this.x(),\r\n                        y: this.y()\r\n                    };\r\n                    const type = \"dragstart\";\r\n                    if (events.isEnabled(type)) {\r\n                        events.dispatch(type, {\r\n                            type: type,\r\n                            target: this,\r\n                            originalEvent: e.originalEvent,\r\n                            point: e.point,\r\n                            simulated: e.simulated\r\n                        });\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n    _updateSize() {\r\n    }\r\n    _getBounds() {\r\n        this._localBounds = this._display.getLocalBounds();\r\n    }\r\n    /**\r\n     * Returns depth (how deep in the hierachy of the content tree) of this\r\n     * element.\r\n     *\r\n     * @return Depth\r\n     */\r\n    depth() {\r\n        let self = this.parent;\r\n        let depth = 0;\r\n        while (true) {\r\n            if (self) {\r\n                ++depth;\r\n                self = self.parent;\r\n            }\r\n            else {\r\n                return depth;\r\n            }\r\n        }\r\n    }\r\n    /**\r\n     * @ignore\r\n     */\r\n    markDirtySize() {\r\n        this._sizeDirty = true;\r\n        this.markDirty();\r\n    }\r\n    /**\r\n     * @ignore\r\n     */\r\n    markDirtyBounds() {\r\n        const display = this._display;\r\n        if (this.get(\"isMeasured\")) {\r\n            this._root._addDirtyBounds(this);\r\n            display.isMeasured = true;\r\n            display.invalidateBounds();\r\n            const parent = this.parent;\r\n            if (parent && this.get(\"position\") != \"absolute\") {\r\n                if (parent.get(\"width\") == null || parent.get(\"height\") == null || parent.get(\"layout\")) {\r\n                    parent.markDirtyBounds();\r\n                }\r\n            }\r\n            if (this.get(\"focusable\") && this.isFocus()) {\r\n                this.markDirtyAccessibility();\r\n            }\r\n        }\r\n    }\r\n    /**\r\n     * @ignore\r\n     */\r\n    markDirtyAccessibility() {\r\n        //if (this._root.focused(this)) {\r\n        this._root._invalidateAccessibility(this);\r\n        //}\r\n    }\r\n    /**\r\n     * @ignore\r\n     */\r\n    markDirtyLayer() {\r\n        //this._display.markDirtyLayer(this.isDirty(\"opacity\") || this.isDirty(\"visible\")); https://codepen.io/team/amcharts/pen/gOWZPmP <- problems\r\n        this._display.markDirtyLayer(true);\r\n    }\r\n    /**\r\n     * @ignore\r\n     */\r\n    markDirty() {\r\n        super.markDirty();\r\n        this.markDirtyLayer();\r\n    }\r\n    _updateBounds() {\r\n        const oldBounds = this._adjustedLocalBounds;\r\n        let newBounds;\r\n        // if display.visible == false, it still returns bounds\r\n        if (!this.get(\"visible\") || !this.getPrivate(\"visible\") || this.get(\"forceHidden\")) {\r\n            newBounds = {\r\n                left: 0,\r\n                right: 0,\r\n                top: 0,\r\n                bottom: 0\r\n            };\r\n            this._localBounds = newBounds;\r\n            this._adjustedLocalBounds = newBounds;\r\n        }\r\n        else {\r\n            this._getBounds();\r\n            this._fixMinBounds(this._localBounds);\r\n            this.updatePivotPoint();\r\n            this._adjustedLocalBounds = this._display.getAdjustedBounds(this._localBounds);\r\n            newBounds = this._adjustedLocalBounds;\r\n        }\r\n        if (!oldBounds || (oldBounds.left !== newBounds.left || oldBounds.top !== newBounds.top || oldBounds.right !== newBounds.right || oldBounds.bottom !== newBounds.bottom)) {\r\n            const eventType = \"boundschanged\";\r\n            if (this.events.isEnabled(eventType)) {\r\n                this.events.dispatch(eventType, { type: eventType, target: this });\r\n            }\r\n            if (this.parent) {\r\n                this.parent.markDirty();\r\n                this.parent.markDirtyBounds();\r\n            }\r\n            // Update tooltip position together with the Sprite\r\n            if (this.getPrivate(\"showingTooltip\")) {\r\n                this.showTooltip();\r\n            }\r\n        }\r\n    }\r\n    _fixMinBounds(bounds) {\r\n        let minWidth = this.get(\"minWidth\", this.getPrivate(\"minWidth\"));\r\n        let minHeight = this.get(\"minHeight\", this.getPrivate(\"minHeight\"));\r\n        if ($type.isNumber(minWidth)) {\r\n            if (bounds.right - bounds.left < minWidth) {\r\n                bounds.right = bounds.left + minWidth;\r\n            }\r\n        }\r\n        if ($type.isNumber(minHeight)) {\r\n            if (bounds.bottom - bounds.top < minHeight) {\r\n                bounds.bottom = bounds.top + minHeight;\r\n            }\r\n        }\r\n        let privateWidth = this.getPrivate(\"width\");\r\n        let privateHeight = this.getPrivate(\"height\");\r\n        if ($type.isNumber(privateWidth)) {\r\n            if (privateWidth > 0) {\r\n                bounds.right = bounds.left + privateWidth;\r\n            }\r\n            else {\r\n                bounds.left = bounds.right + privateWidth;\r\n            }\r\n        }\r\n        if ($type.isNumber(privateHeight)) {\r\n            if (privateHeight > 0) {\r\n                bounds.bottom = bounds.top + privateHeight;\r\n            }\r\n            else {\r\n                bounds.top = bounds.bottom + privateHeight;\r\n            }\r\n        }\r\n    }\r\n    _removeParent(parent) {\r\n        if (parent) {\r\n            parent.children.removeValue(this);\r\n            $array.removeFirst(parent._percentageSizeChildren, this);\r\n            $array.removeFirst(parent._percentagePositionChildren, this);\r\n        }\r\n    }\r\n    _clearDirty() {\r\n        super._clearDirty();\r\n        this._sizeDirty = false;\r\n        this._statesHandled = false;\r\n    }\r\n    /**\r\n     * Simulate hover over element.\r\n     */\r\n    hover() {\r\n        if (!this.isDisposed()) {\r\n            this.showTooltip();\r\n            this._handleOver();\r\n        }\r\n    }\r\n    /**\r\n     * Simulate unhover over element.\r\n     */\r\n    unhover() {\r\n        if (!this.isDisposed()) {\r\n            this.hideTooltip();\r\n            this._handleOut();\r\n        }\r\n    }\r\n    /**\r\n     * Shows element's [[Tooltip]].\r\n     */\r\n    showTooltip(point) {\r\n        if (!this.isDisposed()) {\r\n            const tooltip = this.getTooltip();\r\n            const tooltipText = this.get(\"tooltipText\");\r\n            const tooltipHTML = this.get(\"tooltipHTML\");\r\n            if ((tooltipText || tooltipHTML) && tooltip) {\r\n                const tooltipPosition = this.get(\"tooltipPosition\");\r\n                const tooltipTarget = this.getPrivate(\"tooltipTarget\", this);\r\n                if (tooltipPosition == \"fixed\" || !point) {\r\n                    this._display._setMatrix();\r\n                    point = this.toGlobal(tooltipTarget._getTooltipPoint());\r\n                }\r\n                tooltip.set(\"pointTo\", point);\r\n                tooltip.set(\"tooltipTarget\", tooltipTarget);\r\n                if (!tooltip.get(\"x\")) {\r\n                    tooltip.set(\"x\", point.x);\r\n                }\r\n                if (!tooltip.get(\"y\")) {\r\n                    tooltip.set(\"y\", point.y);\r\n                }\r\n                if (tooltipText) {\r\n                    tooltip.label.set(\"text\", tooltipText);\r\n                }\r\n                if (tooltipHTML) {\r\n                    tooltip.label.set(\"html\", tooltipHTML);\r\n                }\r\n                const dataItem = this.dataItem;\r\n                if (dataItem) {\r\n                    tooltip.label._setDataItem(dataItem);\r\n                }\r\n                if (this.get(\"showTooltipOn\") == \"always\" && (point.x < 0 || point.x > this._root.width() || point.y < 0 || point.y > this._root.height())) {\r\n                    this.hideTooltip();\r\n                    return;\r\n                }\r\n                tooltip.label.text.markDirtyText();\r\n                const promise = tooltip.show();\r\n                this.setPrivateRaw(\"showingTooltip\", true);\r\n                return promise;\r\n            }\r\n        }\r\n    }\r\n    /**\r\n     * Hides element's [[Tooltip]].\r\n     */\r\n    hideTooltip() {\r\n        const tooltip = this.getTooltip();\r\n        if (tooltip) {\r\n            if (tooltip.get(\"tooltipTarget\") == this.getPrivate(\"tooltipTarget\", this) || this.get(\"tooltip\") == tooltip) {\r\n                let timeout = tooltip.get(\"keepTargetHover\") && tooltip.get(\"stateAnimationDuration\", 0) == 0 ? 400 : undefined;\r\n                const promise = tooltip.hide(timeout);\r\n                this.setPrivateRaw(\"showingTooltip\", false);\r\n                return promise;\r\n            }\r\n        }\r\n    }\r\n    _getTooltipPoint() {\r\n        const bounds = this._localBounds;\r\n        if (bounds) {\r\n            let x = 0;\r\n            let y = 0;\r\n            if (!this.get(\"isMeasured\")) {\r\n                x = $utils.relativeToValue(this.get(\"tooltipX\", 0), this.width());\r\n                y = $utils.relativeToValue(this.get(\"tooltipY\", 0), this.height());\r\n            }\r\n            else {\r\n                x = bounds.left + $utils.relativeToValue(this.get(\"tooltipX\", 0), bounds.right - bounds.left);\r\n                y = bounds.top + $utils.relativeToValue(this.get(\"tooltipY\", 0), bounds.bottom - bounds.top);\r\n            }\r\n            return { x, y };\r\n        }\r\n        return { x: 0, y: 0 };\r\n    }\r\n    /**\r\n     * Returns [[Tooltip]] used for this element.\r\n     *\r\n     * @return Tooltip\r\n     */\r\n    getTooltip() {\r\n        let tooltip = this.get(\"tooltip\");\r\n        if (!tooltip) {\r\n            let parent = this.parent;\r\n            if (parent) {\r\n                return parent.getTooltip();\r\n            }\r\n        }\r\n        else {\r\n            return tooltip;\r\n        }\r\n    }\r\n    _updatePosition() {\r\n        const parent = this.parent;\r\n        let dx = this.get(\"dx\", 0);\r\n        let dy = this.get(\"dy\", 0);\r\n        let x = this.get(\"x\");\r\n        let _x = this.getPrivate(\"x\");\r\n        let xx = 0;\r\n        let yy = 0;\r\n        const position = this.get(\"position\");\r\n        if (x instanceof Percent) {\r\n            if (parent) {\r\n                x = parent.innerWidth() * x.value + parent.get(\"paddingLeft\", 0);\r\n            }\r\n            else {\r\n                x = 0;\r\n            }\r\n        }\r\n        if ($type.isNumber(x)) {\r\n            xx = x + dx;\r\n        }\r\n        else {\r\n            if (_x != null) {\r\n                xx = _x;\r\n            }\r\n            else if (parent) {\r\n                if (position == \"relative\") {\r\n                    xx = parent.get(\"paddingLeft\", 0) + dx;\r\n                }\r\n            }\r\n        }\r\n        let y = this.get(\"y\");\r\n        let _y = this.getPrivate(\"y\");\r\n        if (y instanceof Percent) {\r\n            if (parent) {\r\n                y = parent.innerHeight() * y.value + parent.get(\"paddingTop\", 0);\r\n            }\r\n            else {\r\n                y = 0;\r\n            }\r\n        }\r\n        if ($type.isNumber(y)) {\r\n            yy = y + dy;\r\n        }\r\n        else {\r\n            if (_y != null) {\r\n                yy = _y;\r\n            }\r\n            else if (parent) {\r\n                if (position == \"relative\") {\r\n                    yy = parent.get(\"paddingTop\", 0) + dy;\r\n                }\r\n            }\r\n        }\r\n        const display = this._display;\r\n        if (display.x != xx || display.y != yy) {\r\n            display.invalidateBounds();\r\n            display.x = xx;\r\n            display.y = yy;\r\n            const eventType = \"positionchanged\";\r\n            if (this.events.isEnabled(eventType)) {\r\n                this.events.dispatch(eventType, { type: eventType, target: this });\r\n            }\r\n        }\r\n        // Update tooltip position together with the Sprite\r\n        if (this.getPrivate(\"showingTooltip\")) {\r\n            this.showTooltip();\r\n        }\r\n    }\r\n    /**\r\n     * Returns element's actual X position in pixels.\r\n     *\r\n     * @return X (px)\r\n     */\r\n    x() {\r\n        let x = this.get(\"x\");\r\n        let _x = this.getPrivate(\"x\");\r\n        const parent = this.parent;\r\n        if (parent) {\r\n            if (x instanceof Percent) {\r\n                return $utils.relativeToValue(x, parent.innerWidth()) + parent.get(\"paddingLeft\", 0);\r\n            }\r\n            else {\r\n                if (!$type.isNumber(x)) {\r\n                    if (_x != null) {\r\n                        return _x;\r\n                    }\r\n                    else {\r\n                        return parent.get(\"paddingLeft\", this._display.x);\r\n                    }\r\n                }\r\n                else {\r\n                    return x;\r\n                }\r\n            }\r\n        }\r\n        return this._display.x;\r\n    }\r\n    /**\r\n     * Returns element's actual Y position in pixels.\r\n     *\r\n     * @return Y (px)\r\n     */\r\n    y() {\r\n        let _y = this.getPrivate(\"y\");\r\n        if (_y != null) {\r\n            return _y;\r\n        }\r\n        let y = this.get(\"y\");\r\n        const parent = this.parent;\r\n        if (parent) {\r\n            if (y instanceof Percent) {\r\n                return $utils.relativeToValue(y, parent.innerHeight()) + parent.get(\"paddingTop\", 0);\r\n            }\r\n            else {\r\n                if (!$type.isNumber(y)) {\r\n                    if (_y != null) {\r\n                        return _y;\r\n                    }\r\n                    else {\r\n                        return parent.get(\"paddingTop\", this._display.y);\r\n                    }\r\n                }\r\n                else {\r\n                    return y;\r\n                }\r\n            }\r\n        }\r\n        return this._display.y;\r\n    }\r\n    _dispose() {\r\n        super._dispose();\r\n        this._display.dispose();\r\n        this._removeTemplateField();\r\n        this._removeParent(this.parent);\r\n        this._root._removeFocusElement(this);\r\n        const tooltip = this.get(\"tooltip\");\r\n        if (tooltip) {\r\n            tooltip.dispose();\r\n        }\r\n        this.markDirty();\r\n    }\r\n    /**\r\n     * @ignore\r\n     */\r\n    adjustedLocalBounds() {\r\n        this._fixMinBounds(this._adjustedLocalBounds);\r\n        return this._adjustedLocalBounds;\r\n    }\r\n    /**\r\n     * Returns local coordinates of the element's bounds.\r\n     *\r\n     * @ignore\r\n     * @return Global bounds\r\n     */\r\n    localBounds() {\r\n        return this._localBounds;\r\n    }\r\n    /**\r\n     * Returns adjusted local coordinates of the element's bounds.\r\n     *\r\n     * @ignore\r\n     * @return Global bounds\r\n     */\r\n    bounds() {\r\n        const bounds = this._adjustedLocalBounds;\r\n        const x = this.x();\r\n        const y = this.y();\r\n        return { left: bounds.left + x, right: bounds.right + x, top: bounds.top + y, bottom: bounds.bottom + y };\r\n    }\r\n    /**\r\n     * Returns global coordinates of the element's bounds.\r\n     *\r\n     * @ignore\r\n     * @return Global bounds\r\n     */\r\n    globalBounds() {\r\n        const bounds = this.localBounds();\r\n        const p0 = this.toGlobal({ x: bounds.left, y: bounds.top });\r\n        const p1 = this.toGlobal({ x: bounds.right, y: bounds.top });\r\n        const p2 = this.toGlobal({ x: bounds.right, y: bounds.bottom });\r\n        const p3 = this.toGlobal({ x: bounds.left, y: bounds.bottom });\r\n        return {\r\n            left: Math.min(p0.x, p1.x, p2.x, p3.x),\r\n            top: Math.min(p0.y, p1.y, p2.y, p3.y),\r\n            right: Math.max(p0.x, p1.x, p2.x, p3.x),\r\n            bottom: Math.max(p0.y, p1.y, p2.y, p3.y)\r\n        };\r\n    }\r\n    _onShow(_duration) {\r\n    }\r\n    _onHide(_duration) {\r\n    }\r\n    /**\r\n     * Plays initial reveal animation regardless if element is currently hidden\r\n     * or visible.\r\n     *\r\n     * @param   duration  Duration of the animation in milliseconds\r\n     * @param   delay     Delay showing of the element by X milliseconds\r\n     * @return            Promise\r\n     */\r\n    appear(duration, delay) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            yield this.hide(0);\r\n            if (delay) {\r\n                return new Promise((success, _error) => {\r\n                    this.setTimeout(() => {\r\n                        success(this.show(duration));\r\n                    }, delay);\r\n                });\r\n            }\r\n            else {\r\n                return this.show(duration);\r\n            }\r\n        });\r\n    }\r\n    /**\r\n     * Shows currently hidden element and returns a `Promise` which completes\r\n     * when all showing animations are finished.\r\n     *\r\n     * ```TypeScript\r\n     * series.show().then(function(ev) {\r\n     *   console.log(\"Series is now fully visible\");\r\n     * })\r\n     * ```\r\n     * ```JavaScript\r\n     * series.show().then(function(ev) {\r\n     *   console.log(\"Series is now fully visible\");\r\n     * })\r\n     * ```\r\n     *\r\n     * @return Promise\r\n     */\r\n    show(duration) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            if (!this._isShowing) {\r\n                this._isHidden = false;\r\n                this._isShowing = true;\r\n                this._isHiding = false;\r\n                if (this.states.lookup(\"default\").get(\"visible\")) {\r\n                    this.set(\"visible\", true);\r\n                }\r\n                this._onShow(duration);\r\n                const animations = this.states.applyAnimate(\"default\", duration);\r\n                yield waitForAnimations(animations);\r\n                this._isShowing = false;\r\n            }\r\n        });\r\n    }\r\n    /**\r\n     * Hides the element and returns a `Promise` which completes when all hiding\r\n     * animations are finished.\r\n     *\r\n     * ```TypeScript\r\n     * series.hide().then(function(ev) {\r\n     *   console.log(\"Series finished hiding\");\r\n     * })\r\n     * ```\r\n     * ```JavaScript\r\n     * series.hide().then(function(ev) {\r\n     *   console.log(\"Series finished hiding\");\r\n     * })\r\n     * ```\r\n     *\r\n     * @return Promise\r\n     */\r\n    hide(duration) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            if (!this._isHiding && !this._isHidden) {\r\n                this._isHiding = true;\r\n                this._isShowing = false;\r\n                let state = this.states.lookup(\"hidden\");\r\n                if (!state) {\r\n                    state = this.states.create(\"hidden\", {\r\n                        \"opacity\": 0,\r\n                        \"visible\": false\r\n                    });\r\n                }\r\n                this._isHidden = true;\r\n                this._onHide(duration);\r\n                const animations = this.states.applyAnimate(\"hidden\", duration);\r\n                yield waitForAnimations(animations);\r\n                this._isHiding = false;\r\n            }\r\n        });\r\n    }\r\n    /**\r\n     * Returns `true` if this element is currently hidden.\r\n     *\r\n     * @return Is hidden?\r\n     */\r\n    isHidden() {\r\n        return this._isHidden;\r\n    }\r\n    /**\r\n     * Returns `true` if this element is currently animating to a default state.\r\n     *\r\n     * @return Is showing?\r\n     */\r\n    isShowing() {\r\n        return this._isShowing;\r\n    }\r\n    /**\r\n     * Returns `true` if this element is currently animating to a hidden state.\r\n     *\r\n     * @return Is hiding?\r\n     */\r\n    isHiding() {\r\n        return this._isHiding;\r\n    }\r\n    /**\r\n     * Returns `true` if this element is currently hovered by a pointer.\r\n     *\r\n     * @return Is hovered?\r\n     */\r\n    isHover() {\r\n        return this._display.hovering();\r\n    }\r\n    /**\r\n     * Returns `true` if this element does currently have focus.\r\n     *\r\n     * @return Is focused?\r\n     */\r\n    isFocus() {\r\n        return this._root.focused(this);\r\n    }\r\n    /**\r\n     * Returns `true` if this element is currently being dragged.\r\n     *\r\n     * @return Is dragged?\r\n     */\r\n    isDragging() {\r\n        return this._isDragging;\r\n    }\r\n    /**\r\n     * Returns `false` if if either public or private setting `visible` is set\r\n     * to `false`, or `forceHidden` is set to `true`.\r\n     *\r\n     * @return Visible?\r\n     */\r\n    isVisible() {\r\n        if (this.get(\"visible\") && this.getPrivate(\"visible\") && !this.get(\"forceHidden\")) {\r\n            return true;\r\n        }\r\n        return false;\r\n    }\r\n    /**\r\n     * Same as `isVisible()`, except it checks all ascendants, too.\r\n     *\r\n     * @since 5.2.7\r\n     * @return Visible?\r\n     */\r\n    isVisibleDeep() {\r\n        return this._parent ? (this._parent.isVisibleDeep() && this.isVisible()) : this.isVisible();\r\n    }\r\n    /**\r\n     * Returns an actual opacity of the element, taking into account all parents.\r\n     *\r\n     * @return Opacity\r\n     * @since 5.2.11\r\n     */\r\n    compositeOpacity() {\r\n        const opacity = this.get(\"opacity\", 1);\r\n        return this._parent ? (this._parent.compositeOpacity() * opacity) : opacity;\r\n    }\r\n    /**\r\n     * Returns an actual scale of the element, taking into account all parents.\r\n     *\r\n     * @return Opacity\r\n     * @since 5.9.2\r\n     */\r\n    compositeScale() {\r\n        const scale = this.get(\"scale\", 1);\r\n        return this._parent ? (this._parent.compositeScale() * scale) : scale;\r\n    }\r\n    /**\r\n     * Returns an actual roation of the element, taking into account all parents.\r\n     *\r\n     * @return Opacity\r\n     * @since 5.9.2\r\n     */\r\n    compositeRotation() {\r\n        const rotation = this.get(\"rotation\", 0);\r\n        return this._parent ? (this._parent.compositeRotation() + rotation) : rotation;\r\n    }\r\n    /**\r\n     * Returns width of this element in pixels.\r\n     *\r\n     * @return Width (px)\r\n     */\r\n    width() {\r\n        let width = this.get(\"width\");\r\n        let maxWidth = this.get(\"maxWidth\", this.getPrivate(\"maxWidth\"));\r\n        let minWidth = this.get(\"minWidth\", this.getPrivate(\"minWidth\"));\r\n        let privateWidth = this.getPrivate(\"width\");\r\n        let w = 0;\r\n        if ($type.isNumber(privateWidth)) {\r\n            w = privateWidth;\r\n        }\r\n        else {\r\n            if (width == null) {\r\n                if (this._adjustedLocalBounds) {\r\n                    w = this._adjustedLocalBounds.right - this._adjustedLocalBounds.left;\r\n                }\r\n            }\r\n            else {\r\n                if (width instanceof Percent) {\r\n                    const parent = this.parent;\r\n                    if (parent) {\r\n                        w = parent.innerWidth() * width.value;\r\n                    }\r\n                    else {\r\n                        w = this._root.width() * width.value;\r\n                    }\r\n                }\r\n                else if ($type.isNumber(width)) {\r\n                    w = width;\r\n                }\r\n            }\r\n        }\r\n        if ($type.isNumber(minWidth)) {\r\n            w = Math.max(minWidth, w);\r\n        }\r\n        if ($type.isNumber(maxWidth)) {\r\n            w = Math.min(maxWidth, w);\r\n        }\r\n        return w;\r\n    }\r\n    /**\r\n     * Returns maximum allowed width of this element in pixels.\r\n     *\r\n     * @return Maximum width (px)\r\n     */\r\n    maxWidth() {\r\n        let maxWidth = this.get(\"maxWidth\", this.getPrivate(\"maxWidth\"));\r\n        if ($type.isNumber(maxWidth)) {\r\n            return maxWidth;\r\n        }\r\n        else {\r\n            let width = this.get(\"width\");\r\n            if ($type.isNumber(width)) {\r\n                return width;\r\n            }\r\n        }\r\n        const parent = this.parent;\r\n        if (parent) {\r\n            return parent.innerWidth();\r\n        }\r\n        return this._root.width();\r\n    }\r\n    /**\r\n     * Returns maximum allowed height of this element in pixels.\r\n     *\r\n     * @return Maximum height (px)\r\n     */\r\n    maxHeight() {\r\n        let maxHeight = this.get(\"maxHeight\", this.getPrivate(\"maxHeight\"));\r\n        if ($type.isNumber(maxHeight)) {\r\n            return maxHeight;\r\n        }\r\n        else {\r\n            let height = this.get(\"height\");\r\n            if ($type.isNumber(height)) {\r\n                return height;\r\n            }\r\n        }\r\n        const parent = this.parent;\r\n        if (parent) {\r\n            return parent.innerHeight();\r\n        }\r\n        return this._root.height();\r\n    }\r\n    /**\r\n     * Returns height of this element in pixels.\r\n     *\r\n     * @return Height (px)\r\n     */\r\n    height() {\r\n        let height = this.get(\"height\");\r\n        let maxHeight = this.get(\"maxHeight\", this.getPrivate(\"maxHeight\"));\r\n        let minHeight = this.get(\"minHeight\", this.getPrivate(\"minHeight\"));\r\n        let privateHeight = this.getPrivate(\"height\");\r\n        let h = 0;\r\n        if ($type.isNumber(privateHeight)) {\r\n            h = privateHeight;\r\n        }\r\n        else {\r\n            if (height == null) {\r\n                if (this._adjustedLocalBounds) {\r\n                    h = this._adjustedLocalBounds.bottom - this._adjustedLocalBounds.top;\r\n                }\r\n            }\r\n            else {\r\n                if (height instanceof Percent) {\r\n                    const parent = this.parent;\r\n                    if (parent) {\r\n                        h = parent.innerHeight() * height.value;\r\n                    }\r\n                    else {\r\n                        h = this._root.height() * height.value;\r\n                    }\r\n                }\r\n                else if ($type.isNumber(height)) {\r\n                    h = height;\r\n                }\r\n            }\r\n        }\r\n        if ($type.isNumber(minHeight)) {\r\n            h = Math.max(minHeight, h);\r\n        }\r\n        if ($type.isNumber(maxHeight)) {\r\n            h = Math.min(maxHeight, h);\r\n        }\r\n        return h;\r\n    }\r\n    _findStaticTemplate(f) {\r\n        // templateField overrides template\r\n        if (this._templateField && f(this._templateField)) {\r\n            return this._templateField;\r\n        }\r\n        return super._findStaticTemplate(f);\r\n    }\r\n    _walkParents(f) {\r\n        if (this._parent) {\r\n            this._walkParent(f);\r\n        }\r\n    }\r\n    _walkParent(f) {\r\n        if (this._parent) {\r\n            this._parent._walkParent(f);\r\n        }\r\n        f(this);\r\n    }\r\n    /**\r\n     * Parent [[Container]] of this element.\r\n     *\r\n     * @return Parent container\r\n     */\r\n    get parent() {\r\n        return this._parent;\r\n    }\r\n    _setParent(parent, updateChildren = false) {\r\n        const prevParent = this._parent;\r\n        if (parent !== prevParent) {\r\n            this.markDirtyBounds();\r\n            parent.markDirty();\r\n            this._parent = parent;\r\n            if (updateChildren) {\r\n                this._removeParent(prevParent);\r\n                if (parent) {\r\n                    this._addPercentageSizeChildren();\r\n                    this._addPercentagePositionChildren();\r\n                }\r\n            }\r\n            this.markDirtyPosition();\r\n            this._applyThemes();\r\n        }\r\n    }\r\n    /**\r\n     * Returns an instance of [[NumberFormatter]] used in this element.\r\n     *\r\n     * If this element does not have it set, global one form [[Root]] is used.\r\n     *\r\n     * @see {@link https://www.amcharts.com/docs/v5/concepts/using-formatters/} for more info\r\n     * @return NumberFormatter instace\r\n     */\r\n    getNumberFormatter() {\r\n        return this.get(\"numberFormatter\", this._root.numberFormatter);\r\n    }\r\n    /**\r\n     * Returns an instance of [[DateFormatter]] used in this element.\r\n     *\r\n     * If this element does not have it set, global one form [[Root]] is used.\r\n     *\r\n     * @see {@link https://www.amcharts.com/docs/v5/concepts/using-formatters/} for more info\r\n     * @return DateFormatter instace\r\n     */\r\n    getDateFormatter() {\r\n        return this.get(\"dateFormatter\", this._root.dateFormatter);\r\n    }\r\n    /**\r\n     * Returns an instance of [[DurationFormatter]] used in this element.\r\n     *\r\n     * If this element does not have it set, global one form [[Root]] is used.\r\n     *\r\n     * @see {@link https://www.amcharts.com/docs/v5/concepts/using-formatters/} for more info\r\n     * @return DurationFormatter instace\r\n     */\r\n    getDurationFormatter() {\r\n        return this.get(\"durationFormatter\", this._root.durationFormatter);\r\n    }\r\n    /**\r\n     * Converts X/Y coordinate within this element to a global coordinate.\r\n     *\r\n     * @param  point  Local coordinate\r\n     * @return        Global coordinate\r\n     */\r\n    toGlobal(point) {\r\n        return this._display.toGlobal(point);\r\n    }\r\n    /**\r\n     * Converts global X/Y coordinate to a coordinate within this element.\r\n     *\r\n     * @param  point  Global coordinate\r\n     * @return        Local coordinate\r\n     */\r\n    toLocal(point) {\r\n        return this._display.toLocal(point);\r\n    }\r\n    _getDownPoint() {\r\n        const id = this._getDownPointId();\r\n        if (id) {\r\n            return this._downPoints[id];\r\n        }\r\n    }\r\n    _getDownPointId() {\r\n        if (this._downPoints) {\r\n            return $object.keysOrdered(this._downPoints, (a, b) => {\r\n                if (a > b) {\r\n                    return 1;\r\n                }\r\n                if (a < b) {\r\n                    return -1;\r\n                }\r\n                return 0;\r\n            })[0];\r\n        }\r\n    }\r\n    /**\r\n     * Moves sprite to the end of the parent's children array.\r\n     *\r\n     * Depending on `layout` setting of the parten container, it may effect the\r\n     * positioning or overlapping order of the elements.\r\n     */\r\n    toFront() {\r\n        const parent = this.parent;\r\n        if (parent) {\r\n            parent.children.moveValue(this, parent.children.length - 1);\r\n        }\r\n    }\r\n    /**\r\n     * Moves sprite to the beginning of the parent's children array.\r\n     *\r\n     * Depending on `layout` setting of the parten container, it may effect the\r\n     * positioning or overlapping order of the elements.\r\n     */\r\n    toBack() {\r\n        const parent = this.parent;\r\n        if (parent) {\r\n            parent.children.moveValue(this, 0);\r\n        }\r\n    }\r\n}\r\nObject.defineProperty(Sprite, \"className\", {\r\n    enumerable: true,\r\n    configurable: true,\r\n    writable: true,\r\n    value: \"Sprite\"\r\n});\r\nObject.defineProperty(Sprite, \"classNames\", {\r\n    enumerable: true,\r\n    configurable: true,\r\n    writable: true,\r\n    value: Entity.classNames.concat([Sprite.className])\r\n});\r\n//# sourceMappingURL=Sprite.js.map","import { Entity } from \"../../util/Entity\";\r\n/**\r\n * Base class for patterns.\r\n *\r\n * @see {@link https://www.amcharts.com/docs/v5/concepts/colors-gradients-and-patterns/patterns/} for more info\r\n */\r\nexport class Pattern extends Entity {\r\n    constructor() {\r\n        super(...arguments);\r\n        Object.defineProperty(this, \"_display\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: this._root._renderer.makeGraphics()\r\n        });\r\n        Object.defineProperty(this, \"_backgroundDisplay\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: this._root._renderer.makeGraphics()\r\n        });\r\n        Object.defineProperty(this, \"_clear\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: false\r\n        });\r\n        Object.defineProperty(this, \"_pattern\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n    }\r\n    _afterNew() {\r\n        // Applying themes because pattern will not have parent\r\n        super._afterNewApplyThemes();\r\n    }\r\n    get pattern() {\r\n        return this._pattern;\r\n    }\r\n    _draw() { }\r\n    _beforeChanged() {\r\n        super._beforeChanged();\r\n        if (this.isDirty(\"repetition\") || this.isDirty(\"width\") || this.isDirty(\"height\") || this.isDirty(\"rotation\") || this.isDirty(\"strokeWidth\") || this.isDirty(\"strokeDasharray\") || this.isDirty(\"strokeDashoffset\") || this.isDirty(\"colorOpacity\") || this.isDirty(\"fillOpacity\")) {\r\n            this._clear = true;\r\n        }\r\n        this._checkDirtyFill();\r\n    }\r\n    _checkDirtyFill() {\r\n        if (this.isDirty(\"color\") || this.isDirty(\"fill\")) {\r\n            this._clear = true;\r\n        }\r\n    }\r\n    _changed() {\r\n        super._changed();\r\n        if (this._clear) {\r\n            const repetition = this.get(\"repetition\", \"\");\r\n            const width = this.get(\"width\", 100);\r\n            const height = this.get(\"height\", 100);\r\n            const fill = this.get(\"fill\");\r\n            const fillOpacity = this.get(\"fillOpacity\", 1);\r\n            const backgroundDisplay = this._backgroundDisplay;\r\n            const display = this._display;\r\n            display.clear();\r\n            backgroundDisplay.clear();\r\n            if (fill && (fillOpacity > 0)) {\r\n                backgroundDisplay.beginFill(fill, fillOpacity);\r\n                backgroundDisplay.drawRect(0, 0, width, height);\r\n                backgroundDisplay.endFill();\r\n            }\r\n            display.angle = this.get(\"rotation\", 0);\r\n            //display.pivot = { x: width / 2, y: height / 2 };\r\n            this._draw();\r\n            this._pattern = this._root._renderer.createPattern(display, backgroundDisplay, repetition, width, height);\r\n        }\r\n        this._clear = false;\r\n    }\r\n}\r\nObject.defineProperty(Pattern, \"className\", {\r\n    enumerable: true,\r\n    configurable: true,\r\n    writable: true,\r\n    value: \"Pattern\"\r\n});\r\nObject.defineProperty(Pattern, \"classNames\", {\r\n    enumerable: true,\r\n    configurable: true,\r\n    writable: true,\r\n    value: Entity.classNames.concat([Pattern.className])\r\n});\r\n//# sourceMappingURL=Pattern.js.map","import { Pattern } from \"./Pattern\";\r\n/**\r\n * Picture pattern.\r\n *\r\n * @since 5.2.15\r\n *\r\n * @see {@link https://www.amcharts.com/docs/v5/concepts/colors-gradients-and-patterns/patterns/} for more info\r\n */\r\nexport class PicturePattern extends Pattern {\r\n    constructor() {\r\n        super(...arguments);\r\n        Object.defineProperty(this, \"_image\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n    }\r\n    _beforeChanged() {\r\n        super._beforeChanged();\r\n        this._clear = true;\r\n        if (this.isDirty(\"src\")) {\r\n            this._load();\r\n        }\r\n        const canvas = this.get(\"canvas\");\r\n        if (canvas) {\r\n            this.set(\"width\", canvas.width);\r\n            this.set(\"height\", canvas.height);\r\n        }\r\n    }\r\n    _draw() {\r\n        super._draw();\r\n        const image = this._image;\r\n        if (image) {\r\n            const patternWidth = this.get(\"width\", 100);\r\n            const patternHeight = this.get(\"height\", 100);\r\n            // Fit\r\n            const fit = this.get(\"fit\", \"image\");\r\n            let width = 0;\r\n            let height = 0;\r\n            if (fit == \"pattern\") {\r\n                width = patternWidth;\r\n                height = patternHeight;\r\n            }\r\n            else {\r\n                width = image.width;\r\n                height = image.height;\r\n                if (fit == \"image\") {\r\n                    this.set(\"width\", width);\r\n                    this.set(\"height\", height);\r\n                }\r\n            }\r\n            // Position\r\n            const centered = this.get(\"centered\", true);\r\n            let x = 0;\r\n            let y = 0;\r\n            if (centered) {\r\n                x = patternWidth / 2 - width / 2;\r\n                y = patternHeight / 2 - height / 2;\r\n            }\r\n            this._display.image(image, width, height, x, y);\r\n        }\r\n        const canvas = this.get(\"canvas\");\r\n        if (canvas) {\r\n            this._display.image(canvas, canvas.width, canvas.height, 0, 0);\r\n        }\r\n    }\r\n    _load() {\r\n        const src = this.get(\"src\");\r\n        if (src) {\r\n            const image = new Image();\r\n            //image.crossOrigin = \"Anonymous\";\r\n            image.src = src;\r\n            image.decode().then(() => {\r\n                this._image = image;\r\n                this._draw();\r\n                if (this.events.isEnabled(\"loaded\")) {\r\n                    this.events.dispatch(\"loaded\", { type: \"loaded\", target: this });\r\n                }\r\n            }).catch((_error) => {\r\n                // TODO: maybe raise error?\r\n            });\r\n        }\r\n    }\r\n}\r\nObject.defineProperty(PicturePattern, \"className\", {\r\n    enumerable: true,\r\n    configurable: true,\r\n    writable: true,\r\n    value: \"PicturePattern\"\r\n});\r\nObject.defineProperty(PicturePattern, \"classNames\", {\r\n    enumerable: true,\r\n    configurable: true,\r\n    writable: true,\r\n    value: Pattern.classNames.concat([PicturePattern.className])\r\n});\r\n//# sourceMappingURL=PicturePattern.js.map","/**\r\n * From https://github.com/pixijs/pixi.js/blob/3dd0ff9a935f0bc13a09aefff9eb2872f02c51b9/packages/canvas/canvas-renderer/src/utils/mapCanvasBlendModesToPixi.ts#L13\r\n */\r\nexport var BlendMode;\r\n(function (BlendMode) {\r\n    BlendMode[\"ADD\"] = \"lighter\";\r\n    BlendMode[\"COLOR\"] = \"color\";\r\n    BlendMode[\"COLOR_BURN\"] = \"color-burn\";\r\n    BlendMode[\"COLOR_DODGE\"] = \"color-dodge\";\r\n    BlendMode[\"DARKEN\"] = \"darken\";\r\n    BlendMode[\"DIFFERENCE\"] = \"difference\";\r\n    BlendMode[\"DST_OVER\"] = \"destination-over\";\r\n    BlendMode[\"EXCLUSION\"] = \"exclusion\";\r\n    BlendMode[\"HARD_LIGHT\"] = \"hard-light\";\r\n    BlendMode[\"HUE\"] = \"hue\";\r\n    BlendMode[\"LIGHTEN\"] = \"lighten\";\r\n    BlendMode[\"LUMINOSITY\"] = \"luminosity\";\r\n    BlendMode[\"MULTIPLY\"] = \"multiply\";\r\n    BlendMode[\"NORMAL\"] = \"source-over\";\r\n    BlendMode[\"OVERLAY\"] = \"overlay\";\r\n    BlendMode[\"SATURATION\"] = \"saturation\";\r\n    BlendMode[\"SCREEN\"] = \"screen\";\r\n    BlendMode[\"SOFT_LIGHT\"] = \"soft-light\";\r\n    BlendMode[\"SRC_ATOP\"] = \"source-atop\";\r\n    BlendMode[\"XOR\"] = \"xor\";\r\n})(BlendMode || (BlendMode = {}));\r\n//# sourceMappingURL=Renderer.js.map","import { PicturePattern } from \"../render/patterns/PicturePattern\";\r\nimport { Sprite } from \"./Sprite\";\r\nimport { BlendMode } from \"./backend/Renderer\";\r\nimport * as $type from \"../util/Type\";\r\nimport * as $array from \"../util/Array\";\r\nexport const visualSettings = [\"fill\", \"fillOpacity\", \"stroke\", \"strokeWidth\", \"strokeOpacity\", \"fillPattern\", \"strokePattern\", \"fillGradient\", \"strokeGradient\", \"strokeDasharray\", \"strokeDashoffset\", \"shadowBlur\", \"shadowColor\", \"shadowOpacity\", \"shadowOffsetX\", \"shadowOffsetY\", \"blur\", \"sepia\", \"invert\", \"brightness\", \"hue\", \"contrast\", \"saturate\"];\r\n/**\r\n * Base class used for drawing shapes.\r\n *\r\n * @see {@link https://www.amcharts.com/docs/v5/concepts/common-elements/graphics/} for more info\r\n * @important\r\n */\r\nexport class Graphics extends Sprite {\r\n    constructor() {\r\n        super(...arguments);\r\n        Object.defineProperty(this, \"_display\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: this._root._renderer.makeGraphics()\r\n        });\r\n        Object.defineProperty(this, \"_clear\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: false\r\n        });\r\n    }\r\n    _beforeChanged() {\r\n        super._beforeChanged();\r\n        if (this.isDirty(\"draw\") || this.isDirty(\"svgPath\")) {\r\n            this.markDirtyBounds();\r\n        }\r\n        if (this.isDirty(\"fill\") || this.isDirty(\"stroke\") || this.isDirty(\"visible\") || this.isDirty(\"forceHidden\") || this.isDirty(\"scale\") || this.isDirty(\"fillGradient\") || this.isDirty(\"strokeGradient\") || this.isDirty(\"fillPattern\") || this.isDirty(\"strokePattern\") || this.isDirty(\"fillOpacity\") || this.isDirty(\"strokeOpacity\") || this.isDirty(\"strokeWidth\") || this.isDirty(\"draw\") || this.isDirty(\"blendMode\") || this.isDirty(\"strokeDasharray\") || this.isDirty(\"strokeDashoffset\") || this.isDirty(\"svgPath\") || this.isDirty(\"lineJoin\") || this.isDirty(\"shadowColor\") || this.isDirty(\"shadowBlur\") || this.isDirty(\"shadowOffsetX\") || this.isDirty(\"shadowOffsetY\")) {\r\n            this._clear = true;\r\n        }\r\n        this._display.crisp = this.get(\"crisp\", false);\r\n        if (this.isDirty(\"fillGradient\")) {\r\n            const gradient = this.get(\"fillGradient\");\r\n            if (gradient) {\r\n                this._display.isMeasured = true;\r\n                const gradientTarget = gradient.get(\"target\");\r\n                if (gradientTarget) {\r\n                    this._disposers.push(gradientTarget.events.on(\"boundschanged\", () => {\r\n                        this._markDirtyKey(\"fill\");\r\n                    }));\r\n                    this._disposers.push(gradientTarget.events.on(\"positionchanged\", () => {\r\n                        this._markDirtyKey(\"fill\");\r\n                    }));\r\n                }\r\n            }\r\n        }\r\n        if (this.isDirty(\"strokeGradient\")) {\r\n            const gradient = this.get(\"strokeGradient\");\r\n            if (gradient) {\r\n                this._display.isMeasured = true;\r\n                const gradientTarget = gradient.get(\"target\");\r\n                if (gradientTarget) {\r\n                    this._disposers.push(gradientTarget.events.on(\"boundschanged\", () => {\r\n                        this._markDirtyKey(\"stroke\");\r\n                    }));\r\n                    this._disposers.push(gradientTarget.events.on(\"positionchanged\", () => {\r\n                        this._markDirtyKey(\"stroke\");\r\n                    }));\r\n                }\r\n            }\r\n        }\r\n    }\r\n    _changed() {\r\n        super._changed();\r\n        if (this._clear) {\r\n            this.markDirtyBounds();\r\n            this.markDirtyLayer();\r\n            this._display.clear();\r\n            let strokeDasharray = this.get(\"strokeDasharray\");\r\n            if ($type.isNumber(strokeDasharray)) {\r\n                if (strokeDasharray < 0.5) {\r\n                    strokeDasharray = [0];\r\n                }\r\n                else {\r\n                    strokeDasharray = [strokeDasharray];\r\n                }\r\n            }\r\n            this._display.setLineDash(strokeDasharray);\r\n            const strokeDashoffset = this.get(\"strokeDashoffset\");\r\n            if (strokeDashoffset) {\r\n                this._display.setLineDashOffset(strokeDashoffset);\r\n            }\r\n            const blendMode = this.get(\"blendMode\", BlendMode.NORMAL);\r\n            this._display.blendMode = blendMode;\r\n            const draw = this.get(\"draw\");\r\n            if (draw && typeof draw === \"function\") {\r\n                draw(this._display, this);\r\n            }\r\n            const svgPath = this.get(\"svgPath\");\r\n            if (svgPath != null) {\r\n                this._display.svgPath(svgPath);\r\n            }\r\n        }\r\n    }\r\n    _afterChanged() {\r\n        super._afterChanged();\r\n        if (this._clear) {\r\n            const fill = this.get(\"fill\");\r\n            const fillGradient = this.get(\"fillGradient\");\r\n            const fillPattern = this.get(\"fillPattern\");\r\n            const fillOpacity = this.get(\"fillOpacity\");\r\n            const stroke = this.get(\"stroke\");\r\n            const strokeGradient = this.get(\"strokeGradient\");\r\n            const strokePattern = this.get(\"strokePattern\");\r\n            const shadowColor = this.get(\"shadowColor\");\r\n            const shadowBlur = this.get(\"shadowBlur\");\r\n            const shadowOffsetX = this.get(\"shadowOffsetX\");\r\n            const shadowOffsetY = this.get(\"shadowOffsetY\");\r\n            const shadowOpacity = this.get(\"shadowOpacity\");\r\n            if (shadowColor && (shadowBlur || shadowOffsetX || shadowOffsetY)) {\r\n                this._display.shadow(shadowColor, shadowBlur, shadowOffsetX, shadowOffsetY, shadowOpacity);\r\n            }\r\n            if (fill && !fillGradient) {\r\n                this._display.beginFill(fill, fillOpacity);\r\n                this._display.endFill();\r\n            }\r\n            if (fillGradient) {\r\n                if (fill) {\r\n                    const stops = fillGradient.get(\"stops\", []);\r\n                    if (stops.length) {\r\n                        $array.each(stops, (stop) => {\r\n                            if ((!stop.color || stop.colorInherited) && fill) {\r\n                                stop.color = fill;\r\n                                stop.colorInherited = true;\r\n                            }\r\n                            if (stop.opacity == null || stop.opacityInherited) {\r\n                                stop.opacity = fillOpacity;\r\n                                stop.opacityInherited = true;\r\n                            }\r\n                        });\r\n                    }\r\n                }\r\n                const gradient = fillGradient.getFill(this);\r\n                if (gradient) {\r\n                    this._display.beginFill(gradient, fillOpacity);\r\n                    this._display.endFill();\r\n                }\r\n            }\r\n            if (fillPattern) {\r\n                const pattern = fillPattern.pattern;\r\n                if (pattern) {\r\n                    this._display.beginFill(pattern, fillOpacity);\r\n                    this._display.endFill();\r\n                    if (fillPattern instanceof PicturePattern) {\r\n                        fillPattern.events.once(\"loaded\", () => {\r\n                            this._clear = true;\r\n                            this.markDirty();\r\n                        });\r\n                    }\r\n                }\r\n            }\r\n            if (stroke || strokeGradient || strokePattern) {\r\n                const strokeOpacity = this.get(\"strokeOpacity\");\r\n                let strokeWidth = this.get(\"strokeWidth\", 1);\r\n                if (this.get(\"nonScalingStroke\")) {\r\n                    strokeWidth = strokeWidth / this.get(\"scale\", 1);\r\n                }\r\n                if (this.get(\"crisp\")) {\r\n                    strokeWidth /= this._root._renderer.resolution;\r\n                }\r\n                const lineJoin = this.get(\"lineJoin\");\r\n                if (stroke && !strokeGradient) {\r\n                    this._display.lineStyle(strokeWidth, stroke, strokeOpacity, lineJoin);\r\n                    this._display.endStroke();\r\n                }\r\n                if (strokeGradient) {\r\n                    const stops = strokeGradient.get(\"stops\", []);\r\n                    if (stops.length) {\r\n                        $array.each(stops, (stop) => {\r\n                            if ((!stop.color || stop.colorInherited) && stroke) {\r\n                                stop.color = stroke;\r\n                                stop.colorInherited = true;\r\n                            }\r\n                            if (stop.opacity == null || stop.opacityInherited) {\r\n                                stop.opacity = strokeOpacity;\r\n                                stop.opacityInherited = true;\r\n                            }\r\n                        });\r\n                    }\r\n                    const gradient = strokeGradient.getFill(this);\r\n                    if (gradient) {\r\n                        this._display.lineStyle(strokeWidth, gradient, strokeOpacity, lineJoin);\r\n                        this._display.endStroke();\r\n                    }\r\n                }\r\n                if (strokePattern) {\r\n                    /*\r\n                    let changed = false;\r\n                    \r\n                    if (stroke && (!strokePattern.get(\"color\") || strokePattern.get(\"colorInherited\"))) {\r\n                        strokePattern.set(\"color\", stroke);\r\n                        strokePattern.set(\"colorInherited\", true);\r\n                        changed = true;\r\n                    }\r\n                    if (changed) {\r\n                        // @todo: is this OK?\r\n                        strokePattern._changed();\r\n                    }\r\n                    */\r\n                    let pattern = strokePattern.pattern;\r\n                    if (pattern) {\r\n                        this._display.lineStyle(strokeWidth, pattern, strokeOpacity, lineJoin);\r\n                        this._display.endStroke();\r\n                        if (strokePattern instanceof PicturePattern) {\r\n                            strokePattern.events.once(\"loaded\", () => {\r\n                                this._clear = true;\r\n                                this.markDirty();\r\n                            });\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n            if (this.getPrivate(\"showingTooltip\")) {\r\n                this.showTooltip();\r\n            }\r\n        }\r\n        this._clear = false;\r\n    }\r\n}\r\nObject.defineProperty(Graphics, \"className\", {\r\n    enumerable: true,\r\n    configurable: true,\r\n    writable: true,\r\n    value: \"Graphics\"\r\n});\r\nObject.defineProperty(Graphics, \"classNames\", {\r\n    enumerable: true,\r\n    configurable: true,\r\n    writable: true,\r\n    value: Sprite.classNames.concat([Graphics.className])\r\n});\r\n//# sourceMappingURL=Graphics.js.map","import { Graphics } from \"./Graphics\";\r\n/**\r\n * Draws a rectangle.\r\n *\r\n * @see {@link https://www.amcharts.com/docs/v5/concepts/common-elements/graphics/} for more info\r\n * @important\r\n */\r\nexport class Rectangle extends Graphics {\r\n    _afterNew() {\r\n        super._afterNew();\r\n        this._display.isMeasured = true;\r\n        this.setPrivateRaw(\"trustBounds\", true);\r\n    }\r\n    _beforeChanged() {\r\n        super._beforeChanged();\r\n        if (this.isDirty(\"width\") || this.isDirty(\"height\") || this.isPrivateDirty(\"width\") || this.isPrivateDirty(\"height\")) {\r\n            this._clear = true;\r\n        }\r\n    }\r\n    _changed() {\r\n        super._changed();\r\n        if (this._clear && !this.get(\"draw\")) {\r\n            this._draw();\r\n        }\r\n    }\r\n    _draw() {\r\n        this._display.drawRect(0, 0, this.width(), this.height());\r\n    }\r\n    _updateSize() {\r\n        this.markDirty();\r\n        this._clear = true;\r\n    }\r\n}\r\nObject.defineProperty(Rectangle, \"className\", {\r\n    enumerable: true,\r\n    configurable: true,\r\n    writable: true,\r\n    value: \"Rectangle\"\r\n});\r\nObject.defineProperty(Rectangle, \"classNames\", {\r\n    enumerable: true,\r\n    configurable: true,\r\n    writable: true,\r\n    value: Graphics.classNames.concat([Rectangle.className])\r\n});\r\n//# sourceMappingURL=Rectangle.js.map","import { Entity } from \"../util/Entity\";\r\nexport function eachChildren(container, f) {\r\n    if (container.get(\"reverseChildren\", false)) {\r\n        container.children.eachReverse(f);\r\n    }\r\n    else {\r\n        container.children.each(f);\r\n    }\r\n}\r\n/**\r\n * Base class for [[Container]] layouts.\r\n */\r\nexport class Layout extends Entity {\r\n}\r\nObject.defineProperty(Layout, \"className\", {\r\n    enumerable: true,\r\n    configurable: true,\r\n    writable: true,\r\n    value: \"Layout\"\r\n});\r\nObject.defineProperty(Layout, \"classNames\", {\r\n    enumerable: true,\r\n    configurable: true,\r\n    writable: true,\r\n    value: Entity.classNames.concat([Layout.className])\r\n});\r\n//# sourceMappingURL=Layout.js.map","import { Layout, eachChildren } from \"./Layout\";\r\nimport * as $type from \"../util/Type\";\r\nimport { Percent } from \"../util/Percent\";\r\n/**\r\n * A horizontal children layout for [[Container]].\r\n *\r\n * @see {@link https://www.amcharts.com/docs/v5/concepts/common-elements/containers/#Layout} for more info\r\n */\r\nexport class HorizontalLayout extends Layout {\r\n    /**\r\n     * @ignore\r\n     */\r\n    updateContainer(container) {\r\n        let paddingLeft = container.get(\"paddingLeft\", 0);\r\n        let availableWidth = container.innerWidth();\r\n        let totalPercent = 0;\r\n        eachChildren(container, (child) => {\r\n            if (child.isVisible()) {\r\n                if (child.get(\"position\") == \"relative\") {\r\n                    let childWidth = child.get(\"width\");\r\n                    if (childWidth instanceof Percent) {\r\n                        totalPercent += childWidth.value;\r\n                        let w = availableWidth * childWidth.value;\r\n                        let minWidth = child.get(\"minWidth\", child.getPrivate(\"minWidth\", -Infinity));\r\n                        if (minWidth > w) {\r\n                            availableWidth -= minWidth;\r\n                            totalPercent -= childWidth.value;\r\n                        }\r\n                        let maxWidth = child.get(\"maxWidth\", child.getPrivate(\"maxWidth\", Infinity));\r\n                        if (w > maxWidth) {\r\n                            availableWidth -= maxWidth;\r\n                            totalPercent -= childWidth.value;\r\n                        }\r\n                    }\r\n                    else {\r\n                        if (!$type.isNumber(childWidth)) {\r\n                            childWidth = child.width();\r\n                        }\r\n                        availableWidth -= childWidth + child.get(\"marginLeft\", 0) + child.get(\"marginRight\", 0);\r\n                    }\r\n                }\r\n            }\r\n        });\r\n        if (availableWidth <= 0 || availableWidth == Infinity) {\r\n            availableWidth = .1;\r\n        }\r\n        //if (availableWidth > 0) {\r\n        eachChildren(container, (child) => {\r\n            if (child.isVisible()) {\r\n                if (child.get(\"position\") == \"relative\") {\r\n                    let childWidth = child.get(\"width\");\r\n                    if (childWidth instanceof Percent) {\r\n                        let privateWidth = availableWidth * childWidth.value / totalPercent - child.get(\"marginLeft\", 0) - child.get(\"marginRight\", 0);\r\n                        let minWidth = child.get(\"minWidth\", child.getPrivate(\"minWidth\", -Infinity));\r\n                        let maxWidth = child.get(\"maxWidth\", child.getPrivate(\"maxWidth\", Infinity));\r\n                        privateWidth = Math.min(Math.max(minWidth, privateWidth), maxWidth);\r\n                        child.setPrivate(\"width\", privateWidth);\r\n                    }\r\n                    else {\r\n                        if (child._prevSettings.width instanceof Percent) {\r\n                            child.setPrivate(\"width\", undefined);\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        });\r\n        //}\r\n        let prevX = paddingLeft;\r\n        eachChildren(container, (child) => {\r\n            if (child.get(\"position\") == \"relative\") {\r\n                if (child.isVisible()) {\r\n                    let bounds = child.adjustedLocalBounds();\r\n                    let marginLeft = child.get(\"marginLeft\", 0);\r\n                    let marginRight = child.get(\"marginRight\", 0);\r\n                    let maxWidth = child.get(\"maxWidth\");\r\n                    let left = bounds.left;\r\n                    let right = bounds.right;\r\n                    if (maxWidth) {\r\n                        if (right - left > maxWidth) {\r\n                            right = left + maxWidth;\r\n                        }\r\n                    }\r\n                    let x = prevX + marginLeft - left;\r\n                    child.setPrivate(\"x\", x);\r\n                    prevX = x + right + marginRight;\r\n                }\r\n                else {\r\n                    child.setPrivate(\"x\", undefined);\r\n                }\r\n            }\r\n        });\r\n    }\r\n}\r\nObject.defineProperty(HorizontalLayout, \"className\", {\r\n    enumerable: true,\r\n    configurable: true,\r\n    writable: true,\r\n    value: \"HorizontalLayout\"\r\n});\r\nObject.defineProperty(HorizontalLayout, \"classNames\", {\r\n    enumerable: true,\r\n    configurable: true,\r\n    writable: true,\r\n    value: Layout.classNames.concat([HorizontalLayout.className])\r\n});\r\n//# sourceMappingURL=HorizontalLayout.js.map","import { Layout, eachChildren } from \"./Layout\";\r\nimport * as $type from \"../util/Type\";\r\nimport { Percent } from \"../util/Percent\";\r\n/**\r\n * A vertical children layout for [[Container]].\r\n *\r\n * @see {@link https://www.amcharts.com/docs/v5/concepts/common-elements/containers/#Layout} for more info\r\n */\r\nexport class VerticalLayout extends Layout {\r\n    /**\r\n     * @ignore\r\n     */\r\n    updateContainer(container) {\r\n        let paddingTop = container.get(\"paddingTop\", 0);\r\n        let availableHeight = container.innerHeight();\r\n        let totalPercent = 0;\r\n        eachChildren(container, (child) => {\r\n            if (child.isVisible()) {\r\n                if (child.get(\"position\") == \"relative\") {\r\n                    let childHeight = child.get(\"height\");\r\n                    if (childHeight instanceof Percent) {\r\n                        totalPercent += childHeight.value;\r\n                        let h = availableHeight * childHeight.value;\r\n                        let minHeight = child.get(\"minHeight\", child.getPrivate(\"minHeight\", -Infinity));\r\n                        if (minHeight > h) {\r\n                            availableHeight -= minHeight;\r\n                            totalPercent -= childHeight.value;\r\n                        }\r\n                        let maxHeight = child.get(\"maxHeight\", child.getPrivate(\"maxHeight\", Infinity));\r\n                        if (h > maxHeight) {\r\n                            availableHeight -= maxHeight;\r\n                            totalPercent -= childHeight.value;\r\n                        }\r\n                    }\r\n                    else {\r\n                        if (!$type.isNumber(childHeight)) {\r\n                            childHeight = child.height();\r\n                        }\r\n                        availableHeight -= childHeight + child.get(\"marginTop\", 0) + child.get(\"marginBottom\", 0);\r\n                    }\r\n                }\r\n            }\r\n        });\r\n        if (availableHeight <= 0 || availableHeight == Infinity) {\r\n            availableHeight = .1;\r\n        }\r\n        //if (availableHeight > 0) {\r\n        eachChildren(container, (child) => {\r\n            if (child.isVisible()) {\r\n                if (child.get(\"position\") == \"relative\") {\r\n                    let childHeight = child.get(\"height\");\r\n                    if (childHeight instanceof Percent) {\r\n                        let privateHeight = availableHeight * childHeight.value / totalPercent - child.get(\"marginTop\", 0) - child.get(\"marginBottom\", 0);\r\n                        let minHeight = child.get(\"minHeight\", child.getPrivate(\"minHeight\", -Infinity));\r\n                        let maxHeight = child.get(\"maxHeight\", child.getPrivate(\"maxHeight\", Infinity));\r\n                        privateHeight = Math.min(Math.max(minHeight, privateHeight), maxHeight);\r\n                        child.setPrivate(\"height\", privateHeight);\r\n                    }\r\n                    else {\r\n                        if (child._prevSettings.height instanceof Percent) {\r\n                            child.setPrivate(\"height\", undefined);\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        });\r\n        //}\r\n        let prevY = paddingTop;\r\n        eachChildren(container, (child) => {\r\n            if (child.get(\"position\") == \"relative\") {\r\n                if (child.isVisible()) {\r\n                    let bounds = child.adjustedLocalBounds();\r\n                    let marginTop = child.get(\"marginTop\", 0);\r\n                    let top = bounds.top;\r\n                    let bottom = bounds.bottom;\r\n                    let maxHeight = child.get(\"maxHeight\");\r\n                    if (maxHeight) {\r\n                        if (bottom - top > maxHeight) {\r\n                            bottom = top + maxHeight;\r\n                        }\r\n                    }\r\n                    let marginBottom = child.get(\"marginBottom\", 0);\r\n                    let y = prevY + marginTop - top;\r\n                    child.setPrivate(\"y\", y);\r\n                    prevY = y + bottom + marginBottom;\r\n                }\r\n                else {\r\n                    child.setPrivate(\"y\", undefined);\r\n                }\r\n            }\r\n        });\r\n    }\r\n}\r\nObject.defineProperty(VerticalLayout, \"className\", {\r\n    enumerable: true,\r\n    configurable: true,\r\n    writable: true,\r\n    value: \"VerticalLayout\"\r\n});\r\nObject.defineProperty(VerticalLayout, \"classNames\", {\r\n    enumerable: true,\r\n    configurable: true,\r\n    writable: true,\r\n    value: Layout.classNames.concat([VerticalLayout.className])\r\n});\r\n//# sourceMappingURL=VerticalLayout.js.map","import { Layout, eachChildren } from \"./Layout\";\r\nimport * as $array from \"../util/Array\";\r\nimport * as $math from \"../util/Math\";\r\n/**\r\n * A grid children layout for [[Container]].\r\n *\r\n * @see {@link https://www.amcharts.com/docs/v5/concepts/common-elements/containers/#Layout} for more info\r\n */\r\nexport class GridLayout extends Layout {\r\n    _afterNew() {\r\n        this._setRawDefault(\"maxColumns\", Number.MAX_VALUE);\r\n        super._afterNew();\r\n    }\r\n    /**\r\n     * @ignore\r\n     */\r\n    updateContainer(container) {\r\n        let paddingLeft = container.get(\"paddingLeft\", 0);\r\n        let paddingRight = container.get(\"paddingRight\", 0);\r\n        let paddingTop = container.get(\"paddingTop\", 0);\r\n        let availableWidth = container.maxWidth() - paddingLeft - paddingRight;\r\n        let minCellWidth = availableWidth;\r\n        let maxCellWidth = 1;\r\n        eachChildren(container, (child) => {\r\n            if (child.get(\"visible\") && child.getPrivate(\"visible\") && !child.get(\"forceHidden\")) {\r\n                if (child.get(\"position\") != \"absolute\") {\r\n                    let childWidth = child.width();\r\n                    if (childWidth < minCellWidth) {\r\n                        minCellWidth = childWidth;\r\n                    }\r\n                    if (childWidth > maxCellWidth) {\r\n                        maxCellWidth = childWidth;\r\n                    }\r\n                }\r\n            }\r\n        });\r\n        minCellWidth = $math.fitToRange(minCellWidth, 1, availableWidth);\r\n        maxCellWidth = $math.fitToRange(maxCellWidth, 1, availableWidth);\r\n        let columnCount = 1;\r\n        if (this.get(\"fixedWidthGrid\")) {\r\n            columnCount = availableWidth / maxCellWidth;\r\n        }\r\n        else {\r\n            columnCount = availableWidth / minCellWidth;\r\n        }\r\n        columnCount = Math.max(1, Math.floor(columnCount));\r\n        columnCount = Math.min(this.get(\"maxColumns\", Number.MAX_VALUE), columnCount);\r\n        let columnWidths = this.getColumnWidths(container, columnCount, maxCellWidth, availableWidth);\r\n        let prevY = paddingTop;\r\n        let column = 0;\r\n        let maxColumnHeight = 0;\r\n        columnCount = columnWidths.length;\r\n        let prevX = paddingLeft;\r\n        eachChildren(container, (child) => {\r\n            if (child.get(\"position\") == \"relative\" && child.isVisible()) {\r\n                const marginTop = child.get(\"marginTop\", 0);\r\n                const marginBottom = child.get(\"marginBottom\", 0);\r\n                let bounds = child.adjustedLocalBounds();\r\n                let marginLeft = child.get(\"marginLeft\", 0);\r\n                let marginRight = child.get(\"marginRight\", 0);\r\n                let x = prevX + marginLeft - bounds.left;\r\n                let y = prevY + marginTop - bounds.top;\r\n                child.setPrivate(\"x\", x);\r\n                child.setPrivate(\"y\", y);\r\n                prevX += columnWidths[column] + marginRight;\r\n                maxColumnHeight = Math.max(maxColumnHeight, child.height() + marginTop + marginBottom);\r\n                column++;\r\n                if (column >= columnCount) {\r\n                    column = 0;\r\n                    prevX = paddingLeft;\r\n                    prevY += maxColumnHeight;\r\n                }\r\n            }\r\n        });\r\n    }\r\n    /**\r\n     * @ignore\r\n     */\r\n    getColumnWidths(container, columnCount, maxCellWidth, availableWidth) {\r\n        let totalWidth = 0;\r\n        let columnWidths = [];\r\n        let column = 0;\r\n        eachChildren(container, (child) => {\r\n            let bounds = child.adjustedLocalBounds();\r\n            if (child.get(\"position\") != \"absolute\" && child.isVisible()) {\r\n                if (this.get(\"fixedWidthGrid\")) {\r\n                    columnWidths[column] = maxCellWidth;\r\n                }\r\n                else {\r\n                    columnWidths[column] = Math.max(columnWidths[column] | 0, bounds.right - bounds.left + child.get(\"marginLeft\", 0) + child.get(\"marginRight\", 0));\r\n                }\r\n                if (column < container.children.length - 1) {\r\n                    column++;\r\n                    if (column == columnCount) {\r\n                        column = 0;\r\n                    }\r\n                }\r\n            }\r\n        });\r\n        $array.each(columnWidths, (w) => {\r\n            totalWidth += w;\r\n        });\r\n        if (totalWidth > availableWidth) {\r\n            if (columnCount > 2) {\r\n                columnCount -= 1;\r\n                return this.getColumnWidths(container, columnCount, maxCellWidth, availableWidth);\r\n            }\r\n            else {\r\n                return [availableWidth];\r\n            }\r\n        }\r\n        return columnWidths;\r\n    }\r\n}\r\nObject.defineProperty(GridLayout, \"className\", {\r\n    enumerable: true,\r\n    configurable: true,\r\n    writable: true,\r\n    value: \"GridLayout\"\r\n});\r\nObject.defineProperty(GridLayout, \"classNames\", {\r\n    enumerable: true,\r\n    configurable: true,\r\n    writable: true,\r\n    value: Layout.classNames.concat([GridLayout.className])\r\n});\r\n//# sourceMappingURL=GridLayout.js.map","import { Color } from \"./Color\";\r\nimport * as $type from \"./Type\";\r\nexport class TextFormatter {\r\n    /**\r\n     * Replaces brackets with temporary placeholders.\r\n     *\r\n     * @ignore Exclude from docs\r\n     * @param text  Input text\r\n     * @return Escaped text\r\n     */\r\n    static escape(text) {\r\n        return text.\r\n            replace(/\\[\\[/g, this.prefix + \"1\").\r\n            replace(/([^\\/\\]]{1})\\]\\]/g, \"$1\" + this.prefix + \"2\").\r\n            replace(/\\]\\]/g, this.prefix + \"2\").\r\n            replace(/\\{\\{/g, this.prefix + \"3\").\r\n            replace(/\\}\\}/g, this.prefix + \"4\").\r\n            replace(/\\'\\'/g, this.prefix + \"5\");\r\n    }\r\n    /**\r\n     * Replaces placeholders back to brackets.\r\n     *\r\n     * @ignore Exclude from docs\r\n     * @param text  Escaped text\r\n     * @return Unescaped text\r\n     */\r\n    static unescape(text) {\r\n        return text.\r\n            replace(new RegExp(this.prefix + \"1\", \"g\"), \"[[\").\r\n            replace(new RegExp(this.prefix + \"2\", \"g\"), \"]]\").\r\n            replace(new RegExp(this.prefix + \"3\", \"g\"), \"{{\").\r\n            replace(new RegExp(this.prefix + \"4\", \"g\"), \"}}\").\r\n            replace(new RegExp(this.prefix + \"5\", \"g\"), \"''\");\r\n    }\r\n    /**\r\n     * Cleans up the text text for leftover double square brackets.\r\n     *\r\n     * @ignore Exclude from docs\r\n     * @param text  Input text\r\n     * @return Cleaned up text\r\n     */\r\n    static cleanUp(text) {\r\n        return text.\r\n            replace(/\\[\\[/g, \"[\").\r\n            replace(/\\]\\]/g, \"]\").\r\n            replace(/\\{\\{/g, \"{\").\r\n            replace(/\\}\\}/g, \"}\").\r\n            replace(/\\'\\'/g, \"'\");\r\n    }\r\n    /**\r\n     * Splits string into chunks. (style blocks, quoted blocks, regular blocks)\r\n     *\r\n     * If the second parameter `quotedBlocks` is set to `true` this method will\r\n     * also single out text blocks enclosed within single quotes that no\r\n     * formatting should be applied to, and they should be displayed as is.\r\n     *\r\n     * Default for the above is `false`, so that you can use single quote in text\r\n     * without escaping it.\r\n     *\r\n     * If enabled, single quotes can be escaped by doubling it - adding two\r\n     * single quotes, which will be replaced by a one single quote in the final\r\n     * output.\r\n     *\r\n     * @ignore Exclude from docs\r\n     * @param text          Text to chunk\r\n     * @param quotedBlocks  Use quoted blocks\r\n     * @param noFormatting  Formatting blocks will be treated as regular text\r\n     * @return Array of string chunks\r\n     */\r\n    static chunk(text, quotedBlocks = false, noFormatting = false) {\r\n        // Init result\r\n        let res = [];\r\n        // Replace double (escaped) square spaces and quotes with temporary codes\r\n        text = this.escape(text);\r\n        // Deal with style blocks\r\n        let chunks = quotedBlocks ? text.split(\"'\") : [text];\r\n        for (let i = 0; i < chunks.length; i++) {\r\n            let chunk = chunks[i];\r\n            // Empty?\r\n            if (chunk === \"\") {\r\n                continue;\r\n            }\r\n            if ((i % 2) === 0) {\r\n                // Text outside quotes\r\n                // Parse for style blocks which are \"text\" chunks, the rest chunks are\r\n                // \"value\"\r\n                chunk = chunk.replace(/\\]\\[/g, \"]\" + $type.PLACEHOLDER + \"[\");\r\n                chunk = chunk.replace(/\\[\\]/g, \"[ ]\");\r\n                let chunks2 = chunk.split(/[\\[\\]]+/);\r\n                for (let i2 = 0; i2 < chunks2.length; i2++) {\r\n                    let chunk2 = this.cleanUp(this.unescape(chunks2[i2]));\r\n                    // Placeholder?\r\n                    if (chunk2 === $type.PLACEHOLDER) {\r\n                        continue;\r\n                    }\r\n                    // Empty?\r\n                    if (chunk2 === \"\") {\r\n                        continue;\r\n                    }\r\n                    // Block or value\r\n                    if ((i2 % 2) === 0) {\r\n                        res.push({\r\n                            \"type\": \"value\",\r\n                            \"text\": chunk2\r\n                        });\r\n                    }\r\n                    else {\r\n                        res.push({\r\n                            \"type\": noFormatting ? \"value\" : \"format\",\r\n                            \"text\": \"[\" + chunk2 + \"]\"\r\n                        });\r\n                    }\r\n                }\r\n            }\r\n            else {\r\n                // A text within doublequotes\r\n                // All chunks are \"text\"\r\n                let chunks2 = chunk.split(/[\\[\\]]+/);\r\n                for (let i2 = 0; i2 < chunks2.length; i2++) {\r\n                    let chunk2 = this.cleanUp(this.unescape(chunks2[i2]));\r\n                    // Empty?\r\n                    if (chunk2 === \"\") {\r\n                        continue;\r\n                    }\r\n                    // Block or text\r\n                    if ((i2 % 2) === 0) {\r\n                        res.push({\r\n                            \"type\": \"text\",\r\n                            \"text\": chunk2\r\n                        });\r\n                    }\r\n                    else if (this.isImage(chunk2)) {\r\n                        res.push({\r\n                            \"type\": \"image\",\r\n                            \"text\": \"[\" + chunk2 + \"]\"\r\n                        });\r\n                    }\r\n                    else {\r\n                        res.push({\r\n                            \"type\": \"format\",\r\n                            \"text\": \"[\" + chunk2 + \"]\"\r\n                        });\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        return res;\r\n    }\r\n    /**\r\n     * Checks if supplied format contains image information and should be\r\n     * formatted as such.\r\n     * I.e.: `[img: myImage.png]`\r\n     *\r\n     * @ignore\r\n     * @param  text  Format\r\n     * @return true if it is an image\r\n     */\r\n    static isImage(text) {\r\n        return text.match(/img[ ]?:/) ? true : false;\r\n    }\r\n    static getTextStyle(style) {\r\n        // let textStyle: string[] = [];\r\n        // let textFill: string | undefined;\r\n        let format = {};\r\n        if (style == \"\" || style == \"[ ]\") {\r\n            return {};\r\n        }\r\n        // Pre-process quoted text\r\n        const q = style.match(/('[^']*')|(\"[^\"]*\")/gi);\r\n        if (q) {\r\n            for (let i = 0; i < q.length; i++) {\r\n                style = style.replace(q[i], q[i].replace(/['\"]*/g, \"\").replace(/[ ]+/g, \"+\"));\r\n            }\r\n        }\r\n        // Get style parts\r\n        let b = style.match(/([\\w\\-]*:[\\s]?[^;\\s\\]]*)|(\\#[\\w]{1,6})|([\\w\\-]+)|(\\/)/gi);\r\n        // Empty?\r\n        if (!b) {\r\n            return {};\r\n        }\r\n        // Check each part\r\n        for (let i = 0; i < b.length; i++) {\r\n            if (b[i].match(/^(normal|bold|bolder|lighter|100|200|300|400|500|600|700|800|900)$/i)) {\r\n                format.fontWeight = b[i];\r\n            }\r\n            else if (b[i].match(/^(underline|line-through)$/i)) {\r\n                format.textDecoration = b[i];\r\n            }\r\n            else if (b[i] == \"/\") {\r\n                // Just closing tag\r\n                // Do nothing\r\n            }\r\n            else if (!b[i].match(/:/)) {\r\n                // Color\r\n                format.fill = Color.fromString(b[i]);\r\n            }\r\n            else {\r\n                const p = b[i].replace(\"+\", \" \").split(/:[ ]*/);\r\n                format[p[0]] = p[1];\r\n                //textStyle.push(b[i].replace(/^[a-zA-Z]:[ ]*/, \"\"));\r\n                //b[i] = b[i].replace(/\\+/g, \" \");\r\n            }\r\n        }\r\n        return format;\r\n    }\r\n}\r\nObject.defineProperty(TextFormatter, \"prefix\", {\r\n    enumerable: true,\r\n    configurable: true,\r\n    writable: true,\r\n    value: \"__amcharts__\"\r\n});\r\n//# sourceMappingURL=TextFormatter.js.map","/** @ignore */ /** */\r\nimport * as $type from \"./Type\";\r\nimport * as $utils from \"./Utils\";\r\nimport { Sprite } from \"../render/Sprite\";\r\nimport { TextFormatter } from \"./TextFormatter\";\r\n/**\r\n * @ignore\r\n */\r\nexport function populateString(target, string) {\r\n    if (string != null) {\r\n        string = \"\" + string;\r\n        string = TextFormatter.escape(string);\r\n        let tags = string.match(/\\{([^}]+)\\}/g);\r\n        let i;\r\n        if (tags) {\r\n            for (i = 0; i < tags.length; i++) {\r\n                let tag = tags[i].replace(/\\{([^}]+)\\}/, \"$1\");\r\n                let value = getTagValue(target, tag, \"\");\r\n                if (value == null) {\r\n                    value = \"\";\r\n                }\r\n                string = string.split(tags[i]).join(value);\r\n            }\r\n        }\r\n        string = TextFormatter.unescape(string);\r\n    }\r\n    else {\r\n        string = \"\";\r\n    }\r\n    // TODO: apply adapter?\r\n    return string;\r\n}\r\n/**\r\n * @ignore\r\n */\r\nfunction getTagValue(target, tagName, format) {\r\n    let value;\r\n    const dataItem = target.dataItem;\r\n    // Parse parts\r\n    let parts = [];\r\n    let reg = /(format[a-zA-Z]*)\\((.*)\\)|([^.]+)/g;\r\n    let matches;\r\n    while (true) {\r\n        matches = reg.exec(tagName);\r\n        if (matches === null) {\r\n            break;\r\n        }\r\n        if (matches[3]) {\r\n            // Simple property\r\n            parts.push({\r\n                prop: matches[3]\r\n            });\r\n            // Check if maybe we should force a formatter on this value\r\n            const dateFields = target.getDateFormatter().get(\"dateFields\", []);\r\n            const numericFields = target.getNumberFormatter().get(\"numericFields\", []);\r\n            const durationFields = target.getDurationFormatter().get(\"durationFields\", []);\r\n            if (dateFields.indexOf(matches[3]) !== -1) {\r\n                parts.push({\r\n                    method: \"formatDate\",\r\n                    params: []\r\n                });\r\n            }\r\n            else if (numericFields.indexOf(matches[3]) !== -1) {\r\n                parts.push({\r\n                    method: \"formatNumber\",\r\n                    params: []\r\n                });\r\n            }\r\n            else if (durationFields.indexOf(matches[3]) !== -1) {\r\n                parts.push({\r\n                    method: \"formatDuration\",\r\n                    params: []\r\n                });\r\n            }\r\n        }\r\n        else {\r\n            // Method\r\n            // Parse parameters\r\n            let params = [];\r\n            if ($utils.trim(matches[2]) != \"\") {\r\n                let reg2 = /'([^']*)'|\"([^\"]*)\"|([0-9\\-]+)/g;\r\n                let matches2;\r\n                while (true) {\r\n                    matches2 = reg2.exec(matches[2]);\r\n                    if (matches2 === null) {\r\n                        break;\r\n                    }\r\n                    params.push(matches2[1] || matches2[2] || matches2[3]);\r\n                }\r\n            }\r\n            parts.push({\r\n                method: matches[1],\r\n                params: params\r\n            });\r\n        }\r\n    }\r\n    // Check if we can retrieve the value from data item\r\n    if (dataItem) {\r\n        // Check values\r\n        value = getTagValueFromObject(target, parts, dataItem._settings);\r\n        // Check properties\r\n        if (value == null || $type.isObject(value)) { // isObject helps to solve problem with date axis, as for example dateX will get dateX from values object and won't get to the dateX date.\r\n            value = getTagValueFromObject(target, parts, dataItem);\r\n        }\r\n        // Check data context\r\n        let dataContext = dataItem.dataContext;\r\n        if (value == null && dataContext) {\r\n            value = getTagValueFromObject(target, parts, dataContext);\r\n            // Maybe it's a literal dot-separated name of the key in dataContext?\r\n            if (value == null) {\r\n                value = getTagValueFromObject(target, [{\r\n                        prop: tagName\r\n                    }], dataContext);\r\n            }\r\n            // scond data context level sometimes exist (tree map)\r\n            if (value == null && dataContext.dataContext) {\r\n                value = getTagValueFromObject(target, parts, dataContext.dataContext);\r\n            }\r\n        }\r\n        // Check component's data item\r\n        if (value == null && dataItem.component && dataItem.component.dataItem !== dataItem) {\r\n            value = getTagValue(dataItem.component, tagName, format);\r\n        }\r\n    }\r\n    // Check sprite's properties\r\n    if (value == null) {\r\n        value = getTagValueFromObject(target, parts, target);\r\n    }\r\n    // Finally, check the parent\r\n    if (value == null && target.parent) {\r\n        value = getTagValue(target.parent, tagName, format);\r\n    }\r\n    return value;\r\n}\r\n/**\r\n * @ignore\r\n */\r\nfunction getCustomDataValue(target, prop) {\r\n    const customData = target.getPrivate(\"customData\");\r\n    if ($type.isObject(customData)) {\r\n        return customData[prop];\r\n    }\r\n}\r\n/**\r\n * @ignore\r\n */\r\nexport function getTagValueFromObject(target, parts, object, format) {\r\n    let current = object;\r\n    let formatApplied = false;\r\n    for (let i = 0, len = parts.length; i < len; i++) {\r\n        let part = parts[i];\r\n        if (part.prop) {\r\n            // Regular property\r\n            if (current instanceof Sprite) {\r\n                let tmp = current.get(part.prop);\r\n                if (tmp == null)\r\n                    tmp = current.getPrivate(part.prop);\r\n                if (tmp == null)\r\n                    tmp = getCustomDataValue(current, part.prop);\r\n                if (tmp == null)\r\n                    tmp = current[part.prop];\r\n                current = tmp;\r\n            }\r\n            else if (current.get) {\r\n                let tmp = current.get(part.prop);\r\n                if (tmp == null)\r\n                    tmp = current[part.prop];\r\n                current = tmp;\r\n            }\r\n            else {\r\n                current = current[part.prop];\r\n            }\r\n            if (current == null) {\r\n                // Not set, return undefined\r\n                return;\r\n            }\r\n        }\r\n        else {\r\n            // Method\r\n            switch (part.method) {\r\n                case \"formatNumber\":\r\n                    let numberValue = $type.toNumber(current);\r\n                    if (numberValue != null) {\r\n                        current = target.getNumberFormatter().format(numberValue, format || part.params[0] || undefined);\r\n                        formatApplied = true;\r\n                    }\r\n                    break;\r\n                case \"formatDate\":\r\n                    let dateValue = $type.toDate(current);\r\n                    if (!$type.isDate(dateValue) || $type.isNaN(dateValue.getTime())) {\r\n                        // Was not able to get date out of value, quitting and letting\r\n                        // calling method try another value\r\n                        return;\r\n                    }\r\n                    if (dateValue != null) {\r\n                        current = target.getDateFormatter().format(dateValue, format || part.params[0] || undefined);\r\n                        formatApplied = true;\r\n                    }\r\n                    break;\r\n                case \"formatDuration\":\r\n                    let durationValue = $type.toNumber(current);\r\n                    if (durationValue != null) {\r\n                        current = target.getDurationFormatter().format(durationValue, format || part.params[0] || undefined, part.params[1] || undefined);\r\n                        formatApplied = true;\r\n                    }\r\n                    break;\r\n                case \"urlEncode\":\r\n                case \"encodeURIComponent\":\r\n                    current = encodeURIComponent(current);\r\n                    break;\r\n                default:\r\n                    if (current[part.method]) {\r\n                        current[part.method].apply(object, part.params);\r\n                    }\r\n                    break;\r\n            }\r\n        }\r\n    }\r\n    // Apply default format if it wasn't applied explicitly\r\n    if (!formatApplied) {\r\n        let formatParts = [{\r\n                method: \"\",\r\n                params: format\r\n            }];\r\n        if (format == null) {\r\n            // Format is not set\r\n            // Determine from the type of the value\r\n            if ($type.isNumber(current)) {\r\n                formatParts[0].method = \"formatNumber\";\r\n                formatParts[0].params = \"\";\r\n            }\r\n            else if ($type.isDate(current)) {\r\n                formatParts[0].method = \"formatDate\";\r\n                formatParts[0].params = \"\";\r\n            }\r\n        }\r\n        else {\r\n            // Format set\r\n            // Try to determine formatter based on the format\r\n            let formatterType = $utils.getFormat(format);\r\n            // format\r\n            if (formatterType === \"number\") {\r\n                formatParts[0].method = \"formatNumber\";\r\n            }\r\n            else if (formatterType === \"date\") {\r\n                formatParts[0].method = \"formatDate\";\r\n            }\r\n            else if (formatterType === \"duration\") {\r\n                formatParts[0].method = \"formatDuration\";\r\n            }\r\n        }\r\n        // Apply format\r\n        if (formatParts[0].method) {\r\n            current = getTagValueFromObject(target, formatParts, current);\r\n        }\r\n    }\r\n    return current;\r\n}\r\n//# sourceMappingURL=PopulateString.js.map","import { Children } from \"../util/Children\";\r\nimport { Percent } from \"../util/Percent\";\r\nimport { Sprite } from \"./Sprite\";\r\nimport { Rectangle } from \"./Rectangle\";\r\nimport { HorizontalLayout } from \"./HorizontalLayout\";\r\nimport { VerticalLayout } from \"./VerticalLayout\";\r\nimport { GridLayout } from \"./GridLayout\";\r\nimport { populateString } from \"../util/PopulateString\";\r\nimport * as $array from \"../util/Array\";\r\nimport * as $type from \"../util/Type\";\r\nimport * as $utils from \"../util/Utils\";\r\n/**\r\n * A basic element that can have child elements, maintain their layout, and\r\n * have a background.\r\n *\r\n * It can have any [[Sprite]] element as a child, from very basic shapes, to\r\n * full-fledged charts.\r\n *\r\n * @see {@link https://www.amcharts.com/docs/v5/concepts/common-elements/containers/} for more info\r\n * @important\r\n */\r\nexport class Container extends Sprite {\r\n    constructor() {\r\n        super(...arguments);\r\n        Object.defineProperty(this, \"_display\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: this._root._renderer.makeContainer()\r\n        });\r\n        Object.defineProperty(this, \"_childrenDisplay\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: this._root._renderer.makeContainer()\r\n        });\r\n        /**\r\n         * List of Container's child elements.\r\n         */\r\n        Object.defineProperty(this, \"children\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: new Children(this)\r\n        });\r\n        Object.defineProperty(this, \"_percentageSizeChildren\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: []\r\n        });\r\n        Object.defineProperty(this, \"_percentagePositionChildren\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: []\r\n        });\r\n        Object.defineProperty(this, \"_prevWidth\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: 0\r\n        });\r\n        Object.defineProperty(this, \"_prevHeight\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: 0\r\n        });\r\n        Object.defineProperty(this, \"_contentWidth\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: 0\r\n        });\r\n        Object.defineProperty(this, \"_contentHeight\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: 0\r\n        });\r\n        Object.defineProperty(this, \"_contentMask\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"_vsbd0\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"_vsbd1\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n    }\r\n    _afterNew() {\r\n        super._afterNew();\r\n        this._display.addChild(this._childrenDisplay);\r\n    }\r\n    _dispose() {\r\n        $array.eachReverse(this.allChildren(), (child) => {\r\n            child.dispose();\r\n        });\r\n        if (this.getPrivate(\"htmlElement\")) {\r\n            this._root._removeHTMLContent(this);\r\n        }\r\n        super._dispose();\r\n    }\r\n    _changed() {\r\n        super._changed();\r\n        if (this.isDirty(\"interactiveChildren\")) {\r\n            this._display.interactiveChildren = this.get(\"interactiveChildren\", false);\r\n        }\r\n        if (this.isDirty(\"layout\")) {\r\n            this._prevWidth = 0;\r\n            this._prevHeight = 0;\r\n            this.markDirtyBounds();\r\n            if (this._prevSettings.layout) {\r\n                this.children.each((child) => {\r\n                    child.removePrivate(\"x\");\r\n                    child.removePrivate(\"y\");\r\n                });\r\n            }\r\n        }\r\n        if (this.isDirty(\"paddingTop\") || this.isDirty(\"paddingBottom\") || this.isDirty(\"paddingLeft\") || this.isDirty(\"paddingRight\")) {\r\n            this.children.each((child) => {\r\n                child.markDirtyPosition();\r\n            });\r\n        }\r\n        if (this.isDirty(\"maskContent\")) {\r\n            const childrenDisplay = this._childrenDisplay;\r\n            let contentMask = this._contentMask;\r\n            if (this.get(\"maskContent\")) {\r\n                if (!contentMask) {\r\n                    contentMask = Rectangle.new(this._root, {\r\n                        x: -.5,\r\n                        y: -.5,\r\n                        width: this.width() + 1,\r\n                        height: this.height() + 1\r\n                    });\r\n                    this._contentMask = contentMask;\r\n                    childrenDisplay.addChildAt(contentMask._display, 0);\r\n                    childrenDisplay.mask = contentMask._display;\r\n                }\r\n            }\r\n            else {\r\n                if (contentMask) {\r\n                    childrenDisplay.removeChild(contentMask._display);\r\n                    childrenDisplay.mask = null;\r\n                    contentMask.dispose();\r\n                    this._contentMask = undefined;\r\n                }\r\n            }\r\n        }\r\n    }\r\n    _updateSize() {\r\n        super._updateSize();\r\n        $array.each(this._percentageSizeChildren, (child) => {\r\n            child._updateSize();\r\n        });\r\n        $array.each(this._percentagePositionChildren, (child) => {\r\n            child.markDirtyPosition();\r\n            child._updateSize();\r\n        });\r\n        this.updateBackground();\r\n    }\r\n    updateBackground() {\r\n        const background = this.get(\"background\");\r\n        let bounds = this._localBounds;\r\n        if (bounds && !this.isHidden()) {\r\n            let x = bounds.left;\r\n            let y = bounds.top;\r\n            let w = bounds.right - x;\r\n            let h = bounds.bottom - y;\r\n            let maxWidth = this.get(\"maxWidth\");\r\n            let maxHeight = this.get(\"maxHeight\");\r\n            if (maxHeight) {\r\n                if (h > maxHeight) {\r\n                    h = maxHeight;\r\n                }\r\n            }\r\n            if (maxWidth) {\r\n                if (w > maxWidth) {\r\n                    w = maxWidth;\r\n                }\r\n            }\r\n            let width = this.width();\r\n            let height = this.height();\r\n            if (background) {\r\n                background.setAll({ width: w, height: h, x: x, y: y });\r\n                if (this._display.interactive) {\r\n                    background._display.interactive = true;\r\n                }\r\n            }\r\n            const contentMask = this._contentMask;\r\n            if (contentMask) {\r\n                contentMask.setAll({ width: width + 1, height: height + 1 });\r\n            }\r\n            const verticalScrollbar = this.get(\"verticalScrollbar\");\r\n            if (verticalScrollbar) {\r\n                verticalScrollbar.set(\"height\", height);\r\n                verticalScrollbar.set(\"x\", width - verticalScrollbar.width() - verticalScrollbar.get(\"marginRight\", 0));\r\n                verticalScrollbar.set(\"end\", verticalScrollbar.get(\"start\", 0) + height / this._contentHeight);\r\n                const bg = verticalScrollbar.get(\"background\");\r\n                if (bg) {\r\n                    bg.setAll({ width: verticalScrollbar.width(), height: height });\r\n                }\r\n                let visible = true;\r\n                if (this._contentHeight <= height) {\r\n                    visible = false;\r\n                }\r\n                verticalScrollbar.setPrivate(\"visible\", visible);\r\n            }\r\n        }\r\n    }\r\n    _applyThemes(force = false) {\r\n        if (super._applyThemes(force)) {\r\n            this.eachChildren((child) => {\r\n                child._applyThemes(force);\r\n            });\r\n            return true;\r\n        }\r\n        else {\r\n            return false;\r\n        }\r\n    }\r\n    _applyState(name) {\r\n        super._applyState(name);\r\n        if (this.get(\"setStateOnChildren\")) {\r\n            this.eachChildren((child) => {\r\n                child.states.apply(name);\r\n            });\r\n        }\r\n    }\r\n    _applyStateAnimated(name, duration) {\r\n        super._applyStateAnimated(name, duration);\r\n        if (this.get(\"setStateOnChildren\")) {\r\n            this.eachChildren((child) => {\r\n                child.states.applyAnimate(name, duration);\r\n            });\r\n        }\r\n    }\r\n    /**\r\n     * Returns container's inner width (width without padding) in pixels.\r\n     *\r\n     * @return Inner width (px)\r\n     */\r\n    innerWidth() {\r\n        return this.width() - this.get(\"paddingRight\", 0) - this.get(\"paddingLeft\", 0);\r\n    }\r\n    /**\r\n     * Returns container's inner height (height without padding) in pixels.\r\n     *\r\n     * @return Inner height (px)\r\n     */\r\n    innerHeight() {\r\n        return this.height() - this.get(\"paddingTop\", 0) - this.get(\"paddingBottom\", 0);\r\n    }\r\n    _getBounds() {\r\n        let width = this.get(\"width\");\r\n        let height = this.get(\"height\");\r\n        let pWidth = this.getPrivate(\"width\");\r\n        let pHeight = this.getPrivate(\"height\");\r\n        let bounds = {\r\n            left: 0,\r\n            top: 0,\r\n            right: this.width(),\r\n            bottom: this.height()\r\n        };\r\n        let layout = this.get(\"layout\");\r\n        let horizontal = false;\r\n        let vertical = false;\r\n        if (layout instanceof HorizontalLayout || layout instanceof GridLayout) {\r\n            horizontal = true;\r\n        }\r\n        if (layout instanceof VerticalLayout) {\r\n            vertical = true;\r\n        }\r\n        if ((width != null || pWidth != null) && (height != null || pHeight != null) && !this.get(\"verticalScrollbar\")) {\r\n            // void\r\n        }\r\n        else {\r\n            let m = Number.MAX_VALUE;\r\n            let l = m;\r\n            let r = -m;\r\n            let t = m;\r\n            let b = -m;\r\n            const paddingLeft = this.get(\"paddingLeft\", 0);\r\n            const paddingTop = this.get(\"paddingTop\", 0);\r\n            const paddingRight = this.get(\"paddingRight\", 0);\r\n            const paddingBottom = this.get(\"paddingBottom\", 0);\r\n            this.children.each((child) => {\r\n                if (child.get(\"position\") != \"absolute\" && child.get(\"isMeasured\")) {\r\n                    let childBounds = child.adjustedLocalBounds();\r\n                    let childX = child.x();\r\n                    let childY = child.y();\r\n                    let cl = childX + childBounds.left;\r\n                    let cr = childX + childBounds.right;\r\n                    let ct = childY + childBounds.top;\r\n                    let cb = childY + childBounds.bottom;\r\n                    if (horizontal) {\r\n                        cl -= child.get(\"marginLeft\", 0);\r\n                        cr += child.get(\"marginRight\", 0);\r\n                    }\r\n                    if (vertical) {\r\n                        ct -= child.get(\"marginTop\", 0);\r\n                        cb += child.get(\"marginBottom\", 0);\r\n                    }\r\n                    if (cl < l) {\r\n                        l = cl;\r\n                    }\r\n                    if (cr > r) {\r\n                        r = cr;\r\n                    }\r\n                    if (ct < t) {\r\n                        t = ct;\r\n                    }\r\n                    if (cb > b) {\r\n                        b = cb;\r\n                    }\r\n                }\r\n            });\r\n            if (l == m) {\r\n                l = 0;\r\n            }\r\n            if (r == -m) {\r\n                r = 0;\r\n            }\r\n            if (t == m) {\r\n                t = 0;\r\n            }\r\n            if (b == -m) {\r\n                b = 0;\r\n            }\r\n            bounds.left = l - paddingLeft;\r\n            bounds.top = t - paddingTop;\r\n            bounds.right = r + paddingRight;\r\n            bounds.bottom = b + paddingBottom;\r\n            const minWidth = this.get(\"minWidth\");\r\n            if ($type.isNumber(minWidth) && minWidth > 0) {\r\n                if (bounds.right - bounds.left < minWidth) {\r\n                    if (bounds.right >= minWidth) {\r\n                        bounds.left = bounds.right - minWidth;\r\n                    }\r\n                    else {\r\n                        bounds.right = bounds.left + minWidth;\r\n                    }\r\n                }\r\n            }\r\n            const minHeight = this.get(\"minHeight\");\r\n            if ($type.isNumber(minHeight) && minHeight > 0) {\r\n                if (bounds.bottom - bounds.top < minHeight) {\r\n                    if (bounds.bottom >= minHeight) {\r\n                        bounds.top = bounds.bottom - minHeight;\r\n                    }\r\n                    else {\r\n                        bounds.bottom = bounds.top + minHeight;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        this._contentWidth = bounds.right - bounds.left;\r\n        this._contentHeight = bounds.bottom - bounds.top;\r\n        if ($type.isNumber(width)) {\r\n            bounds.left = 0;\r\n            bounds.right = width;\r\n        }\r\n        if ($type.isNumber(pWidth)) {\r\n            bounds.left = 0;\r\n            bounds.right = pWidth;\r\n        }\r\n        if ($type.isNumber(height)) {\r\n            bounds.top = 0;\r\n            bounds.bottom = height;\r\n        }\r\n        if ($type.isNumber(pHeight)) {\r\n            bounds.top = 0;\r\n            bounds.bottom = pHeight;\r\n        }\r\n        this._localBounds = bounds;\r\n    }\r\n    _updateBounds() {\r\n        const layout = this.get(\"layout\");\r\n        if (layout) {\r\n            layout.updateContainer(this);\r\n        }\r\n        super._updateBounds();\r\n        this.updateBackground();\r\n    }\r\n    /**\r\n     * @ignore\r\n     */\r\n    markDirty() {\r\n        super.markDirty();\r\n        this._root._addDirtyParent(this);\r\n    }\r\n    _prepareChildren() {\r\n        const innerWidth = this.innerWidth();\r\n        const innerHeight = this.innerHeight();\r\n        if (innerWidth != this._prevWidth || innerHeight != this._prevHeight) {\r\n            let layout = this.get(\"layout\");\r\n            let horizontal = false;\r\n            let vertical = false;\r\n            if (layout) {\r\n                if (layout instanceof HorizontalLayout || layout instanceof GridLayout) {\r\n                    horizontal = true;\r\n                }\r\n                if (layout instanceof VerticalLayout) {\r\n                    vertical = true;\r\n                }\r\n            }\r\n            $array.each(this._percentageSizeChildren, (child) => {\r\n                if (!horizontal) {\r\n                    let width = child.get(\"width\");\r\n                    if (width instanceof Percent) {\r\n                        child.setPrivate(\"width\", width.value * innerWidth);\r\n                    }\r\n                }\r\n                if (!vertical) {\r\n                    let height = child.get(\"height\");\r\n                    if (height instanceof Percent) {\r\n                        child.setPrivate(\"height\", height.value * innerHeight);\r\n                    }\r\n                }\r\n            });\r\n            $array.each(this._percentagePositionChildren, (child) => {\r\n                child.markDirtyPosition();\r\n                child.markDirtyBounds();\r\n            });\r\n            this._prevWidth = innerWidth;\r\n            this._prevHeight = innerHeight;\r\n            this._sizeDirty = true;\r\n            this.updateBackground();\r\n        }\r\n        this._handleStates();\r\n    }\r\n    _updateHTMLContent() {\r\n        const html = this.get(\"html\");\r\n        if (html && html !== \"\") {\r\n            this._root._setHTMLContent(this, populateString(this, this.get(\"html\", \"\")));\r\n        }\r\n        else {\r\n            this._root._removeHTMLContent(this);\r\n        }\r\n        this._root._positionHTMLElement(this);\r\n    }\r\n    _updateChildren() {\r\n        if (this.isDirty(\"html\")) {\r\n            this._updateHTMLContent();\r\n        }\r\n        if (this.isDirty(\"verticalScrollbar\")) {\r\n            const verticalScrollbar = this.get(\"verticalScrollbar\");\r\n            if (verticalScrollbar) {\r\n                verticalScrollbar._setParent(this);\r\n                verticalScrollbar.startGrip.setPrivate(\"visible\", false);\r\n                verticalScrollbar.endGrip.setPrivate(\"visible\", false);\r\n                this.set(\"maskContent\", true);\r\n                this.set(\"paddingRight\", verticalScrollbar.width() + verticalScrollbar.get(\"marginRight\", 0) + verticalScrollbar.get(\"marginLeft\", 0));\r\n                let background = this.get(\"background\");\r\n                if (!background) {\r\n                    background = this.set(\"background\", Rectangle.new(this._root, {\r\n                        themeTags: [\"background\"],\r\n                        fillOpacity: 0,\r\n                        fill: this._root.interfaceColors.get(\"alternativeBackground\")\r\n                    }));\r\n                }\r\n                this._vsbd0 = this.events.on(\"wheel\", (event) => {\r\n                    const wheelEvent = event.originalEvent;\r\n                    // Ignore wheel event if it is happening on a non-chart element, e.g. if\r\n                    // some page element is over the chart.\r\n                    if ($utils.isLocalEvent(wheelEvent, this)) {\r\n                        wheelEvent.preventDefault();\r\n                    }\r\n                    else {\r\n                        return;\r\n                    }\r\n                    let shiftY = wheelEvent.deltaY / 5000;\r\n                    const start = verticalScrollbar.get(\"start\", 0);\r\n                    const end = verticalScrollbar.get(\"end\", 1);\r\n                    if (start + shiftY <= 0) {\r\n                        shiftY = -start;\r\n                    }\r\n                    if (end + shiftY >= 1) {\r\n                        shiftY = 1 - end;\r\n                    }\r\n                    if (start + shiftY >= 0 && end + shiftY <= 1) {\r\n                        verticalScrollbar.set(\"start\", start + shiftY);\r\n                        verticalScrollbar.set(\"end\", end + shiftY);\r\n                    }\r\n                });\r\n                this._disposers.push(this._vsbd0);\r\n                this._vsbd1 = verticalScrollbar.events.on(\"rangechanged\", () => {\r\n                    let h = this._contentHeight;\r\n                    const childrenDisplay = this._childrenDisplay;\r\n                    const contentMask = this._contentMask;\r\n                    childrenDisplay.y = -verticalScrollbar.get(\"start\", 0) * h;\r\n                    childrenDisplay.markDirtyLayer();\r\n                    if (contentMask) {\r\n                        contentMask._display.y = -childrenDisplay.y;\r\n                        childrenDisplay.mask = contentMask._display;\r\n                    }\r\n                });\r\n                this._disposers.push(this._vsbd1);\r\n                this._display.addChild(verticalScrollbar._display);\r\n            }\r\n            else {\r\n                const previous = this._prevSettings.verticalScrollbar;\r\n                if (previous) {\r\n                    this._display.removeChild(previous._display);\r\n                    if (this._vsbd0) {\r\n                        this._vsbd0.dispose();\r\n                    }\r\n                    if (this._vsbd1) {\r\n                        this._vsbd1.dispose();\r\n                    }\r\n                    const childrenDisplay = this._childrenDisplay;\r\n                    childrenDisplay.y = 0;\r\n                    this.setPrivate(\"height\", undefined);\r\n                    this.set(\"maskContent\", false);\r\n                    this.set(\"paddingRight\", undefined);\r\n                }\r\n            }\r\n        }\r\n        if (this.isDirty(\"background\")) {\r\n            // TODO maybe this should dispose ?\r\n            const previous = this._prevSettings[\"background\"];\r\n            if (previous) {\r\n                this._display.removeChild(previous._display);\r\n            }\r\n            const background = this.get(\"background\");\r\n            if (background instanceof Sprite) {\r\n                background.set(\"isMeasured\", false);\r\n                background._setParent(this);\r\n                this._display.addChildAt(background._display, 0);\r\n            }\r\n        }\r\n        if (this.isDirty(\"mask\")) {\r\n            const mask = this.get(\"mask\");\r\n            const previous = this._prevSettings[\"mask\"];\r\n            if (previous) {\r\n                this._display.removeChild(previous._display);\r\n                if (previous != mask) {\r\n                    previous.dispose();\r\n                }\r\n            }\r\n            if (mask) {\r\n                const parent = mask.parent;\r\n                if (parent) {\r\n                    parent.children.removeValue(mask);\r\n                }\r\n                mask._setParent(this);\r\n                this._display.addChildAt(mask._display, 0);\r\n                this._childrenDisplay.mask = mask._display;\r\n            }\r\n        }\r\n    }\r\n    _processTemplateField() {\r\n        super._processTemplateField();\r\n        this.children.each((child) => {\r\n            child._processTemplateField();\r\n        });\r\n    }\r\n    /**\r\n     * @ignore\r\n     */\r\n    walkChildren(f) {\r\n        this.children.each((child) => {\r\n            if (child instanceof Container) {\r\n                child.walkChildren(f);\r\n            }\r\n            f(child);\r\n        });\r\n    }\r\n    eachChildren(f) {\r\n        const background = this.get(\"background\");\r\n        if (background) {\r\n            f(background);\r\n        }\r\n        const verticalScrollbar = this.get(\"verticalScrollbar\");\r\n        if (verticalScrollbar) {\r\n            f(verticalScrollbar);\r\n        }\r\n        const mask = this.get(\"mask\");\r\n        if (mask) {\r\n            f(mask);\r\n        }\r\n        this.children.values.forEach((child) => {\r\n            f(child);\r\n        });\r\n    }\r\n    allChildren() {\r\n        const output = [];\r\n        this.eachChildren((x) => {\r\n            output.push(x);\r\n        });\r\n        return output;\r\n    }\r\n    _setDataItem(dataItem) {\r\n        const updated = (dataItem !== this._dataItem);\r\n        super._setDataItem(dataItem);\r\n        const html = this.get(\"html\", \"\");\r\n        if (html && html !== \"\" && updated) {\r\n            this._root._setHTMLContent(this, populateString(this, html));\r\n        }\r\n    }\r\n}\r\nObject.defineProperty(Container, \"className\", {\r\n    enumerable: true,\r\n    configurable: true,\r\n    writable: true,\r\n    value: \"Container\"\r\n});\r\nObject.defineProperty(Container, \"classNames\", {\r\n    enumerable: true,\r\n    configurable: true,\r\n    writable: true,\r\n    value: Sprite.classNames.concat([Container.className])\r\n});\r\n//# sourceMappingURL=Container.js.map","import { Sprite } from \"./Sprite\";\r\nimport { populateString } from \"../util/PopulateString\";\r\nimport * as $array from \"../util/Array\";\r\nimport * as $utils from \"../util/Utils\";\r\nimport { Disposer } from \"../util/Disposer\";\r\n/**\r\n * @ignore Text is an internal class. Use Label instead.\r\n */\r\nexport class Text extends Sprite {\r\n    constructor() {\r\n        super(...arguments);\r\n        Object.defineProperty(this, \"textStyle\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: this._root._renderer.makeTextStyle()\r\n        });\r\n        Object.defineProperty(this, \"_display\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: this._root._renderer.makeText(\"\", this.textStyle)\r\n        });\r\n        Object.defineProperty(this, \"_textStyles\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: [\r\n                \"textAlign\",\r\n                \"fontFamily\",\r\n                \"fontSize\",\r\n                \"fontStyle\",\r\n                \"fontWeight\",\r\n                \"fontStyle\",\r\n                \"fontVariant\",\r\n                \"textDecoration\",\r\n                \"shadowColor\",\r\n                \"shadowBlur\",\r\n                \"shadowOffsetX\",\r\n                \"shadowOffsetY\",\r\n                \"shadowOpacity\",\r\n                // \"leading\",\r\n                // \"letterSpacing\",\r\n                \"lineHeight\",\r\n                \"baselineRatio\",\r\n                //\"padding\",\r\n                // \"stroke\",\r\n                // \"strokeThickness\",\r\n                // \"trim\",\r\n                // \"wordWrap\",\r\n                \"direction\",\r\n                \"textBaseline\",\r\n                \"oversizedBehavior\",\r\n                \"breakWords\",\r\n                \"ellipsis\",\r\n                \"minScale\",\r\n                \"maxChars\"\r\n            ]\r\n        });\r\n        Object.defineProperty(this, \"_originalScale\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n    }\r\n    _updateBounds() {\r\n        if (!this.get(\"text\")) {\r\n            let newBounds = {\r\n                left: 0,\r\n                right: 0,\r\n                top: 0,\r\n                bottom: 0,\r\n            };\r\n            this._adjustedLocalBounds = newBounds;\r\n        }\r\n        else {\r\n            super._updateBounds();\r\n            let fillGradient = this.get(\"fillGradient\");\r\n            if (fillGradient) {\r\n                this._display.style.fill = fillGradient.getFill(this);\r\n            }\r\n        }\r\n    }\r\n    _changed() {\r\n        super._changed();\r\n        this._display.clear();\r\n        let textStyle = this.textStyle;\r\n        if (this.isDirty(\"opacity\")) {\r\n            let opacity = this.get(\"opacity\", 1);\r\n            this._display.alpha = opacity;\r\n        }\r\n        if (this.isDirty(\"text\") || this.isDirty(\"populateText\")) {\r\n            this._display.text = this._getText();\r\n            this.markDirtyBounds();\r\n            if (this.get(\"role\") == \"tooltip\") {\r\n                this._root.updateTooltip(this);\r\n            }\r\n        }\r\n        if (this.isPrivateDirty(\"tooltipElement\")) {\r\n            const tooltipElement = this.getPrivate(\"tooltipElement\");\r\n            if (tooltipElement) {\r\n                this._disposers.push(new Disposer(() => {\r\n                    this._root._removeTooltipElement(this);\r\n                }));\r\n            }\r\n        }\r\n        if (this.isDirty(\"width\")) {\r\n            textStyle.wordWrapWidth = this.width();\r\n            this.markDirtyBounds();\r\n        }\r\n        if (this.isDirty(\"oversizedBehavior\")) {\r\n            textStyle.oversizedBehavior = this.get(\"oversizedBehavior\", \"none\");\r\n            this.markDirtyBounds();\r\n        }\r\n        if (this.isDirty(\"breakWords\")) {\r\n            textStyle.breakWords = this.get(\"breakWords\", false);\r\n            this.markDirtyBounds();\r\n        }\r\n        if (this.isDirty(\"ellipsis\")) {\r\n            textStyle.ellipsis = this.get(\"ellipsis\");\r\n            this.markDirtyBounds();\r\n        }\r\n        if (this.isDirty(\"ignoreFormatting\")) {\r\n            textStyle.ignoreFormatting = this.get(\"ignoreFormatting\", false);\r\n            this.markDirtyBounds();\r\n        }\r\n        if (this.isDirty(\"minScale\")) {\r\n            textStyle.minScale = this.get(\"minScale\", 0);\r\n            this.markDirtyBounds();\r\n        }\r\n        if (this.isDirty(\"fill\") || this.isDirty(\"fillGradient\")) {\r\n            const fill = this.get(\"fill\");\r\n            const fillGradient = this.get(\"fillGradient\");\r\n            const fillOpacity = this.get(\"fillOpacity\");\r\n            if (fillGradient) {\r\n                if (fill) {\r\n                    const stops = fillGradient.get(\"stops\", []);\r\n                    if (stops.length) {\r\n                        $array.each(stops, (stop) => {\r\n                            if ((!stop.color || stop.colorInherited) && fill) {\r\n                                stop.color = fill;\r\n                                stop.colorInherited = true;\r\n                            }\r\n                            if (stop.opacity == null || stop.opacityInherited) {\r\n                                stop.opacity = fillOpacity;\r\n                                stop.opacityInherited = true;\r\n                            }\r\n                        });\r\n                    }\r\n                }\r\n                textStyle.fill = fillGradient.getFill(this);\r\n            }\r\n            else if (fill) {\r\n                textStyle.fill = fill;\r\n            }\r\n        }\r\n        if (this.isDirty(\"fillOpacity\")) {\r\n            let fillOpacity = this.get(\"fillOpacity\", 1);\r\n            if (fillOpacity) {\r\n                textStyle.fillOpacity = fillOpacity;\r\n            }\r\n        }\r\n        if (this.isDirty(\"maxWidth\") || this.isPrivateDirty(\"maxWidth\")) {\r\n            textStyle.maxWidth = this.get(\"maxWidth\", this.getPrivate(\"maxWidth\"));\r\n            this.markDirtyBounds();\r\n        }\r\n        if (this.isDirty(\"maxHeight\") || this.isPrivateDirty(\"maxHeight\")) {\r\n            textStyle.maxHeight = this.get(\"maxHeight\", this.getPrivate(\"maxHeight\"));\r\n            this.markDirtyBounds();\r\n        }\r\n        $array.each(this._textStyles, (styleName) => {\r\n            if (this._dirty[styleName]) {\r\n                textStyle[styleName] = this.get(styleName);\r\n                this.markDirtyBounds();\r\n            }\r\n        });\r\n        textStyle[\"fontSize\"] = this.get(\"fontSize\");\r\n        textStyle[\"fontFamily\"] = this.get(\"fontFamily\");\r\n        this._display.style = textStyle;\r\n        if (this.isDirty(\"role\") && this.get(\"role\") == \"tooltip\") {\r\n            this._root.updateTooltip(this);\r\n        }\r\n    }\r\n    _getText() {\r\n        let text = this.get(\"text\", \"\");\r\n        if (this.get(\"maxChars\")) {\r\n            text = $utils.truncateTextWithEllipsis(text, this.get(\"maxChars\", 100000000), this.get(\"breakWords\"), this.get(\"ellipsis\"));\r\n        }\r\n        return this.get(\"populateText\") ? populateString(this, text) : text;\r\n    }\r\n    _getAccessibleText() {\r\n        const ariaLabel = this.get(\"ariaLabel\");\r\n        if (ariaLabel !== undefined) {\r\n            return this.get(\"populateText\") ? populateString(this, ariaLabel) : ariaLabel;\r\n        }\r\n        return this._getText();\r\n    }\r\n    /**\r\n     * Forces the text to be re-evaluated and re-populated.\r\n     */\r\n    markDirtyText() {\r\n        this._display.text = this._getText();\r\n        if (this.get(\"role\") == \"tooltip\") {\r\n            this._root.updateTooltip(this);\r\n        }\r\n        this.markDirtyBounds();\r\n        this.markDirty();\r\n    }\r\n    _setDataItem(dataItem) {\r\n        super._setDataItem(dataItem);\r\n        if (this.get(\"populateText\")) {\r\n            this.markDirtyText();\r\n        }\r\n    }\r\n    getNumberFormatter() {\r\n        if (this.parent) {\r\n            return this.parent.getNumberFormatter();\r\n        }\r\n        else {\r\n            return super.getNumberFormatter();\r\n        }\r\n    }\r\n    getDateFormatter() {\r\n        if (this.parent) {\r\n            return this.parent.getDateFormatter();\r\n        }\r\n        else {\r\n            return super.getDateFormatter();\r\n        }\r\n    }\r\n    getDurationFormatter() {\r\n        if (this.parent) {\r\n            return this.parent.getDurationFormatter();\r\n        }\r\n        else {\r\n            return super.getDurationFormatter();\r\n        }\r\n    }\r\n}\r\nObject.defineProperty(Text, \"className\", {\r\n    enumerable: true,\r\n    configurable: true,\r\n    writable: true,\r\n    value: \"Text\"\r\n});\r\nObject.defineProperty(Text, \"classNames\", {\r\n    enumerable: true,\r\n    configurable: true,\r\n    writable: true,\r\n    value: Sprite.classNames.concat([Text.className])\r\n});\r\n//# sourceMappingURL=Text.js.map","/** @ignore */ /** */\r\nimport * as $array from \"./Array\";\r\nimport * as $utils from \"./Utils\";\r\n/**\r\n * @ignore\r\n */\r\nclass Native {\r\n    constructor() {\r\n        Object.defineProperty(this, \"_observer\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"_targets\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: []\r\n        });\r\n        this._observer = new ResizeObserver((entries) => {\r\n            $array.each(entries, (entry) => {\r\n                $array.each(this._targets, (x) => {\r\n                    if (x.target === entry.target) {\r\n                        x.callback();\r\n                    }\r\n                });\r\n            });\r\n        });\r\n    }\r\n    addTarget(target, callback) {\r\n        this._observer.observe(target, { box: \"border-box\" });\r\n        this._targets.push({ target, callback });\r\n    }\r\n    removeTarget(target) {\r\n        this._observer.unobserve(target);\r\n        $array.keepIf(this._targets, (x) => {\r\n            return x.target !== target;\r\n        });\r\n    }\r\n}\r\n/**\r\n * @ignore\r\n */\r\nclass Raf {\r\n    constructor() {\r\n        Object.defineProperty(this, \"_timer\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: null\r\n        });\r\n        Object.defineProperty(this, \"_targets\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: []\r\n        });\r\n    }\r\n    addTarget(target, callback) {\r\n        if (this._timer === null) {\r\n            let lastTime = null;\r\n            const loop = () => {\r\n                const currentTime = Date.now();\r\n                if (lastTime === null || currentTime > (lastTime + Raf.delay)) {\r\n                    lastTime = currentTime;\r\n                    $array.each(this._targets, (x) => {\r\n                        let newSize = x.target.getBoundingClientRect();\r\n                        if (newSize.width !== x.size.width || newSize.height !== x.size.height) {\r\n                            x.size = newSize;\r\n                            x.callback();\r\n                        }\r\n                    });\r\n                }\r\n                if (this._targets.length === 0) {\r\n                    this._timer = null;\r\n                }\r\n                else {\r\n                    this._timer = requestAnimationFrame(loop);\r\n                }\r\n            };\r\n            this._timer = requestAnimationFrame(loop);\r\n        }\r\n        // We start off with fake bounds so that sensor always kicks in\r\n        let size = { width: 0, height: 0, left: 0, right: 0, top: 0, bottom: 0, x: 0, y: 0 };\r\n        this._targets.push({ target, callback, size });\r\n    }\r\n    removeTarget(target) {\r\n        $array.keepIf(this._targets, (x) => {\r\n            return x.target !== target;\r\n        });\r\n        if (this._targets.length === 0) {\r\n            if (this._timer !== null) {\r\n                cancelAnimationFrame(this._timer);\r\n                this._timer = null;\r\n            }\r\n        }\r\n    }\r\n}\r\nObject.defineProperty(Raf, \"delay\", {\r\n    enumerable: true,\r\n    configurable: true,\r\n    writable: true,\r\n    value: 200\r\n});\r\n/**\r\n * @ignore\r\n */\r\nlet observer = null;\r\n/**\r\n * @ignore\r\n */\r\nfunction makeSensor() {\r\n    if (observer === null) {\r\n        if (typeof ResizeObserver !== \"undefined\") {\r\n            observer = new Native();\r\n        }\r\n        else {\r\n            observer = new Raf();\r\n        }\r\n    }\r\n    return observer;\r\n}\r\n/**\r\n * @ignore\r\n */\r\nexport class ResizeSensor {\r\n    constructor(element, callback) {\r\n        Object.defineProperty(this, \"_sensor\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"_element\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"_listener\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"_disposed\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: false\r\n        });\r\n        this._sensor = makeSensor();\r\n        this._element = element;\r\n        // This is needed because we need to know when the window is zoomed\r\n        this._listener = $utils.onZoom(callback);\r\n        this._sensor.addTarget(element, callback);\r\n    }\r\n    isDisposed() {\r\n        return this._disposed;\r\n    }\r\n    dispose() {\r\n        if (!this._disposed) {\r\n            this._disposed = true;\r\n            this._sensor.removeTarget(this._element);\r\n            this._listener.dispose();\r\n        }\r\n    }\r\n    get sensor() {\r\n        return this._sensor;\r\n    }\r\n}\r\n//# sourceMappingURL=ResizeSensor.js.map","import { Entity } from \"./Entity\";\r\n/**\r\n * Presets for common UI elements.\r\n */\r\nexport class InterfaceColors extends Entity {\r\n}\r\nObject.defineProperty(InterfaceColors, \"className\", {\r\n    enumerable: true,\r\n    configurable: true,\r\n    writable: true,\r\n    value: \"InterfaceColors\"\r\n});\r\nObject.defineProperty(InterfaceColors, \"classNames\", {\r\n    enumerable: true,\r\n    configurable: true,\r\n    writable: true,\r\n    value: Entity.classNames.concat([InterfaceColors.className])\r\n});\r\n//# sourceMappingURL=InterfaceColors.js.map","import { Text } from \"../render/Text\";\r\nimport { p50, p100 } from \"../util/Percent\";\r\nimport { Container } from \"./Container\";\r\nimport * as $array from \"../../core/util/Array\";\r\nimport * as $type from \"../../core/util/Type\";\r\n/**\r\n * Creates a label with support for in-line styling and data bindings.\r\n *\r\n * @see {@link https://www.amcharts.com/docs/v5/concepts/common-elements/labels/} for more info\r\n */\r\nexport class Label extends Container {\r\n    constructor() {\r\n        super(...arguments);\r\n        Object.defineProperty(this, \"_text\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"_textKeys\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: [\r\n                \"text\",\r\n                \"fill\",\r\n                \"fillGradient\",\r\n                \"fillOpacity\",\r\n                \"textAlign\",\r\n                \"fontFamily\",\r\n                \"fontSize\",\r\n                \"fontStyle\",\r\n                \"fontWeight\",\r\n                \"fontStyle\",\r\n                \"fontVariant\",\r\n                \"textDecoration\",\r\n                \"shadowColor\",\r\n                \"shadowBlur\",\r\n                \"shadowOffsetX\",\r\n                \"shadowOffsetY\",\r\n                \"shadowOpacity\",\r\n                // \"leading\",\r\n                // \"letterSpacing\",\r\n                \"lineHeight\",\r\n                \"baselineRatio\",\r\n                //\"padding\",\r\n                // \"stroke\",\r\n                // \"strokeThickness\",\r\n                // \"trim\",\r\n                // \"wordWrap\",\r\n                \"direction\",\r\n                \"textBaseline\",\r\n                \"oversizedBehavior\",\r\n                \"breakWords\",\r\n                \"ellipsis\",\r\n                \"minScale\",\r\n                \"populateText\",\r\n                \"role\",\r\n                \"ignoreFormatting\",\r\n                \"maxChars\",\r\n                \"ariaLabel\"\r\n            ]\r\n        });\r\n    }\r\n    /**\r\n     * @ignore Text is not to be used directly\r\n     */\r\n    get text() {\r\n        return this._text;\r\n    }\r\n    _afterNew() {\r\n        super._afterNew();\r\n        this._makeText();\r\n        $array.each(this._textKeys, (property) => {\r\n            const propValue = this.get(property);\r\n            if (propValue != undefined) {\r\n                this._text.set(property, propValue);\r\n            }\r\n        });\r\n        if (this.get(\"html\", \"\") !== \"\") {\r\n            this._text.set(\"text\", \"\");\r\n        }\r\n        this.onPrivate(\"maxWidth\", () => {\r\n            this._setMaxDimentions();\r\n        });\r\n        this.onPrivate(\"maxHeight\", () => {\r\n            this._setMaxDimentions();\r\n        });\r\n    }\r\n    _makeText() {\r\n        this._text = this.children.push(Text.new(this._root, {}));\r\n    }\r\n    _updateChildren() {\r\n        super._updateChildren();\r\n        const text = this._text;\r\n        $array.each(this._textKeys, (property) => {\r\n            this._text.set(property, this.get(property));\r\n        });\r\n        if (this.isDirty(\"maxWidth\") || this.isDirty(\"maxHeight\") || this.isDirty(\"rotation\")) {\r\n            this._setMaxDimentions();\r\n        }\r\n        // Do not show regular text if HTML is used\r\n        if (this.get(\"html\", \"\") !== \"\") {\r\n            text.set(\"text\", \"\");\r\n        }\r\n        else {\r\n            text.set(\"text\", this.get(\"text\"));\r\n            this._maybeUpdateHTMLColor();\r\n        }\r\n        if (this.isDirty(\"fill\") || this.isDirty(\"fillGradient\")) {\r\n            this._maybeUpdateHTMLColor();\r\n        }\r\n        if (this.isDirty(\"textAlign\") || this.isDirty(\"width\")) {\r\n            const textAlign = this.get(\"textAlign\");\r\n            let x;\r\n            if (this.get(\"width\") != null) {\r\n                if (textAlign == \"right\") {\r\n                    x = p100;\r\n                }\r\n                else if (textAlign == \"center\") {\r\n                    x = p50;\r\n                }\r\n                else {\r\n                    x = 0;\r\n                }\r\n            }\r\n            else {\r\n                if (textAlign == \"left\" || textAlign == \"start\") {\r\n                    x = this.get(\"paddingLeft\", 0);\r\n                }\r\n                else if (textAlign == \"right\" || textAlign == \"end\") {\r\n                    x = -this.get(\"paddingRight\", 0);\r\n                }\r\n            }\r\n            text.set(\"x\", x);\r\n        }\r\n        const background = this.get(\"background\");\r\n        if (background) {\r\n            background.setPrivate(\"visible\", text._display.textVisible);\r\n        }\r\n    }\r\n    _maybeUpdateHTMLColor() {\r\n        const htmlElement = this.getPrivate(\"htmlElement\");\r\n        if (htmlElement && this.get(\"fill\")) {\r\n            htmlElement.style.color = this.get(\"fill\").toCSSHex();\r\n            //@todo support gradient\r\n        }\r\n    }\r\n    _setMaxDimentions() {\r\n        const rotation = this.get(\"rotation\");\r\n        const vertical = rotation == 90 || rotation == 270 || rotation == -90;\r\n        const text = this._text;\r\n        const maxWidth = this.get(\"maxWidth\", this.getPrivate(\"maxWidth\", Infinity));\r\n        if ($type.isNumber(maxWidth)) {\r\n            text.set(vertical ? \"maxHeight\" : \"maxWidth\", maxWidth - this.get(\"paddingLeft\", 0) - this.get(\"paddingRight\", 0));\r\n        }\r\n        else {\r\n            text.set(vertical ? \"maxHeight\" : \"maxWidth\", undefined);\r\n        }\r\n        const maxHeight = this.get(\"maxHeight\", this.getPrivate(\"maxHeight\", Infinity));\r\n        if ($type.isNumber(maxHeight)) {\r\n            text.set(vertical ? \"maxWidth\" : \"maxHeight\", maxHeight - this.get(\"paddingTop\", 0) - this.get(\"paddingBottom\", 0));\r\n        }\r\n        else {\r\n            text.set(vertical ? \"maxWidth\" : \"maxHeight\", undefined);\r\n        }\r\n        this.root.events.once(\"frameended\", () => {\r\n            text.markDirtyBounds();\r\n        });\r\n    }\r\n    _setDataItem(dataItem) {\r\n        super._setDataItem(dataItem);\r\n        this._markDirtyKey(\"text\");\r\n        const text = this._text;\r\n        if (text.get(\"populateText\")) {\r\n            text.markDirtyText();\r\n        }\r\n        const html = this.get(\"html\");\r\n        if (html && html !== \"\") {\r\n            this._updateHTMLContent();\r\n        }\r\n    }\r\n    /**\r\n     * Returns text with populated placeholders and formatting if `populateText` is\r\n     * set to `true`.\r\n     *\r\n     * @return Populated text\r\n     */\r\n    getText() {\r\n        return this._text._getText();\r\n    }\r\n    /**\r\n     * Returns \"aria-label\" text with populated placeholders and formatting\r\n     * if `populateText` is set to `true`.\r\n     *\r\n     * @return Populated text\r\n     */\r\n    getAccessibleText() {\r\n        return this._text._getAccessibleText();\r\n    }\r\n}\r\nObject.defineProperty(Label, \"className\", {\r\n    enumerable: true,\r\n    configurable: true,\r\n    writable: true,\r\n    value: \"Label\"\r\n});\r\nObject.defineProperty(Label, \"classNames\", {\r\n    enumerable: true,\r\n    configurable: true,\r\n    writable: true,\r\n    value: Container.classNames.concat([Label.className])\r\n});\r\n//# sourceMappingURL=Label.js.map","import { Graphics } from \"./Graphics\";\r\nimport * as $math from \"../util/Math\";\r\n/**\r\n * Draws a rectangle with a pointer.\r\n *\r\n * @see {@link https://www.amcharts.com/docs/v5/concepts/common-elements/graphics/} for more info\r\n * @important\r\n */\r\nexport class PointedRectangle extends Graphics {\r\n    _beforeChanged() {\r\n        super._beforeChanged();\r\n        if (this.isDirty(\"pointerBaseWidth\") || this.isDirty(\"cornerRadius\") || this.isDirty(\"pointerLength\") || this.isDirty(\"pointerX\") || this.isDirty(\"pointerY\") || this.isDirty(\"width\") || this.isDirty(\"height\")) {\r\n            this._clear = true;\r\n        }\r\n    }\r\n    _changed() {\r\n        super._changed();\r\n        if (this._clear) {\r\n            this.markDirtyBounds();\r\n            let w = this.width();\r\n            let h = this.height();\r\n            if (w > 0 && h > 0) {\r\n                let cr = this.get(\"cornerRadius\", 8);\r\n                cr = $math.fitToRange(cr, 0, Math.min(w / 2, h / 2));\r\n                let x = this.get(\"pointerX\", 0);\r\n                let y = this.get(\"pointerY\", 0);\r\n                let bwh = this.get(\"pointerBaseWidth\", 15) / 2;\r\n                // corner coordinates\r\n                // top left\r\n                let xtl = 0;\r\n                let ytl = 0;\r\n                // top right\r\n                let xtr = w;\r\n                let ytr = 0;\r\n                // bottom right\r\n                let xbr = w;\r\n                let ybr = h;\r\n                // bottom left\r\n                let xbl = 0;\r\n                let ybl = h;\r\n                // find stem base side: http://$math.stackexchange.com/questions/274712/calculate-on-which-side-of-straign-line-is-dot-located\r\n                // d=(xx1)(y2y1)(yy1)(x2x1)\r\n                let d1 = (x - xtl) * (ybr - ytl) - (y - ytl) * (xbr - xtl);\r\n                let d2 = (x - xbl) * (ytr - ybl) - (y - ybl) * (xtr - xbl);\r\n                const display = this._display;\r\n                // top\r\n                display.moveTo(cr, 0);\r\n                if (d1 > 0 && d2 > 0) {\r\n                    let stemX = Math.round($math.fitToRange(x, cr + bwh, w - bwh - cr));\r\n                    y = $math.fitToRange(y, -Infinity, 0);\r\n                    display.lineTo(stemX - bwh, 0);\r\n                    display.lineTo(x, y);\r\n                    display.lineTo(stemX + bwh, 0);\r\n                }\r\n                display.lineTo(w - cr, 0);\r\n                display.arcTo(w, 0, w, cr, cr);\r\n                // right\r\n                if (d1 > 0 && d2 < 0) {\r\n                    let stemY = Math.round($math.fitToRange(y, cr + bwh, h - bwh - cr));\r\n                    x = $math.fitToRange(x, w, Infinity);\r\n                    display.lineTo(w, cr);\r\n                    display.lineTo(w, Math.max(stemY - bwh, cr));\r\n                    display.lineTo(x, y);\r\n                    display.lineTo(w, stemY + bwh);\r\n                }\r\n                display.lineTo(w, h - cr);\r\n                display.arcTo(w, h, w - cr, h, cr);\r\n                // bottom\r\n                if (d1 < 0 && d2 < 0) {\r\n                    let stemX = Math.round($math.fitToRange(x, cr + bwh, w - bwh - cr));\r\n                    y = $math.fitToRange(y, h, Infinity);\r\n                    display.lineTo(w - cr, h);\r\n                    display.lineTo(stemX + bwh, h);\r\n                    display.lineTo(x, y);\r\n                    display.lineTo(stemX - bwh, h);\r\n                }\r\n                display.lineTo(cr, h);\r\n                display.arcTo(0, h, 0, h - cr, cr);\r\n                // left\r\n                if (d1 < 0 && d2 > 0) {\r\n                    let stemY = Math.round($math.fitToRange(y, cr + bwh, h - cr - bwh));\r\n                    x = $math.fitToRange(x, -Infinity, 0);\r\n                    display.lineTo(0, h - cr);\r\n                    display.lineTo(0, stemY + bwh);\r\n                    display.lineTo(x, y);\r\n                    display.lineTo(0, Math.max(stemY - bwh, cr));\r\n                }\r\n                display.lineTo(0, cr);\r\n                display.arcTo(0, 0, cr, 0, cr);\r\n                display.closePath();\r\n            }\r\n        }\r\n    }\r\n}\r\nObject.defineProperty(PointedRectangle, \"className\", {\r\n    enumerable: true,\r\n    configurable: true,\r\n    writable: true,\r\n    value: \"PointedRectangle\"\r\n});\r\nObject.defineProperty(PointedRectangle, \"classNames\", {\r\n    enumerable: true,\r\n    configurable: true,\r\n    writable: true,\r\n    value: Graphics.classNames.concat([PointedRectangle.className])\r\n});\r\n//# sourceMappingURL=PointedRectangle.js.map","import { MultiDisposer } from \"../util/Disposer\";\r\nimport { Label } from \"../render/Label\";\r\nimport { PointedRectangle } from \"../render/PointedRectangle\";\r\nimport { Container } from \"./Container\";\r\nimport { Percent } from \"../util/Percent\";\r\nimport { Color } from \"../util/Color\";\r\nimport * as $math from \"../util/Math\";\r\nimport * as $array from \"../util/Array\";\r\nimport * as $utils from \"../util/Utils\";\r\n/**\r\n * Creates a tooltip.\r\n *\r\n * @see {@link https://www.amcharts.com/docs/v5/concepts/common-elements/tooltips/} for more info\r\n * @important\r\n */\r\nexport class Tooltip extends Container {\r\n    constructor(root, settings, isReal, templates = []) {\r\n        super(root, settings, isReal, templates);\r\n        Object.defineProperty(this, \"_fx\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: 0\r\n        });\r\n        Object.defineProperty(this, \"_fy\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: 0\r\n        });\r\n        Object.defineProperty(this, \"_label\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"_fillDp\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"_strokeDp\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"_labelDp\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"_w\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: 0\r\n        });\r\n        Object.defineProperty(this, \"_h\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: 0\r\n        });\r\n        Object.defineProperty(this, \"_keepHoverDp\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"_htmlContentHovered\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: false\r\n        });\r\n    }\r\n    _afterNew() {\r\n        this._settings.themeTags = $utils.mergeTags(this._settings.themeTags, [\"tooltip\"]);\r\n        super._afterNew();\r\n        const background = this._setDefaultFn(\"background\", () => {\r\n            return PointedRectangle.new(this._root, {});\r\n        });\r\n        background.set(\"themeTags\", [\"tooltip\", \"background\"]);\r\n        this._label = this.children.push(Label.new(this._root, {}));\r\n        this._disposers.push(this._label.events.on(\"boundschanged\", () => {\r\n            this._updateBackground();\r\n        }));\r\n        this._disposers.push(this.on(\"bounds\", () => {\r\n            this._updateBackground();\r\n        }));\r\n        this._updateTextColor();\r\n        this._root.tooltipContainer.children.push(this);\r\n        this.hide(0);\r\n        this._disposers.push(this.label.onPrivate(\"htmlElement\", (htmlElement) => {\r\n            if (htmlElement) {\r\n                this._disposers.push($utils.addEventListener(htmlElement, \"pointerover\", (_ev) => {\r\n                    this._htmlContentHovered = true;\r\n                }));\r\n                this._disposers.push($utils.addEventListener(htmlElement, \"pointerout\", (_ev) => {\r\n                    this._htmlContentHovered = false;\r\n                }));\r\n            }\r\n        }));\r\n        this.on(\"visible\", (_ev) => {\r\n            this._handleReaderAnnouncement();\r\n        });\r\n        this.label.events.on(\"dataitemchanged\", (_ev) => {\r\n            this._handleReaderAnnouncement();\r\n        });\r\n        this._root._tooltips.push(this);\r\n    }\r\n    _handleReaderAnnouncement() {\r\n        if (this.get(\"readerAnnounce\") && this.isVisibleDeep()) {\r\n            this._root.readerAlert(this.label.getAccessibleText());\r\n        }\r\n    }\r\n    /**\r\n     * A [[Label]] element for the tooltip.\r\n     *\r\n     * @readonly\r\n     * @return Label\r\n     */\r\n    get label() {\r\n        return this._label;\r\n    }\r\n    /**\r\n     * Permanently disposes the tooltip.\r\n     */\r\n    dispose() {\r\n        super.dispose();\r\n        $array.remove(this._root._tooltips, this);\r\n    }\r\n    _updateChildren() {\r\n        super._updateChildren();\r\n        if (this.isDirty(\"pointerOrientation\") || this.isPrivateDirty(\"minWidth\") || this.isPrivateDirty(\"minHeight\")) {\r\n            this.get(\"background\")._markDirtyKey(\"width\");\r\n        }\r\n        const labelText = this.get(\"labelText\");\r\n        if (labelText != null) {\r\n            this.label.set(\"text\", this.get(\"labelText\"));\r\n        }\r\n        const labelHTML = this.get(\"labelHTML\");\r\n        if (labelHTML != null) {\r\n            this.label.set(\"html\", this.get(\"labelHTML\"));\r\n        }\r\n        const labelAriaLabel = this.get(\"labelAriaLabel\");\r\n        if (labelAriaLabel != null) {\r\n            this.label.set(\"ariaLabel\", this.get(\"labelAriaLabel\"));\r\n        }\r\n    }\r\n    _changed() {\r\n        super._changed();\r\n        if (this.isDirty(\"pointTo\") || this.isDirty(\"pointerOrientation\")) {\r\n            // can't compare to previous, as sometimes pointTo is set twice (when pointer moves, so the position won't be udpated)\r\n            this._updateBackground();\r\n        }\r\n        if (this.isDirty(\"tooltipTarget\")) {\r\n            this.updateBackgroundColor();\r\n        }\r\n        if (this.isDirty(\"keepTargetHover\")) {\r\n            const keephover = this.get(\"keepTargetHover\");\r\n            if (keephover) {\r\n                const bg = this.get(\"background\");\r\n                this._keepHoverDp = new MultiDisposer([\r\n                    bg.events.on(\"pointerover\", (_ev) => {\r\n                        let target = this.get(\"tooltipTarget\");\r\n                        if (target) {\r\n                            if (target.parent && target.parent.getPrivate(\"tooltipTarget\") == target) {\r\n                                target = target.parent;\r\n                            }\r\n                            target.hover();\r\n                        }\r\n                    }),\r\n                    bg.events.on(\"pointerout\", (_ev) => {\r\n                        let target = this.get(\"tooltipTarget\");\r\n                        if (target) {\r\n                            if (target.parent && target.parent.getPrivate(\"tooltipTarget\") == target) {\r\n                                target = target.parent;\r\n                            }\r\n                            if (!this._htmlContentHovered) {\r\n                                target.unhover();\r\n                            }\r\n                        }\r\n                    })\r\n                ]);\r\n                this.label.onPrivate(\"htmlElement\", (htmlElement) => {\r\n                    if (this._keepHoverDp && htmlElement) {\r\n                        this._keepHoverDp.disposers.push($utils.addEventListener(htmlElement, \"pointerleave\", (ev) => {\r\n                            const outEvent = this.root._renderer.getEvent(ev);\r\n                            bg.events.dispatch(\"pointerout\", {\r\n                                type: \"pointerout\",\r\n                                originalEvent: outEvent.event,\r\n                                point: outEvent.point,\r\n                                simulated: false,\r\n                                target: bg\r\n                            });\r\n                        }));\r\n                    }\r\n                });\r\n            }\r\n            else {\r\n                if (this._keepHoverDp) {\r\n                    this._keepHoverDp.dispose();\r\n                    this._keepHoverDp = undefined;\r\n                }\r\n            }\r\n        }\r\n    }\r\n    _onShow() {\r\n        super._onShow();\r\n        this.updateBackgroundColor();\r\n    }\r\n    updateBackgroundColor() {\r\n        let tooltipTarget = this.get(\"tooltipTarget\");\r\n        const background = this.get(\"background\");\r\n        let fill;\r\n        let stroke;\r\n        if (tooltipTarget && background) {\r\n            fill = tooltipTarget.get(\"fill\");\r\n            stroke = tooltipTarget.get(\"stroke\");\r\n            if (fill == null) {\r\n                fill = stroke;\r\n            }\r\n            if (this.get(\"getFillFromSprite\")) {\r\n                if (this._fillDp) {\r\n                    this._fillDp.dispose();\r\n                }\r\n                if (fill != null) {\r\n                    background.set(\"fill\", fill);\r\n                }\r\n                this._fillDp = tooltipTarget.on(\"fill\", (fill) => {\r\n                    if (fill != null) {\r\n                        background.set(\"fill\", fill);\r\n                        this._updateTextColor(fill);\r\n                    }\r\n                });\r\n                this._disposers.push(this._fillDp);\r\n            }\r\n            if (this.get(\"getStrokeFromSprite\")) {\r\n                if (this._strokeDp) {\r\n                    this._strokeDp.dispose();\r\n                }\r\n                if (fill != null) {\r\n                    background.set(\"stroke\", fill);\r\n                }\r\n                this._strokeDp = tooltipTarget.on(\"fill\", (fill) => {\r\n                    if (fill != null) {\r\n                        background.set(\"stroke\", fill);\r\n                    }\r\n                });\r\n                this._disposers.push(this._strokeDp);\r\n            }\r\n            if (this.get(\"getLabelFillFromSprite\")) {\r\n                if (this._labelDp) {\r\n                    this._labelDp.dispose();\r\n                }\r\n                if (fill != null) {\r\n                    this.label.set(\"fill\", fill);\r\n                }\r\n                this._labelDp = tooltipTarget.on(\"fill\", (fill) => {\r\n                    if (fill != null) {\r\n                        this.label.set(\"fill\", fill);\r\n                    }\r\n                });\r\n                this._disposers.push(this._labelDp);\r\n            }\r\n        }\r\n        this._updateTextColor(fill);\r\n    }\r\n    _updateTextColor(fill) {\r\n        if (this.get(\"autoTextColor\")) {\r\n            if (fill == null) {\r\n                fill = this.get(\"background\").get(\"fill\");\r\n            }\r\n            if (fill == null) {\r\n                fill = this._root.interfaceColors.get(\"background\");\r\n            }\r\n            if (fill instanceof Color) {\r\n                this.label.set(\"fill\", Color.alternative(fill, this._root.interfaceColors.get(\"alternativeText\"), this._root.interfaceColors.get(\"text\")));\r\n            }\r\n        }\r\n    }\r\n    _setDataItem(dataItem) {\r\n        super._setDataItem(dataItem);\r\n        this.label._setDataItem(dataItem);\r\n    }\r\n    _updateBackground() {\r\n        super.updateBackground();\r\n        const parent = this._root.container;\r\n        if (parent) {\r\n            let cw = 0.5;\r\n            let ch = 0.5;\r\n            let centerX = this.get(\"centerX\");\r\n            if (centerX instanceof Percent) {\r\n                cw = centerX.value;\r\n            }\r\n            let centerY = this.get(\"centerY\");\r\n            if (centerY instanceof Percent) {\r\n                ch = centerY.value;\r\n            }\r\n            let parentW = parent.width();\r\n            let parentH = parent.height();\r\n            let tooltipContainer = this.parent;\r\n            let xx = 0;\r\n            let yy = 0;\r\n            if (tooltipContainer) {\r\n                xx = tooltipContainer.x();\r\n                yy = tooltipContainer.y();\r\n                const layerMargin = tooltipContainer.get(\"layerMargin\");\r\n                if (layerMargin) {\r\n                    xx += layerMargin.left || 0;\r\n                    yy += layerMargin.top || 0;\r\n                    parentW += (layerMargin.left || 0) + (layerMargin.right || 0);\r\n                    parentH += (layerMargin.top || 0) + (layerMargin.bottom || 0);\r\n                }\r\n            }\r\n            const bounds = this.get(\"bounds\", { left: -xx, top: -yy, right: parentW - xx, bottom: parentH - yy });\r\n            this._updateBounds();\r\n            let w = this.width();\r\n            let h = this.height();\r\n            // use old w and h,as when tooltip is hidden, these are 0 and unneeded animation happens\r\n            if (w === 0) {\r\n                w = this._w;\r\n            }\r\n            if (h === 0) {\r\n                h = this._h;\r\n            }\r\n            let pointTo = this.get(\"pointTo\", { x: parentW / 2, y: parentH / 2 });\r\n            let x = pointTo.x;\r\n            let y = pointTo.y;\r\n            let pointerOrientation = this.get(\"pointerOrientation\");\r\n            let background = this.get(\"background\");\r\n            let pointerLength = 0;\r\n            let bgStrokeSizeY = 0;\r\n            let bgStrokeSizeX = 0;\r\n            if (background instanceof PointedRectangle) {\r\n                pointerLength = background.get(\"pointerLength\", 0);\r\n                bgStrokeSizeY = background.get(\"strokeWidth\", 0) / 2;\r\n                bgStrokeSizeX = bgStrokeSizeY;\r\n                background.set(\"width\", w);\r\n                background.set(\"height\", h);\r\n            }\r\n            let pointerX = 0;\r\n            let pointerY = 0;\r\n            let boundsW = bounds.right - bounds.left;\r\n            let boundsH = bounds.bottom - bounds.top;\r\n            // horizontal\r\n            if (pointerOrientation == \"horizontal\" || pointerOrientation == \"left\" || pointerOrientation == \"right\") {\r\n                bgStrokeSizeY = 0;\r\n                if (pointerOrientation == \"horizontal\") {\r\n                    if (x > bounds.left + boundsW / 2) {\r\n                        x -= (w * (1 - cw) + pointerLength);\r\n                        bgStrokeSizeX *= -1;\r\n                    }\r\n                    else {\r\n                        x += (w * cw + pointerLength);\r\n                    }\r\n                }\r\n                else if (pointerOrientation == \"left\") {\r\n                    x += (w * (1 - cw) + pointerLength);\r\n                }\r\n                else {\r\n                    x -= (w * cw + pointerLength);\r\n                    bgStrokeSizeX *= -1;\r\n                }\r\n            }\r\n            // vertical pointer\r\n            else {\r\n                bgStrokeSizeX = 0;\r\n                if (pointerOrientation == \"vertical\") {\r\n                    if (y > bounds.top + h / 2 + pointerLength) {\r\n                        y -= (h * (1 - ch) + pointerLength);\r\n                    }\r\n                    else {\r\n                        y += (h * ch + pointerLength);\r\n                        bgStrokeSizeY *= -1;\r\n                    }\r\n                }\r\n                else if (pointerOrientation == \"down\") {\r\n                    y -= (h * (1 - ch) + pointerLength);\r\n                }\r\n                else {\r\n                    y += (h * ch + pointerLength);\r\n                    bgStrokeSizeY *= -1;\r\n                }\r\n            }\r\n            x = $math.fitToRange(x, bounds.left + w * cw, bounds.left + boundsW - w * (1 - cw)) + bgStrokeSizeX;\r\n            y = $math.fitToRange(y, bounds.top + h * ch, bounds.top + boundsH - h * (1 - ch)) - bgStrokeSizeY;\r\n            pointerX = pointTo.x - x + w * cw + bgStrokeSizeX;\r\n            pointerY = pointTo.y - y + h * ch - bgStrokeSizeY;\r\n            this._fx = x;\r\n            this._fy = y;\r\n            const animationDuration = this.get(\"animationDuration\", 0);\r\n            if (animationDuration > 0 && this.get(\"visible\") && this.get(\"opacity\") > 0.1) {\r\n                const animationEasing = this.get(\"animationEasing\");\r\n                this.animate({ key: \"x\", to: x, duration: animationDuration, easing: animationEasing });\r\n                this.animate({ key: \"y\", to: y, duration: animationDuration, easing: animationEasing });\r\n            }\r\n            else {\r\n                this.set(\"x\", x);\r\n                this.set(\"y\", y);\r\n            }\r\n            if (background instanceof PointedRectangle) {\r\n                background.set(\"pointerX\", pointerX);\r\n                background.set(\"pointerY\", pointerY);\r\n            }\r\n            if (w > 0) {\r\n                this._w = w;\r\n            }\r\n            if (h > 0) {\r\n                this._h = h;\r\n            }\r\n        }\r\n    }\r\n}\r\nObject.defineProperty(Tooltip, \"className\", {\r\n    enumerable: true,\r\n    configurable: true,\r\n    writable: true,\r\n    value: \"Tooltip\"\r\n});\r\nObject.defineProperty(Tooltip, \"classNames\", {\r\n    enumerable: true,\r\n    configurable: true,\r\n    writable: true,\r\n    value: Container.classNames.concat([Tooltip.className])\r\n});\r\n//# sourceMappingURL=Tooltip.js.map","import { Entity } from \"./Entity\";\r\nimport { TextFormatter } from \"./TextFormatter\";\r\nimport * as $object from \"./Object\";\r\nimport * as $utils from \"./Utils\";\r\nimport * as $type from \"./Type\";\r\n/**\r\n * Number formatter\r\n *\r\n * @see {@link https://www.amcharts.com/docs/v5/concepts/formatters/formatting-numbers/} for more info\r\n * @important\r\n */\r\nexport class NumberFormatter extends Entity {\r\n    _setDefaults() {\r\n        // Defaults\r\n        this._setDefault(\"negativeBase\", 0);\r\n        this._setDefault(\"numberFormat\", \"#,###.#####\");\r\n        this._setDefault(\"smallNumberThreshold\", 1.00);\r\n        const bns = \"_big_number_suffix_\";\r\n        const sns = \"_small_number_suffix_\";\r\n        const bs = \"_byte_suffix_\";\r\n        this._setDefault(\"bigNumberPrefixes\", [\r\n            { \"number\": 1e+3, \"suffix\": this._t(bns + \"3\") },\r\n            { \"number\": 1e+6, \"suffix\": this._t(bns + \"6\") },\r\n            { \"number\": 1e+9, \"suffix\": this._t(bns + \"9\") },\r\n            { \"number\": 1e+12, \"suffix\": this._t(bns + \"12\") },\r\n            { \"number\": 1e+15, \"suffix\": this._t(bns + \"15\") },\r\n            { \"number\": 1e+18, \"suffix\": this._t(bns + \"18\") },\r\n            { \"number\": 1e+21, \"suffix\": this._t(bns + \"21\") },\r\n            { \"number\": 1e+24, \"suffix\": this._t(bns + \"24\") }\r\n        ]);\r\n        this._setDefault(\"smallNumberPrefixes\", [\r\n            { \"number\": 1e-24, \"suffix\": this._t(sns + \"24\") },\r\n            { \"number\": 1e-21, \"suffix\": this._t(sns + \"21\") },\r\n            { \"number\": 1e-18, \"suffix\": this._t(sns + \"18\") },\r\n            { \"number\": 1e-15, \"suffix\": this._t(sns + \"15\") },\r\n            { \"number\": 1e-12, \"suffix\": this._t(sns + \"12\") },\r\n            { \"number\": 1e-9, \"suffix\": this._t(sns + \"9\") },\r\n            { \"number\": 1e-6, \"suffix\": this._t(sns + \"6\") },\r\n            { \"number\": 1e-3, \"suffix\": this._t(sns + \"3\") }\r\n        ]);\r\n        this._setDefault(\"bytePrefixes\", [\r\n            { \"number\": 1, suffix: this._t(bs + \"B\") },\r\n            { \"number\": 1024, suffix: this._t(bs + \"KB\") },\r\n            { \"number\": 1048576, suffix: this._t(bs + \"MB\") },\r\n            { \"number\": 1073741824, suffix: this._t(bs + \"GB\") },\r\n            { \"number\": 1099511627776, suffix: this._t(bs + \"TB\") },\r\n            { \"number\": 1125899906842624, suffix: this._t(bs + \"PB\") }\r\n        ]);\r\n        super._setDefaults();\r\n    }\r\n    _beforeChanged() {\r\n        super._beforeChanged();\r\n    }\r\n    /**\r\n     * Formats the number according to specific format.\r\n     *\r\n     * @param value   Value to format\r\n     * @param format  Format to apply\r\n     * @return Formatted number\r\n     */\r\n    format(value, format, precision) {\r\n        // no format passed in or \"Number\"\r\n        if (format == null || ($type.isString(format) && format.toLowerCase() === \"number\")) {\r\n            format = this.get(\"numberFormat\", \"\");\r\n        }\r\n        // Init return value\r\n        let formatted;\r\n        // Cast to number just in case\r\n        // TODO: maybe use better casting\r\n        let source = Number(value);\r\n        // Is it a built-in format or Intl.NumberFormatOptions\r\n        if ($type.isObject(format)) {\r\n            try {\r\n                if (this.get(\"intlLocales\")) {\r\n                    return new Intl.NumberFormat(this.get(\"intlLocales\"), format).format(source);\r\n                }\r\n                else {\r\n                    return new Intl.NumberFormat(undefined, format).format(source);\r\n                }\r\n            }\r\n            catch (e) {\r\n                return \"Invalid\";\r\n            }\r\n        }\r\n        else {\r\n            // Clean format\r\n            format = $utils.cleanFormat(format);\r\n            // Get format info (it will also deal with parser caching)\r\n            let info = this.parseFormat(format, this._root.language);\r\n            // format and replace the number\r\n            let details;\r\n            if (source > this.get(\"negativeBase\")) {\r\n                details = info.positive;\r\n            }\r\n            else if (source < this.get(\"negativeBase\")) {\r\n                details = info.negative;\r\n            }\r\n            else {\r\n                details = info.zero;\r\n            }\r\n            // Adjust precision\r\n            if (precision != null && !details.mod) {\r\n                details = $object.copy(details);\r\n                details.decimals.active = source == 0 ? 0 : precision;\r\n            }\r\n            // Format\r\n            formatted = details.template.split($type.PLACEHOLDER).join(this.applyFormat(source, details));\r\n        }\r\n        if (this.get(\"forceLTR\") === true) {\r\n            formatted = \"\" + formatted;\r\n        }\r\n        return formatted;\r\n    }\r\n    /**\r\n     * Parses supplied format into structured object which can be used to format\r\n     * the number.\r\n     *\r\n     * @param format Format string, i.e. \"#,###.00\"\r\n     * @param language Language\r\n     * @ignore\r\n     */\r\n    parseFormat(format, language) {\r\n        // Check cache\r\n        // TODO\r\n        // let cached = this.getCache(format);\r\n        // if (cached != null) {\r\n        // \treturn cached;\r\n        // }\r\n        const thousandSeparator = language.translateEmpty(\"_thousandSeparator\");\r\n        const decimalSeparator = language.translateEmpty(\"_decimalSeparator\");\r\n        // init format parse info holder\r\n        let info = {\r\n            \"positive\": {\r\n                \"thousands\": {\r\n                    \"active\": -1,\r\n                    \"passive\": -1,\r\n                    \"interval\": -1,\r\n                    \"separator\": thousandSeparator\r\n                },\r\n                \"decimals\": {\r\n                    \"active\": -1,\r\n                    \"passive\": -1,\r\n                    \"separator\": decimalSeparator\r\n                },\r\n                \"template\": \"\",\r\n                \"source\": \"\",\r\n                \"parsed\": false\r\n            },\r\n            \"negative\": {\r\n                \"thousands\": {\r\n                    \"active\": -1,\r\n                    \"passive\": -1,\r\n                    \"interval\": -1,\r\n                    \"separator\": thousandSeparator\r\n                },\r\n                \"decimals\": {\r\n                    \"active\": -1,\r\n                    \"passive\": -1,\r\n                    \"separator\": decimalSeparator\r\n                },\r\n                \"template\": \"\",\r\n                \"source\": \"\",\r\n                \"parsed\": false\r\n            },\r\n            \"zero\": {\r\n                \"thousands\": {\r\n                    \"active\": -1,\r\n                    \"passive\": -1,\r\n                    \"interval\": -1,\r\n                    \"separator\": thousandSeparator\r\n                },\r\n                \"decimals\": {\r\n                    \"active\": -1,\r\n                    \"passive\": -1,\r\n                    \"separator\": decimalSeparator\r\n                },\r\n                \"template\": \"\",\r\n                \"source\": \"\",\r\n                \"parsed\": false\r\n            }\r\n        };\r\n        // Escape double vertical bars (that mean display one vertical bar)\r\n        format = format.replace(\"||\", $type.PLACEHOLDER2);\r\n        // Split it up and deal with different formats\r\n        let parts = format.split(\"|\");\r\n        info.positive.source = parts[0];\r\n        if (typeof parts[2] === \"undefined\") {\r\n            info.zero = info.positive;\r\n        }\r\n        else {\r\n            info.zero.source = parts[2];\r\n        }\r\n        if (typeof parts[1] === \"undefined\") {\r\n            info.negative = info.positive;\r\n        }\r\n        else {\r\n            info.negative.source = parts[1];\r\n        }\r\n        // Parse each\r\n        $object.each(info, (_part, item) => {\r\n            // Already parsed\r\n            if (item.parsed) {\r\n                return;\r\n            }\r\n            // Check cached\r\n            // TODO\r\n            // if (typeof this.getCache(item.source) !== \"undefined\") {\r\n            // \tinfo[part] = this.getCache(item.source);\r\n            // \treturn;\r\n            // }\r\n            // Begin parsing\r\n            let partFormat = item.source;\r\n            // Just \"Number\"?\r\n            if (partFormat.toLowerCase() === \"number\") {\r\n                partFormat = this.get(\"numberFormat\", \"#,###.#####\");\r\n            }\r\n            // Let TextFormatter split into chunks\r\n            let chunks = TextFormatter.chunk(partFormat, true);\r\n            for (let i = 0; i < chunks.length; i++) {\r\n                let chunk = chunks[i];\r\n                // replace back double vertical bar\r\n                chunk.text = chunk.text.replace($type.PLACEHOLDER2, \"|\");\r\n                if (chunk.type === \"value\") {\r\n                    // Parse format\r\n                    // Look for codes\r\n                    let matches = chunk.text.match(/[#0.,]+[ ]?[abespABESP%!]?[abespABESP!]?/);\r\n                    if (matches) {\r\n                        if (matches === null || matches[0] === \"\") {\r\n                            // no codes here - assume string\r\n                            // nothing to do here\r\n                            item.template += chunk.text;\r\n                        }\r\n                        else {\r\n                            // look for the format modifiers at the end\r\n                            let mods = matches[0].match(/[abespABESP%!]{2}|[abespABESP%]{1}$/);\r\n                            if (mods) {\r\n                                item.mod = mods[0].toLowerCase();\r\n                                item.modSpacing = matches[0].match(/[ ]{1}[abespABESP%!]{1}$/) ? true : false;\r\n                            }\r\n                            // break the format up\r\n                            let a = matches[0].split(\".\");\r\n                            // Deal with thousands\r\n                            if (a[0] === \"\") {\r\n                                // No directives for thousands\r\n                                // Leave default settings (no formatting)\r\n                            }\r\n                            else {\r\n                                // Counts\r\n                                item.thousands.active = (a[0].match(/0/g) || []).length;\r\n                                item.thousands.passive = (a[0].match(/\\#/g) || []).length + item.thousands.active;\r\n                                // Separator interval\r\n                                let b = a[0].split(\",\");\r\n                                if (b.length === 1) {\r\n                                    // No thousands separators\r\n                                    // Do nothing\r\n                                }\r\n                                else {\r\n                                    // Use length fo the last chunk as thousands length\r\n                                    item.thousands.interval = (b.pop() || \"\").length;\r\n                                    if (item.thousands.interval === 0) {\r\n                                        item.thousands.interval = -1;\r\n                                    }\r\n                                }\r\n                            }\r\n                            // Deal with decimals\r\n                            if (typeof (a[1]) === \"undefined\") {\r\n                                // No directives for decimals\r\n                                // Leave at defaults (no formatting)\r\n                            }\r\n                            else {\r\n                                // Counts\r\n                                item.decimals.active = (a[1].match(/0/g) || []).length;\r\n                                item.decimals.passive = (a[1].match(/\\#/g) || []).length + item.decimals.active;\r\n                            }\r\n                            // Add special code to template\r\n                            item.template += chunk.text.split(matches[0]).join($type.PLACEHOLDER);\r\n                        }\r\n                    }\r\n                }\r\n                else {\r\n                    // Quoted string - take it as it is\r\n                    item.template += chunk.text;\r\n                }\r\n            }\r\n            // Apply style formatting\r\n            //item.template = getTextFormatter().format(item.template, this.outputFormat);\r\n            // Save cache\r\n            // TODO\r\n            //this.setCache(item.source, item);\r\n            // Mark this as parsed\r\n            item.parsed = true;\r\n        });\r\n        // Save cache (the whole thing)\r\n        // TODO\r\n        //this.setCache(format, info);\r\n        return info;\r\n    }\r\n    /**\r\n     * Applies parsed format to a numeric value.\r\n     *\r\n     * @param value    Value\r\n     * @param details  Parsed format as returned by parseFormat()\r\n     * @return Formatted number\r\n     * @ignore\r\n     */\r\n    applyFormat(value, details) {\r\n        // Use absolute values\r\n        let negative = value < 0;\r\n        value = Math.abs(value);\r\n        // Recalculate according to modifier\r\n        let prefix = \"\", suffix = \"\";\r\n        let mods = details.mod ? details.mod.split(\"\") : [];\r\n        if (mods.indexOf(\"b\") !== -1) {\r\n            let a = this.applyPrefix(value, this.get(\"bytePrefixes\"), mods.indexOf(\"!\") !== -1);\r\n            value = a[0];\r\n            prefix = a[1];\r\n            suffix = a[2];\r\n            if (details.modSpacing) {\r\n                suffix = \" \" + suffix;\r\n            }\r\n        }\r\n        else if (mods.indexOf(\"a\") !== -1) {\r\n            let a = this.applyPrefix(value, value < this.get(\"smallNumberThreshold\") ? this.get(\"smallNumberPrefixes\") : this.get(\"bigNumberPrefixes\"), mods.indexOf(\"!\") !== -1);\r\n            value = a[0];\r\n            prefix = a[1];\r\n            suffix = a[2];\r\n            if (details.modSpacing) {\r\n                suffix = \" \" + suffix;\r\n            }\r\n        }\r\n        else if (mods.indexOf(\"p\") !== -1) {\r\n            let ol = Math.min(value.toString().length + 2, 21);\r\n            //value *= 100;\r\n            value = parseFloat(value.toPrecision(ol));\r\n            prefix = this._root.language.translate(\"_percentPrefix\");\r\n            suffix = this._root.language.translate(\"_percentSuffix\");\r\n            if (prefix == \"\" && suffix == \"\") {\r\n                suffix = \"%\";\r\n            }\r\n        }\r\n        else if (mods.indexOf(\"%\") !== -1) {\r\n            let ol = Math.min(value.toString().length + 2, 21);\r\n            value *= 100;\r\n            value = parseFloat(value.toPrecision(ol));\r\n            suffix = \"%\";\r\n        }\r\n        else if (mods.indexOf(\"\") !== -1) {\r\n            let ol = Math.min(value.toString().length + 3, 21);\r\n            value *= 1000;\r\n            value = parseFloat(value.toPrecision(ol));\r\n            suffix = \"\";\r\n        }\r\n        // Round to passive\r\n        if (mods.indexOf(\"e\") !== -1) {\r\n            // convert the value to exponential\r\n            let exp;\r\n            if (details.decimals.passive >= 0) {\r\n                exp = value.toExponential(details.decimals.passive).split(\"e\");\r\n            }\r\n            else {\r\n                exp = value.toExponential().split(\"e\");\r\n            }\r\n            value = Number(exp[0]);\r\n            suffix = \"e\" + exp[1];\r\n            if (details.modSpacing) {\r\n                suffix = \" \" + suffix;\r\n            }\r\n        }\r\n        else if (details.decimals.passive === 0) {\r\n            value = Math.round(value);\r\n        }\r\n        else if (details.decimals.passive > 0) {\r\n            const decimals = $utils.decimalPlaces(value);\r\n            if (decimals > 0) {\r\n                const d = Math.pow(10, details.decimals.passive);\r\n                value = Math.round(parseFloat((value * d).toFixed(decimals))) / d;\r\n            }\r\n        }\r\n        // Init return value\r\n        let res = \"\";\r\n        // Calc integer and decimal parts\r\n        let a = $type.numberToString(value).split(\".\");\r\n        // Format integers\r\n        let ints = a[0];\r\n        // Pad integers to active length\r\n        if (ints.length < details.thousands.active) {\r\n            ints = Array(details.thousands.active - ints.length + 1).join(\"0\") + ints;\r\n        }\r\n        // Insert thousands separators\r\n        if (details.thousands.interval > 0) {\r\n            let ip = [];\r\n            let intsr = ints.split(\"\").reverse().join(\"\");\r\n            for (let i = 0, len = ints.length; i <= len; i += details.thousands.interval) {\r\n                let c = intsr.substr(i, details.thousands.interval).split(\"\").reverse().join(\"\");\r\n                if (c !== \"\") {\r\n                    ip.unshift(c);\r\n                }\r\n            }\r\n            ints = ip.join(details.thousands.separator);\r\n        }\r\n        // Add integers\r\n        res += ints;\r\n        // Add decimals\r\n        if (a.length === 1) {\r\n            a.push(\"\");\r\n        }\r\n        let decs = a[1];\r\n        // Fill zeros?\r\n        if (decs.length < details.decimals.active) {\r\n            decs += Array(details.decimals.active - decs.length + 1).join(\"0\");\r\n        }\r\n        if (decs !== \"\") {\r\n            res += details.decimals.separator + decs;\r\n        }\r\n        // Can't have empty return value\r\n        if (res === \"\") {\r\n            res = \"0\";\r\n        }\r\n        // Add minus sign back\r\n        if (value !== 0 && negative && (mods.indexOf(\"s\") === -1)) {\r\n            res = \"-\" + res;\r\n        }\r\n        // Add suffixes/prefixes\r\n        if (prefix) {\r\n            res = prefix + res;\r\n        }\r\n        if (suffix) {\r\n            res += suffix;\r\n        }\r\n        return res;\r\n    }\r\n    applyPrefix(value, prefixes, force = false) {\r\n        let newvalue = value;\r\n        let prefix = \"\";\r\n        let suffix = \"\";\r\n        let applied = false;\r\n        let k = 1;\r\n        for (let i = 0, len = prefixes.length; i < len; i++) {\r\n            if (prefixes[i].number <= value) {\r\n                if (prefixes[i].number === 0) {\r\n                    newvalue = 0;\r\n                }\r\n                else {\r\n                    newvalue = value / prefixes[i].number;\r\n                    k = prefixes[i].number;\r\n                }\r\n                prefix = prefixes[i].prefix;\r\n                suffix = prefixes[i].suffix;\r\n                applied = true;\r\n            }\r\n        }\r\n        if (!applied && force && prefixes.length && value != 0) {\r\n            // Prefix was not applied. Use the first prefix.\r\n            newvalue = value / prefixes[0].number;\r\n            prefix = prefixes[0].prefix;\r\n            suffix = prefixes[0].suffix;\r\n            applied = true;\r\n        }\r\n        if (applied) {\r\n            newvalue = parseFloat(newvalue.toPrecision(Math.min(k.toString().length + Math.floor(newvalue).toString().replace(/[^0-9]*/g, \"\").length, 21)));\r\n        }\r\n        return [newvalue, prefix, suffix];\r\n    }\r\n    /**\r\n     * Replaces brackets with temporary placeholders.\r\n     *\r\n     * @ignore Exclude from docs\r\n     * @param text  Input text\r\n     * @return Escaped text\r\n     */\r\n    escape(text) {\r\n        return text.replace(\"||\", $type.PLACEHOLDER2);\r\n    }\r\n    /**\r\n     * Replaces placeholders back to brackets.\r\n     *\r\n     * @ignore Exclude from docs\r\n     * @param text  Escaped text\r\n     * @return Unescaped text\r\n     */\r\n    unescape(text) {\r\n        return text.replace($type.PLACEHOLDER2, \"|\");\r\n    }\r\n}\r\n//# sourceMappingURL=NumberFormatter.js.map","function parseDate(timezone, date) {\r\n    let year = 0;\r\n    let month = 0;\r\n    let day = 1;\r\n    let hour = 0;\r\n    let minute = 0;\r\n    let second = 0;\r\n    let millisecond = 0;\r\n    let weekday = 0;\r\n    timezone.formatToParts(date).forEach((x) => {\r\n        switch (x.type) {\r\n            case \"year\":\r\n                year = +x.value;\r\n                break;\r\n            case \"month\":\r\n                month = (+x.value) - 1;\r\n                break;\r\n            case \"day\":\r\n                day = +x.value;\r\n                break;\r\n            case \"hour\":\r\n                hour = +x.value;\r\n                break;\r\n            case \"minute\":\r\n                minute = +x.value;\r\n                break;\r\n            case \"second\":\r\n                second = +x.value;\r\n                break;\r\n            case \"fractionalSecond\":\r\n                millisecond = +x.value;\r\n                break;\r\n            case \"weekday\":\r\n                switch (x.value) {\r\n                    case \"Sun\":\r\n                        weekday = 0;\r\n                        break;\r\n                    case \"Mon\":\r\n                        weekday = 1;\r\n                        break;\r\n                    case \"Tue\":\r\n                        weekday = 2;\r\n                        break;\r\n                    case \"Wed\":\r\n                        weekday = 3;\r\n                        break;\r\n                    case \"Thu\":\r\n                        weekday = 4;\r\n                        break;\r\n                    case \"Fri\":\r\n                        weekday = 5;\r\n                        break;\r\n                    case \"Sat\":\r\n                        weekday = 6;\r\n                        break;\r\n                }\r\n        }\r\n    });\r\n    if (hour === 24) {\r\n        hour = 0;\r\n    }\r\n    return { year, month, day, hour, minute, second, millisecond, weekday };\r\n}\r\nfunction toUTCDate(timezone, date) {\r\n    const { year, month, day, hour, minute, second, millisecond } = parseDate(timezone, date);\r\n    return Date.UTC(year, month, day, hour, minute, second, millisecond);\r\n}\r\nexport class Timezone {\r\n    constructor(timezone, isReal) {\r\n        Object.defineProperty(this, \"_utc\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"_dtf\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"name\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        if (!isReal) {\r\n            throw new Error(\"You cannot use `new Class()`, instead use `Class.new()`\");\r\n        }\r\n        this.name = timezone;\r\n        this._utc = new Intl.DateTimeFormat(\"UTC\", {\r\n            hour12: false,\r\n            timeZone: \"UTC\",\r\n            year: \"numeric\",\r\n            month: \"2-digit\",\r\n            day: \"2-digit\",\r\n            hour: \"2-digit\",\r\n            minute: \"2-digit\",\r\n            second: \"2-digit\",\r\n            weekday: \"short\",\r\n            fractionalSecondDigits: 3,\r\n        });\r\n        this._dtf = new Intl.DateTimeFormat(\"UTC\", {\r\n            hour12: false,\r\n            timeZone: timezone,\r\n            year: \"numeric\",\r\n            month: \"2-digit\",\r\n            day: \"2-digit\",\r\n            hour: \"2-digit\",\r\n            minute: \"2-digit\",\r\n            second: \"2-digit\",\r\n            weekday: \"short\",\r\n            fractionalSecondDigits: 3,\r\n        });\r\n    }\r\n    /**\r\n     * Use this method to create an instance of this class.\r\n     *\r\n     * @see {@link https://www.amcharts.com/docs/v5/getting-started/#New_element_syntax} for more info\r\n     * @param   timezone  IANA timezone\r\n     * @return            Instantiated object\r\n     */\r\n    static new(timezone) {\r\n        return (new this(timezone, true));\r\n    }\r\n    convertLocal(date) {\r\n        const offset = this.offsetUTC(date);\r\n        const userOffset = date.getTimezoneOffset();\r\n        const output = new Date(date);\r\n        output.setUTCMinutes(output.getUTCMinutes() - (offset - userOffset));\r\n        const newUserOffset = output.getTimezoneOffset();\r\n        if (userOffset != newUserOffset) {\r\n            output.setUTCMinutes(output.getUTCMinutes() + newUserOffset - userOffset);\r\n        }\r\n        return output;\r\n    }\r\n    offsetUTC(date) {\r\n        const utc = toUTCDate(this._utc, date);\r\n        const dtf = toUTCDate(this._dtf, date);\r\n        return (utc - dtf) / 60000;\r\n    }\r\n    parseDate(date) {\r\n        return parseDate(this._dtf, date);\r\n    }\r\n}\r\n//# sourceMappingURL=Timezone.js.map","import { Entity } from \"./Entity\";\r\nimport { TextFormatter } from \"./TextFormatter\";\r\nimport { Timezone } from \"./Timezone\";\r\nimport * as $type from \"./Type\";\r\nimport * as $utils from \"./Utils\";\r\n/**\r\n * Date formatter class.\r\n *\r\n * @see {@link https://www.amcharts.com/docs/v5/concepts/formatters/formatting-dates/} for more info\r\n * @important\r\n */\r\nexport class DateFormatter extends Entity {\r\n    _setDefaults() {\r\n        // Defaults\r\n        this._setDefault(\"capitalize\", true);\r\n        this._setDefault(\"dateFormat\", \"yyyy-MM-dd\");\r\n        super._setDefaults();\r\n    }\r\n    _beforeChanged() {\r\n        super._beforeChanged();\r\n    }\r\n    /**\r\n     * Formats a source `Date` object into string format\r\n     * @param   source          inpout date\r\n     * @param   format          Output format\r\n     * @param   ignoreTimezone  Ignore timezone?\r\n     * @return                  Formatted date\r\n     */\r\n    format(source, format, ignoreTimezone = false) {\r\n        // Locale?\r\n        // TODO\r\n        // No format passed in or it's empty\r\n        if (typeof format === \"undefined\" || format === \"\") {\r\n            format = this.get(\"dateFormat\", \"yyyy-MM-dd\");\r\n        }\r\n        // Init return value\r\n        let formatted;\r\n        // Cast?\r\n        // TODO: decide if we need to cast\r\n        let date = source;\r\n        // Is it a built-in format or Intl.DateTimeFormat\r\n        if ($type.isObject(format)) {\r\n            try {\r\n                const locales = this.get(\"intlLocales\");\r\n                if (locales) {\r\n                    return new Intl.DateTimeFormat(locales, format).format(date);\r\n                }\r\n                else {\r\n                    return new Intl.DateTimeFormat(undefined, format).format(date);\r\n                }\r\n            }\r\n            catch (e) {\r\n                return \"Invalid\";\r\n            }\r\n        }\r\n        // get format info (it will also deal with parser caching)\r\n        let info = this.parseFormat(format);\r\n        // Should we apply custom time zone?\r\n        const timezone = this._root.timezone;\r\n        if (timezone && !this._root.utc && !ignoreTimezone) {\r\n            date = timezone.convertLocal(date);\r\n        }\r\n        // Check if it's a valid date\r\n        if (!$type.isNumber(date.getTime())) {\r\n            // TODO translation\r\n            //return this._t(\"Invalid date\");\r\n            return \"Invalid date\";\r\n        }\r\n        // Apply format\r\n        formatted = this.applyFormat(date, info, ignoreTimezone);\r\n        // Capitalize\r\n        if (this.get(\"capitalize\")) {\r\n            formatted = formatted.replace(/^.{1}/, formatted.substr(0, 1).toUpperCase());\r\n        }\r\n        // We're done\r\n        return formatted;\r\n    }\r\n    /**\r\n     * Applies format to Date.\r\n     *\r\n     * @param date      Date object\r\n     * @param info      Parsed format information\r\n     * @return Formatted date string\r\n     */\r\n    applyFormat(date, info, ignoreTimezone = false) {\r\n        // Init return value\r\n        let res = info.template;\r\n        // Get values\r\n        let fullYear, month, weekday, day, hours, minutes, seconds, milliseconds, timestamp = date.getTime();\r\n        if (this._root.utc && !ignoreTimezone) {\r\n            fullYear = date.getUTCFullYear();\r\n            month = date.getUTCMonth();\r\n            weekday = date.getUTCDay();\r\n            day = date.getUTCDate();\r\n            hours = date.getUTCHours();\r\n            minutes = date.getUTCMinutes();\r\n            seconds = date.getUTCSeconds();\r\n            milliseconds = date.getUTCMilliseconds();\r\n        }\r\n        else {\r\n            fullYear = date.getFullYear();\r\n            month = date.getMonth();\r\n            weekday = date.getDay();\r\n            day = date.getDate();\r\n            hours = date.getHours();\r\n            minutes = date.getMinutes();\r\n            seconds = date.getSeconds();\r\n            milliseconds = date.getMilliseconds();\r\n        }\r\n        // Go through each part and format/replace it in template\r\n        for (let i = 0, len = info.parts.length; i < len; i++) {\r\n            let value = \"\";\r\n            switch (info.parts[i]) {\r\n                case \"G\":\r\n                    value = this._t(fullYear < 0\r\n                        ? \"_era_bc\"\r\n                        : \"_era_ad\");\r\n                    break;\r\n                case \"yyyy\":\r\n                    value = Math.abs(fullYear).toString();\r\n                    if (fullYear < 0) {\r\n                        value += this._t(\"_era_bc\");\r\n                    }\r\n                    break;\r\n                case \"yyy\":\r\n                case \"yy\":\r\n                case \"y\":\r\n                    value = Math.abs(fullYear).toString().substr(-info.parts[i].length);\r\n                    if (fullYear < 0) {\r\n                        value += this._t(\"_era_bc\");\r\n                    }\r\n                    break;\r\n                case \"YYYY\":\r\n                case \"YYY\":\r\n                case \"YY\":\r\n                case \"Y\":\r\n                    let year = $utils.getWeekYear(date, this._root.utc);\r\n                    if (info.parts[i] == \"YYYY\") {\r\n                        value = Math.abs(year).toString();\r\n                    }\r\n                    else {\r\n                        value = Math.abs(year).toString().substr(-info.parts[i].length);\r\n                    }\r\n                    if (year < 0) {\r\n                        value += this._t(\"_era_bc\");\r\n                    }\r\n                    break;\r\n                case \"u\":\r\n                    // @todo\r\n                    break;\r\n                case \"q\":\r\n                    value = \"\" + Math.ceil((date.getMonth() + 1) / 3);\r\n                    break;\r\n                case \"MMMMM\":\r\n                    value = this._t(this._getMonth(month)).substr(0, 1);\r\n                    break;\r\n                case \"MMMM\":\r\n                    value = this._t(this._getMonth(month));\r\n                    break;\r\n                case \"MMM\":\r\n                    value = this._t(this._getShortMonth(month));\r\n                    break;\r\n                case \"MM\":\r\n                    value = $utils.padString(month + 1, 2, \"0\");\r\n                    break;\r\n                case \"M\":\r\n                    value = (month + 1).toString();\r\n                    break;\r\n                case \"ww\":\r\n                    value = $utils.padString($utils.getWeek(date, this._root.utc), 2, \"0\");\r\n                    break;\r\n                case \"w\":\r\n                    value = $utils.getWeek(date, this._root.utc).toString();\r\n                    break;\r\n                case \"W\":\r\n                    value = $utils.getMonthWeek(date, this._root.utc).toString();\r\n                    break;\r\n                case \"dd\":\r\n                    value = $utils.padString(day, 2, \"0\");\r\n                    break;\r\n                case \"d\":\r\n                    value = day.toString();\r\n                    break;\r\n                case \"DD\":\r\n                case \"DDD\":\r\n                    value = $utils.padString($utils.getYearDay(date, this._root.utc).toString(), info.parts[i].length, \"0\");\r\n                    break;\r\n                case \"D\":\r\n                    value = $utils.getYearDay(date, this._root.utc).toString();\r\n                    break;\r\n                case \"F\":\r\n                    // @todo\r\n                    break;\r\n                case \"g\":\r\n                    // @todo\r\n                    break;\r\n                case \"t\":\r\n                    value = this._root.language.translateFunc(\"_dateOrd\").call(this, day);\r\n                    break;\r\n                case \"E\":\r\n                    value = (weekday || 7).toString();\r\n                    break;\r\n                case \"EE\":\r\n                    value = $utils.padString((weekday || 7).toString(), 2, \"0\");\r\n                    break;\r\n                case \"EEE\":\r\n                case \"eee\":\r\n                    value = this._t(this._getShortWeekday(weekday));\r\n                    break;\r\n                case \"EEEE\":\r\n                case \"eeee\":\r\n                    value = this._t(this._getWeekday(weekday));\r\n                    break;\r\n                case \"EEEEE\":\r\n                case \"eeeee\":\r\n                    value = this._t(this._getShortWeekday(weekday)).substr(0, 1);\r\n                    break;\r\n                case \"e\":\r\n                case \"ee\":\r\n                    value = (weekday - (this._root.locale.firstDayOfWeek || 1) + 1).toString();\r\n                    if (info.parts[i] == \"ee\") {\r\n                        value = $utils.padString(value, 2, \"0\");\r\n                    }\r\n                    break;\r\n                case \"a\":\r\n                    if (hours >= 12) {\r\n                        value = this._t(\"PM\");\r\n                    }\r\n                    else {\r\n                        value = this._t(\"AM\");\r\n                    }\r\n                    break;\r\n                case \"aa\":\r\n                    if (hours >= 12) {\r\n                        value = this._t(\"P.M.\");\r\n                    }\r\n                    else {\r\n                        value = this._t(\"A.M.\");\r\n                    }\r\n                    break;\r\n                case \"aaa\":\r\n                    if (hours >= 12) {\r\n                        value = this._t(\"P\");\r\n                    }\r\n                    else {\r\n                        value = this._t(\"A\");\r\n                    }\r\n                    break;\r\n                case \"h\":\r\n                    value = $utils.get12Hours(hours).toString();\r\n                    break;\r\n                case \"hh\":\r\n                    value = $utils.padString($utils.get12Hours(hours), 2, \"0\");\r\n                    break;\r\n                case \"H\":\r\n                    value = hours.toString();\r\n                    break;\r\n                case \"HH\":\r\n                    value = $utils.padString(hours, 2, \"0\");\r\n                    break;\r\n                case \"K\":\r\n                    value = $utils.get12Hours(hours, 0).toString();\r\n                    break;\r\n                case \"KK\":\r\n                    value = $utils.padString($utils.get12Hours(hours, 0), 2, \"0\");\r\n                    break;\r\n                case \"k\":\r\n                    value = (hours + 1).toString();\r\n                    break;\r\n                case \"kk\":\r\n                    value = $utils.padString(hours + 1, 2, \"0\");\r\n                    break;\r\n                case \"m\":\r\n                    value = minutes.toString();\r\n                    break;\r\n                case \"mm\":\r\n                    value = $utils.padString(minutes, 2, \"0\");\r\n                    break;\r\n                case \"s\":\r\n                    value = seconds.toString();\r\n                    break;\r\n                case \"ss\":\r\n                    value = $utils.padString(seconds, 2, \"0\");\r\n                    break;\r\n                case \"S\":\r\n                case \"SS\":\r\n                case \"SSS\":\r\n                    value = Math.round((milliseconds / 1000) * Math.pow(10, info.parts[i].length)).toString();\r\n                    break;\r\n                case \"x\":\r\n                    value = timestamp.toString();\r\n                    break;\r\n                case \"n\":\r\n                case \"nn\":\r\n                case \"nnn\":\r\n                    value = $utils.padString(milliseconds, info.parts[i].length, \"0\");\r\n                    break;\r\n                case \"z\":\r\n                    value = $utils.getTimeZone(date, false, false, this._root.utc, this._root.timezone ? this._root.timezone.name : undefined).replace(/[+-]+[0-9]+$/, \"\");\r\n                    break;\r\n                case \"zz\":\r\n                    value = $utils.getTimeZone(date, true, false, this._root.utc, this._root.timezone ? this._root.timezone.name : undefined);\r\n                    break;\r\n                case \"zzz\":\r\n                    value = $utils.getTimeZone(date, false, true, this._root.utc, this._root.timezone ? this._root.timezone.name : undefined).replace(/[+-]+[0-9]+$/, \"\");\r\n                    break;\r\n                case \"zzzz\":\r\n                    value = $utils.getTimeZone(date, true, true, this._root.utc, this._root.timezone ? this._root.timezone.name : undefined);\r\n                    break;\r\n                case \"Z\":\r\n                case \"ZZ\":\r\n                    let timezone = this._root.utc ? \"UTC\" : this._root.timezone;\r\n                    if (timezone instanceof Timezone) {\r\n                        timezone = timezone.name;\r\n                    }\r\n                    const offset = timezone ? $utils.getTimezoneOffset(timezone) : date.getTimezoneOffset();\r\n                    let tz = Math.abs(offset) / 60;\r\n                    let tzh = Math.floor(tz);\r\n                    let tzm = tz * 60 - tzh * 60;\r\n                    if (this._root.utc) {\r\n                        tzh = 0;\r\n                        tzm = 0;\r\n                    }\r\n                    if (info.parts[i] == \"Z\") {\r\n                        value = \"GMT\";\r\n                        value += offset > 0 ? \"-\" : \"+\";\r\n                        value += $utils.padString(tzh, 2) + \":\" + $utils.padString(tzm, 2);\r\n                    }\r\n                    else {\r\n                        value = offset > 0 ? \"-\" : \"+\";\r\n                        value += $utils.padString(tzh, 2) + $utils.padString(tzm, 2);\r\n                    }\r\n                    break;\r\n                case \"i\":\r\n                    value = date.toISOString();\r\n                    break;\r\n                case \"I\":\r\n                    value = date.toUTCString();\r\n                    break;\r\n            }\r\n            res = res.replace($type.PLACEHOLDER, value);\r\n        }\r\n        return res;\r\n    }\r\n    /**\r\n     * Parses format into structured infromation.\r\n     *\r\n     * @param format Format template\r\n     */\r\n    parseFormat(format) {\r\n        // Check cache\r\n        // TODO: implement caching of the parsed format\r\n        // Init format parse info holder\r\n        let info = {\r\n            \"template\": \"\",\r\n            \"parts\": []\r\n        };\r\n        // Let TextFormatter split into chunks\r\n        let chunks = TextFormatter.chunk(format, true);\r\n        for (let i = 0; i < chunks.length; i++) {\r\n            let chunk = chunks[i];\r\n            if (chunk.type === \"value\") {\r\n                // Just \"Date\"?\r\n                if (chunk.text.match(/^date$/i)) {\r\n                    let dateFormat = this.get(\"dateFormat\", \"yyyy-MM-dd\");\r\n                    if (!$type.isString(dateFormat)) {\r\n                        dateFormat = \"yyyy-MM-dd\";\r\n                    }\r\n                    chunk.text = dateFormat;\r\n                }\r\n                // Find all possible parts\r\n                let matches = chunk.text.match(/G|yyyy|yyy|yy|y|YYYY|YYY|YY|Y|u|q|MMMMM|MMMM|MMM|MM|M|ww|w|W|dd|d|DDD|DD|D|F|g|EEEEE|EEEE|EEE|EE|E|eeeee|eeee|eee|ee|e|aaa|aa|a|hh|h|HH|H|KK|K|kk|k|mm|m|ss|s|SSS|SS|S|A|zzzz|zzz|zz|z|ZZ|Z|t|x|nnn|nn|n|i|I/g);\r\n                // Found?\r\n                if (matches) {\r\n                    // Populate template\r\n                    for (let x = 0; x < matches.length; x++) {\r\n                        info.parts.push(matches[x]);\r\n                        chunk.text = chunk.text.replace(matches[x], $type.PLACEHOLDER);\r\n                    }\r\n                }\r\n            }\r\n            // Apply to template\r\n            info.template += chunk.text;\r\n        }\r\n        // Save cache\r\n        // TODO\r\n        return info;\r\n    }\r\n    _months() {\r\n        return [\"January\", \"February\", \"March\", \"April\", \"May\", \"June\", \"July\", \"August\", \"September\", \"October\", \"November\", \"December\"];\r\n    }\r\n    _getMonth(index) {\r\n        return this._months()[index];\r\n    }\r\n    _shortMonths() {\r\n        return [\"Jan\", \"Feb\", \"Mar\", \"Apr\", \"May(short)\", \"Jun\", \"Jul\", \"Aug\", \"Sep\", \"Oct\", \"Nov\", \"Dec\"];\r\n    }\r\n    _getShortMonth(index) {\r\n        return this._shortMonths()[index];\r\n    }\r\n    _weekdays() {\r\n        return [\"Sunday\", \"Monday\", \"Tuesday\", \"Wednesday\", \"Thursday\", \"Friday\", \"Saturday\"];\r\n    }\r\n    _getWeekday(index) {\r\n        return this._weekdays()[index];\r\n    }\r\n    _shortWeekdays() {\r\n        return [\"Sun\", \"Mon\", \"Tue\", \"Wed\", \"Thu\", \"Fri\", \"Sat\"];\r\n    }\r\n    _getShortWeekday(index) {\r\n        return this._shortWeekdays()[index];\r\n    }\r\n    parse(source, format) {\r\n        // Is it already a Date\r\n        if (source instanceof Date) {\r\n            return source;\r\n        }\r\n        // Is it a numeric timestamp\r\n        if ($type.isNumber(source)) {\r\n            return new Date(source);\r\n        }\r\n        // Are we parsing a timestamp?\r\n        if (format == \"x\") {\r\n            return new Date(parseInt(source));\r\n        }\r\n        // No? Let's check if it's string, and try converting to it if nec\r\n        if (!$type.isString(source)) {\r\n            source = source.toString();\r\n        }\r\n        // Init return value\r\n        let res;\r\n        // Init RegEx for parsing\r\n        let reg = \"\";\r\n        // Clean format\r\n        format = $utils.cleanFormat(format);\r\n        // Clip format to length of the source string\r\n        format = format.substr(0, source.length);\r\n        // Parse format\r\n        let info = this.parseFormat(format);\r\n        // Init parsed items holder\r\n        let parsedIndexes = {\r\n            \"year\": -1,\r\n            \"year3\": -1,\r\n            \"year2\": -1,\r\n            \"year1\": -1,\r\n            \"month\": -1,\r\n            \"monthShort\": -1,\r\n            \"monthLong\": -1,\r\n            \"weekdayShort\": -1,\r\n            \"weekdayLong\": -1,\r\n            \"day\": -1,\r\n            \"yearDay\": -1,\r\n            \"week\": -1,\r\n            \"hourBase0\": -1,\r\n            \"hour12Base0\": -1,\r\n            \"hourBase1\": -1,\r\n            \"hour12Base1\": -1,\r\n            \"minute\": -1,\r\n            \"second\": -1,\r\n            \"millisecond\": -1,\r\n            \"millisecondDigits\": -1,\r\n            \"am\": -1,\r\n            \"zone\": -1,\r\n            \"timestamp\": -1,\r\n            \"iso\": -1\r\n        };\r\n        // Init values\r\n        let resValues = {\r\n            \"year\": 1970,\r\n            \"month\": 0,\r\n            \"day\": 1,\r\n            \"hour\": 0,\r\n            \"minute\": 0,\r\n            \"second\": 0,\r\n            \"millisecond\": 0,\r\n            \"timestamp\": null,\r\n            \"offset\": 0,\r\n            \"utc\": this._root.utc\r\n        };\r\n        // Index adjuster\r\n        let indexAdjust = 0;\r\n        let index = 0;\r\n        // Iterate through all of the parts\r\n        for (let i = 0; i < info.parts.length; i++) {\r\n            // Set current match index\r\n            index = i + indexAdjust + 1;\r\n            switch (info.parts[i]) {\r\n                case \"yyyy\":\r\n                case \"YYYY\":\r\n                    reg += \"([0-9]{4})\";\r\n                    parsedIndexes.year = index;\r\n                    break;\r\n                case \"yyy\":\r\n                case \"YYY\":\r\n                    reg += \"([0-9]{3})\";\r\n                    parsedIndexes.year3 = index;\r\n                    break;\r\n                case \"yy\":\r\n                case \"YY\":\r\n                    reg += \"([0-9]{2})\";\r\n                    parsedIndexes.year2 = index;\r\n                    break;\r\n                case \"y\":\r\n                case \"Y\":\r\n                    reg += \"([0-9]{1})\";\r\n                    parsedIndexes.year1 = index;\r\n                    break;\r\n                case \"MMMM\":\r\n                    reg += \"(\" + this.getStringList(this._months()).join(\"|\") + \")\";\r\n                    parsedIndexes.monthLong = index;\r\n                    break;\r\n                case \"MMM\":\r\n                    reg += \"(\" + this.getStringList(this._shortMonths()).join(\"|\") + \")\";\r\n                    parsedIndexes.monthShort = index;\r\n                    break;\r\n                case \"MM\":\r\n                case \"M\":\r\n                    reg += \"([0-9]{2}|[0-9]{1})\";\r\n                    parsedIndexes.month = index;\r\n                    break;\r\n                case \"ww\":\r\n                case \"w\":\r\n                    reg += \"([0-9]{2}|[0-9]{1})\";\r\n                    parsedIndexes.week = index;\r\n                    break;\r\n                case \"dd\":\r\n                case \"d\":\r\n                    reg += \"([0-9]{2}|[0-9]{1})\";\r\n                    parsedIndexes.day = index;\r\n                    break;\r\n                case \"DDD\":\r\n                case \"DD\":\r\n                case \"D\":\r\n                    reg += \"([0-9]{3}|[0-9]{2}|[0-9]{1})\";\r\n                    parsedIndexes.yearDay = index;\r\n                    break;\r\n                case \"dddd\":\r\n                    reg += \"(\" + this.getStringList(this._weekdays()).join(\"|\") + \")\";\r\n                    parsedIndexes.weekdayLong = index;\r\n                    break;\r\n                case \"ddd\":\r\n                    reg += \"(\" + this.getStringList(this._shortWeekdays()).join(\"|\") + \")\";\r\n                    parsedIndexes.weekdayShort = index;\r\n                    break;\r\n                case \"aaa\":\r\n                case \"aa\":\r\n                case \"a\":\r\n                    // TODO: fix (escape regex)\r\n                    reg += \"(\" + this.getStringList([\"AM\", \"PM\", \"A\\.M\\.\", \"P\\.M\\.\", \"A\", \"P\"]).join(\"|\") + \")\";\r\n                    parsedIndexes.am = index;\r\n                    break;\r\n                case \"hh\":\r\n                case \"h\":\r\n                    reg += \"([0-9]{2}|[0-9]{1})\";\r\n                    parsedIndexes.hour12Base1 = index;\r\n                    break;\r\n                case \"HH\":\r\n                case \"H\":\r\n                    reg += \"([0-9]{2}|[0-9]{1})\";\r\n                    parsedIndexes.hourBase0 = index;\r\n                    break;\r\n                case \"KK\":\r\n                case \"K\":\r\n                    reg += \"([0-9]{2}|[0-9]{1})\";\r\n                    parsedIndexes.hour12Base0 = index;\r\n                    break;\r\n                case \"kk\":\r\n                case \"k\":\r\n                    reg += \"([0-9]{2}|[0-9]{1})\";\r\n                    parsedIndexes.hourBase1 = index;\r\n                    break;\r\n                case \"mm\":\r\n                case \"m\":\r\n                    reg += \"([0-9]{2}|[0-9]{1})\";\r\n                    parsedIndexes.minute = index;\r\n                    break;\r\n                case \"ss\":\r\n                case \"s\":\r\n                    reg += \"([0-9]{2}|[0-9]{1})\";\r\n                    parsedIndexes.second = index;\r\n                    break;\r\n                case \"SSS\":\r\n                case \"SS\":\r\n                case \"S\":\r\n                    reg += \"([0-9]{3}|[0-9]{2}|[0-9]{1})\";\r\n                    parsedIndexes.millisecond = index;\r\n                    parsedIndexes.millisecondDigits = info.parts[i].length;\r\n                    break;\r\n                case \"nnn\":\r\n                case \"nn\":\r\n                case \"n\":\r\n                    reg += \"([0-9]{3}|[0-9]{2}|[0-9]{1})\";\r\n                    parsedIndexes.millisecond = index;\r\n                    break;\r\n                case \"x\":\r\n                    reg += \"([0-9]{1,})\";\r\n                    parsedIndexes.timestamp = index;\r\n                    break;\r\n                case \"Z\":\r\n                    reg += \"GMT([-+]+[0-9]{2}:[0-9]{2})\";\r\n                    parsedIndexes.zone = index;\r\n                    break;\r\n                case \"ZZ\":\r\n                    reg += \"([\\\\-+]+[0-9]{2}[0-9]{2})\";\r\n                    parsedIndexes.zone = index;\r\n                    break;\r\n                case \"i\":\r\n                    reg += \"([0-9]{4})-?([0-9]{2})-?([0-9]{2})T?([0-9]{2}):?([0-9]{2}):?([0-9]{2})\\\\.?([0-9]{0,3})([zZ]|[+\\\\-][0-9]{2}:?[0-9]{2}|$)\";\r\n                    parsedIndexes.iso = index;\r\n                    indexAdjust += 7;\r\n                    break;\r\n                case \"G\":\r\n                case \"YYYY\":\r\n                case \"YYY\":\r\n                case \"YY\":\r\n                case \"Y\":\r\n                case \"MMMMM\":\r\n                case \"W\":\r\n                case \"EEEEE\":\r\n                case \"EEEE\":\r\n                case \"EEE\":\r\n                case \"EE\":\r\n                case \"E\":\r\n                case \"eeeee\":\r\n                case \"eeee\":\r\n                case \"eee\":\r\n                case \"ee\":\r\n                case \"e\":\r\n                case \"zzzz\":\r\n                case \"zzz\":\r\n                case \"zz\":\r\n                case \"z\":\r\n                case \"t\":\r\n                    // Ignore\r\n                    indexAdjust--;\r\n                    break;\r\n            }\r\n            reg += \"[^0-9]*\";\r\n        }\r\n        // Try matching\r\n        let regex = new RegExp(reg);\r\n        let matches = source.match(regex);\r\n        if (matches) {\r\n            // Populate the date object\r\n            // Full year\r\n            if (parsedIndexes.year > -1) {\r\n                resValues.year = parseInt(matches[parsedIndexes.year]);\r\n            }\r\n            // 3-digit year\r\n            if (parsedIndexes.year3 > -1) {\r\n                let val = parseInt(matches[parsedIndexes.year3]);\r\n                val += 1000;\r\n                resValues.year = val;\r\n            }\r\n            // 2-digit year\r\n            if (parsedIndexes.year2 > -1) {\r\n                let val = parseInt(matches[parsedIndexes.year2]);\r\n                if (val > 50) {\r\n                    val += 1000;\r\n                }\r\n                else {\r\n                    val += 2000;\r\n                }\r\n                resValues.year = val;\r\n            }\r\n            // 1-digit year\r\n            if (parsedIndexes.year1 > -1) {\r\n                let val = parseInt(matches[parsedIndexes.year1]);\r\n                val = Math.floor((new Date().getFullYear()) / 10) * 10 + val;\r\n                resValues.year = val;\r\n            }\r\n            // Full month\r\n            if (parsedIndexes.monthLong > -1) {\r\n                resValues.month = this.resolveMonth(matches[parsedIndexes.monthLong]);\r\n            }\r\n            // Short month\r\n            if (parsedIndexes.monthShort > -1) {\r\n                resValues.month = this.resolveShortMonth(matches[parsedIndexes.monthShort]);\r\n            }\r\n            // Numeric month\r\n            if (parsedIndexes.month > -1) {\r\n                resValues.month = parseInt(matches[parsedIndexes.month]) - 1;\r\n            }\r\n            // Weekday\r\n            // @todo\r\n            // Week\r\n            if ((parsedIndexes.week > -1) && (parsedIndexes.day === -1)) {\r\n                // We parse weeks ONLY if day is not explicitly set\r\n                // TODO: this needs work\r\n                // (but maybe later - I can hardly imagine anyone passing their dates in weeks)\r\n                resValues.month = 0;\r\n                resValues.day = $utils.getDayFromWeek(parseInt(matches[parsedIndexes.week]), resValues.year, 1, this._root.utc);\r\n            }\r\n            // Day\r\n            if (parsedIndexes.day > -1) {\r\n                resValues.day = parseInt(matches[parsedIndexes.day]);\r\n            }\r\n            // Year day\r\n            if (parsedIndexes.yearDay > -1) {\r\n                resValues.month = 0;\r\n                resValues.day = parseInt(matches[parsedIndexes.yearDay]);\r\n            }\r\n            // 24 Hour (0-23)\r\n            if (parsedIndexes.hourBase0 > -1) {\r\n                resValues.hour = parseInt(matches[parsedIndexes.hourBase0]);\r\n            }\r\n            // 24 Hour (1-24)\r\n            if (parsedIndexes.hourBase1 > -1) {\r\n                resValues.hour = parseInt(matches[parsedIndexes.hourBase1]) - 1;\r\n            }\r\n            // 12 Hour (0-11)\r\n            if (parsedIndexes.hour12Base0 > -1) {\r\n                let val = parseInt(matches[parsedIndexes.hour12Base0]);\r\n                if (val == 11) {\r\n                    val = 0;\r\n                }\r\n                if ((parsedIndexes.am > -1) && !this.isAm(matches[parsedIndexes.am])) {\r\n                    val += 12;\r\n                }\r\n                resValues.hour = val;\r\n            }\r\n            // 12 Hour (1-12)\r\n            if (parsedIndexes.hour12Base1 > -1) {\r\n                let val = parseInt(matches[parsedIndexes.hour12Base1]);\r\n                if (val == 12) {\r\n                    val = 0;\r\n                }\r\n                if ((parsedIndexes.am > -1) && !this.isAm(matches[parsedIndexes.am])) {\r\n                    val += 12;\r\n                }\r\n                resValues.hour = val;\r\n            }\r\n            // Minute\r\n            if (parsedIndexes.minute > -1) {\r\n                resValues.minute = parseInt(matches[parsedIndexes.minute]);\r\n            }\r\n            // Second\r\n            if (parsedIndexes.second > -1) {\r\n                resValues.second = parseInt(matches[parsedIndexes.second]);\r\n            }\r\n            // Millisecond\r\n            if (parsedIndexes.millisecond > -1) {\r\n                let val = parseInt(matches[parsedIndexes.millisecond]);\r\n                if (parsedIndexes.millisecondDigits == 2) {\r\n                    val *= 10;\r\n                }\r\n                else if (parsedIndexes.millisecondDigits == 1) {\r\n                    val *= 100;\r\n                }\r\n                resValues.millisecond = val;\r\n            }\r\n            // Timestamp\r\n            if (parsedIndexes.timestamp > -1) {\r\n                resValues.timestamp = parseInt(matches[parsedIndexes.timestamp]);\r\n                const ts = new Date(resValues.timestamp);\r\n                resValues.year = ts.getUTCFullYear();\r\n                resValues.month = ts.getUTCMonth();\r\n                resValues.day = ts.getUTCDate();\r\n                resValues.hour = ts.getUTCHours();\r\n                resValues.minute = ts.getUTCMinutes();\r\n                resValues.second = ts.getUTCSeconds();\r\n                resValues.millisecond = ts.getUTCMilliseconds();\r\n            }\r\n            // Adjust time zone\r\n            if (parsedIndexes.zone > -1) {\r\n                resValues.offset = this.resolveTimezoneOffset(new Date(resValues.year, resValues.month, resValues.day), matches[parsedIndexes.zone]);\r\n            }\r\n            // ISO\r\n            if (parsedIndexes.iso > -1) {\r\n                resValues.year = $type.toNumber(matches[parsedIndexes.iso + 0]);\r\n                resValues.month = $type.toNumber(matches[parsedIndexes.iso + 1]) - 1;\r\n                resValues.day = $type.toNumber(matches[parsedIndexes.iso + 2]);\r\n                resValues.hour = $type.toNumber(matches[parsedIndexes.iso + 3]);\r\n                resValues.minute = $type.toNumber(matches[parsedIndexes.iso + 4]);\r\n                resValues.second = $type.toNumber(matches[parsedIndexes.iso + 5]);\r\n                resValues.millisecond = $type.toNumber(matches[parsedIndexes.iso + 6]);\r\n                if (matches[parsedIndexes.iso + 7] == \"Z\" || matches[parsedIndexes.iso + 7] == \"z\") {\r\n                    resValues.utc = true;\r\n                }\r\n                else if (matches[parsedIndexes.iso + 7] != \"\") {\r\n                    resValues.offset = this.resolveTimezoneOffset(new Date(resValues.year, resValues.month, resValues.day), matches[parsedIndexes.iso + 7]);\r\n                }\r\n            }\r\n            // Create Date object\r\n            if (resValues.utc) {\r\n                res = new Date(Date.UTC(resValues.year, resValues.month, resValues.day, resValues.hour, resValues.minute, resValues.second, resValues.millisecond));\r\n            }\r\n            else {\r\n                res = new Date(resValues.year, resValues.month, resValues.day, resValues.hour, resValues.minute + resValues.offset, resValues.second, resValues.millisecond);\r\n            }\r\n        }\r\n        else {\r\n            // Didn't match anything\r\n            // Let's try dropping it into Date constructor and hope for the best\r\n            res = new Date(source);\r\n        }\r\n        return res;\r\n    }\r\n    resolveTimezoneOffset(date, zone) {\r\n        let value = zone.match(/([+\\-]?)([0-9]{2}):?([0-9]{2})/);\r\n        if (value) {\r\n            let match = zone.match(/([+\\-]?)([0-9]{2}):?([0-9]{2})/);\r\n            let dir = match[1];\r\n            let hour = match[2];\r\n            let minute = match[3];\r\n            let offset = parseInt(hour) * 60 + parseInt(minute);\r\n            // Adjust offset\r\n            // Making it negative does not seem to make sense, but it's right\r\n            // because of how JavaScript calculates GMT offsets\r\n            if (dir == \"+\") {\r\n                offset *= -1;\r\n            }\r\n            // Check the difference in offset\r\n            let originalOffset = (date || new Date()).getTimezoneOffset();\r\n            let diff = offset - originalOffset;\r\n            return diff;\r\n        }\r\n        return 0;\r\n    }\r\n    /**\r\n     * Resolves month name (i.e. \"December\") into a month number (11).\r\n     *\r\n     * @param value  Month name\r\n     * @return Month number\r\n     */\r\n    resolveMonth(value) {\r\n        // Let's try English first\r\n        let month = this._months().indexOf(value);\r\n        if (month > -1) {\r\n            return month;\r\n        }\r\n        // Try the translation\r\n        if (!this._root.language.isDefault()) {\r\n            month = this._root.language.translateAll(this._months()).indexOf(value);\r\n            if (month > -1) {\r\n                return month;\r\n            }\r\n        }\r\n        return 0;\r\n    }\r\n    /**\r\n     * Resolves short month name (i.e. \"Dec\") into a month number.\r\n     *\r\n     * @param value  Short month name\r\n     * @return Month number\r\n     */\r\n    resolveShortMonth(value) {\r\n        // Let's try English first\r\n        let month = this._shortMonths().indexOf(value);\r\n        if (month > -1) {\r\n            return month;\r\n        }\r\n        // Maybe long month (workaround for May)\r\n        month = this._months().indexOf(value);\r\n        if (month > -1) {\r\n            return month;\r\n        }\r\n        // Try the translation\r\n        if (this._root.language && !this._root.language.isDefault()) {\r\n            month = this._root.language.translateAll(this._shortMonths()).indexOf(value);\r\n            if (month > -1) {\r\n                return month;\r\n            }\r\n        }\r\n        return 0;\r\n    }\r\n    /**\r\n     * Checks if passed in string represents AM/PM notation in many of its\r\n     * versions.\r\n     *\r\n     * @param value  Source string\r\n     * @return Is it AM/PM?\r\n     */\r\n    isAm(value) {\r\n        let list = this.getStringList([\"AM\", \"A.M.\", \"A\"]);\r\n        return list.indexOf(value.toUpperCase()) > -1;\r\n    }\r\n    /**\r\n     * Translates list of strings.\r\n     *\r\n     * @param list  Source strings\r\n     * @return Translated strings\r\n     */\r\n    getStringList(list) {\r\n        let res = [];\r\n        for (let i = 0; i < list.length; i++) {\r\n            // translate?\r\n            if (this._root.language) {\r\n                res.push($utils.escapeForRgex(this._t(list[i])));\r\n            }\r\n            else {\r\n                res.push($utils.escapeForRgex(list[i]));\r\n            }\r\n        }\r\n        return res;\r\n    }\r\n}\r\n//# sourceMappingURL=DateFormatter.js.map","import { Entity } from \"./Entity\";\r\nimport { TextFormatter } from \"./TextFormatter\";\r\nimport * as $object from \"./Object\";\r\nimport * as $utils from \"./Utils\";\r\nimport * as $type from \"./Type\";\r\n/**\r\n * A class used to format numberic values as time duration.\r\n *\r\n * @see {@link https://www.amcharts.com/docs/v5/concepts/formatters/formatting-durations/} for more info\r\n */\r\nexport class DurationFormatter extends Entity {\r\n    constructor() {\r\n        super(...arguments);\r\n        /**\r\n         * Collection of aliases for units.\r\n         */\r\n        Object.defineProperty(this, \"_unitAliases\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: {\r\n                \"Y\": \"y\",\r\n                \"D\": \"d\",\r\n                \"H\": \"h\",\r\n                \"K\": \"h\",\r\n                \"k\": \"h\",\r\n                \"n\": \"S\"\r\n            }\r\n        });\r\n    }\r\n    _setDefaults() {\r\n        const dmillisecond = \"_duration_millisecond\";\r\n        const dsecond = \"_duration_second\";\r\n        const dminute = \"_duration_minute\";\r\n        const dhour = \"_duration_hour\";\r\n        const dday = \"_duration_day\";\r\n        const dweek = \"_duration_week\";\r\n        const dmonth = \"_duration_month\";\r\n        const dyear = \"_duration_year\";\r\n        const asecond = \"_second\";\r\n        const aminute = \"_minute\";\r\n        const ahour = \"_hour\";\r\n        const aday = \"_day\";\r\n        const aweek = \"_week\";\r\n        const amonth = \"_week\";\r\n        const ayear = \"_year\";\r\n        // Defaults\r\n        this._setDefault(\"negativeBase\", 0);\r\n        this._setDefault(\"baseUnit\", \"second\");\r\n        this._setDefault(\"durationFormats\", {\r\n            \"millisecond\": {\r\n                \"millisecond\": this._t(dmillisecond),\r\n                \"second\": this._t((dmillisecond + asecond)),\r\n                \"minute\": this._t((dmillisecond + aminute)),\r\n                \"hour\": this._t((dmillisecond + ahour)),\r\n                \"day\": this._t((dmillisecond + aday)),\r\n                \"week\": this._t((dmillisecond + aweek)),\r\n                \"month\": this._t((dmillisecond + amonth)),\r\n                \"year\": this._t((dmillisecond + ayear))\r\n            },\r\n            \"second\": {\r\n                \"second\": this._t((dsecond)),\r\n                \"minute\": this._t((dsecond + aminute)),\r\n                \"hour\": this._t((dsecond + ahour)),\r\n                \"day\": this._t((dsecond + aday)),\r\n                \"week\": this._t((dsecond + aweek)),\r\n                \"month\": this._t((dsecond + amonth)),\r\n                \"year\": this._t((dsecond + ayear))\r\n            },\r\n            \"minute\": {\r\n                \"minute\": this._t((dminute)),\r\n                \"hour\": this._t((dminute + ahour)),\r\n                \"day\": this._t((dminute + aday)),\r\n                \"week\": this._t((dminute + aweek)),\r\n                \"month\": this._t((dminute + amonth)),\r\n                \"year\": this._t((dminute + ayear))\r\n            },\r\n            \"hour\": {\r\n                \"hour\": this._t((dhour)),\r\n                \"day\": this._t((dhour + aday)),\r\n                \"week\": this._t((dhour + aweek)),\r\n                \"month\": this._t((dhour + amonth)),\r\n                \"year\": this._t((dhour + ayear))\r\n            },\r\n            \"day\": {\r\n                \"day\": this._t((dday)),\r\n                \"week\": this._t((dday + aweek)),\r\n                \"month\": this._t((dday + amonth)),\r\n                \"year\": this._t((dday + ayear))\r\n            },\r\n            \"week\": {\r\n                \"week\": this._t((dweek)),\r\n                \"month\": this._t((dweek + amonth)),\r\n                \"year\": this._t((dweek + ayear))\r\n            },\r\n            \"month\": {\r\n                \"month\": this._t((dmonth)),\r\n                \"year\": this._t((dmonth + ayear))\r\n            },\r\n            \"year\": {\r\n                \"year\": this._t(dyear)\r\n            }\r\n        });\r\n        super._setDefaults();\r\n    }\r\n    _beforeChanged() {\r\n        super._beforeChanged();\r\n    }\r\n    /**\r\n     * Formats the number as duration.\r\n     *\r\n     * For example `1000` (base unit seconds) would be converted to `16:40` as in\r\n     * 16 minutes and 40 seconds.\r\n     *\r\n     * @param value   Value to format\r\n     * @param format  Format to apply\r\n     * @param base    Override base unit\r\n     * @return Formatted number\r\n     */\r\n    format(value, format, base) {\r\n        // no base unit?\r\n        let baseUnit = base || this.get(\"baseUnit\");\r\n        // no format passed in or empty\r\n        if (typeof format === \"undefined\" || format === \"\") {\r\n            if (this.get(\"durationFormat\") != null) {\r\n                format = this.get(\"durationFormat\");\r\n            }\r\n            else {\r\n                format = this.getFormat($type.toNumber(value), undefined, baseUnit);\r\n            }\r\n        }\r\n        // Clean format\r\n        format = $utils.cleanFormat(format);\r\n        // get format info (it will also deal with parser caching)\r\n        let info = this.parseFormat(format, baseUnit);\r\n        // cast to number just in case\r\n        // TODO: maybe use better casting\r\n        let source = Number(value);\r\n        // format and replace the number\r\n        let details;\r\n        if (source > this.get(\"negativeBase\")) {\r\n            details = info.positive;\r\n        }\r\n        else if (source < this.get(\"negativeBase\")) {\r\n            details = info.negative;\r\n        }\r\n        else {\r\n            details = info.zero;\r\n        }\r\n        // Format\r\n        let formatted = this.applyFormat(source, details);\r\n        // Apply color?\r\n        if (details.color !== \"\") {\r\n            formatted = \"[\" + details.color + \"]\" + formatted + \"[/]\";\r\n        }\r\n        return formatted;\r\n    }\r\n    /**\r\n     * Parses supplied format into structured object which can be used to format\r\n     * the number.\r\n     *\r\n     * @param format  Format string, i.e. \"#,###.00\"\r\n     * @param base    Override base unit\r\n     * @return Parsed information\r\n     */\r\n    parseFormat(format, base) {\r\n        // Check cache\r\n        // TODO\r\n        // let cached = this.getCache(format);\r\n        // if (cached != null) {\r\n        // \treturn cached;\r\n        // }\r\n        // no base unit?\r\n        let baseUnit = base || this.get(\"baseUnit\");\r\n        // Initialize duration parsing info\r\n        let info = {\r\n            \"positive\": {\r\n                \"color\": \"\",\r\n                \"template\": \"\",\r\n                \"parts\": [],\r\n                \"source\": \"\",\r\n                \"baseUnit\": baseUnit,\r\n                \"parsed\": false,\r\n                \"absolute\": false\r\n            },\r\n            \"negative\": {\r\n                \"color\": \"\",\r\n                \"template\": \"\",\r\n                \"parts\": [],\r\n                \"source\": \"\",\r\n                \"baseUnit\": baseUnit,\r\n                \"parsed\": false,\r\n                \"absolute\": false\r\n            },\r\n            \"zero\": {\r\n                \"color\": \"\",\r\n                \"template\": \"\",\r\n                \"parts\": [],\r\n                \"source\": \"\",\r\n                \"baseUnit\": baseUnit,\r\n                \"parsed\": false,\r\n                \"absolute\": false\r\n            }\r\n        };\r\n        // Escape double vertical bars (that mean display one vertical bar)\r\n        format = format.replace(\"||\", $type.PLACEHOLDER2);\r\n        // Split it up and deal with different formats\r\n        let parts = format.split(\"|\");\r\n        info.positive.source = parts[0];\r\n        if (typeof parts[2] === \"undefined\") {\r\n            info.zero = info.positive;\r\n        }\r\n        else {\r\n            info.zero.source = parts[2];\r\n        }\r\n        if (typeof parts[1] === \"undefined\") {\r\n            info.negative = info.positive;\r\n        }\r\n        else {\r\n            info.negative.source = parts[1];\r\n        }\r\n        // Parse each\r\n        $object.each(info, (_part, item) => {\r\n            // Already parsed\r\n            if (item.parsed) {\r\n                return;\r\n            }\r\n            // Check cached\r\n            // TODO\r\n            // if (typeof this.getCache(item.source) !== \"undefined\") {\r\n            // \tinfo[part] = this.getCache(item.source);\r\n            // \treturn;\r\n            // }\r\n            // Begin parsing\r\n            let partFormat = item.source;\r\n            // Check for [] directives\r\n            let dirs = [];\r\n            dirs = item.source.match(/^\\[([^\\]]*)\\]/);\r\n            if (dirs && dirs.length && dirs[0] !== \"\") {\r\n                partFormat = item.source.substr(dirs[0].length);\r\n                item.color = dirs[1];\r\n            }\r\n            // Let TextFormatter split into chunks\r\n            let chunks = TextFormatter.chunk(partFormat, true);\r\n            for (let i = 0; i < chunks.length; i++) {\r\n                let chunk = chunks[i];\r\n                // replace back double vertical bar\r\n                chunk.text = chunk.text.replace($type.PLACEHOLDER2, \"|\");\r\n                if (chunk.type === \"value\") {\r\n                    // Just \"Duration\"?\r\n                    // if (chunk.text.toLowerCase() === \"duration\") {\r\n                    // \tchunk.text = durationFormat;\r\n                    // }\r\n                    // Check for \"a\" (absolute) modifier\r\n                    if (chunk.text.match(/[yYMdDwhHKkmsSn]+a/)) {\r\n                        item.absolute = true;\r\n                        chunk.text = chunk.text.replace(/([yYMdDwhHKkmsSn]+)a/, \"$1\");\r\n                    }\r\n                    // Find all possible parts\r\n                    let matches = chunk.text.match(/y+|Y+|M+|d+|D+|w+|h+|H+|K+|k+|m+|s+|S+|n+/g);\r\n                    if (matches) {\r\n                        // Populate template\r\n                        for (let x = 0; x < matches.length; x++) {\r\n                            // Is it an alias?\r\n                            if (matches[x] == null) {\r\n                                matches[x] = this._unitAliases[matches[x]];\r\n                            }\r\n                            item.parts.push(matches[x]);\r\n                            chunk.text = chunk.text.replace(matches[x], $type.PLACEHOLDER);\r\n                        }\r\n                    }\r\n                }\r\n                // Apply to template\r\n                item.template += chunk.text;\r\n            }\r\n            // Apply style formatting\r\n            //item.template = TextFormatter.format(item.template, this.outputFormat);\r\n            // Save cache\r\n            // TODO\r\n            //this.setCache(item.source, item);\r\n            // Mark this as parsed\r\n            item.parsed = true;\r\n        });\r\n        // Save cache (the whole thing)\r\n        // TODO\r\n        //this.setCache(format, info);\r\n        return info;\r\n    }\r\n    /**\r\n     * Applies parsed format to a numeric value.\r\n     *\r\n     * @param value    Value\r\n     * @param details  Parsed format as returned by {parseFormat}\r\n     * @return Formatted duration\r\n     */\r\n    applyFormat(value, details) {\r\n        // Use absolute values\r\n        let negative = !details.absolute && (value < this.get(\"negativeBase\"));\r\n        value = Math.abs(value);\r\n        // Recalculate to milliseconds\r\n        let tstamp = this.toTimeStamp(value, details.baseUnit);\r\n        // Init return value\r\n        let res = details.template;\r\n        // Iterate through duration parts\r\n        for (let i = 0, len = details.parts.length; i < len; i++) {\r\n            // Gather the part\r\n            let part = details.parts[i];\r\n            let unit = this._toTimeUnit(part.substr(0, 1));\r\n            let digits = part.length;\r\n            // Calculate current unit value\r\n            let ints;\r\n            const unitValue = this._getUnitValue(unit);\r\n            if (i < (len - 1)) {\r\n                ints = Math.floor(tstamp / unitValue);\r\n            }\r\n            else {\r\n                ints = Math.round(tstamp / unitValue);\r\n            }\r\n            res = res.replace($type.PLACEHOLDER, $utils.padString(ints, digits, \"0\"));\r\n            // Reduce timestamp\r\n            tstamp -= ints * unitValue;\r\n        }\r\n        // Reapply negative sign\r\n        if (negative) {\r\n            res = \"-\" + res;\r\n        }\r\n        return res;\r\n    }\r\n    /**\r\n     * Converts numeric value to timestamp in milliseconds.\r\n     *\r\n     * @param value     A source value\r\n     * @param baseUnit  Base unit the source value is in: \"q\", \"s\", \"i\", \"h\", \"d\", \"w\", \"m\", \"y\"\r\n     * @return Value representation as a timestamp in milliseconds\r\n     */\r\n    toTimeStamp(value, baseUnit) {\r\n        return value * this._getUnitValue(baseUnit);\r\n    }\r\n    _toTimeUnit(code) {\r\n        switch (code) {\r\n            case \"S\":\r\n                return \"millisecond\";\r\n            case \"s\":\r\n                return \"second\";\r\n            case \"m\":\r\n                return \"minute\";\r\n            case \"h\":\r\n                return \"hour\";\r\n            case \"d\":\r\n                return \"day\";\r\n            case \"w\":\r\n                return \"week\";\r\n            case \"M\":\r\n                return \"month\";\r\n            case \"y\":\r\n                return \"year\";\r\n        }\r\n        ;\r\n    }\r\n    /**\r\n     * Returns appropriate default format for the value.\r\n     *\r\n     * If `maxValue` is sepcified, it will use that value to determine the time\r\n     * unit for the format.\r\n     *\r\n     * For example if your `baseUnit` is `\"second\"` and you pass in `10`, you\r\n     * will get `\"10\"`.\r\n     *\r\n     * However, you might want it to be formatted in the context of bigger scale,\r\n     * say 10 minutes (600 seconds). If you pass in `600` as `maxValue`, all\r\n     * values, including small ones will use format with minutes, e.g.:\r\n     * `00:10`, `00:50`, `12: 30`, etc.\r\n     *\r\n     * @param value     Value to format\r\n     * @param maxValue  Maximum value to be used to determine format\r\n     * @param baseUnit  Base unit of the value\r\n     * @return Format\r\n     */\r\n    getFormat(value, maxValue, baseUnit) {\r\n        // Is format override set?\r\n        if (this.get(\"durationFormat\") != null) {\r\n            return this.get(\"durationFormat\");\r\n        }\r\n        // Get base unit\r\n        if (!baseUnit) {\r\n            baseUnit = this.get(\"baseUnit\");\r\n        }\r\n        if (maxValue != null && value != maxValue) {\r\n            value = Math.abs(value);\r\n            maxValue = Math.abs(maxValue);\r\n            let maxUnit = this.getValueUnit(Math.max(value, maxValue), baseUnit);\r\n            return this.get(\"durationFormats\")[baseUnit][maxUnit];\r\n        }\r\n        else {\r\n            let unit = this.getValueUnit(value, baseUnit);\r\n            return this.get(\"durationFormats\")[baseUnit][unit];\r\n        }\r\n    }\r\n    /**\r\n     * Returns value's closest denominator time unit, e.g 100 seconds is\r\n     * `\"minute\"`, while 59 seconds would still be `second`.\r\n     *\r\n     * @param value     Source duration value\r\n     * @param baseUnit  Base unit\r\n     * @return Denominator\r\n     */\r\n    getValueUnit(value, baseUnit) {\r\n        // Get base unit\r\n        if (!baseUnit) {\r\n            baseUnit = this.get(\"baseUnit\");\r\n        }\r\n        // Convert to milliseconds\r\n        let currentUnit;\r\n        let ms = this.getMilliseconds(value, baseUnit);\r\n        $object.eachContinue(this._getUnitValues(), (key, val) => {\r\n            if (key == baseUnit || currentUnit) {\r\n                let num = ms / val;\r\n                if (num <= 1) {\r\n                    if (!currentUnit) {\r\n                        currentUnit = key;\r\n                    }\r\n                    return false;\r\n                }\r\n                currentUnit = key;\r\n            }\r\n            return true;\r\n        });\r\n        return currentUnit;\r\n    }\r\n    /**\r\n     * Converts value to milliseconds according to `baseUnit`.\r\n     *\r\n     * @param value     Source duration value\r\n     * @param baseUnit  Base unit\r\n     * @return Value in milliseconds\r\n     */\r\n    getMilliseconds(value, baseUnit) {\r\n        // Get base unit\r\n        if (!baseUnit) {\r\n            baseUnit = this.get(\"baseUnit\");\r\n        }\r\n        return value * this._getUnitValue(baseUnit);\r\n    }\r\n    _getUnitValue(timeUnit) {\r\n        return this._getUnitValues()[timeUnit];\r\n    }\r\n    _getUnitValues() {\r\n        return {\r\n            \"millisecond\": 1,\r\n            \"second\": 1000,\r\n            \"minute\": 60000,\r\n            \"hour\": 3600000,\r\n            \"day\": 86400000,\r\n            \"week\": 604800000,\r\n            \"month\": 2592000000,\r\n            \"year\": 31536000000,\r\n        };\r\n    }\r\n}\r\n//# sourceMappingURL=DurationFormatter.js.map","/**\r\n * amCharts 5 locale\r\n *\r\n * Locale: en\r\n * Language: International English\r\n * Author: Martynas Majeris\r\n *\r\n * Follow instructions in [on this page](https://www.amcharts.com/docs/v5/tutorials/creating-translations/) to make corrections or add new translations.\r\n *\r\n * ---\r\n * Edit but leave the header section above this line. You can remove any\r\n * subsequent comment sections.\r\n * ---\r\n *\r\n * Use this file as a template to create translations. Leave the key part in\r\n * English intact. Fill the value with a translation.\r\n *\r\n * Empty string means no translation, so default \"International English\"\r\n * will be used.\r\n *\r\n * If you need the translation to literally be an empty string, use `null`\r\n * instead.\r\n *\r\n * IMPORTANT:\r\n * When translating make good effort to keep the translation length\r\n * at least the same chartcount as the English, especially for short prompts.\r\n *\r\n * Having significantly longer prompts may distort the actual charts.\r\n *\r\n * NOTE:\r\n * Some prompts - like months or weekdays - come in two versions: full and\r\n * shortened.\r\n *\r\n * If there's no official shortened version of these in your language, and it\r\n * would not be possible to invent such short versions that don't seem weird\r\n * to native speakers of that language, fill those with the same as full\r\n * version.\r\n *\r\n * PLACEHOLDERS:\r\n * Some prompts have placeholders like \"%1\". Those will be replaced by actual\r\n * values during translation and should be retained in the translated prompts.\r\n *\r\n * Placeholder positions may be changed to better suit structure of the\r\n * sentence.\r\n *\r\n * For example \"From %1 to %2\", when actually used will replace \"%1\" with an\r\n * actual value representing range start, and \"%2\" will be replaced by end\r\n * value.\r\n *\r\n * E.g. in a Scrollbar for Value axis \"From %1 to %2\" will become\r\n * \"From 100 to 200\". You may translate \"From\" and \"to\", as well as re-arrange\r\n * the order of the prompt itself, but make sure the \"%1\" and \"%2\" remain, in\r\n * places where they will make sense.\r\n *\r\n * Save the file as language_LOCALE, i.e. `en_GB.ts`, `fr_FR.ts`, etc.\r\n */\r\nexport default {\r\n    \"firstDayOfWeek\": 1,\r\n    // Number formatting options.\r\n    // \r\n    // Please check with the local standards which separator is accepted to be\r\n    // used for separating decimals, and which for thousands.\r\n    \"_decimalSeparator\": \".\",\r\n    \"_thousandSeparator\": \",\",\r\n    // Position of the percent sign in numbers\r\n    \"_percentPrefix\": null,\r\n    \"_percentSuffix\": \"%\",\r\n    // Suffixes for numbers\r\n    // When formatting numbers, big or small numers might be reformatted to\r\n    // shorter version, by applying a suffix.\r\n    // \r\n    // For example, 1000000 might become \"1m\".\r\n    // Or 1024 might become \"1KB\" if we're formatting byte numbers.\r\n    // \r\n    // This section defines such suffixes for all such cases.\r\n    \"_big_number_suffix_3\": \"k\",\r\n    \"_big_number_suffix_6\": \"M\",\r\n    \"_big_number_suffix_9\": \"G\",\r\n    \"_big_number_suffix_12\": \"T\",\r\n    \"_big_number_suffix_15\": \"P\",\r\n    \"_big_number_suffix_18\": \"E\",\r\n    \"_big_number_suffix_21\": \"Z\",\r\n    \"_big_number_suffix_24\": \"Y\",\r\n    \"_small_number_suffix_3\": \"m\",\r\n    \"_small_number_suffix_6\": \"\",\r\n    \"_small_number_suffix_9\": \"n\",\r\n    \"_small_number_suffix_12\": \"p\",\r\n    \"_small_number_suffix_15\": \"f\",\r\n    \"_small_number_suffix_18\": \"a\",\r\n    \"_small_number_suffix_21\": \"z\",\r\n    \"_small_number_suffix_24\": \"y\",\r\n    \"_byte_suffix_B\": \"B\",\r\n    \"_byte_suffix_KB\": \"KB\",\r\n    \"_byte_suffix_MB\": \"MB\",\r\n    \"_byte_suffix_GB\": \"GB\",\r\n    \"_byte_suffix_TB\": \"TB\",\r\n    \"_byte_suffix_PB\": \"PB\",\r\n    // Default date formats for various periods.\r\n    // \r\n    // This should reflect official or de facto formatting universally accepted\r\n    // in the country translation is being made for\r\n    // Available format codes here:\r\n    // https://www.amcharts.com/docs/v5/concepts/formatters/formatting-dates/#Format_codes\r\n    // \r\n    // This will be used when formatting date/time for particular granularity,\r\n    // e.g. \"_date_hour\" will be shown whenever we need to show time as hours.\r\n    // \r\n    // \"date\" is used as in default date format when showing standalone dates.\r\n    \"_date\": \"yyyy-MM-dd\",\r\n    \"_date_millisecond\": \"mm:ss SSS\",\r\n    \"_date_millisecond_full\": \"HH:mm:ss SSS\",\r\n    \"_date_second\": \"HH:mm:ss\",\r\n    \"_date_second_full\": \"HH:mm:ss\",\r\n    \"_date_minute\": \"HH:mm\",\r\n    \"_date_minute_full\": \"HH:mm - MMM dd, yyyy\",\r\n    \"_date_hour\": \"HH:mm\",\r\n    \"_date_hour_full\": \"HH:mm - MMM dd, yyyy\",\r\n    \"_date_day\": \"MMM dd\",\r\n    \"_date_day_full\": \"MMM dd, yyyy\",\r\n    \"_date_week\": \"ww\",\r\n    \"_date_week_full\": \"MMM dd, yyyy\",\r\n    \"_date_month\": \"MMM\",\r\n    \"_date_month_full\": \"MMM, yyyy\",\r\n    \"_date_year\": \"yyyy\",\r\n    // Default duration formats for various base units.\r\n    // \r\n    // This will be used by DurationFormatter to format numeric values into\r\n    // duration.\r\n    // \r\n    // Notice how each duration unit comes in several versions. This is to ensure\r\n    // that each base unit is shown correctly.\r\n    // \r\n    // For example, if we have baseUnit set to \"second\", meaning our duration is\r\n    // in seconds.\r\n    // \r\n    // If we pass in `50` to formatter, it will know that we have just 50 seconds\r\n    // (less than a minute) so it will use format in `\"_duration_second\"` (\"ss\"),\r\n    // and the formatted result will be in like `\"50\"`.\r\n    // \r\n    // If we pass in `70`, which is more than a minute, the formatter will switch\r\n    // to `\"_duration_second_minute\"` (\"mm:ss\"), resulting in \"01:10\" formatted\r\n    // text.\r\n    // \r\n    // Available codes here:\r\n    // https://www.amcharts.com/docs/v4/concepts/formatters/formatting-duration/#Available_Codes\r\n    \"_duration_millisecond\": \"SSS\",\r\n    \"_duration_millisecond_second\": \"ss.SSS\",\r\n    \"_duration_millisecond_minute\": \"mm:ss SSS\",\r\n    \"_duration_millisecond_hour\": \"hh:mm:ss SSS\",\r\n    \"_duration_millisecond_day\": \"d'd' mm:ss SSS\",\r\n    \"_duration_millisecond_week\": \"d'd' mm:ss SSS\",\r\n    \"_duration_millisecond_month\": \"M'm' dd'd' mm:ss SSS\",\r\n    \"_duration_millisecond_year\": \"y'y' MM'm' dd'd' mm:ss SSS\",\r\n    \"_duration_second\": \"ss\",\r\n    \"_duration_second_minute\": \"mm:ss\",\r\n    \"_duration_second_hour\": \"hh:mm:ss\",\r\n    \"_duration_second_day\": \"d'd' hh:mm:ss\",\r\n    \"_duration_second_week\": \"d'd' hh:mm:ss\",\r\n    \"_duration_second_month\": \"M'm' dd'd' hh:mm:ss\",\r\n    \"_duration_second_year\": \"y'y' MM'm' dd'd' hh:mm:ss\",\r\n    \"_duration_minute\": \"mm\",\r\n    \"_duration_minute_hour\": \"hh:mm\",\r\n    \"_duration_minute_day\": \"d'd' hh:mm\",\r\n    \"_duration_minute_week\": \"d'd' hh:mm\",\r\n    \"_duration_minute_month\": \"M'm' dd'd' hh:mm\",\r\n    \"_duration_minute_year\": \"y'y' MM'm' dd'd' hh:mm\",\r\n    \"_duration_hour\": \"hh'h'\",\r\n    \"_duration_hour_day\": \"d'd' hh'h'\",\r\n    \"_duration_hour_week\": \"d'd' hh'h'\",\r\n    \"_duration_hour_month\": \"M'm' dd'd' hh'h'\",\r\n    \"_duration_hour_year\": \"y'y' MM'm' dd'd' hh'h'\",\r\n    \"_duration_day\": \"d'd'\",\r\n    \"_duration_day_week\": \"d'd'\",\r\n    \"_duration_day_month\": \"M'm' dd'd'\",\r\n    \"_duration_day_year\": \"y'y' MM'm' dd'd'\",\r\n    \"_duration_week\": \"w'w'\",\r\n    \"_duration_week_month\": \"w'w'\",\r\n    \"_duration_week_year\": \"w'w'\",\r\n    \"_duration_month\": \"M'm'\",\r\n    \"_duration_month_year\": \"y'y' MM'm'\",\r\n    \"_duration_year\": \"y'y'\",\r\n    // Era translations\r\n    \"_era_ad\": \"AD\",\r\n    \"_era_bc\": \"BC\",\r\n    // Day part, used in 12-hour formats, e.g. 5 P.M.\r\n    // Please note that these come in 3 variants:\r\n    // * one letter (e.g. \"A\")\r\n    // * two letters (e.g. \"AM\")\r\n    // * two letters with dots (e.g. \"A.M.\")\r\n    // \r\n    // All three need to to be translated even if they are all the same. Some\r\n    // users might use one, some the other.\r\n    \"A\": \"\",\r\n    \"P\": \"\",\r\n    \"AM\": \"\",\r\n    \"PM\": \"\",\r\n    \"A.M.\": \"\",\r\n    \"P.M.\": \"\",\r\n    // Date-related stuff.\r\n    // \r\n    // When translating months, if there's a difference, use the form which is\r\n    // best for a full date, e.g. as you would use it in \"2018 January 1\".\r\n    // \r\n    // Note that May is listed twice. This is because in English May is the same\r\n    // in both long and short forms, while in other languages it may not be the\r\n    // case. Translate \"May\" to full word, while \"May(short)\" to shortened\r\n    // version.\r\n    // \r\n    // Should month names and weekdays be capitalized or not?\r\n    // \r\n    // Rule of thumb is this: if the names should always be capitalized,\r\n    // regardless of name position within date (\"January\", \"21st January 2018\",\r\n    // etc.) use capitalized names. Otherwise enter all lowercase.\r\n    // \r\n    // The date formatter will automatically capitalize names if they are the\r\n    // first (or only) word in resulting date.\r\n    \"January\": \"\",\r\n    \"February\": \"\",\r\n    \"March\": \"\",\r\n    \"April\": \"\",\r\n    \"May\": \"\",\r\n    \"June\": \"\",\r\n    \"July\": \"\",\r\n    \"August\": \"\",\r\n    \"September\": \"\",\r\n    \"October\": \"\",\r\n    \"November\": \"\",\r\n    \"December\": \"\",\r\n    \"Jan\": \"\",\r\n    \"Feb\": \"\",\r\n    \"Mar\": \"\",\r\n    \"Apr\": \"\",\r\n    \"May(short)\": \"May\",\r\n    \"Jun\": \"\",\r\n    \"Jul\": \"\",\r\n    \"Aug\": \"\",\r\n    \"Sep\": \"\",\r\n    \"Oct\": \"\",\r\n    \"Nov\": \"\",\r\n    \"Dec\": \"\",\r\n    // Weekdays.\r\n    \"Sunday\": \"\",\r\n    \"Monday\": \"\",\r\n    \"Tuesday\": \"\",\r\n    \"Wednesday\": \"\",\r\n    \"Thursday\": \"\",\r\n    \"Friday\": \"\",\r\n    \"Saturday\": \"\",\r\n    \"Sun\": \"\",\r\n    \"Mon\": \"\",\r\n    \"Tue\": \"\",\r\n    \"Wed\": \"\",\r\n    \"Thu\": \"\",\r\n    \"Fri\": \"\",\r\n    \"Sat\": \"\",\r\n    // Date ordinal function.\r\n    // \r\n    // This is used when adding number ordinal when formatting days in dates.\r\n    // \r\n    // E.g. \"January 1st\", \"February 2nd\".\r\n    // \r\n    // The function accepts day number, and returns a string to be added to the\r\n    // day, like in default English translation, if we pass in 2, we will receive\r\n    // \"nd\" back.\r\n    \"_dateOrd\": function (day) {\r\n        let res = \"th\";\r\n        if ((day < 11) || (day > 13)) {\r\n            switch (day % 10) {\r\n                case 1:\r\n                    res = \"st\";\r\n                    break;\r\n                case 2:\r\n                    res = \"nd\";\r\n                    break;\r\n                case 3:\r\n                    res = \"rd\";\r\n                    break;\r\n            }\r\n        }\r\n        return res;\r\n    },\r\n    // Various chart controls.\r\n    // Shown as a tooltip on zoom out button.\r\n    \"Zoom Out\": \"\",\r\n    // Timeline buttons\r\n    \"Play\": \"\",\r\n    \"Stop\": \"\",\r\n    // Chart's Legend screen reader title.\r\n    \"Legend\": \"\",\r\n    // Legend's item screen reader indicator.\r\n    \"Press ENTER to toggle\": \"\",\r\n    // Shown when the chart is busy loading something.\r\n    \"Loading\": \"\",\r\n    // Shown as the first button in the breadcrumb navigation, e.g.:\r\n    // Home > First level > ...\r\n    \"Home\": \"\",\r\n    // Chart types.\r\n    // Those are used as default screen reader titles for the main chart element\r\n    // unless developer has set some more descriptive title.\r\n    \"Chart\": \"\",\r\n    \"Serial chart\": \"\",\r\n    \"X/Y chart\": \"\",\r\n    \"Pie chart\": \"\",\r\n    \"Gauge chart\": \"\",\r\n    \"Radar chart\": \"\",\r\n    \"Sankey diagram\": \"\",\r\n    \"Flow diagram\": \"\",\r\n    \"Chord diagram\": \"\",\r\n    \"TreeMap chart\": \"\",\r\n    \"Force directed tree\": \"\",\r\n    \"Sliced chart\": \"\",\r\n    // Series types.\r\n    // Used to name series by type for screen readers if they do not have their\r\n    // name set.\r\n    \"Series\": \"\",\r\n    \"Candlestick Series\": \"\",\r\n    \"OHLC Series\": \"\",\r\n    \"Column Series\": \"\",\r\n    \"Line Series\": \"\",\r\n    \"Pie Slice Series\": \"\",\r\n    \"Funnel Series\": \"\",\r\n    \"Pyramid Series\": \"\",\r\n    \"X/Y Series\": \"\",\r\n    // Map-related stuff.\r\n    \"Map\": \"\",\r\n    \"Press ENTER to zoom in\": \"\",\r\n    \"Press ENTER to zoom out\": \"\",\r\n    \"Use arrow keys to zoom in and out\": \"\",\r\n    \"Use plus and minus keys on your keyboard to zoom in and out\": \"\",\r\n    // Export-related stuff.\r\n    // These prompts are used in Export menu labels.\r\n    // \r\n    // \"Export\" is the top-level menu item.\r\n    // \r\n    // \"Image\", \"Data\", \"Print\" as second-level indicating type of export\r\n    // operation.\r\n    // \r\n    // Leave actual format untranslated, unless you absolutely know that they\r\n    // would convey more meaning in some other way.\r\n    \"Export\": \"\",\r\n    \"Image\": \"\",\r\n    \"Data\": \"\",\r\n    \"Print\": \"\",\r\n    \"Press ENTER or use arrow keys to navigate\": \"\",\r\n    \"Press ENTER to open\": \"\",\r\n    \"Press ENTER to print.\": \"\",\r\n    \"Press ENTER to export as %1.\": \"\",\r\n    \"(Press ESC to close this message)\": \"\",\r\n    \"Image Export Complete\": \"\",\r\n    \"Export operation took longer than expected. Something might have gone wrong.\": \"\",\r\n    \"Saved from\": \"\",\r\n    \"PNG\": \"\",\r\n    \"JPG\": \"\",\r\n    \"GIF\": \"\",\r\n    \"SVG\": \"\",\r\n    \"PDF\": \"\",\r\n    \"JSON\": \"\",\r\n    \"CSV\": \"\",\r\n    \"XLSX\": \"\",\r\n    \"HTML\": \"\",\r\n    // Scrollbar-related stuff.\r\n    // \r\n    // Scrollbar is a control which can zoom and pan the axes on the chart.\r\n    // \r\n    // Each scrollbar has two grips: left or right (for horizontal scrollbar) or\r\n    // upper and lower (for vertical one).\r\n    // \r\n    // Prompts change in relation to whether Scrollbar is vertical or horizontal.\r\n    // \r\n    // The final section is used to indicate the current range of selection.\r\n    \"Use TAB to select grip buttons or left and right arrows to change selection\": \"\",\r\n    \"Use left and right arrows to move selection\": \"\",\r\n    \"Use left and right arrows to move left selection\": \"\",\r\n    \"Use left and right arrows to move right selection\": \"\",\r\n    \"Use TAB select grip buttons or up and down arrows to change selection\": \"\",\r\n    \"Use up and down arrows to move selection\": \"\",\r\n    \"Use up and down arrows to move lower selection\": \"\",\r\n    \"Use up and down arrows to move upper selection\": \"\",\r\n    \"From %1 to %2\": \"\",\r\n    \"From %1\": \"\",\r\n    \"To %1\": \"\",\r\n    // Data loader-related.\r\n    \"No parser available for file: %1\": \"\",\r\n    \"Error parsing file: %1\": \"\",\r\n    \"Unable to load file: %1\": \"\",\r\n    \"Invalid date\": \"\",\r\n    // Common actions\r\n    \"Close\": \"\",\r\n    \"Minimize\": \"\"\r\n};\r\n//# sourceMappingURL=en.js.map","import { Entity } from \"./Entity\";\r\nimport * as $array from \"./Array\";\r\nimport * as $object from \"./Object\";\r\nimport en from \"../../../locales/en\";\r\n;\r\n/**\r\n * Add localization functionality.\r\n */\r\nexport class Language extends Entity {\r\n    _setDefaults() {\r\n        this.setPrivate(\"defaultLocale\", en);\r\n        super._setDefaults();\r\n    }\r\n    /**\r\n     * Returns a prompt translation.\r\n     *\r\n     * @param   prompt   Prompt to translate\r\n     * @param   locale   Target locale\r\n     * @param   ...rest  Parameters\r\n     * @return           Translation\r\n     */\r\n    translate(prompt, locale, ...rest) {\r\n        // Get langauge\r\n        if (!locale) {\r\n            locale = this._root.locale || this.getPrivate(\"defaultLocale\");\r\n        }\r\n        // Init translation\r\n        let translation = prompt;\r\n        let value = locale[prompt];\r\n        // Try to look for the translation\r\n        if (value === null) {\r\n            translation = \"\";\r\n        }\r\n        else if (value != null) {\r\n            // It might be an empty string\r\n            if (value) {\r\n                translation = value;\r\n            }\r\n        }\r\n        else if (locale !== this.getPrivate(\"defaultLocale\")) {\r\n            // Try to look in default language\r\n            return this.translate(prompt, this.getPrivate(\"defaultLocale\"), ...rest);\r\n        }\r\n        // Replace %1, %2, etc params\r\n        if (rest.length) {\r\n            for (let len = rest.length, i = 0; i < len; ++i) {\r\n                translation = translation.split(\"%\" + (i + 1)).join(rest[i]);\r\n            }\r\n        }\r\n        // Return the translation\r\n        return translation;\r\n    }\r\n    /**\r\n     * Returns a prompt translation, including custom prompts.\r\n     *\r\n     * @param   prompt   Prompt to translate\r\n     * @param   locale   Target locale\r\n     * @param   ...rest  Parameters\r\n     * @return           Translation\r\n     */\r\n    translateAny(prompt, locale, ...rest) {\r\n        return this.translate(prompt, locale, ...rest);\r\n    }\r\n    /**\r\n     * Add a custom prompt to locale.\r\n     *\r\n     * @see {@link https://www.amcharts.com/docs/v5/concepts/locales/creating-translations/#Extending_locale_with_custom_prompts}\r\n     * @param  prompt       Source prompt\r\n     * @param  translation  Tanslation\r\n     * @param  locale       Target locale\r\n     */\r\n    setTranslationAny(prompt, translation, locale) {\r\n        const localeTarget = locale || this._root.locale;\r\n        localeTarget[prompt] = translation;\r\n    }\r\n    /**\r\n     * Add a batch of custom prompts.\r\n     *\r\n     * @since 5.3.3\r\n     * @see {@link https://www.amcharts.com/docs/v5/concepts/locales/creating-translations/#Extending_locale_with_custom_prompts}\r\n     * @param  translations  Translations\r\n     * @param  locale        Target locale\r\n     */\r\n    setTranslationsAny(translations, locale) {\r\n        $object.each(translations, (key, val) => {\r\n            this.setTranslationAny(key, val, locale);\r\n        });\r\n    }\r\n    translateEmpty(prompt, locale, ...rest) {\r\n        let translation = this.translate(prompt, locale, ...rest);\r\n        return translation == prompt ? \"\" : translation;\r\n    }\r\n    translateFunc(prompt, locale) {\r\n        if (this._root.locale[prompt]) {\r\n            return this._root.locale[prompt];\r\n        }\r\n        // Try to look in default language\r\n        if (locale !== this.getPrivate(\"defaultLocale\")) {\r\n            return this.translateFunc(prompt, this.getPrivate(\"defaultLocale\"));\r\n        }\r\n        // Fail - return empty function\r\n        return () => {\r\n            return \"\";\r\n        };\r\n    }\r\n    /**\r\n     * Translates a btach of prompts.\r\n     *\r\n     * @param  list    Array of prompts to translate\r\n     * @param  locale  Target locale\r\n     * @return         Array of translations\r\n     */\r\n    translateAll(list, locale) {\r\n        // Translate all items in the list\r\n        if (!this.isDefault()) {\r\n            return $array.map(list, (x) => this.translate(x, locale));\r\n        }\r\n        else {\r\n            return list;\r\n        }\r\n    }\r\n    /**\r\n     * Returns `true` if the currently selected locale is a default locale.\r\n     *\r\n     * @return `true` if locale is default; `false` if it is not.\r\n     */\r\n    isDefault() {\r\n        return this.getPrivate(\"defaultLocale\") === this._root.locale;\r\n    }\r\n}\r\n//# sourceMappingURL=Language.js.map","import { Template } from \"./util/Template\";\r\nimport * as $order from \"./util/Order\";\r\nimport * as $array from \"./util/Array\";\r\n/**\r\n * A base class for an amCharts theme.\r\n *\r\n * @see {@link https://www.amcharts.com/docs/v5/concepts/themes/} for more info\r\n * @important\r\n */\r\nexport class Theme {\r\n    constructor(root, isReal) {\r\n        Object.defineProperty(this, \"_root\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"_rules\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: {}\r\n        });\r\n        this._root = root;\r\n        if (!isReal) {\r\n            throw new Error(\"You cannot use `new Class()`, instead use `Class.new()`\");\r\n        }\r\n    }\r\n    /**\r\n     * Use this method to create an instance of this class.\r\n     *\r\n     * @see {@link https://www.amcharts.com/docs/v5/getting-started/#New_element_syntax} for more info\r\n     * @param   root      Root element\r\n     * @param   settings  Settings\r\n     * @param   template  Template\r\n     * @return            Instantiated object\r\n     */\r\n    static new(root) {\r\n        const x = (new this(root, true));\r\n        x.setupDefaultRules();\r\n        return x;\r\n    }\r\n    setupDefaultRules() { }\r\n    /**\r\n     * Looks up the rules for a specific theme class.\r\n     *\r\n     * @see {@link https://www.amcharts.com/docs/v5/themes/} for more info\r\n     * @param   themeClass Theme class\r\n     * @return             Array<IRule<A>>\r\n     */\r\n    _lookupRules(themeClass) {\r\n        return this._rules[themeClass];\r\n    }\r\n    /**\r\n     * Creates a [[Template]] for specific theme class and tags.\r\n     *\r\n     * NOTE: the difference from `rule()` is that `ruleRaw()` does not do any\r\n     * type checks.\r\n     *\r\n     * @see {@link https://www.amcharts.com/docs/v5/themes/} for more info\r\n     * @param   themeClass Theme class\r\n     * @param   themeTags  Theme tags\r\n     * @return             Template\r\n     */\r\n    ruleRaw(themeClass, themeTags = []) {\r\n        let rules = this._rules[themeClass];\r\n        if (!rules) {\r\n            rules = this._rules[themeClass] = [];\r\n        }\r\n        themeTags.sort($order.compare);\r\n        const { index, found } = $array.getSortedIndex(rules, (x) => {\r\n            const order = $order.compare(x.tags.length, themeTags.length);\r\n            if (order === 0) {\r\n                return $order.compareArray(x.tags, themeTags, $order.compare);\r\n            }\r\n            else {\r\n                return order;\r\n            }\r\n        });\r\n        if (found) {\r\n            return rules[index].template;\r\n        }\r\n        else {\r\n            const template = Template.new({});\r\n            rules.splice(index, 0, {\r\n                tags: themeTags,\r\n                template,\r\n            });\r\n            return template;\r\n        }\r\n    }\r\n    /**\r\n     * Creates a [[Template]] for specific theme class and tags.\r\n     *\r\n     * @see {@link https://www.amcharts.com/docs/v5/themes/} for more info\r\n     * @param   themeClass Theme class\r\n     * @param   themeTags  Theme tags\r\n     * @return             Template\r\n     */\r\n    rule(themeClass, themeTags = []) {\r\n        return this.ruleRaw(themeClass, themeTags);\r\n    }\r\n}\r\n//# sourceMappingURL=Theme.js.map","import { Theme } from \"../core/Theme\";\r\nimport { p100, p50 } from \"../core/util/Percent\";\r\nimport { Color } from \"../core/util/Color\";\r\nimport { GridLayout } from \"../core/render/GridLayout\";\r\nimport * as $ease from \"../core/util/Ease\";\r\n/**\r\n * @ignore\r\n */\r\nexport function setColor(rule, key, ic, name) {\r\n    // TODO this shouldn't use get, figure out a better way\r\n    rule.set(key, ic.get(name));\r\n    ic.on(name, (value) => {\r\n        rule.set(key, value);\r\n    });\r\n}\r\n/**\r\n * @ignore\r\n */\r\nexport class DefaultTheme extends Theme {\r\n    setupDefaultRules() {\r\n        super.setupDefaultRules();\r\n        const language = this._root.language;\r\n        const ic = this._root.interfaceColors;\r\n        const horizontalLayout = this._root.horizontalLayout;\r\n        const verticalLayout = this._root.verticalLayout;\r\n        const r = this.rule.bind(this);\r\n        /**\r\n         * ========================================================================\r\n         * core\r\n         * ========================================================================\r\n         */\r\n        r(\"InterfaceColors\").setAll({\r\n            stroke: Color.fromHex(0xe5e5e5),\r\n            fill: Color.fromHex(0xf3f3f3),\r\n            primaryButton: Color.fromHex(0x6794dc),\r\n            primaryButtonHover: Color.fromHex(0x6771dc),\r\n            primaryButtonDown: Color.fromHex(0x68dc76),\r\n            primaryButtonActive: Color.fromHex(0x68dc76),\r\n            primaryButtonDisabled: Color.fromHex(0xdadada),\r\n            primaryButtonTextDisabled: Color.fromHex(0xffffff),\r\n            primaryButtonText: Color.fromHex(0xffffff),\r\n            primaryButtonStroke: Color.fromHex(0xffffff),\r\n            secondaryButton: Color.fromHex(0xd9d9d9),\r\n            secondaryButtonHover: Color.fromHex(0xa3a3a3),\r\n            secondaryButtonDown: Color.fromHex(0x8d8d8d),\r\n            secondaryButtonActive: Color.fromHex(0xe6e6e6),\r\n            secondaryButtonText: Color.fromHex(0x000000),\r\n            secondaryButtonStroke: Color.fromHex(0xffffff),\r\n            grid: Color.fromHex(0x000000),\r\n            background: Color.fromHex(0xffffff),\r\n            alternativeBackground: Color.fromHex(0x000000),\r\n            text: Color.fromHex(0x000000),\r\n            alternativeText: Color.fromHex(0xffffff),\r\n            disabled: Color.fromHex(0xadadad),\r\n            positive: Color.fromHex(0x50b300),\r\n            negative: Color.fromHex(0xb30000)\r\n        });\r\n        {\r\n            const rule = r(\"ColorSet\");\r\n            rule.setAll({\r\n                passOptions: {\r\n                    hue: 0.05,\r\n                    saturation: 0,\r\n                    lightness: 0\r\n                },\r\n                colors: [\r\n                    Color.fromHex(0x67b7dc)\r\n                ],\r\n                step: 1,\r\n                //baseColor: Color.fromRGB(103, 183, 220),\r\n                //count: 20,\r\n                reuse: false,\r\n                startIndex: 0\r\n            });\r\n            rule.setPrivate(\"currentStep\", 0);\r\n            rule.setPrivate(\"currentPass\", 0);\r\n        }\r\n        r(\"Entity\").setAll({\r\n            stateAnimationDuration: 0,\r\n            stateAnimationEasing: $ease.out($ease.cubic)\r\n        });\r\n        r(\"Component\").setAll({\r\n            interpolationDuration: 0,\r\n            interpolationEasing: $ease.out($ease.cubic)\r\n        });\r\n        r(\"Sprite\").setAll({\r\n            visible: true,\r\n            scale: 1,\r\n            opacity: 1,\r\n            rotation: 0,\r\n            position: \"relative\",\r\n            tooltipX: p50,\r\n            tooltipY: p50,\r\n            tooltipPosition: \"fixed\",\r\n            isMeasured: true\r\n        });\r\n        r(\"Sprite\").states.create(\"default\", { \"visible\": true, opacity: 1 });\r\n        r(\"Container\").setAll({\r\n            interactiveChildren: true,\r\n            setStateOnChildren: false\r\n        });\r\n        r(\"Graphics\").setAll({\r\n            strokeWidth: 1\r\n        });\r\n        r(\"Chart\").setAll({\r\n            width: p100,\r\n            height: p100,\r\n            interactiveChildren: false\r\n        });\r\n        r(\"ZoomableContainer\").setAll({\r\n            width: p100,\r\n            height: p100,\r\n            wheelable: true,\r\n            pinchZoom: true,\r\n            maxZoomLevel: 32,\r\n            minZoomLevel: 1,\r\n            zoomStep: 2,\r\n            animationEasing: $ease.out($ease.cubic),\r\n            animationDuration: 600\r\n        });\r\n        /**\r\n         * ------------------------------------------------------------------------\r\n         * core: alignment\r\n         * ------------------------------------------------------------------------\r\n         */\r\n        r(\"Sprite\", [\"horizontal\", \"center\"]).setAll({\r\n            centerX: p50,\r\n            x: p50\r\n        });\r\n        r(\"Sprite\", [\"vertical\", \"center\"]).setAll({\r\n            centerY: p50,\r\n            y: p50\r\n        });\r\n        r(\"Container\", [\"horizontal\", \"layout\"]).setAll({\r\n            layout: horizontalLayout\r\n        });\r\n        r(\"Container\", [\"vertical\", \"layout\"]).setAll({\r\n            layout: verticalLayout\r\n        });\r\n        /**\r\n         * ------------------------------------------------------------------------\r\n         * core: patterns\r\n         * ------------------------------------------------------------------------\r\n         */\r\n        r(\"Pattern\").setAll({\r\n            repetition: \"repeat\",\r\n            width: 50,\r\n            height: 50,\r\n            rotation: 0,\r\n            fillOpacity: 1\r\n        });\r\n        r(\"LinePattern\").setAll({\r\n            gap: 6,\r\n            colorOpacity: 1,\r\n            width: 49,\r\n            height: 49\r\n        });\r\n        r(\"RectanglePattern\").setAll({\r\n            gap: 6,\r\n            checkered: false,\r\n            centered: true,\r\n            maxWidth: 5,\r\n            maxHeight: 5,\r\n            width: 48,\r\n            height: 48,\r\n            strokeWidth: 0\r\n        });\r\n        r(\"CirclePattern\").setAll({\r\n            gap: 5,\r\n            checkered: false,\r\n            centered: false,\r\n            radius: 3,\r\n            strokeWidth: 0,\r\n            width: 45,\r\n            height: 45\r\n        });\r\n        r(\"GrainPattern\").setAll({\r\n            width: 200,\r\n            height: 200,\r\n            colors: [Color.fromHex(0x000000)],\r\n            size: 1,\r\n            horizontalGap: 0,\r\n            verticalGap: 0,\r\n            density: 1,\r\n            minOpacity: 0,\r\n            maxOpacity: 0.2\r\n        });\r\n        {\r\n            const rule = r(\"PatternSet\");\r\n            rule.setAll({\r\n                step: 1\r\n            });\r\n            setColor(rule, \"color\", ic, \"stroke\");\r\n        }\r\n        /**\r\n         * ------------------------------------------------------------------------\r\n         * core: gradients\r\n         * ------------------------------------------------------------------------\r\n         */\r\n        r(\"LinearGradient\").setAll({\r\n            rotation: 90\r\n        });\r\n        /**\r\n         * ------------------------------------------------------------------------\r\n         * core: Legend\r\n         * ------------------------------------------------------------------------\r\n         */\r\n        r(\"Legend\").setAll({\r\n            fillField: \"fill\",\r\n            strokeField: \"stroke\",\r\n            nameField: \"name\",\r\n            layout: GridLayout.new(this._root, {}),\r\n            layer: 30,\r\n            clickTarget: \"itemContainer\"\r\n        });\r\n        // Class: Container\r\n        r(\"Container\", [\"legend\", \"item\", \"itemcontainer\"]).setAll({\r\n            paddingLeft: 5,\r\n            paddingRight: 5,\r\n            paddingBottom: 5,\r\n            paddingTop: 5,\r\n            layout: horizontalLayout,\r\n            setStateOnChildren: true,\r\n            interactiveChildren: false,\r\n            ariaChecked: true,\r\n            focusable: true,\r\n            ariaLabel: language.translate(\"Press ENTER to toggle\"),\r\n            role: \"checkbox\"\r\n        });\r\n        {\r\n            const rule = r(\"Rectangle\", [\"legend\", \"item\", \"background\"]);\r\n            rule.setAll({\r\n                fillOpacity: 0,\r\n            });\r\n            setColor(rule, \"fill\", ic, \"background\");\r\n        }\r\n        r(\"Container\", [\"legend\", \"marker\"]).setAll({\r\n            setStateOnChildren: true,\r\n            centerY: p50,\r\n            paddingLeft: 0,\r\n            paddingRight: 0,\r\n            paddingBottom: 0,\r\n            paddingTop: 0,\r\n            width: 18,\r\n            height: 18\r\n        });\r\n        r(\"RoundedRectangle\", [\"legend\", \"marker\", \"rectangle\"]).setAll({\r\n            width: p100,\r\n            height: p100,\r\n            cornerRadiusBL: 3,\r\n            cornerRadiusTL: 3,\r\n            cornerRadiusBR: 3,\r\n            cornerRadiusTR: 3\r\n        });\r\n        {\r\n            const rule = r(\"RoundedRectangle\", [\"legend\", \"marker\", \"rectangle\"]).states.create(\"disabled\", {});\r\n            setColor(rule, \"fill\", ic, \"disabled\");\r\n            setColor(rule, \"stroke\", ic, \"disabled\");\r\n        }\r\n        r(\"Label\", [\"legend\", \"label\"]).setAll({\r\n            centerY: p50,\r\n            marginLeft: 5,\r\n            paddingRight: 0,\r\n            paddingLeft: 0,\r\n            paddingTop: 0,\r\n            paddingBottom: 0,\r\n            populateText: true\r\n        });\r\n        {\r\n            const rule = r(\"Label\", [\"legend\", \"label\"]).states.create(\"disabled\", {});\r\n            setColor(rule, \"fill\", ic, \"disabled\");\r\n        }\r\n        r(\"Label\", [\"legend\", \"value\", \"label\"]).setAll({\r\n            centerY: p50,\r\n            marginLeft: 5,\r\n            paddingRight: 0,\r\n            paddingLeft: 0,\r\n            paddingTop: 0,\r\n            paddingBottom: 0,\r\n            width: 50,\r\n            centerX: p100,\r\n            populateText: true\r\n        });\r\n        {\r\n            const rule = r(\"Label\", [\"legend\", \"value\", \"label\"]).states.create(\"disabled\", {});\r\n            setColor(rule, \"fill\", ic, \"disabled\");\r\n        }\r\n        /**\r\n         * ------------------------------------------------------------------------\r\n         * core: HeatLegend\r\n         * ------------------------------------------------------------------------\r\n         */\r\n        r(\"HeatLegend\").setAll({\r\n            stepCount: 1\r\n        });\r\n        r(\"RoundedRectangle\", [\"heatlegend\", \"marker\"]).setAll({\r\n            cornerRadiusTR: 0,\r\n            cornerRadiusBR: 0,\r\n            cornerRadiusTL: 0,\r\n            cornerRadiusBL: 0\r\n        });\r\n        r(\"RoundedRectangle\", [\"vertical\", \"heatlegend\", \"marker\"]).setAll({\r\n            height: p100,\r\n            width: 15\r\n        });\r\n        r(\"RoundedRectangle\", [\"horizontal\", \"heatlegend\", \"marker\"]).setAll({\r\n            width: p100,\r\n            height: 15\r\n        });\r\n        r(\"HeatLegend\", [\"vertical\"]).setAll({\r\n            height: p100\r\n        });\r\n        r(\"HeatLegend\", [\"horizontal\"]).setAll({\r\n            width: p100\r\n        });\r\n        r(\"Label\", [\"heatlegend\", \"start\"]).setAll({\r\n            paddingLeft: 5,\r\n            paddingRight: 5,\r\n            paddingTop: 5,\r\n            paddingBottom: 5\r\n        });\r\n        r(\"Label\", [\"heatlegend\", \"end\"]).setAll({\r\n            paddingLeft: 5,\r\n            paddingRight: 5,\r\n            paddingTop: 5,\r\n            paddingBottom: 5\r\n        });\r\n        /**\r\n         * ------------------------------------------------------------------------\r\n         * core: Labels\r\n         * ------------------------------------------------------------------------\r\n         */\r\n        {\r\n            const rule = r(\"Label\");\r\n            rule.setAll({\r\n                paddingTop: 8,\r\n                paddingBottom: 8,\r\n                paddingLeft: 10,\r\n                paddingRight: 10,\r\n                fontFamily: \"-apple-system, BlinkMacSystemFont, \\\"Segoe UI\\\", Roboto, Helvetica, Arial, sans-serif, \\\"Apple Color Emoji\\\", \\\"Segoe UI Emoji\\\", \\\"Segoe UI Symbol\\\"\",\r\n                fontSize: \"1em\",\r\n                populateText: false\r\n            });\r\n            setColor(rule, \"fill\", ic, \"text\");\r\n        }\r\n        r(\"RadialLabel\").setAll({\r\n            textType: \"regular\",\r\n            centerY: p50,\r\n            centerX: p50,\r\n            inside: false,\r\n            radius: 0,\r\n            baseRadius: p100,\r\n            orientation: \"auto\",\r\n            textAlign: \"center\"\r\n        });\r\n        r(\"EditableLabel\").setAll({\r\n            editOn: \"click\",\r\n            //setStateOnChildren: true,\r\n            themeTags: [\"editablelabel\"],\r\n            multiLine: true\r\n        });\r\n        r(\"RoundedRectangle\", [\"editablelabel\", \"background\"]).setAll({\r\n            fillOpacity: 0,\r\n            fill: Color.fromHex(0x000000),\r\n            cornerRadiusBL: 3,\r\n            cornerRadiusBR: 3,\r\n            cornerRadiusTL: 3,\r\n            cornerRadiusTR: 3,\r\n            strokeOpacity: 0,\r\n            stroke: Color.fromHex(0x000000)\r\n        });\r\n        {\r\n            r(\"RoundedRectangle\", [\"editablelabel\", \"background\"]).states.create(\"active\", {\r\n                strokeOpacity: 0.2,\r\n            });\r\n        }\r\n        /**\r\n         * ------------------------------------------------------------------------\r\n         * core: Elements and shapes\r\n         * ------------------------------------------------------------------------\r\n         */\r\n        r(\"RoundedRectangle\").setAll({\r\n            cornerRadiusTL: 8,\r\n            cornerRadiusBL: 8,\r\n            cornerRadiusTR: 8,\r\n            cornerRadiusBR: 8\r\n        });\r\n        r(\"PointedRectangle\").setAll({\r\n            pointerBaseWidth: 15,\r\n            pointerLength: 10,\r\n            cornerRadius: 8\r\n        });\r\n        r(\"Slice\").setAll({\r\n            shiftRadius: 0,\r\n            dRadius: 0,\r\n            dInnerRadius: 0\r\n        });\r\n        {\r\n            const rule = r(\"Tick\");\r\n            rule.setAll({\r\n                strokeOpacity: .15,\r\n                isMeasured: false,\r\n                length: 4.5,\r\n                position: \"absolute\",\r\n                crisp: true\r\n            });\r\n            setColor(rule, \"stroke\", ic, \"grid\");\r\n        }\r\n        r(\"Bullet\").setAll({\r\n            locationX: 0.5,\r\n            locationY: 0.5\r\n        });\r\n        /**\r\n         * ------------------------------------------------------------------------\r\n         * core: Tooltip\r\n         * ------------------------------------------------------------------------\r\n         */\r\n        r(\"Tooltip\").setAll({\r\n            position: \"absolute\",\r\n            getFillFromSprite: true,\r\n            getStrokeFromSprite: false,\r\n            autoTextColor: true,\r\n            paddingTop: 9,\r\n            paddingBottom: 8,\r\n            paddingLeft: 10,\r\n            paddingRight: 10,\r\n            marginBottom: 5,\r\n            pointerOrientation: \"vertical\",\r\n            centerX: p50,\r\n            centerY: p50,\r\n            animationEasing: $ease.out($ease.cubic),\r\n            exportable: false\r\n            //layer: 100\r\n        });\r\n        r(\"Polygon\").setAll({\r\n            animationEasing: $ease.out($ease.cubic),\r\n        });\r\n        {\r\n            const rule = r(\"PointedRectangle\", [\"tooltip\", \"background\"]);\r\n            rule.setAll({\r\n                strokeOpacity: 0.9,\r\n                cornerRadius: 4,\r\n                pointerLength: 4,\r\n                pointerBaseWidth: 8,\r\n                fillOpacity: 0.9,\r\n                stroke: Color.fromHex(0xffffff)\r\n            });\r\n        }\r\n        {\r\n            const rule = r(\"Label\", [\"tooltip\"]);\r\n            rule.setAll({\r\n                role: \"tooltip\",\r\n                populateText: true,\r\n                paddingRight: 0,\r\n                paddingTop: 0,\r\n                paddingLeft: 0,\r\n                paddingBottom: 0\r\n            });\r\n            setColor(rule, \"fill\", ic, \"alternativeText\");\r\n        }\r\n        /**\r\n         * ------------------------------------------------------------------------\r\n         * core: Button\r\n         * ------------------------------------------------------------------------\r\n         */\r\n        r(\"Button\").setAll({\r\n            paddingTop: 8,\r\n            paddingBottom: 8,\r\n            paddingLeft: 10,\r\n            paddingRight: 10,\r\n            interactive: true,\r\n            layout: horizontalLayout,\r\n            interactiveChildren: false,\r\n            setStateOnChildren: true,\r\n            focusable: true\r\n        });\r\n        r(\"Button\").states.create(\"hover\", {});\r\n        r(\"Button\").states.create(\"down\", { stateAnimationDuration: 0 });\r\n        r(\"Button\").states.create(\"active\", {});\r\n        r(\"Button\").states.create(\"disabled\", {\r\n            forceInactive: true\r\n        });\r\n        {\r\n            const rule = r(\"RoundedRectangle\", [\"button\", \"background\"]);\r\n            setColor(rule, \"fill\", ic, \"primaryButton\");\r\n            setColor(rule, \"stroke\", ic, \"primaryButtonStroke\");\r\n        }\r\n        {\r\n            const rule = r(\"RoundedRectangle\", [\"button\", \"background\"]).states.create(\"hover\", {});\r\n            setColor(rule, \"fill\", ic, \"primaryButtonHover\");\r\n        }\r\n        {\r\n            const rule = r(\"RoundedRectangle\", [\"button\", \"background\"]).states.create(\"down\", { stateAnimationDuration: 0 });\r\n            setColor(rule, \"fill\", ic, \"primaryButtonDown\");\r\n        }\r\n        {\r\n            const rule = r(\"RoundedRectangle\", [\"button\", \"background\"]).states.create(\"active\", {});\r\n            setColor(rule, \"fill\", ic, \"primaryButtonActive\");\r\n        }\r\n        {\r\n            const rule = r(\"RoundedRectangle\", [\"button\", \"background\"]).states.create(\"disabled\", {});\r\n            setColor(rule, \"fill\", ic, \"primaryButtonDisabled\");\r\n        }\r\n        {\r\n            const rule = r(\"Graphics\", [\"button\", \"icon\"]).states.create(\"disabled\", {});\r\n            setColor(rule, \"fill\", ic, \"primaryButtonTextDisabled\");\r\n        }\r\n        {\r\n            const rule = r(\"Label\", [\"button\"]).states.create(\"disabled\", {});\r\n            setColor(rule, \"fill\", ic, \"primaryButtonTextDisabled\");\r\n        }\r\n        {\r\n            const rule = r(\"Graphics\", [\"button\", \"icon\"]);\r\n            rule.setAll({\r\n                forceInactive: true\r\n            });\r\n            setColor(rule, \"stroke\", ic, \"primaryButtonText\");\r\n        }\r\n        {\r\n            const rule = r(\"Label\", [\"button\"]);\r\n            setColor(rule, \"fill\", ic, \"primaryButtonText\");\r\n        }\r\n        /**\r\n         * ------------------------------------------------------------------------\r\n         * charts/xy: ZoomOutButton\r\n         * ------------------------------------------------------------------------\r\n         */\r\n        r(\"Button\", [\"zoom\"]).setAll({\r\n            paddingTop: 18,\r\n            paddingBottom: 18,\r\n            paddingLeft: 12,\r\n            paddingRight: 12,\r\n            centerX: 46,\r\n            centerY: -10,\r\n            y: 0,\r\n            x: p100,\r\n            role: \"button\",\r\n            ariaLabel: language.translate(\"Zoom Out\"),\r\n            layer: 30\r\n        });\r\n        {\r\n            const rule = r(\"RoundedRectangle\", [\"background\", \"button\", \"zoom\"]);\r\n            rule.setAll({\r\n                cornerRadiusBL: 40,\r\n                cornerRadiusBR: 40,\r\n                cornerRadiusTL: 40,\r\n                cornerRadiusTR: 40\r\n            });\r\n            setColor(rule, \"fill\", ic, \"primaryButton\");\r\n        }\r\n        {\r\n            const rule = r(\"RoundedRectangle\", [\"background\", \"button\", \"zoom\"]).states.create(\"hover\", {});\r\n            setColor(rule, \"fill\", ic, \"primaryButtonHover\");\r\n        }\r\n        {\r\n            const rule = r(\"RoundedRectangle\", [\"background\", \"button\", \"zoom\"]).states.create(\"down\", { stateAnimationDuration: 0 });\r\n            setColor(rule, \"fill\", ic, \"primaryButtonDown\");\r\n        }\r\n        {\r\n            const rule = r(\"Graphics\", [\"icon\", \"button\", \"zoom\"]);\r\n            rule.setAll({\r\n                crisp: true,\r\n                strokeOpacity: 0.7,\r\n                draw: (display) => {\r\n                    display.moveTo(0, 0);\r\n                    display.lineTo(12, 0);\r\n                }\r\n            });\r\n            setColor(rule, \"stroke\", ic, \"primaryButtonText\");\r\n        }\r\n        /**\r\n         * ------------------------------------------------------------------------\r\n         * core: ResizeButton\r\n         * ------------------------------------------------------------------------\r\n         */\r\n        r(\"Button\", [\"resize\"]).setAll({\r\n            paddingTop: 9,\r\n            paddingBottom: 9,\r\n            paddingLeft: 13,\r\n            paddingRight: 13,\r\n            draggable: true,\r\n            centerX: p50,\r\n            centerY: p50,\r\n            position: \"absolute\",\r\n            role: \"slider\",\r\n            ariaValueMin: \"0\",\r\n            ariaValueMax: \"100\",\r\n            ariaLabel: language.translate(\"Use up and down arrows to move selection\")\r\n        });\r\n        {\r\n            const rule = r(\"RoundedRectangle\", [\"background\", \"resize\", \"button\"]);\r\n            rule.setAll({\r\n                cornerRadiusBL: 40,\r\n                cornerRadiusBR: 40,\r\n                cornerRadiusTL: 40,\r\n                cornerRadiusTR: 40\r\n            });\r\n            setColor(rule, \"fill\", ic, \"secondaryButton\");\r\n            setColor(rule, \"stroke\", ic, \"secondaryButtonStroke\");\r\n        }\r\n        {\r\n            const rule = r(\"RoundedRectangle\", [\"background\", \"resize\", \"button\"]).states.create(\"hover\", {});\r\n            setColor(rule, \"fill\", ic, \"secondaryButtonHover\");\r\n        }\r\n        {\r\n            const rule = r(\"RoundedRectangle\", [\"background\", \"resize\", \"button\"]).states.create(\"down\", { stateAnimationDuration: 0 });\r\n            setColor(rule, \"fill\", ic, \"secondaryButtonDown\");\r\n        }\r\n        {\r\n            const rule = r(\"Graphics\", [\"resize\", \"button\", \"icon\"]);\r\n            rule.setAll({\r\n                interactive: false,\r\n                crisp: true,\r\n                strokeOpacity: 0.5,\r\n                draw: (display) => {\r\n                    display.moveTo(0, 0.5);\r\n                    display.lineTo(0, 12.5);\r\n                    display.moveTo(4, 0.5);\r\n                    display.lineTo(4, 12.5);\r\n                }\r\n            });\r\n            setColor(rule, \"stroke\", ic, \"secondaryButtonText\");\r\n        }\r\n        r(\"Button\", [\"resize\", \"vertical\"]).setAll({\r\n            rotation: 90,\r\n            cursorOverStyle: \"ns-resize\"\r\n        });\r\n        r(\"Button\", [\"resize\", \"horizontal\"]).setAll({\r\n            cursorOverStyle: \"ew-resize\"\r\n        });\r\n        /**\r\n         * ------------------------------------------------------------------------\r\n         * core: PlayButton\r\n         * ------------------------------------------------------------------------\r\n         */\r\n        r(\"Button\", [\"play\"]).setAll({\r\n            paddingTop: 13,\r\n            paddingBottom: 13,\r\n            paddingLeft: 14,\r\n            paddingRight: 14,\r\n            ariaLabel: language.translate(\"Play\"),\r\n            toggleKey: \"active\"\r\n        });\r\n        {\r\n            const rule = r(\"RoundedRectangle\", [\"play\", \"background\"]);\r\n            rule.setAll({\r\n                strokeOpacity: 0.5,\r\n                cornerRadiusBL: 100,\r\n                cornerRadiusBR: 100,\r\n                cornerRadiusTL: 100,\r\n                cornerRadiusTR: 100\r\n            });\r\n            setColor(rule, \"fill\", ic, \"primaryButton\");\r\n        }\r\n        {\r\n            const rule = r(\"Graphics\", [\"play\", \"icon\"]);\r\n            rule.setAll({\r\n                stateAnimationDuration: 0,\r\n                dx: 1,\r\n                draw: (display) => {\r\n                    display.moveTo(0, -5);\r\n                    display.lineTo(8, 0);\r\n                    display.lineTo(0, 5);\r\n                    display.lineTo(0, -5);\r\n                }\r\n            });\r\n            setColor(rule, \"fill\", ic, \"primaryButtonText\");\r\n        }\r\n        r(\"Graphics\", [\"play\", \"icon\"]).states.create(\"default\", {\r\n            stateAnimationDuration: 0\r\n        });\r\n        r(\"Graphics\", [\"play\", \"icon\"]).states.create(\"active\", {\r\n            stateAnimationDuration: 0,\r\n            draw: (display) => {\r\n                display.moveTo(-4, -5);\r\n                display.lineTo(-1, -5);\r\n                display.lineTo(-1, 5);\r\n                display.lineTo(-4, 5);\r\n                display.lineTo(-4, -5);\r\n                display.moveTo(4, -5);\r\n                display.lineTo(1, -5);\r\n                display.lineTo(1, 5);\r\n                display.lineTo(4, 5);\r\n                display.lineTo(4, -5);\r\n            }\r\n        });\r\n        /**\r\n         * ------------------------------------------------------------------------\r\n         * core: SwitchButton\r\n         * ------------------------------------------------------------------------\r\n         */\r\n        r(\"Button\", [\"switch\"]).setAll({\r\n            paddingTop: 4,\r\n            paddingBottom: 4,\r\n            paddingLeft: 4,\r\n            paddingRight: 4,\r\n            ariaLabel: language.translate(\"Press ENTER to toggle\"),\r\n            toggleKey: \"active\",\r\n            width: 40,\r\n            height: 24,\r\n            layout: null\r\n        });\r\n        {\r\n            const rule = r(\"RoundedRectangle\", [\"switch\", \"background\"]);\r\n            rule.setAll({\r\n                strokeOpacity: 0.5,\r\n                cornerRadiusBL: 100,\r\n                cornerRadiusBR: 100,\r\n                cornerRadiusTL: 100,\r\n                cornerRadiusTR: 100\r\n            });\r\n            setColor(rule, \"fill\", ic, \"primaryButton\");\r\n        }\r\n        {\r\n            const rule = r(\"Circle\", [\"switch\", \"icon\"]);\r\n            rule.setAll({\r\n                radius: 8,\r\n                centerY: 0,\r\n                centerX: 0,\r\n                dx: 0\r\n            });\r\n            setColor(rule, \"fill\", ic, \"primaryButtonText\");\r\n        }\r\n        r(\"Graphics\", [\"switch\", \"icon\"]).states.create(\"active\", {\r\n            dx: 16\r\n        });\r\n        /**\r\n         * ------------------------------------------------------------------------\r\n         * core: Scrollbar\r\n         * ------------------------------------------------------------------------\r\n         */\r\n        r(\"Scrollbar\").setAll({\r\n            start: 0,\r\n            end: 1,\r\n            layer: 30,\r\n            animationEasing: $ease.out($ease.cubic)\r\n        });\r\n        r(\"Scrollbar\", [\"vertical\"]).setAll({\r\n            marginRight: 13,\r\n            marginLeft: 13,\r\n            minWidth: 12,\r\n            height: p100\r\n        });\r\n        r(\"Scrollbar\", [\"horizontal\"]).setAll({\r\n            marginTop: 13,\r\n            marginBottom: 13,\r\n            minHeight: 12,\r\n            width: p100\r\n        });\r\n        this.rule(\"Button\", [\"scrollbar\"]).setAll({\r\n            exportable: false\r\n        });\r\n        {\r\n            const rule = r(\"RoundedRectangle\", [\"scrollbar\", \"main\", \"background\"]);\r\n            rule.setAll({\r\n                cornerRadiusTL: 8,\r\n                cornerRadiusBL: 8,\r\n                cornerRadiusTR: 8,\r\n                cornerRadiusBR: 8,\r\n                fillOpacity: 0.8,\r\n            });\r\n            setColor(rule, \"fill\", ic, \"fill\");\r\n        }\r\n        {\r\n            const rule = r(\"RoundedRectangle\", [\"scrollbar\", \"thumb\"]);\r\n            rule.setAll({\r\n                role: \"slider\",\r\n                ariaLive: \"polite\",\r\n                position: \"absolute\",\r\n                draggable: true\r\n            });\r\n            setColor(rule, \"fill\", ic, \"secondaryButton\");\r\n        }\r\n        {\r\n            const rule = r(\"RoundedRectangle\", [\"scrollbar\", \"thumb\"]).states.create(\"hover\", {});\r\n            setColor(rule, \"fill\", ic, \"secondaryButtonHover\");\r\n        }\r\n        {\r\n            const rule = r(\"RoundedRectangle\", [\"scrollbar\", \"thumb\"]).states.create(\"down\", { stateAnimationDuration: 0 });\r\n            setColor(rule, \"fill\", ic, \"secondaryButtonDown\");\r\n        }\r\n        r(\"RoundedRectangle\", [\"scrollbar\", \"thumb\", \"vertical\"]).setAll({\r\n            x: p50,\r\n            width: p100,\r\n            centerX: p50,\r\n            ariaLabel: language.translate(\"Use up and down arrows to move selection\")\r\n        });\r\n        r(\"RoundedRectangle\", [\"scrollbar\", \"thumb\", \"horizontal\"]).setAll({\r\n            y: p50,\r\n            centerY: p50,\r\n            height: p100,\r\n            ariaLabel: language.translate(\"Use left and right arrows to move selection\")\r\n        });\r\n        // @todo: is this needed? used to be \"ContentScrollbar\"\r\n        // r(\"Scrollbar\", [\"content?\"]).setAll({\r\n        // \tmarginRight: 0,\r\n        // \tmarginLeft: 5,\r\n        // \tlayer: 5\r\n        // });\r\n        /**\r\n         * ========================================================================\r\n         * charts/xy\r\n         * ========================================================================\r\n         *\r\n         * This needs to be in DefaultTheme because it's the only theme that is\r\n         * automatically applied to Root, and tooltips different ancestors\r\n         * than actual charts using them.\r\n         */\r\n        {\r\n            const rule = r(\"PointedRectangle\", [\"axis\", \"tooltip\", \"background\"]);\r\n            rule.setAll({\r\n                cornerRadius: 0\r\n            });\r\n            setColor(rule, \"fill\", ic, \"alternativeBackground\");\r\n        }\r\n        r(\"Label\", [\"axis\", \"tooltip\"]).setAll({\r\n            role: undefined\r\n        });\r\n        r(\"Label\", [\"axis\", \"tooltip\", \"y\"]).setAll({\r\n            textAlign: \"right\"\r\n        });\r\n        r(\"Label\", [\"axis\", \"tooltip\", \"y\", \"opposite\"]).setAll({\r\n            textAlign: \"left\"\r\n        });\r\n        r(\"Label\", [\"axis\", \"tooltip\", \"x\"]).setAll({\r\n            textAlign: \"center\"\r\n        });\r\n        r(\"Tooltip\", [\"categoryaxis\"]).setAll({\r\n            labelText: \"{category}\"\r\n        });\r\n        /**\r\n         * ------------------------------------------------------------------------\r\n         * Shapes\r\n         * ------------------------------------------------------------------------\r\n         */\r\n        // Class: Graphics\r\n        r(\"Star\").setAll({\r\n            spikes: 5,\r\n            innerRadius: 5,\r\n            radius: 10\r\n        });\r\n        // STOCK\r\n        r(\"Tooltip\", [\"stock\"]).setAll({\r\n            paddingTop: 6,\r\n            paddingBottom: 5,\r\n            paddingLeft: 7,\r\n            paddingRight: 7\r\n        });\r\n        r(\"PointedRectangle\", [\"tooltip\", \"stock\", \"axis\"]).setAll({\r\n            pointerLength: 0,\r\n            pointerBaseWidth: 0,\r\n            cornerRadius: 3\r\n        });\r\n        r(\"Label\", [\"tooltip\", \"stock\"]).setAll({\r\n            fontSize: \"0.8em\"\r\n        });\r\n        // resizer\r\n        r(\"SpriteResizer\").setAll({\r\n            rotationStep: 10,\r\n            isMeasured: false\r\n        });\r\n        {\r\n            const rule = r(\"Container\", [\"resizer\", \"grip\"]);\r\n            rule.states.create(\"hover\", {});\r\n        }\r\n        {\r\n            const rule = r(\"RoundedRectangle\", [\"resizer\", \"grip\"]);\r\n            rule.setAll({\r\n                strokeOpacity: 0.7,\r\n                strokeWidth: 1,\r\n                fillOpacity: 1,\r\n                width: 12,\r\n                height: 12\r\n            });\r\n            setColor(rule, \"fill\", ic, \"background\");\r\n            setColor(rule, \"stroke\", ic, \"alternativeBackground\");\r\n        }\r\n        {\r\n            const rule = r(\"RoundedRectangle\", [\"resizer\", \"grip\", \"outline\"]);\r\n            rule.setAll({\r\n                strokeOpacity: 0,\r\n                fillOpacity: 0,\r\n                width: 20,\r\n                height: 20\r\n            });\r\n            rule.states.create(\"hover\", {\r\n                fillOpacity: 0.3\r\n            });\r\n            setColor(rule, \"fill\", ic, \"alternativeBackground\");\r\n        }\r\n        r(\"RoundedRectangle\", [\"resizer\", \"grip\", \"left\"]).setAll({\r\n            cornerRadiusBL: 0,\r\n            cornerRadiusBR: 0,\r\n            cornerRadiusTL: 0,\r\n            cornerRadiusTR: 0\r\n        });\r\n        r(\"RoundedRectangle\", [\"resizer\", \"grip\", \"right\"]).setAll({\r\n            cornerRadiusBL: 0,\r\n            cornerRadiusBR: 0,\r\n            cornerRadiusTL: 0,\r\n            cornerRadiusTR: 0\r\n        });\r\n        {\r\n            const rule = r(\"Rectangle\", [\"resizer\", \"rectangle\"]);\r\n            rule.setAll({\r\n                strokeDasharray: [2, 2],\r\n                strokeOpacity: 0.5,\r\n                strokeWidth: 1\r\n            });\r\n            setColor(rule, \"stroke\", ic, \"alternativeBackground\");\r\n        }\r\n        r(\"Graphics\", [\"button\", \"plus\", \"icon\"]).setAll({\r\n            x: p50,\r\n            y: p50,\r\n            draw: (display) => {\r\n                display.moveTo(-4, 0);\r\n                display.lineTo(4, 0);\r\n                display.moveTo(0, -4);\r\n                display.lineTo(0, 4);\r\n            }\r\n        });\r\n        r(\"Graphics\", [\"button\", \"minus\", \"icon\"]).setAll({\r\n            x: p50,\r\n            y: p50,\r\n            draw: (display) => {\r\n                display.moveTo(-4, 0);\r\n                display.lineTo(4, 0);\r\n            }\r\n        });\r\n        r(\"Graphics\", [\"button\", \"home\", \"icon\"]).setAll({\r\n            x: p50,\r\n            y: p50,\r\n            svgPath: \"M 8 -1 L 6 -1 L 6 7 L 2 7 L 2 1 L -2 1 L -2 7 L -6 7 L -6 -1 L -8 -1 L 0 -9 L 8 -1 Z M 8 -1\"\r\n        });\r\n        r(\"Button\", [\"zoomtools\"]).setAll({\r\n            marginTop: 1,\r\n            marginBottom: 2\r\n        });\r\n        r(\"ZoomTools\").setAll({\r\n            x: p100,\r\n            centerX: p100,\r\n            y: p100,\r\n            centerY: p100,\r\n            paddingRight: 10,\r\n            paddingBottom: 10\r\n        });\r\n    }\r\n}\r\n//# sourceMappingURL=DefaultTheme.js.map","/**\r\n * Modified from Pixi:\r\n *\r\n * The MIT License\r\n *\r\n * Copyright (c) 2013-2017 Mathew Groves, Chad Engler\r\n *\r\n * Permission is hereby granted, free of charge, to any person obtaining a copy\r\n * of this software and associated documentation files (the \"Software\"), to deal\r\n * in the Software without restriction, including without limitation the rights\r\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\r\n * copies of the Software, and to permit persons to whom the Software is\r\n * furnished to do so, subject to the following conditions:\r\n *\r\n * The above copyright notice and this permission notice shall be included in\r\n * all copies or substantial portions of the Software.\r\n *\r\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\r\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\r\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\r\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\r\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\r\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\r\n * THE SOFTWARE.\r\n */\r\n/**\r\n * @ignore\r\n */\r\nexport class Matrix {\r\n    constructor(a = 1, b = 0, c = 0, d = 1, tx = 0, ty = 0) {\r\n        Object.defineProperty(this, \"a\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"b\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"c\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"d\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"tx\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"ty\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        this.a = a;\r\n        this.b = b;\r\n        this.c = c;\r\n        this.d = d;\r\n        this.tx = tx;\r\n        this.ty = ty;\r\n    }\r\n    /**\r\n     * Sets the matrix based on all the available properties\r\n     */\r\n    setTransform(x, y, pivotX, pivotY, rotation, scale = 1) {\r\n        this.a = Math.cos(rotation) * scale;\r\n        this.b = Math.sin(rotation) * scale;\r\n        this.c = -Math.sin(rotation) * scale;\r\n        this.d = Math.cos(rotation) * scale;\r\n        this.tx = x - ((pivotX * this.a) + (pivotY * this.c));\r\n        this.ty = y - ((pivotX * this.b) + (pivotY * this.d));\r\n    }\r\n    /**\r\n     * Get a new position with the current transformation applied.\r\n     * Can be used to go from a child's coordinate space to the world coordinate space. (e.g. rendering)\r\n     */\r\n    apply(origin) {\r\n        return {\r\n            x: (this.a * origin.x) + (this.c * origin.y) + this.tx,\r\n            y: (this.b * origin.x) + (this.d * origin.y) + this.ty\r\n        };\r\n    }\r\n    /**\r\n     * Get a new position with the inverse of the current transformation applied.\r\n     * Can be used to go from the world coordinate space to a child's coordinate space. (e.g. input)\r\n     */\r\n    applyInverse(origin) {\r\n        const id = 1 / ((this.a * this.d) + (this.c * -this.b));\r\n        return {\r\n            x: (this.d * id * origin.x) + (-this.c * id * origin.y) + (((this.ty * this.c) - (this.tx * this.d)) * id),\r\n            y: (this.a * id * origin.y) + (-this.b * id * origin.x) + (((-this.ty * this.a) + (this.tx * this.b)) * id)\r\n        };\r\n    }\r\n    /**\r\n     * Appends the given Matrix to this Matrix.\r\n     */\r\n    append(matrix) {\r\n        const a1 = this.a;\r\n        const b1 = this.b;\r\n        const c1 = this.c;\r\n        const d1 = this.d;\r\n        this.a = (matrix.a * a1) + (matrix.b * c1);\r\n        this.b = (matrix.a * b1) + (matrix.b * d1);\r\n        this.c = (matrix.c * a1) + (matrix.d * c1);\r\n        this.d = (matrix.c * b1) + (matrix.d * d1);\r\n        this.tx = (matrix.tx * a1) + (matrix.ty * c1) + this.tx;\r\n        this.ty = (matrix.tx * b1) + (matrix.ty * d1) + this.ty;\r\n    }\r\n    /**\r\n     * Prepends the given Matrix to this Matrix.\r\n     */\r\n    prepend(matrix) {\r\n        const tx1 = this.tx;\r\n        if (matrix.a !== 1 || matrix.b !== 0 || matrix.c !== 0 || matrix.d !== 1) {\r\n            const a1 = this.a;\r\n            const c1 = this.c;\r\n            this.a = (a1 * matrix.a) + (this.b * matrix.c);\r\n            this.b = (a1 * matrix.b) + (this.b * matrix.d);\r\n            this.c = (c1 * matrix.a) + (this.d * matrix.c);\r\n            this.d = (c1 * matrix.b) + (this.d * matrix.d);\r\n        }\r\n        this.tx = (tx1 * matrix.a) + (this.ty * matrix.c) + matrix.tx;\r\n        this.ty = (tx1 * matrix.b) + (this.ty * matrix.d) + matrix.ty;\r\n    }\r\n    /**\r\n     * Copies the other matrix's properties into this matrix\r\n     */\r\n    copyFrom(matrix) {\r\n        this.a = matrix.a;\r\n        this.b = matrix.b;\r\n        this.c = matrix.c;\r\n        this.d = matrix.d;\r\n        this.tx = matrix.tx;\r\n        this.ty = matrix.ty;\r\n    }\r\n}\r\n//# sourceMappingURL=Matrix.js.map","var _slicedToArray = function () { function sliceIterator(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"]) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; } return function (arr, i) { if (Array.isArray(arr)) { return arr; } else if (Symbol.iterator in Object(arr)) { return sliceIterator(arr, i); } else { throw new TypeError(\"Invalid attempt to destructure non-iterable instance\"); } }; }();\n\nvar TAU = Math.PI * 2;\n\nvar mapToEllipse = function mapToEllipse(_ref, rx, ry, cosphi, sinphi, centerx, centery) {\n  var x = _ref.x,\n      y = _ref.y;\n\n  x *= rx;\n  y *= ry;\n\n  var xp = cosphi * x - sinphi * y;\n  var yp = sinphi * x + cosphi * y;\n\n  return {\n    x: xp + centerx,\n    y: yp + centery\n  };\n};\n\nvar approxUnitArc = function approxUnitArc(ang1, ang2) {\n  // If 90 degree circular arc, use a constant\n  // as derived from http://spencermortensen.com/articles/bezier-circle\n  var a = ang2 === 1.5707963267948966 ? 0.551915024494 : ang2 === -1.5707963267948966 ? -0.551915024494 : 4 / 3 * Math.tan(ang2 / 4);\n\n  var x1 = Math.cos(ang1);\n  var y1 = Math.sin(ang1);\n  var x2 = Math.cos(ang1 + ang2);\n  var y2 = Math.sin(ang1 + ang2);\n\n  return [{\n    x: x1 - y1 * a,\n    y: y1 + x1 * a\n  }, {\n    x: x2 + y2 * a,\n    y: y2 - x2 * a\n  }, {\n    x: x2,\n    y: y2\n  }];\n};\n\nvar vectorAngle = function vectorAngle(ux, uy, vx, vy) {\n  var sign = ux * vy - uy * vx < 0 ? -1 : 1;\n\n  var dot = ux * vx + uy * vy;\n\n  if (dot > 1) {\n    dot = 1;\n  }\n\n  if (dot < -1) {\n    dot = -1;\n  }\n\n  return sign * Math.acos(dot);\n};\n\nvar getArcCenter = function getArcCenter(px, py, cx, cy, rx, ry, largeArcFlag, sweepFlag, sinphi, cosphi, pxp, pyp) {\n  var rxsq = Math.pow(rx, 2);\n  var rysq = Math.pow(ry, 2);\n  var pxpsq = Math.pow(pxp, 2);\n  var pypsq = Math.pow(pyp, 2);\n\n  var radicant = rxsq * rysq - rxsq * pypsq - rysq * pxpsq;\n\n  if (radicant < 0) {\n    radicant = 0;\n  }\n\n  radicant /= rxsq * pypsq + rysq * pxpsq;\n  radicant = Math.sqrt(radicant) * (largeArcFlag === sweepFlag ? -1 : 1);\n\n  var centerxp = radicant * rx / ry * pyp;\n  var centeryp = radicant * -ry / rx * pxp;\n\n  var centerx = cosphi * centerxp - sinphi * centeryp + (px + cx) / 2;\n  var centery = sinphi * centerxp + cosphi * centeryp + (py + cy) / 2;\n\n  var vx1 = (pxp - centerxp) / rx;\n  var vy1 = (pyp - centeryp) / ry;\n  var vx2 = (-pxp - centerxp) / rx;\n  var vy2 = (-pyp - centeryp) / ry;\n\n  var ang1 = vectorAngle(1, 0, vx1, vy1);\n  var ang2 = vectorAngle(vx1, vy1, vx2, vy2);\n\n  if (sweepFlag === 0 && ang2 > 0) {\n    ang2 -= TAU;\n  }\n\n  if (sweepFlag === 1 && ang2 < 0) {\n    ang2 += TAU;\n  }\n\n  return [centerx, centery, ang1, ang2];\n};\n\nvar arcToBezier = function arcToBezier(_ref2) {\n  var px = _ref2.px,\n      py = _ref2.py,\n      cx = _ref2.cx,\n      cy = _ref2.cy,\n      rx = _ref2.rx,\n      ry = _ref2.ry,\n      _ref2$xAxisRotation = _ref2.xAxisRotation,\n      xAxisRotation = _ref2$xAxisRotation === undefined ? 0 : _ref2$xAxisRotation,\n      _ref2$largeArcFlag = _ref2.largeArcFlag,\n      largeArcFlag = _ref2$largeArcFlag === undefined ? 0 : _ref2$largeArcFlag,\n      _ref2$sweepFlag = _ref2.sweepFlag,\n      sweepFlag = _ref2$sweepFlag === undefined ? 0 : _ref2$sweepFlag;\n\n  var curves = [];\n\n  if (rx === 0 || ry === 0) {\n    return [];\n  }\n\n  var sinphi = Math.sin(xAxisRotation * TAU / 360);\n  var cosphi = Math.cos(xAxisRotation * TAU / 360);\n\n  var pxp = cosphi * (px - cx) / 2 + sinphi * (py - cy) / 2;\n  var pyp = -sinphi * (px - cx) / 2 + cosphi * (py - cy) / 2;\n\n  if (pxp === 0 && pyp === 0) {\n    return [];\n  }\n\n  rx = Math.abs(rx);\n  ry = Math.abs(ry);\n\n  var lambda = Math.pow(pxp, 2) / Math.pow(rx, 2) + Math.pow(pyp, 2) / Math.pow(ry, 2);\n\n  if (lambda > 1) {\n    rx *= Math.sqrt(lambda);\n    ry *= Math.sqrt(lambda);\n  }\n\n  var _getArcCenter = getArcCenter(px, py, cx, cy, rx, ry, largeArcFlag, sweepFlag, sinphi, cosphi, pxp, pyp),\n      _getArcCenter2 = _slicedToArray(_getArcCenter, 4),\n      centerx = _getArcCenter2[0],\n      centery = _getArcCenter2[1],\n      ang1 = _getArcCenter2[2],\n      ang2 = _getArcCenter2[3];\n\n  // If 'ang2' == 90.0000000001, then `ratio` will evaluate to\n  // 1.0000000001. This causes `segments` to be greater than one, which is an\n  // unecessary split, and adds extra points to the bezier curve. To alleviate\n  // this issue, we round to 1.0 when the ratio is close to 1.0.\n\n\n  var ratio = Math.abs(ang2) / (TAU / 4);\n  if (Math.abs(1.0 - ratio) < 0.0000001) {\n    ratio = 1.0;\n  }\n\n  var segments = Math.max(Math.ceil(ratio), 1);\n\n  ang2 /= segments;\n\n  for (var i = 0; i < segments; i++) {\n    curves.push(approxUnitArc(ang1, ang2));\n    ang1 += ang2;\n  }\n\n  return curves.map(function (curve) {\n    var _mapToEllipse = mapToEllipse(curve[0], rx, ry, cosphi, sinphi, centerx, centery),\n        x1 = _mapToEllipse.x,\n        y1 = _mapToEllipse.y;\n\n    var _mapToEllipse2 = mapToEllipse(curve[1], rx, ry, cosphi, sinphi, centerx, centery),\n        x2 = _mapToEllipse2.x,\n        y2 = _mapToEllipse2.y;\n\n    var _mapToEllipse3 = mapToEllipse(curve[2], rx, ry, cosphi, sinphi, centerx, centery),\n        x = _mapToEllipse3.x,\n        y = _mapToEllipse3.y;\n\n    return { x1: x1, y1: y1, x2: x2, y2: y2, x: x, y: y };\n  });\n};\n\nexport default arcToBezier;","/** @ignore */ /** */\r\nimport { BlendMode } from \"./Renderer\";\r\nimport { Color } from \"../../util/Color\";\r\nimport { Matrix } from \"../../util/Matrix\";\r\nimport { Percent, percent } from \"../../util/Percent\";\r\n//import { Throttler } from \"../../util/Throttler\";\r\nimport { ArrayDisposer, Disposer, DisposerClass, CounterDisposer, MultiDisposer } from \"../../util/Disposer\";\r\nimport { TextFormatter } from \"../../util/TextFormatter\";\r\nimport * as $utils from \"../../util/Utils\";\r\nimport * as $array from \"../../util/Array\";\r\nimport * as $object from \"../../util/Object\";\r\nimport * as $type from \"../../util/Type\";\r\nimport * as $math from \"../../util/Math\";\r\nimport arcToBezier from 'svg-arc-to-cubic-bezier';\r\n/**\r\n * @ignore\r\n */\r\nfunction checkArgs(name, actual, expected) {\r\n    if (actual !== expected) {\r\n        throw new Error(\"Required \" + expected + \" arguments for \" + name + \" but got \" + actual);\r\n    }\r\n}\r\n/**\r\n * @ignore\r\n */\r\nfunction checkMinArgs(name, actual, expected) {\r\n    if (actual < expected) {\r\n        throw new Error(\"Required at least \" + expected + \" arguments for \" + name + \" but got \" + actual);\r\n    }\r\n}\r\n/**\r\n * @ignore\r\n */\r\nfunction checkEvenArgs(name, actual, expected) {\r\n    checkMinArgs(name, actual, expected);\r\n    if ((actual % expected) !== 0) {\r\n        throw new Error(\"Arguments for \" + name + \" must be in pairs of \" + expected);\r\n    }\r\n}\r\n/**\r\n * @ignore\r\n * This splits the flag so that way 0017 will be processed as 0 0 17\r\n *\r\n * This is important for weird paths like `M17 5A1 1 0 0017 30 1 1 0 0017 5`\r\n */\r\nfunction splitArcFlags(args) {\r\n    for (let i = 0; i < args.length; i += 7) {\r\n        let index = i + 3;\r\n        let flag = args[index];\r\n        if (flag.length > 1) {\r\n            const a = /^([01])([01])(.*)$/.exec(flag);\r\n            if (a !== null) {\r\n                args.splice(index, 0, a[1]);\r\n                ++index;\r\n                args.splice(index, 0, a[2]);\r\n                ++index;\r\n                if (a[3].length > 0) {\r\n                    args[index] = a[3];\r\n                }\r\n                else {\r\n                    args.splice(index, 1);\r\n                }\r\n            }\r\n        }\r\n        ++index;\r\n        flag = args[index];\r\n        if (flag.length > 1) {\r\n            const a = /^([01])(.+)$/.exec(flag);\r\n            if (a !== null) {\r\n                args.splice(index, 0, a[1]);\r\n                ++index;\r\n                args[index] = a[2];\r\n            }\r\n        }\r\n    }\r\n}\r\n/**\r\n * @ignore\r\n */\r\nfunction assertBinary(value) {\r\n    if (value === 0 || value === 1) {\r\n        return value;\r\n    }\r\n    else {\r\n        throw new Error(\"Flag must be 0 or 1\");\r\n    }\r\n}\r\n//  1 -> 0xffffff * (2 / 2)\r\n//  2 -> 0xffffff * (1 / 2)\r\n//\r\n//  3 -> 0xffffff * (3 / 4)\r\n//  4 -> 0xffffff * (1 / 4)\r\n//\r\n//  5 -> 0xffffff * (7 / 8)\r\n//  6 -> 0xffffff * (5 / 8)\r\n//  7 -> 0xffffff * (3 / 8)\r\n//  8 -> 0xffffff * (1 / 8)\r\n//\r\n//  9 -> 0xffffff * (15 / 16)\r\n// 10 -> 0xffffff * (13 / 16)\r\n// 11 -> 0xffffff * (11 / 16)\r\n// 12 -> 0xffffff *  (9 / 16)\r\n// 13 -> 0xffffff *  (7 / 16)\r\n// 14 -> 0xffffff *  (5 / 16)\r\n// 15 -> 0xffffff *  (3 / 16)\r\n// 16 -> 0xffffff *  (1 / 16)\r\n// @todo remove this old color distribution algo if the new one pans out\r\n/*function distributeId(id: number): number {\r\n    if (id === 1) {\r\n        return 0x000001;\r\n\r\n    } else {\r\n        // Finds the closest power of 2\r\n        const base = Math.pow(2, Math.ceil(Math.log(id) / Math.log(2)));\r\n\r\n        // Translates the id into an odd fraction index\r\n        const index = ((base - id) * 2) + 1;\r\n\r\n        // TODO is Math.round correct ?\r\n        return Math.round(0xffffff * (index / base));\r\n    }\r\n}*/\r\n/**\r\n * Function by smeans:\r\n * https://lowcode.life/generating-unique-contrasting-colors-in-javascript/\r\n * @ignore\r\n */\r\nfunction distributeId(id) {\r\n    const rgb = [0, 0, 0];\r\n    for (let i = 0; i < 24; i++) {\r\n        rgb[i % 3] <<= 1;\r\n        rgb[i % 3] |= id & 0x01;\r\n        id >>= 1;\r\n    }\r\n    return (rgb[0] | 0) + (rgb[1] << 8) + (rgb[2] << 16);\r\n}\r\n/**\r\n * @ignore\r\n */\r\nfunction eachTargets(hitTarget, f) {\r\n    for (;;) {\r\n        if (hitTarget.interactive) {\r\n            if (!f(hitTarget)) {\r\n                break;\r\n            }\r\n        }\r\n        if (hitTarget._parent) {\r\n            hitTarget = hitTarget._parent;\r\n        }\r\n        else {\r\n            break;\r\n        }\r\n    }\r\n}\r\n// TODO feature detection for mouse/touch/pointer\r\n/**\r\n * @ignore\r\n */\r\nfunction onPointerEvent(element, name, f) {\r\n    return $utils.addEventListener(element, $utils.getRendererEvent(name), (event) => {\r\n        const target = $utils.getEventTarget(event);\r\n        let touches = event.touches;\r\n        if (touches) {\r\n            if (touches.length == 0) {\r\n                touches = event.changedTouches;\r\n            }\r\n            f($array.copy(touches), target);\r\n        }\r\n        else {\r\n            f([event], target);\r\n        }\r\n    });\r\n}\r\n/**\r\n * @ignore\r\n */\r\nfunction isTainted(image) {\r\n    const canvas = document.createElement(\"canvas\");\r\n    canvas.width = 1;\r\n    canvas.height = 1;\r\n    const context = canvas.getContext(\"2d\", { willReadFrequently: true });\r\n    context.drawImage(image, 0, 0, 1, 1);\r\n    try {\r\n        context.getImageData(0, 0, 1, 1);\r\n        return false;\r\n    }\r\n    catch (err) {\r\n        console.warn(\"Image \\\"\" + image.src + \"\\\" is loaded from different host and is not covered by CORS policy. For more information about the implications read here: https://www.amcharts.com/docs/v5/concepts/cors\");\r\n        return true;\r\n    }\r\n}\r\n/**\r\n * This is needed to workaround a bug in iOS which causes it to not GC canvas elements.\r\n *\r\n * @ignore\r\n */\r\nfunction clearCanvas(view) {\r\n    view.width = 0;\r\n    view.height = 0;\r\n    view.style.width = \"0px\";\r\n    view.style.height = \"0px\";\r\n}\r\n/**\r\n * Aligns the coordinate to the pixel, so it renders crisp\r\n *\r\n * @ignore\r\n */\r\nfunction crisp(x) {\r\n    return Math.floor(x) + .5;\r\n}\r\n/**\r\n * @ignore\r\n */\r\nexport class CanvasPivot {\r\n    constructor() {\r\n        Object.defineProperty(this, \"_x\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: 0\r\n        });\r\n        Object.defineProperty(this, \"_y\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: 0\r\n        });\r\n    }\r\n    get x() {\r\n        return this._x;\r\n    }\r\n    get y() {\r\n        return this._y;\r\n    }\r\n    set x(value) {\r\n        this._x = value;\r\n    }\r\n    set y(value) {\r\n        this._y = value;\r\n    }\r\n}\r\n/**\r\n * @ignore\r\n */\r\nexport class CanvasDisplayObject extends DisposerClass {\r\n    constructor(renderer) {\r\n        super();\r\n        Object.defineProperty(this, \"_layer\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"mask\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: null\r\n        });\r\n        Object.defineProperty(this, \"visible\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: true\r\n        });\r\n        Object.defineProperty(this, \"exportable\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: true\r\n        });\r\n        Object.defineProperty(this, \"interactive\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: false\r\n        });\r\n        Object.defineProperty(this, \"inactive\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: null\r\n        });\r\n        Object.defineProperty(this, \"wheelable\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: false\r\n        });\r\n        Object.defineProperty(this, \"cancelTouch\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: false\r\n        });\r\n        Object.defineProperty(this, \"isMeasured\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: false\r\n        });\r\n        Object.defineProperty(this, \"buttonMode\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: false\r\n        });\r\n        Object.defineProperty(this, \"alpha\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: 1\r\n        });\r\n        Object.defineProperty(this, \"compoundAlpha\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: 1\r\n        });\r\n        Object.defineProperty(this, \"angle\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: 0\r\n        });\r\n        Object.defineProperty(this, \"scale\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: 1\r\n        });\r\n        Object.defineProperty(this, \"x\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: 0\r\n        });\r\n        Object.defineProperty(this, \"y\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: 0\r\n        });\r\n        Object.defineProperty(this, \"crisp\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: false\r\n        });\r\n        Object.defineProperty(this, \"pivot\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: new CanvasPivot()\r\n        });\r\n        Object.defineProperty(this, \"filter\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"cursorOverStyle\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"_replacedCursorStyle\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"_localMatrix\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: new Matrix()\r\n        });\r\n        Object.defineProperty(this, \"_matrix\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: new Matrix()\r\n        });\r\n        // TODO can this be replaced with _localMatrix ?\r\n        Object.defineProperty(this, \"_uMatrix\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: new Matrix()\r\n        });\r\n        Object.defineProperty(this, \"_renderer\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"_parent\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"_localBounds\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"_bounds\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"_colorId\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        this._renderer = renderer;\r\n    }\r\n    subStatus(status) {\r\n        return {\r\n            inactive: (this.inactive == null ? status.inactive : this.inactive),\r\n            layer: this._layer || status.layer,\r\n        };\r\n    }\r\n    _dispose() {\r\n        this._renderer._removeObject(this);\r\n        this.getLayer().dirty = true;\r\n    }\r\n    getCanvas() {\r\n        return this.getLayer().view;\r\n    }\r\n    getLayer() {\r\n        let self = this;\r\n        for (;;) {\r\n            if (self._layer) {\r\n                return self._layer;\r\n            }\r\n            else if (self._parent) {\r\n                self = self._parent;\r\n            }\r\n            else {\r\n                return this._renderer.defaultLayer;\r\n            }\r\n        }\r\n    }\r\n    setLayer(order, margin) {\r\n        if (order == null) {\r\n            this._layer = undefined;\r\n        }\r\n        else {\r\n            const visible = true;\r\n            this._layer = this._renderer.getLayer(order, visible);\r\n            this._layer.visible = visible;\r\n            this._layer.margin = margin;\r\n            if (margin) {\r\n                $utils.setInteractive(this._layer.view, false);\r\n            }\r\n            this._renderer._ghostLayer.setMargin(this._renderer.layers);\r\n            if (this._parent) {\r\n                this._parent.registerChildLayer(this._layer);\r\n            }\r\n            this._layer.dirty = true;\r\n            this._renderer.resizeLayer(this._layer);\r\n            this._renderer.resizeGhost();\r\n        }\r\n    }\r\n    markDirtyLayer() {\r\n        this.getLayer().dirty = true;\r\n    }\r\n    clear() {\r\n        this.invalidateBounds();\r\n    }\r\n    invalidateBounds() {\r\n        this._localBounds = undefined;\r\n    }\r\n    _addBounds(_bounds) { }\r\n    _getColorId() {\r\n        if (this._colorId === undefined) {\r\n            this._colorId = this._renderer.paintId(this);\r\n        }\r\n        return this._colorId;\r\n    }\r\n    _isInteractive(status) {\r\n        return !status.inactive && (this.interactive || this._renderer._forceInteractive > 0);\r\n    }\r\n    _isInteractiveMask(status) {\r\n        return this._isInteractive(status);\r\n    }\r\n    contains(child) {\r\n        for (;;) {\r\n            if (child === this) {\r\n                return true;\r\n            }\r\n            else if (child._parent) {\r\n                child = child._parent;\r\n            }\r\n            else {\r\n                return false;\r\n            }\r\n        }\r\n    }\r\n    toGlobal(point) {\r\n        return this._matrix.apply(point);\r\n    }\r\n    toLocal(point) {\r\n        return this._matrix.applyInverse(point);\r\n    }\r\n    getLocalMatrix() {\r\n        this._uMatrix.setTransform(0, 0, this.pivot.x, this.pivot.y, this.angle * Math.PI / 180, this.scale);\r\n        return this._uMatrix;\r\n    }\r\n    getLocalBounds() {\r\n        if (!this._localBounds) {\r\n            const bn = 10000000;\r\n            this._localBounds = {\r\n                left: bn,\r\n                top: bn,\r\n                right: -bn,\r\n                bottom: -bn\r\n            };\r\n            this._addBounds(this._localBounds);\r\n        }\r\n        return this._localBounds;\r\n    }\r\n    getAdjustedBounds(bounds) {\r\n        this._setMatrix();\r\n        const matrix = this.getLocalMatrix();\r\n        const p0 = matrix.apply({ x: bounds.left, y: bounds.top });\r\n        const p1 = matrix.apply({ x: bounds.right, y: bounds.top });\r\n        const p2 = matrix.apply({ x: bounds.right, y: bounds.bottom });\r\n        const p3 = matrix.apply({ x: bounds.left, y: bounds.bottom });\r\n        return {\r\n            left: Math.min(p0.x, p1.x, p2.x, p3.x),\r\n            top: Math.min(p0.y, p1.y, p2.y, p3.y),\r\n            right: Math.max(p0.x, p1.x, p2.x, p3.x),\r\n            bottom: Math.max(p0.y, p1.y, p2.y, p3.y)\r\n        };\r\n    }\r\n    on(key, callback, context) {\r\n        if (this.interactive) {\r\n            return this._renderer._addEvent(this, key, callback, context);\r\n        }\r\n        else {\r\n            return new Disposer(() => { });\r\n        }\r\n    }\r\n    _setMatrix() {\r\n        // TODO only calculate this if it has actually changed\r\n        this._localMatrix.setTransform(this.x, this.y, this.pivot.x, this.pivot.y, \r\n        // Converts degrees to radians\r\n        this.angle * Math.PI / 180, this.scale);\r\n        this._matrix.copyFrom(this._localMatrix);\r\n        if (this._parent) {\r\n            // TODO only calculate this if it has actually changed\r\n            this._matrix.prepend(this._parent._matrix);\r\n        }\r\n    }\r\n    _transform(context, resolution) {\r\n        const m = this._matrix;\r\n        let tx = m.tx * resolution;\r\n        let ty = m.ty * resolution;\r\n        if (this.crisp) {\r\n            tx = crisp(tx);\r\n            ty = crisp(ty);\r\n        }\r\n        context.setTransform(m.a * resolution, m.b * resolution, m.c * resolution, m.d * resolution, tx, ty);\r\n    }\r\n    _transformMargin(context, resolution, margin) {\r\n        const m = this._matrix;\r\n        context.setTransform(m.a * resolution, m.b * resolution, m.c * resolution, m.d * resolution, (m.tx + margin.left) * resolution, (m.ty + margin.top) * resolution);\r\n    }\r\n    _transformLayer(context, resolution, layer) {\r\n        if (layer.margin) {\r\n            this._transformMargin(context, layer.scale || resolution, layer.margin);\r\n        }\r\n        else {\r\n            this._transform(context, layer.scale || resolution);\r\n        }\r\n    }\r\n    render(status) {\r\n        if (this.visible && (this.exportable !== false || !this._renderer._omitTainted)) {\r\n            this._setMatrix();\r\n            const subStatus = this.subStatus(status);\r\n            const resolution = this._renderer.resolution;\r\n            const layers = this._renderer.layers;\r\n            const ghostLayer = this._renderer._ghostLayer;\r\n            const ghostContext = ghostLayer.context;\r\n            const mask = this.mask;\r\n            if (mask) {\r\n                mask._setMatrix();\r\n            }\r\n            // TODO improve this\r\n            $array.each(layers, (layer) => {\r\n                if (layer) {\r\n                    const context = layer.context;\r\n                    context.save();\r\n                    // We must apply the mask before we transform the element\r\n                    if (mask) {\r\n                        mask._transformLayer(context, resolution, layer);\r\n                        mask._runPath(context);\r\n                        context.clip();\r\n                    }\r\n                    context.globalAlpha = this.compoundAlpha * this.alpha;\r\n                    this._transformLayer(context, resolution, layer);\r\n                    if (this.filter) {\r\n                        context.filter = this.filter;\r\n                    }\r\n                }\r\n            });\r\n            ghostContext.save();\r\n            // We must apply the mask before we transform the element\r\n            if (mask && this._isInteractiveMask(subStatus)) {\r\n                mask._transformMargin(ghostContext, resolution, ghostLayer.margin);\r\n                mask._runPath(ghostContext);\r\n                ghostContext.clip();\r\n            }\r\n            this._transformMargin(ghostContext, resolution, ghostLayer.margin);\r\n            this._render(subStatus);\r\n            ghostContext.restore();\r\n            $array.each(layers, (layer) => {\r\n                if (layer) {\r\n                    layer.context.restore();\r\n                }\r\n            });\r\n        }\r\n    }\r\n    _render(status) {\r\n        if (this.exportable === false) {\r\n            status.layer.tainted = true;\r\n        }\r\n    }\r\n    hovering() {\r\n        return this._renderer._hovering.has(this);\r\n    }\r\n    dragging() {\r\n        return this._renderer._dragging.some((x) => x.value === this);\r\n    }\r\n    shouldCancelTouch() {\r\n        const renderer = this._renderer;\r\n        if (renderer.tapToActivate && !renderer._touchActive) {\r\n            return false;\r\n        }\r\n        if (this.cancelTouch) {\r\n            return true;\r\n        }\r\n        else if (this._parent) {\r\n            return this._parent.shouldCancelTouch();\r\n        }\r\n        return false;\r\n    }\r\n}\r\n/**\r\n * @ignore\r\n */\r\nexport class CanvasContainer extends CanvasDisplayObject {\r\n    constructor() {\r\n        super(...arguments);\r\n        Object.defineProperty(this, \"interactiveChildren\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: true\r\n        });\r\n        Object.defineProperty(this, \"_childLayers\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"_children\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: []\r\n        });\r\n    }\r\n    _isInteractiveMask(status) {\r\n        return this.interactiveChildren || super._isInteractiveMask(status);\r\n    }\r\n    addChild(child) {\r\n        child._parent = this;\r\n        this._children.push(child);\r\n        if (child._layer) {\r\n            this.registerChildLayer(child._layer);\r\n        }\r\n    }\r\n    addChildAt(child, index) {\r\n        child._parent = this;\r\n        this._children.splice(index, 0, child);\r\n        if (child._layer) {\r\n            this.registerChildLayer(child._layer);\r\n        }\r\n    }\r\n    removeChild(child) {\r\n        child._parent = undefined;\r\n        $array.removeFirst(this._children, child);\r\n    }\r\n    _render(status) {\r\n        super._render(status);\r\n        const renderer = this._renderer;\r\n        if (this.interactive && this.interactiveChildren) {\r\n            ++renderer._forceInteractive;\r\n        }\r\n        $array.each(this._children, (child) => {\r\n            child.compoundAlpha = this.compoundAlpha * this.alpha;\r\n            child.render(status);\r\n        });\r\n        if (this.interactive && this.interactiveChildren) {\r\n            --renderer._forceInteractive;\r\n        }\r\n    }\r\n    registerChildLayer(layer) {\r\n        if (!this._childLayers) {\r\n            this._childLayers = [];\r\n        }\r\n        $array.pushOne(this._childLayers, layer);\r\n        if (this._parent) {\r\n            this._parent.registerChildLayer(layer);\r\n        }\r\n    }\r\n    markDirtyLayer(deep = false) {\r\n        super.markDirtyLayer();\r\n        if (deep && this._childLayers) {\r\n            $array.each(this._childLayers, (layer) => layer.dirty = true);\r\n        }\r\n    }\r\n    _dispose() {\r\n        super._dispose();\r\n        if (this._childLayers) {\r\n            $array.each(this._childLayers, (layer) => {\r\n                layer.dirty = true;\r\n            });\r\n        }\r\n    }\r\n}\r\n/**\r\n * @ignore\r\n */\r\nfunction setPoint(bounds, point) {\r\n    bounds.left = Math.min(bounds.left, point.x);\r\n    bounds.top = Math.min(bounds.top, point.y);\r\n    bounds.right = Math.max(bounds.right, point.x);\r\n    bounds.bottom = Math.max(bounds.bottom, point.y);\r\n}\r\n/**\r\n * @ignore\r\n */\r\nclass Op {\r\n    colorize(_context, _forceColor) { }\r\n    colorizeGhost(context, forceColor) {\r\n        this.colorize(context, forceColor);\r\n    }\r\n    path(_context) { }\r\n    pathGhost(context) {\r\n        this.path(context);\r\n    }\r\n    addBounds(_bounds) { }\r\n}\r\n/**\r\n * @ignore\r\n */\r\nclass BeginPath extends Op {\r\n    colorize(context, _forceColor) {\r\n        context.beginPath();\r\n    }\r\n}\r\n/**\r\n * @ignore\r\n */\r\nclass BeginFill extends Op {\r\n    constructor(color) {\r\n        super();\r\n        Object.defineProperty(this, \"color\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: color\r\n        });\r\n    }\r\n    colorize(context, forceColor) {\r\n        if (forceColor !== undefined) {\r\n            context.fillStyle = forceColor;\r\n        }\r\n        else {\r\n            context.fillStyle = this.color;\r\n        }\r\n    }\r\n}\r\n/**\r\n * @ignore\r\n */\r\nclass EndFill extends Op {\r\n    constructor(clearShadow) {\r\n        super();\r\n        Object.defineProperty(this, \"clearShadow\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: clearShadow\r\n        });\r\n    }\r\n    colorize(context, _forceColor) {\r\n        context.fill();\r\n        if (this.clearShadow) {\r\n            context.shadowColor = \"\";\r\n            context.shadowBlur = 0;\r\n            context.shadowOffsetX = 0;\r\n            context.shadowOffsetY = 0;\r\n        }\r\n    }\r\n}\r\n/**\r\n * @ignore\r\n */\r\nclass EndStroke extends Op {\r\n    colorize(context, _forceColor) {\r\n        context.stroke();\r\n    }\r\n}\r\n/**\r\n * @ignore\r\n */\r\nclass LineStyle extends Op {\r\n    constructor(width, color, lineJoin) {\r\n        super();\r\n        Object.defineProperty(this, \"width\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: width\r\n        });\r\n        Object.defineProperty(this, \"color\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: color\r\n        });\r\n        Object.defineProperty(this, \"lineJoin\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: lineJoin\r\n        });\r\n    }\r\n    colorize(context, forceColor) {\r\n        if (forceColor !== undefined) {\r\n            context.strokeStyle = forceColor;\r\n        }\r\n        else {\r\n            context.strokeStyle = this.color;\r\n        }\r\n        context.lineWidth = this.width;\r\n        if (this.lineJoin) {\r\n            context.lineJoin = this.lineJoin;\r\n        }\r\n    }\r\n}\r\n/**\r\n * @ignore\r\n */\r\nclass LineDash extends Op {\r\n    constructor(dash) {\r\n        super();\r\n        Object.defineProperty(this, \"dash\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: dash\r\n        });\r\n    }\r\n    colorize(context, _forceColor) {\r\n        context.setLineDash(this.dash);\r\n    }\r\n}\r\n/**\r\n * @ignore\r\n */\r\nclass LineDashOffset extends Op {\r\n    constructor(dashOffset) {\r\n        super();\r\n        Object.defineProperty(this, \"dashOffset\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: dashOffset\r\n        });\r\n    }\r\n    colorize(context, _forceColor) {\r\n        context.lineDashOffset = this.dashOffset;\r\n    }\r\n}\r\n/**\r\n * @ignore\r\n */\r\nclass DrawRect extends Op {\r\n    constructor(x, y, width, height) {\r\n        super();\r\n        Object.defineProperty(this, \"x\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: x\r\n        });\r\n        Object.defineProperty(this, \"y\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: y\r\n        });\r\n        Object.defineProperty(this, \"width\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: width\r\n        });\r\n        Object.defineProperty(this, \"height\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: height\r\n        });\r\n    }\r\n    path(context) {\r\n        context.rect(this.x, this.y, this.width, this.height);\r\n    }\r\n    addBounds(bounds) {\r\n        const l = this.x;\r\n        const t = this.y;\r\n        const r = l + this.width;\r\n        const b = t + this.height;\r\n        setPoint(bounds, { x: l, y: t });\r\n        setPoint(bounds, { x: r, y: t });\r\n        setPoint(bounds, { x: l, y: b });\r\n        setPoint(bounds, { x: r, y: b });\r\n    }\r\n}\r\n/**\r\n * @ignore\r\n */\r\nclass DrawCircle extends Op {\r\n    constructor(x, y, radius) {\r\n        super();\r\n        Object.defineProperty(this, \"x\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: x\r\n        });\r\n        Object.defineProperty(this, \"y\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: y\r\n        });\r\n        Object.defineProperty(this, \"radius\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: radius\r\n        });\r\n    }\r\n    path(context) {\r\n        context.moveTo(this.x + this.radius, this.y);\r\n        context.arc(this.x, this.y, this.radius, 0, 2 * Math.PI);\r\n    }\r\n    // TODO handle skewing and rotation\r\n    addBounds(bounds) {\r\n        setPoint(bounds, { x: this.x - this.radius, y: this.y - this.radius });\r\n        setPoint(bounds, { x: this.x + this.radius, y: this.y + this.radius });\r\n    }\r\n}\r\n/**\r\n * @ignore\r\n */\r\nclass DrawEllipse extends Op {\r\n    constructor(x, y, radiusX, radiusY) {\r\n        super();\r\n        Object.defineProperty(this, \"x\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: x\r\n        });\r\n        Object.defineProperty(this, \"y\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: y\r\n        });\r\n        Object.defineProperty(this, \"radiusX\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: radiusX\r\n        });\r\n        Object.defineProperty(this, \"radiusY\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: radiusY\r\n        });\r\n    }\r\n    path(context) {\r\n        context.ellipse(0, 0, this.radiusX, this.radiusY, 0, 0, Math.PI * 2);\r\n    }\r\n    // TODO handle skewing and rotation\r\n    addBounds(bounds) {\r\n        setPoint(bounds, { x: this.x - this.radiusX, y: this.y - this.radiusY });\r\n        setPoint(bounds, { x: this.x + this.radiusX, y: this.y + this.radiusY });\r\n    }\r\n}\r\n/**\r\n * @ignore\r\n */\r\nclass Arc extends Op {\r\n    constructor(cx, cy, radius, startAngle, endAngle, anticlockwise) {\r\n        super();\r\n        Object.defineProperty(this, \"cx\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: cx\r\n        });\r\n        Object.defineProperty(this, \"cy\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: cy\r\n        });\r\n        Object.defineProperty(this, \"radius\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: radius\r\n        });\r\n        Object.defineProperty(this, \"startAngle\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: startAngle\r\n        });\r\n        Object.defineProperty(this, \"endAngle\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: endAngle\r\n        });\r\n        Object.defineProperty(this, \"anticlockwise\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: anticlockwise\r\n        });\r\n    }\r\n    path(context) {\r\n        if (this.radius > 0) {\r\n            context.arc(this.cx, this.cy, this.radius, this.startAngle, this.endAngle, this.anticlockwise);\r\n        }\r\n    }\r\n    addBounds(bounds) {\r\n        let arcBounds = $math.getArcBounds(this.cx, this.cy, this.startAngle * $math.DEGREES, this.endAngle * $math.DEGREES, this.radius);\r\n        setPoint(bounds, { x: arcBounds.left, y: arcBounds.top });\r\n        setPoint(bounds, { x: arcBounds.right, y: arcBounds.bottom });\r\n    }\r\n}\r\n/**\r\n * @ignore\r\n */\r\nclass ArcTo extends Op {\r\n    constructor(x1, y1, x2, y2, radius) {\r\n        super();\r\n        Object.defineProperty(this, \"x1\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: x1\r\n        });\r\n        Object.defineProperty(this, \"y1\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: y1\r\n        });\r\n        Object.defineProperty(this, \"x2\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: x2\r\n        });\r\n        Object.defineProperty(this, \"y2\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: y2\r\n        });\r\n        Object.defineProperty(this, \"radius\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: radius\r\n        });\r\n    }\r\n    path(context) {\r\n        if (this.radius > 0) {\r\n            context.arcTo(this.x1, this.y1, this.x2, this.y2, this.radius);\r\n        }\r\n    }\r\n    // TODO: add points\r\n    addBounds(_bounds) {\r\n        /*\r\n        // not finished\r\n        https://math.stackexchange.com/questions/1781438/finding-the-center-of-a-circle-given-two-points-and-a-radius-algebraically\r\n\r\n        if (prevPoint) {\r\n            let x1 = prevPoint.x;\r\n            let y1 = prevPoint.y;\r\n            let x2 = this.x2;\r\n            let y2 = this.y2;\r\n            let r = this.radius;\r\n\r\n            let xa = (x2 - x1) / 2;\r\n            let ya = (y2 - y1) / 2;\r\n\r\n            let x0 = x1 + xa;\r\n            let y0 = y1 + ya;\r\n\r\n            let a = Math.hypot(xa, ya);\r\n            let b = Math.sqrt(r * r - a * a);\r\n\r\n            let cx = x0 + b * ya / a;\r\n            let cy = y0 - b * xa / a;\r\n\r\n            console.log(cx, cy);\r\n        }*/\r\n    }\r\n}\r\n/**\r\n * @ignore\r\n */\r\nclass LineTo extends Op {\r\n    constructor(x, y) {\r\n        super();\r\n        Object.defineProperty(this, \"x\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: x\r\n        });\r\n        Object.defineProperty(this, \"y\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: y\r\n        });\r\n    }\r\n    path(context) {\r\n        context.lineTo(this.x, this.y);\r\n    }\r\n    addBounds(bounds) {\r\n        setPoint(bounds, { x: this.x, y: this.y });\r\n    }\r\n}\r\n/**\r\n * @ignore\r\n */\r\nclass MoveTo extends Op {\r\n    constructor(x, y) {\r\n        super();\r\n        Object.defineProperty(this, \"x\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: x\r\n        });\r\n        Object.defineProperty(this, \"y\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: y\r\n        });\r\n    }\r\n    path(context) {\r\n        context.moveTo(this.x, this.y);\r\n    }\r\n    addBounds(bounds) {\r\n        setPoint(bounds, { x: this.x, y: this.y });\r\n    }\r\n}\r\n/**\r\n * @ignore\r\n */\r\nclass ClosePath extends Op {\r\n    path(context) {\r\n        context.closePath();\r\n    }\r\n}\r\n/**\r\n * @ignore\r\n */\r\nclass BezierCurveTo extends Op {\r\n    constructor(cpX, cpY, cpX2, cpY2, toX, toY) {\r\n        super();\r\n        Object.defineProperty(this, \"cpX\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: cpX\r\n        });\r\n        Object.defineProperty(this, \"cpY\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: cpY\r\n        });\r\n        Object.defineProperty(this, \"cpX2\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: cpX2\r\n        });\r\n        Object.defineProperty(this, \"cpY2\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: cpY2\r\n        });\r\n        Object.defineProperty(this, \"toX\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: toX\r\n        });\r\n        Object.defineProperty(this, \"toY\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: toY\r\n        });\r\n    }\r\n    path(context) {\r\n        context.bezierCurveTo(this.cpX, this.cpY, this.cpX2, this.cpY2, this.toX, this.toY);\r\n    }\r\n    // TODO: OK?\r\n    addBounds(bounds) {\r\n        setPoint(bounds, { x: this.cpX, y: this.cpY });\r\n        setPoint(bounds, { x: this.cpX2, y: this.cpY2 });\r\n        setPoint(bounds, { x: this.toX, y: this.toY });\r\n    }\r\n}\r\n/**\r\n * @ignore\r\n */\r\nclass QuadraticCurveTo extends Op {\r\n    constructor(cpX, cpY, toX, toY) {\r\n        super();\r\n        Object.defineProperty(this, \"cpX\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: cpX\r\n        });\r\n        Object.defineProperty(this, \"cpY\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: cpY\r\n        });\r\n        Object.defineProperty(this, \"toX\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: toX\r\n        });\r\n        Object.defineProperty(this, \"toY\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: toY\r\n        });\r\n    }\r\n    path(context) {\r\n        context.quadraticCurveTo(this.cpX, this.cpY, this.toX, this.toY);\r\n    }\r\n    // TODO: OK?\r\n    addBounds(bounds) {\r\n        setPoint(bounds, { x: this.cpX, y: this.cpY });\r\n        setPoint(bounds, { x: this.toX, y: this.toY });\r\n    }\r\n}\r\n/**\r\n * @ignore\r\n */\r\nclass Shadow extends Op {\r\n    constructor(color, blur, offsetX, offsetY, opacity) {\r\n        super();\r\n        Object.defineProperty(this, \"color\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: color\r\n        });\r\n        Object.defineProperty(this, \"blur\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: blur\r\n        });\r\n        Object.defineProperty(this, \"offsetX\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: offsetX\r\n        });\r\n        Object.defineProperty(this, \"offsetY\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: offsetY\r\n        });\r\n        Object.defineProperty(this, \"opacity\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: opacity\r\n        });\r\n    }\r\n    colorize(context, _forceColor) {\r\n        if (this.opacity) {\r\n            context.fillStyle = this.color;\r\n        }\r\n        context.shadowColor = this.color;\r\n        context.shadowBlur = this.blur;\r\n        context.shadowOffsetX = this.offsetX;\r\n        context.shadowOffsetY = this.offsetY;\r\n    }\r\n    colorizeGhost(_context, _forceColor) { }\r\n}\r\n/**\r\n * @ignore\r\n */\r\nclass GraphicsImage extends Op {\r\n    constructor(image, width, height, x, y) {\r\n        super();\r\n        Object.defineProperty(this, \"image\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: image\r\n        });\r\n        Object.defineProperty(this, \"width\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: width\r\n        });\r\n        Object.defineProperty(this, \"height\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: height\r\n        });\r\n        Object.defineProperty(this, \"x\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: x\r\n        });\r\n        Object.defineProperty(this, \"y\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: y\r\n        });\r\n    }\r\n    path(context) {\r\n        context.drawImage(this.image, this.x, this.y, this.width, this.height);\r\n    }\r\n    // TODO: OK?\r\n    addBounds(bounds) {\r\n        setPoint(bounds, { x: this.x, y: this.y });\r\n        setPoint(bounds, { x: this.width, y: this.height });\r\n    }\r\n}\r\n/**\r\n * @ignore\r\n */\r\nexport class CanvasGraphics extends CanvasDisplayObject {\r\n    constructor() {\r\n        super(...arguments);\r\n        Object.defineProperty(this, \"_operations\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: []\r\n        });\r\n        Object.defineProperty(this, \"blendMode\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: BlendMode.NORMAL\r\n        });\r\n        Object.defineProperty(this, \"_hasShadows\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: false\r\n        });\r\n        Object.defineProperty(this, \"_fillAlpha\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"_strokeAlpha\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n    }\r\n    clear() {\r\n        super.clear();\r\n        this._operations.length = 0;\r\n    }\r\n    _pushOp(op) {\r\n        this._operations.push(op);\r\n    }\r\n    beginFill(color, alpha = 1) {\r\n        this._fillAlpha = alpha;\r\n        if (color) {\r\n            if (color instanceof Color) {\r\n                this._pushOp(new BeginFill(color.toCSS(alpha)));\r\n            }\r\n            else {\r\n                this.isMeasured = true;\r\n                this._pushOp(new BeginFill(color));\r\n            }\r\n        }\r\n        else {\r\n            this._pushOp(new BeginFill(\"rgba(0, 0, 0, \" + alpha + \")\"));\r\n        }\r\n    }\r\n    endFill() {\r\n        this._pushOp(new EndFill(this._hasShadows));\r\n    }\r\n    endStroke() {\r\n        this._pushOp(new EndStroke());\r\n    }\r\n    beginPath() {\r\n        this._pushOp(new BeginPath());\r\n    }\r\n    lineStyle(width = 0, color, alpha = 1, lineJoin) {\r\n        this._strokeAlpha = alpha;\r\n        if (color) {\r\n            if (color instanceof Color) {\r\n                this._pushOp(new LineStyle(width, color.toCSS(alpha), lineJoin));\r\n            }\r\n            else {\r\n                this._pushOp(new LineStyle(width, color, lineJoin));\r\n            }\r\n        }\r\n        else {\r\n            this._pushOp(new LineStyle(width, \"rgba(0, 0, 0, \" + alpha + \")\", lineJoin));\r\n        }\r\n    }\r\n    setLineDash(dash) {\r\n        this._pushOp(new LineDash(dash ? dash : []));\r\n    }\r\n    setLineDashOffset(dashOffset = 0) {\r\n        this._pushOp(new LineDashOffset(dashOffset));\r\n    }\r\n    drawRect(x, y, width, height) {\r\n        this._pushOp(new DrawRect(x, y, width, height));\r\n    }\r\n    drawCircle(x, y, radius) {\r\n        this._pushOp(new DrawCircle(x, y, radius));\r\n    }\r\n    drawEllipse(x, y, radiusX, radiusY) {\r\n        this._pushOp(new DrawEllipse(x, y, radiusX, radiusY));\r\n    }\r\n    arc(cx, cy, radius, startAngle, endAngle, anticlockwise = false) {\r\n        this._pushOp(new Arc(cx, cy, radius, startAngle, endAngle, anticlockwise));\r\n    }\r\n    arcTo(x1, y1, x2, y2, radius) {\r\n        this._pushOp(new ArcTo(x1, y1, x2, y2, radius));\r\n    }\r\n    lineTo(x, y) {\r\n        this._pushOp(new LineTo(x, y));\r\n    }\r\n    moveTo(x, y) {\r\n        this._pushOp(new MoveTo(x, y));\r\n    }\r\n    bezierCurveTo(cpX, cpY, cpX2, cpY2, toX, toY) {\r\n        this._pushOp(new BezierCurveTo(cpX, cpY, cpX2, cpY2, toX, toY));\r\n    }\r\n    quadraticCurveTo(cpX, cpY, toX, toY) {\r\n        this._pushOp(new QuadraticCurveTo(cpX, cpY, toX, toY));\r\n    }\r\n    closePath() {\r\n        this._pushOp(new ClosePath());\r\n    }\r\n    shadow(color, blur = 0, offsetX = 0, offsetY = 0, opacity) {\r\n        this._hasShadows = true;\r\n        this._pushOp(new Shadow(opacity ? color.toCSS(opacity) : color.toCSS(this._fillAlpha || this._strokeAlpha), blur, offsetX, offsetY));\r\n    }\r\n    image(image, width, height, x, y) {\r\n        this._pushOp(new GraphicsImage(image, width, height, x, y));\r\n    }\r\n    // https://svgwg.org/svg2-draft/paths.html#DProperty\r\n    // TODO better error checking\r\n    svgPath(path) {\r\n        let x = 0;\r\n        let y = 0;\r\n        let cpx = null;\r\n        let cpy = null;\r\n        let qcpx = null;\r\n        let qcpy = null;\r\n        const SEGMENTS_REGEXP = /([MmZzLlHhVvCcSsQqTtAa])([^MmZzLlHhVvCcSsQqTtAa]*)/g;\r\n        const ARGS_REGEXP = /[\\u0009\\u0020\\u000A\\u000C\\u000D]*([\\+\\-]?[0-9]*\\.?[0-9]+(?:[eE][\\+\\-]?[0-9]+)?)[\\u0009\\u0020\\u000A\\u000C\\u000D]*,?/g;\r\n        let match;\r\n        while ((match = SEGMENTS_REGEXP.exec(path)) !== null) {\r\n            const name = match[1];\r\n            const rest = match[2];\r\n            const args = [];\r\n            while ((match = ARGS_REGEXP.exec(rest)) !== null) {\r\n                args.push(match[1]);\r\n            }\r\n            // Reset control point\r\n            if (name !== \"S\" && name !== \"s\" && name !== \"C\" && name !== \"c\") {\r\n                cpx = null;\r\n                cpy = null;\r\n            }\r\n            // Reset control point\r\n            if (name !== \"Q\" && name !== \"q\" && name !== \"T\" && name !== \"t\") {\r\n                qcpx = null;\r\n                qcpy = null;\r\n            }\r\n            switch (name) {\r\n                case \"M\":\r\n                    checkEvenArgs(name, args.length, 2);\r\n                    x = +args[0];\r\n                    y = +args[1];\r\n                    this.moveTo(x, y);\r\n                    for (let i = 2; i < args.length; i += 2) {\r\n                        x = +args[i];\r\n                        y = +args[i + 1];\r\n                        this.lineTo(x, y);\r\n                    }\r\n                    break;\r\n                case \"m\":\r\n                    checkEvenArgs(name, args.length, 2);\r\n                    x += +args[0];\r\n                    y += +args[1];\r\n                    this.moveTo(x, y);\r\n                    for (let i = 2; i < args.length; i += 2) {\r\n                        x += +args[i];\r\n                        y += +args[i + 1];\r\n                        this.lineTo(x, y);\r\n                    }\r\n                    break;\r\n                case \"L\":\r\n                    checkEvenArgs(name, args.length, 2);\r\n                    for (let i = 0; i < args.length; i += 2) {\r\n                        x = +args[i];\r\n                        y = +args[i + 1];\r\n                        this.lineTo(x, y);\r\n                    }\r\n                    break;\r\n                case \"l\":\r\n                    checkEvenArgs(name, args.length, 2);\r\n                    for (let i = 0; i < args.length; i += 2) {\r\n                        x += +args[i];\r\n                        y += +args[i + 1];\r\n                        this.lineTo(x, y);\r\n                    }\r\n                    break;\r\n                case \"H\":\r\n                    checkMinArgs(name, args.length, 1);\r\n                    for (let i = 0; i < args.length; ++i) {\r\n                        x = +args[i];\r\n                        this.lineTo(x, y);\r\n                    }\r\n                    break;\r\n                case \"h\":\r\n                    checkMinArgs(name, args.length, 1);\r\n                    for (let i = 0; i < args.length; ++i) {\r\n                        x += +args[i];\r\n                        this.lineTo(x, y);\r\n                    }\r\n                    break;\r\n                case \"V\":\r\n                    checkMinArgs(name, args.length, 1);\r\n                    for (let i = 0; i < args.length; ++i) {\r\n                        y = +args[i];\r\n                        this.lineTo(x, y);\r\n                    }\r\n                    break;\r\n                case \"v\":\r\n                    checkMinArgs(name, args.length, 1);\r\n                    for (let i = 0; i < args.length; ++i) {\r\n                        y += +args[i];\r\n                        this.lineTo(x, y);\r\n                    }\r\n                    break;\r\n                case \"C\":\r\n                    checkEvenArgs(name, args.length, 6);\r\n                    for (let i = 0; i < args.length; i += 6) {\r\n                        const x1 = +args[i];\r\n                        const y1 = +args[i + 1];\r\n                        cpx = +args[i + 2];\r\n                        cpy = +args[i + 3];\r\n                        x = +args[i + 4];\r\n                        y = +args[i + 5];\r\n                        this.bezierCurveTo(x1, y1, cpx, cpy, x, y);\r\n                    }\r\n                    break;\r\n                case \"c\":\r\n                    checkEvenArgs(name, args.length, 6);\r\n                    for (let i = 0; i < args.length; i += 6) {\r\n                        const x1 = +args[i] + x;\r\n                        const y1 = +args[i + 1] + y;\r\n                        cpx = +args[i + 2] + x;\r\n                        cpy = +args[i + 3] + y;\r\n                        x += +args[i + 4];\r\n                        y += +args[i + 5];\r\n                        this.bezierCurveTo(x1, y1, cpx, cpy, x, y);\r\n                    }\r\n                    break;\r\n                case \"S\":\r\n                    checkEvenArgs(name, args.length, 4);\r\n                    if (cpx === null || cpy === null) {\r\n                        cpx = x;\r\n                        cpy = y;\r\n                    }\r\n                    for (let i = 0; i < args.length; i += 4) {\r\n                        const x1 = 2 * x - cpx;\r\n                        const y1 = 2 * y - cpy;\r\n                        cpx = +args[i];\r\n                        cpy = +args[i + 1];\r\n                        x = +args[i + 2];\r\n                        y = +args[i + 3];\r\n                        this.bezierCurveTo(x1, y1, cpx, cpy, x, y);\r\n                    }\r\n                    break;\r\n                case \"s\":\r\n                    checkEvenArgs(name, args.length, 4);\r\n                    if (cpx === null || cpy === null) {\r\n                        cpx = x;\r\n                        cpy = y;\r\n                    }\r\n                    for (let i = 0; i < args.length; i += 4) {\r\n                        const x1 = 2 * x - cpx;\r\n                        const y1 = 2 * y - cpy;\r\n                        cpx = +args[i] + x;\r\n                        cpy = +args[i + 1] + y;\r\n                        x += +args[i + 2];\r\n                        y += +args[i + 3];\r\n                        this.bezierCurveTo(x1, y1, cpx, cpy, x, y);\r\n                    }\r\n                    break;\r\n                case \"Q\":\r\n                    checkEvenArgs(name, args.length, 4);\r\n                    for (let i = 0; i < args.length; i += 4) {\r\n                        qcpx = +args[i];\r\n                        qcpy = +args[i + 1];\r\n                        x = +args[i + 2];\r\n                        y = +args[i + 3];\r\n                        this.quadraticCurveTo(qcpx, qcpy, x, y);\r\n                    }\r\n                    break;\r\n                case \"q\":\r\n                    checkEvenArgs(name, args.length, 4);\r\n                    for (let i = 0; i < args.length; i += 4) {\r\n                        qcpx = +args[i] + x;\r\n                        qcpy = +args[i + 1] + y;\r\n                        x += +args[i + 2];\r\n                        y += +args[i + 3];\r\n                        this.quadraticCurveTo(qcpx, qcpy, x, y);\r\n                    }\r\n                    break;\r\n                case \"T\":\r\n                    checkEvenArgs(name, args.length, 2);\r\n                    if (qcpx === null || qcpy === null) {\r\n                        qcpx = x;\r\n                        qcpy = y;\r\n                    }\r\n                    for (let i = 0; i < args.length; i += 2) {\r\n                        qcpx = 2 * x - qcpx;\r\n                        qcpy = 2 * y - qcpy;\r\n                        x = +args[i];\r\n                        y = +args[i + 1];\r\n                        this.quadraticCurveTo(qcpx, qcpy, x, y);\r\n                    }\r\n                    break;\r\n                case \"t\":\r\n                    checkEvenArgs(name, args.length, 2);\r\n                    if (qcpx === null || qcpy === null) {\r\n                        qcpx = x;\r\n                        qcpy = y;\r\n                    }\r\n                    for (let i = 0; i < args.length; i += 2) {\r\n                        qcpx = 2 * x - qcpx;\r\n                        qcpy = 2 * y - qcpy;\r\n                        x += +args[i];\r\n                        y += +args[i + 1];\r\n                        this.quadraticCurveTo(qcpx, qcpy, x, y);\r\n                    }\r\n                    break;\r\n                case \"A\":\r\n                case \"a\":\r\n                    const relative = (name === \"a\");\r\n                    splitArcFlags(args);\r\n                    checkEvenArgs(name, args.length, 7);\r\n                    for (let i = 0; i < args.length; i += 7) {\r\n                        let cx = +args[i + 5];\r\n                        let cy = +args[i + 6];\r\n                        if (relative) {\r\n                            cx += x;\r\n                            cy += y;\r\n                        }\r\n                        const bs = arcToBezier({\r\n                            px: x,\r\n                            py: y,\r\n                            rx: +args[i],\r\n                            ry: +args[i + 1],\r\n                            xAxisRotation: +args[i + 2],\r\n                            largeArcFlag: assertBinary(+args[i + 3]),\r\n                            sweepFlag: assertBinary(+args[i + 4]),\r\n                            cx,\r\n                            cy,\r\n                        });\r\n                        $array.each(bs, (b) => {\r\n                            this.bezierCurveTo(b.x1, b.y1, b.x2, b.y2, b.x, b.y);\r\n                            x = b.x;\r\n                            y = b.y;\r\n                        });\r\n                    }\r\n                    break;\r\n                case \"Z\":\r\n                case \"z\":\r\n                    checkArgs(name, args.length, 0);\r\n                    this.closePath();\r\n                    break;\r\n            }\r\n        }\r\n    }\r\n    _runPath(context) {\r\n        context.beginPath();\r\n        $array.each(this._operations, (op) => {\r\n            op.path(context);\r\n        });\r\n    }\r\n    _render(status) {\r\n        super._render(status);\r\n        const layerDirty = status.layer.dirty;\r\n        const interactive = this._isInteractive(status);\r\n        if (layerDirty || interactive) {\r\n            const context = status.layer.context;\r\n            const ghostContext = this._renderer._ghostLayer.context;\r\n            if (layerDirty) {\r\n                context.globalCompositeOperation = this.blendMode;\r\n                context.beginPath();\r\n            }\r\n            let color;\r\n            if (interactive) {\r\n                ghostContext.beginPath();\r\n                color = this._getColorId();\r\n            }\r\n            $array.each(this._operations, (op) => {\r\n                if (layerDirty) {\r\n                    op.path(context);\r\n                    op.colorize(context, undefined);\r\n                }\r\n                if (interactive) {\r\n                    op.pathGhost(ghostContext);\r\n                    op.colorizeGhost(ghostContext, color);\r\n                }\r\n            });\r\n        }\r\n    }\r\n    renderDetached(context) {\r\n        if (this.visible) {\r\n            this._setMatrix();\r\n            context.save();\r\n            // We must apply the mask before we transform the element\r\n            const mask = this.mask;\r\n            if (mask) {\r\n                mask._setMatrix();\r\n                mask._transform(context, 1);\r\n                mask._runPath(context);\r\n                context.clip();\r\n            }\r\n            // TODO handle compoundAlpha somehow ?\r\n            context.globalAlpha = this.compoundAlpha * this.alpha;\r\n            this._transform(context, 1);\r\n            if (this.filter) {\r\n                context.filter = this.filter;\r\n            }\r\n            context.globalCompositeOperation = this.blendMode;\r\n            context.beginPath();\r\n            $array.each(this._operations, (op) => {\r\n                op.path(context);\r\n                op.colorize(context, undefined);\r\n            });\r\n            context.restore();\r\n        }\r\n    }\r\n    _addBounds(bounds) {\r\n        if (this.visible && this.isMeasured) {\r\n            $array.each(this._operations, (op) => {\r\n                op.addBounds(bounds);\r\n            });\r\n        }\r\n    }\r\n}\r\n/**\r\n * @ignore\r\n */\r\nexport class CanvasText extends CanvasDisplayObject {\r\n    constructor(renderer, text, style) {\r\n        super(renderer);\r\n        Object.defineProperty(this, \"text\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"style\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"resolution\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: 1\r\n        });\r\n        Object.defineProperty(this, \"textVisible\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: true\r\n        });\r\n        Object.defineProperty(this, \"_textInfo\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"_originalScale\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: 1\r\n        });\r\n        this.text = text;\r\n        this.style = style;\r\n    }\r\n    invalidateBounds() {\r\n        super.invalidateBounds();\r\n        this._textInfo = undefined;\r\n    }\r\n    _shared(context) {\r\n        if (this.style.textAlign) {\r\n            context.textAlign = this.style.textAlign;\r\n        }\r\n        if (this.style.direction) {\r\n            context.direction = this.style.direction;\r\n        }\r\n        if (this.style.textBaseline) {\r\n            context.textBaseline = this.style.textBaseline;\r\n        }\r\n    }\r\n    _prerender(status, ignoreGhost = false, ignoreFontWeight = false) {\r\n        super._render(status);\r\n        const context = status.layer.context;\r\n        const ghostContext = this._renderer._ghostLayer.context;\r\n        // Font style\r\n        const style = this.style;\r\n        let fontStyle = this._getFontStyle(undefined, ignoreFontWeight);\r\n        context.font = fontStyle;\r\n        if (this._isInteractive(status) && !ignoreGhost) {\r\n            ghostContext.font = fontStyle;\r\n        }\r\n        // Other parameters\r\n        if (style.fill) {\r\n            if (style.fill instanceof Color) {\r\n                context.fillStyle = style.fill.toCSS(style.fillOpacity != undefined ? style.fillOpacity : 1);\r\n            }\r\n            else {\r\n                context.fillStyle = style.fill;\r\n            }\r\n        }\r\n        if (style.shadowColor) {\r\n            status.layer.context.shadowColor = style.shadowColor.toCSS(style.shadowOpacity || 1);\r\n        }\r\n        if (style.shadowBlur) {\r\n            status.layer.context.shadowBlur = style.shadowBlur;\r\n        }\r\n        if (style.shadowOffsetX) {\r\n            status.layer.context.shadowOffsetX = style.shadowOffsetX;\r\n        }\r\n        if (style.shadowOffsetY) {\r\n            status.layer.context.shadowOffsetY = style.shadowOffsetY;\r\n        }\r\n        this._shared(context);\r\n        if (this._isInteractive(status) && !ignoreGhost) {\r\n            ghostContext.fillStyle = this._getColorId();\r\n            this._shared(ghostContext);\r\n        }\r\n    }\r\n    _getFontStyle(style2, ignoreFontWeight = false) {\r\n        // Process defaults\r\n        const style = this.style;\r\n        let fontStyle = [];\r\n        if (style2 && style2.fontVariant) {\r\n            fontStyle.push(style2.fontVariant);\r\n        }\r\n        else if (style.fontVariant) {\r\n            fontStyle.push(style.fontVariant);\r\n        }\r\n        if (!ignoreFontWeight) {\r\n            if (style2 && style2.fontWeight) {\r\n                fontStyle.push(style2.fontWeight);\r\n            }\r\n            else if (style.fontWeight) {\r\n                fontStyle.push(style.fontWeight);\r\n            }\r\n        }\r\n        if (style2 && style2.fontStyle) {\r\n            fontStyle.push(style2.fontStyle);\r\n        }\r\n        else if (style.fontStyle) {\r\n            fontStyle.push(style.fontStyle);\r\n        }\r\n        if (style2 && style2.fontSize) {\r\n            if ($type.isNumber(style2.fontSize)) {\r\n                style2.fontSize = style2.fontSize + \"px\";\r\n            }\r\n            fontStyle.push(style2.fontSize);\r\n        }\r\n        else if (style.fontSize) {\r\n            if ($type.isNumber(style.fontSize)) {\r\n                style.fontSize = style.fontSize + \"px\";\r\n            }\r\n            fontStyle.push(style.fontSize);\r\n        }\r\n        if (style2 && style2.fontFamily) {\r\n            fontStyle.push(style2.fontFamily);\r\n        }\r\n        else if (style.fontFamily) {\r\n            fontStyle.push(style.fontFamily);\r\n        }\r\n        else if (fontStyle.length) {\r\n            fontStyle.push(\"Arial\");\r\n        }\r\n        return fontStyle.join(\" \");\r\n    }\r\n    _render(status) {\r\n        // We need measurements in order to properly position text for alignment\r\n        if (!this._textInfo) {\r\n            this._measure(status);\r\n        }\r\n        if (this.textVisible) {\r\n            const interactive = this._isInteractive(status);\r\n            const context = status.layer.context;\r\n            const layerDirty = status.layer.dirty;\r\n            const ghostContext = this._renderer._ghostLayer.context;\r\n            context.save();\r\n            ghostContext.save();\r\n            this._prerender(status);\r\n            // const lines = this.text.toString().replace(/\\r/g, \"\").split(/\\n/);\r\n            // const x = this._localBounds && (this._localBounds.left < 0) ? Math.abs(this._localBounds.left) : 0;\r\n            // Process text info produced by _measure()\r\n            $array.each(this._textInfo, (line, _index) => {\r\n                $array.each(line.textChunks, (chunk, _index) => {\r\n                    // Set style\r\n                    if (chunk.style) {\r\n                        context.save();\r\n                        ghostContext.save();\r\n                        context.font = chunk.style;\r\n                        if (this._isInteractive(status)) {\r\n                            ghostContext.font = chunk.style;\r\n                        }\r\n                    }\r\n                    if (chunk.fill) {\r\n                        context.save();\r\n                        context.fillStyle = chunk.fill.toCSS();\r\n                        // Color does not affect ghostContext so we not set it\r\n                    }\r\n                    // Draw text\r\n                    if (layerDirty) {\r\n                        context.fillText(chunk.text, chunk.offsetX, line.offsetY + chunk.offsetY);\r\n                    }\r\n                    // Draw underline\r\n                    if (chunk.textDecoration == \"underline\" || chunk.textDecoration == \"line-through\") {\r\n                        let thickness = 1;\r\n                        let offset = 1;\r\n                        let fontSize = chunk.height;\r\n                        const oversizedBehavior = this.style.oversizedBehavior || \"\";\r\n                        if ([\"truncate\", \"wrap\", \"wrap-no-break\"].indexOf(oversizedBehavior) > -1) {\r\n                            // Measure actual width of the text so the line fits\r\n                            const metrics = this._measureText(chunk.text, context);\r\n                            chunk.width = metrics.actualBoundingBoxLeft + metrics.actualBoundingBoxRight;\r\n                        }\r\n                        let offsetX = chunk.offsetX;\r\n                        switch (this.style.textAlign) {\r\n                            case \"right\":\r\n                            case \"end\":\r\n                                offsetX -= chunk.width;\r\n                                break;\r\n                            case \"center\":\r\n                                offsetX -= chunk.width / 2;\r\n                                break;\r\n                        }\r\n                        if (chunk.style) {\r\n                            const format = TextFormatter.getTextStyle(chunk.style);\r\n                            switch (format.fontWeight) {\r\n                                case \"bolder\":\r\n                                case \"bold\":\r\n                                case \"700\":\r\n                                case \"800\":\r\n                                case \"900\":\r\n                                    thickness = 2;\r\n                                    break;\r\n                            }\r\n                        }\r\n                        if (fontSize) {\r\n                            offset = fontSize / 20;\r\n                        }\r\n                        let y;\r\n                        if (chunk.textDecoration == \"line-through\") {\r\n                            y = thickness + line.offsetY + chunk.offsetY - chunk.height / 2;\r\n                        }\r\n                        else {\r\n                            y = thickness + offset * 1.5 + line.offsetY + chunk.offsetY;\r\n                        }\r\n                        context.save();\r\n                        context.beginPath();\r\n                        if (chunk.fill) {\r\n                            context.strokeStyle = chunk.fill.toCSS();\r\n                        }\r\n                        else if (this.style.fill && this.style.fill instanceof Color) {\r\n                            context.strokeStyle = this.style.fill.toCSS();\r\n                        }\r\n                        context.lineWidth = thickness * offset;\r\n                        context.moveTo(offsetX, y);\r\n                        context.lineTo(offsetX + chunk.width, y);\r\n                        context.stroke();\r\n                        context.restore();\r\n                    }\r\n                    if (interactive && this.interactive) {\r\n                        // Draw text in ghost canvas ONLY if it is set as interactive\r\n                        // explicitly. This way we avoid hit test anomalies caused by anti\r\n                        // aliasing of text.\r\n                        ghostContext.fillText(chunk.text, chunk.offsetX, line.offsetY + chunk.offsetY);\r\n                    }\r\n                    if (chunk.fill) {\r\n                        context.restore();\r\n                        // Color does not affect ghostContext so we not set it\r\n                    }\r\n                    // Reset style\r\n                    if (chunk.style) {\r\n                        context.restore();\r\n                        ghostContext.restore();\r\n                    }\r\n                });\r\n            });\r\n            context.restore();\r\n            ghostContext.restore();\r\n        }\r\n    }\r\n    _addBounds(bounds) {\r\n        if (this.visible && this.isMeasured) {\r\n            //if (this._textVisible) {\r\n            const x = this._measure({\r\n                inactive: this.inactive,\r\n                layer: this.getLayer(),\r\n            });\r\n            setPoint(bounds, { x: x.left, y: x.top });\r\n            setPoint(bounds, { x: x.right, y: x.bottom });\r\n            //}\r\n        }\r\n    }\r\n    _ignoreFontWeight() {\r\n        return /apple/i.test(navigator.vendor);\r\n    }\r\n    _measure(status) {\r\n        const context = status.layer.context;\r\n        const ghostContext = this._renderer._ghostLayer.context;\r\n        const rtl = this.style.direction == \"rtl\";\r\n        // Reset text info\r\n        this._textInfo = [];\r\n        // Init\r\n        const oversizedBehavior = this.style.oversizedBehavior;\r\n        const maxWidth = this.style.maxWidth;\r\n        const truncate = $type.isNumber(maxWidth) && oversizedBehavior == \"truncate\";\r\n        const wrap = $type.isNumber(maxWidth) && (oversizedBehavior == \"wrap\" || oversizedBehavior == \"wrap-no-break\");\r\n        // Pre-render\r\n        context.save();\r\n        ghostContext.save();\r\n        this._prerender(status, true, this._ignoreFontWeight());\r\n        // Get default font metrix\r\n        const refText = \"abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789 \";\r\n        // Split up text into lines\r\n        const lines = this.text.toString().replace(/\\r/g, \"\").split(/\\n/);\r\n        let styleRestored = true;\r\n        let minX = 0;\r\n        let maxX = 0;\r\n        // Iterate through the lines\r\n        let offsetY = 0;\r\n        let currentStyle;\r\n        $array.each(lines, (line, _index) => {\r\n            // Split up line into format/value chunks\r\n            let chunks;\r\n            if (line == \"\") {\r\n                chunks = [{\r\n                        type: \"value\",\r\n                        text: \"\"\r\n                    }];\r\n            }\r\n            else {\r\n                chunks = TextFormatter.chunk(line, false, this.style.ignoreFormatting);\r\n            }\r\n            while (chunks.length > 0) {\r\n                // Init line object\r\n                let lineInfo = {\r\n                    offsetY: offsetY,\r\n                    ascent: 0,\r\n                    width: 0,\r\n                    height: 0,\r\n                    left: 0,\r\n                    right: 0,\r\n                    textChunks: []\r\n                };\r\n                // Measure reference text\r\n                const metrics = this._measureText(refText, context);\r\n                const height = metrics.actualBoundingBoxAscent + metrics.actualBoundingBoxDescent;\r\n                lineInfo.height = height;\r\n                lineInfo.ascent = metrics.actualBoundingBoxAscent;\r\n                let currentFormat;\r\n                let currentDecoration = this.style.textDecoration;\r\n                let currentFill;\r\n                let currentChunkWidth;\r\n                let skipFurtherText = false;\r\n                let firstTextChunk = true;\r\n                let leftoverChunks = [];\r\n                let currentVerticalAlign;\r\n                //let offsetX = 0;\r\n                //let chunk;\r\n                //while(chunk = chunks.shift()) {\r\n                $array.eachContinue(chunks, (chunk, index) => {\r\n                    // Format chunk\r\n                    if (chunk.type == \"format\") {\r\n                        if (chunk.text == \"[/]\") {\r\n                            if (!styleRestored) {\r\n                                context.restore();\r\n                                ghostContext.restore();\r\n                                styleRestored = true;\r\n                            }\r\n                            currentFill = undefined;\r\n                            currentStyle = undefined;\r\n                            currentChunkWidth = undefined;\r\n                            currentDecoration = this.style.textDecoration;\r\n                            currentVerticalAlign = undefined;\r\n                            currentFormat = chunk.text;\r\n                        }\r\n                        else {\r\n                            if (!styleRestored) {\r\n                                context.restore();\r\n                                ghostContext.restore();\r\n                            }\r\n                            let format = TextFormatter.getTextStyle(chunk.text);\r\n                            const fontStyle = this._getFontStyle(format);\r\n                            context.save();\r\n                            ghostContext.save();\r\n                            context.font = fontStyle;\r\n                            currentStyle = fontStyle;\r\n                            currentFormat = chunk.text;\r\n                            if (format.textDecoration) {\r\n                                currentDecoration = format.textDecoration;\r\n                            }\r\n                            if (format.fill) {\r\n                                currentFill = format.fill;\r\n                            }\r\n                            if (format.width) {\r\n                                currentChunkWidth = $type.toNumber(format.width);\r\n                            }\r\n                            if (format.verticalAlign) {\r\n                                currentVerticalAlign = format.verticalAlign;\r\n                            }\r\n                            styleRestored = false;\r\n                            // Measure reference text after change of format\r\n                            const metrics = this._measureText(refText, context);\r\n                            const height = metrics.actualBoundingBoxAscent + metrics.actualBoundingBoxDescent;\r\n                            if (height > lineInfo.height) {\r\n                                lineInfo.height = height;\r\n                            }\r\n                            if (metrics.actualBoundingBoxAscent > lineInfo.ascent) {\r\n                                lineInfo.ascent = metrics.actualBoundingBoxAscent;\r\n                            }\r\n                        }\r\n                    }\r\n                    // Text chunk\r\n                    else if (chunk.type == \"value\" && !skipFurtherText) {\r\n                        // Measure\r\n                        const metrics = this._measureText(chunk.text, context);\r\n                        let chunkWidth = metrics.actualBoundingBoxLeft + metrics.actualBoundingBoxRight;\r\n                        // Check for fit\r\n                        if (truncate) {\r\n                            // Break words?\r\n                            let breakWords = firstTextChunk || this.style.breakWords || false;\r\n                            // Measure ellipsis and check if it fits\r\n                            const ellipsis = this.style.ellipsis || \"\";\r\n                            const ellipsisMetrics = this._measureText(ellipsis, context);\r\n                            const ellipsisWidth = ellipsisMetrics.actualBoundingBoxLeft + ellipsisMetrics.actualBoundingBoxRight;\r\n                            // Check fit\r\n                            if ((lineInfo.width + chunkWidth) > maxWidth) {\r\n                                const excessWidth = maxWidth - lineInfo.width - ellipsisWidth;\r\n                                chunk.text = this._truncateText(context, chunk.text, excessWidth, breakWords);\r\n                                chunk.text += ellipsis;\r\n                                skipFurtherText = true;\r\n                            }\r\n                        }\r\n                        else if (wrap) {\r\n                            // Check fit\r\n                            if ((lineInfo.width + chunkWidth) > maxWidth) {\r\n                                const excessWidth = maxWidth - lineInfo.width;\r\n                                const tmpText = this._truncateText(context, chunk.text, excessWidth, false, (firstTextChunk && this.style.oversizedBehavior != \"wrap-no-break\"));\r\n                                if (tmpText == \"\") {\r\n                                    // Unable to fit a single letter - hide the whole label\r\n                                    this.textVisible = true;\r\n                                    return false;\r\n                                }\r\n                                //skipFurtherText = true;\r\n                                //Add remaining chunks for the next line\r\n                                leftoverChunks = chunks.slice(index + 1);\r\n                                //Add remaining text of current chunk if it was forced-cut\r\n                                if ($utils.trim(tmpText) != $utils.trim(chunk.text)) {\r\n                                    leftoverChunks.unshift({\r\n                                        type: \"value\",\r\n                                        text: chunk.text.substr(tmpText.length)\r\n                                    });\r\n                                    if (currentFormat) {\r\n                                        leftoverChunks.unshift({\r\n                                            type: \"format\",\r\n                                            text: currentFormat\r\n                                        });\r\n                                    }\r\n                                }\r\n                                // Set current chunk (truncated)\r\n                                chunk.text = $utils.trim(tmpText);\r\n                                chunks = [];\r\n                                skipFurtherText = true;\r\n                            }\r\n                        }\r\n                        // Chunk width?\r\n                        let leftBoundMod = 1;\r\n                        let rightBoundMod = 1;\r\n                        if (currentStyle && currentChunkWidth && (currentChunkWidth > chunkWidth)) {\r\n                            // increase horizontal bounding boxes accordingly\r\n                            const boundsMod = chunkWidth / currentChunkWidth;\r\n                            switch (this.style.textAlign) {\r\n                                case \"right\":\r\n                                case \"end\":\r\n                                    leftBoundMod = boundsMod;\r\n                                    break;\r\n                                case \"center\":\r\n                                    leftBoundMod = boundsMod;\r\n                                    rightBoundMod = boundsMod;\r\n                                    break;\r\n                                default:\r\n                                    rightBoundMod = boundsMod;\r\n                            }\r\n                            chunkWidth = currentChunkWidth;\r\n                        }\r\n                        const chunkHeight = metrics.actualBoundingBoxAscent + metrics.actualBoundingBoxDescent;\r\n                        if (chunkHeight > lineInfo.height) {\r\n                            lineInfo.height = chunkHeight;\r\n                        }\r\n                        if (metrics.actualBoundingBoxAscent > lineInfo.ascent) {\r\n                            lineInfo.ascent = metrics.actualBoundingBoxAscent;\r\n                        }\r\n                        lineInfo.width += chunkWidth;\r\n                        lineInfo.left += metrics.actualBoundingBoxLeft / leftBoundMod;\r\n                        lineInfo.right += metrics.actualBoundingBoxRight / rightBoundMod;\r\n                        lineInfo.textChunks.push({\r\n                            style: currentStyle,\r\n                            fill: currentFill,\r\n                            text: chunk.text,\r\n                            width: chunkWidth,\r\n                            height: chunkHeight,\r\n                            left: metrics.actualBoundingBoxLeft,\r\n                            right: metrics.actualBoundingBoxRight,\r\n                            ascent: metrics.actualBoundingBoxAscent,\r\n                            offsetX: 0,\r\n                            offsetY: 0,\r\n                            textDecoration: currentDecoration,\r\n                            verticalAlign: currentVerticalAlign\r\n                        });\r\n                        //offsetX += chunkWidth;\r\n                        firstTextChunk = false;\r\n                    }\r\n                    if (leftoverChunks) {\r\n                        //return false;\r\n                    }\r\n                    return true;\r\n                    //}\r\n                });\r\n                if (this.style.lineHeight instanceof Percent) {\r\n                    lineInfo.height *= this.style.lineHeight.value;\r\n                    lineInfo.ascent *= this.style.lineHeight.value;\r\n                }\r\n                else {\r\n                    lineInfo.height *= this.style.lineHeight || 1.2;\r\n                    lineInfo.ascent *= this.style.lineHeight || 1.2;\r\n                }\r\n                if (minX < lineInfo.left) {\r\n                    minX = lineInfo.left;\r\n                }\r\n                if (maxX < lineInfo.right) {\r\n                    maxX = lineInfo.right;\r\n                }\r\n                this._textInfo.push(lineInfo);\r\n                //lineInfo.offsetY += lineInfo.ascent;\r\n                offsetY += lineInfo.height;\r\n                // Reset chunks so that it can proceed to the next line\r\n                chunks = leftoverChunks || [];\r\n            }\r\n        });\r\n        if (!styleRestored) {\r\n            context.restore();\r\n            ghostContext.restore();\r\n        }\r\n        // Adjust chunk internal offsets\r\n        $array.each(this._textInfo, (lineInfo, _index) => {\r\n            let currentChunkOffset = 0;\r\n            $array.each(lineInfo.textChunks, (chunk) => {\r\n                chunk.offsetX = currentChunkOffset + chunk.left - lineInfo.left;\r\n                chunk.offsetY += lineInfo.height - lineInfo.height * (this.style.baselineRatio || 0.19);\r\n                currentChunkOffset += chunk.width;\r\n                if (chunk.verticalAlign) {\r\n                    switch (chunk.verticalAlign) {\r\n                        case \"super\":\r\n                            chunk.offsetY -= lineInfo.height / 2 - chunk.height / 2;\r\n                            break;\r\n                        case \"sub\":\r\n                            chunk.offsetY += chunk.height / 2;\r\n                            break;\r\n                    }\r\n                }\r\n            });\r\n        });\r\n        const bounds = {\r\n            left: rtl ? -maxX : -minX,\r\n            top: 0,\r\n            right: rtl ? minX : maxX,\r\n            bottom: offsetY,\r\n        };\r\n        // We need to fit?\r\n        if (oversizedBehavior !== \"none\") {\r\n            const ratio = this._fitRatio(bounds);\r\n            if (ratio < 1) {\r\n                if (oversizedBehavior == \"fit\") {\r\n                    if ($type.isNumber(this.style.minScale) && (ratio < this.style.minScale)) {\r\n                        this.textVisible = false;\r\n                        bounds.left = 0;\r\n                        bounds.top = 0;\r\n                        bounds.right = 0;\r\n                        bounds.bottom = 0;\r\n                    }\r\n                    else {\r\n                        if (!this._originalScale || this._originalScale == 1) {\r\n                            this._originalScale = this.scale;\r\n                        }\r\n                        this.scale = ratio;\r\n                        this.textVisible = true;\r\n                    }\r\n                }\r\n                else if (oversizedBehavior == \"hide\") {\r\n                    this.textVisible = false;\r\n                    bounds.left = 0;\r\n                    bounds.top = 0;\r\n                    bounds.right = 0;\r\n                    bounds.bottom = 0;\r\n                }\r\n                else {\r\n                    switch (this.style.textAlign) {\r\n                        case \"right\":\r\n                        case \"end\":\r\n                            bounds.left = -maxWidth;\r\n                            bounds.right = 0;\r\n                            break;\r\n                        case \"center\":\r\n                            bounds.left = -maxWidth / 2;\r\n                            bounds.right = maxWidth / 2;\r\n                            break;\r\n                        default:\r\n                            bounds.left = 0;\r\n                            bounds.right = maxWidth;\r\n                    }\r\n                    this.scale = this._originalScale || 1;\r\n                    this._originalScale = undefined;\r\n                    this.textVisible = true;\r\n                }\r\n            }\r\n            else {\r\n                this.scale = this._originalScale || 1;\r\n                this._originalScale = undefined;\r\n                this.textVisible = true;\r\n            }\r\n        }\r\n        context.restore();\r\n        ghostContext.restore();\r\n        return bounds;\r\n    }\r\n    _fitRatio(bounds) {\r\n        const maxW = this.style.maxWidth;\r\n        const maxH = this.style.maxHeight;\r\n        if (!$type.isNumber(maxW) && !$type.isNumber(maxH)) {\r\n            return 1;\r\n        }\r\n        const w = bounds.right - bounds.left;\r\n        const h = bounds.bottom - bounds.top;\r\n        return Math.min(maxW / w || 1, maxH / h || 1);\r\n    }\r\n    _truncateText(context, text, maxWidth, breakWords = false, fallbackBreakWords = true) {\r\n        let width;\r\n        do {\r\n            if (breakWords) {\r\n                text = text.slice(0, -1);\r\n            }\r\n            else {\r\n                let tmp = text.replace(/[^,;:!?\\\\\\/\\s]+[,;:!?\\\\\\/\\s]*$/g, \"\");\r\n                if ((tmp == \"\" || tmp === text) && fallbackBreakWords) {\r\n                    breakWords = true;\r\n                }\r\n                else if (tmp == \"\") {\r\n                    return text;\r\n                }\r\n                else {\r\n                    text = tmp;\r\n                }\r\n            }\r\n            const metrics = this._measureText(text, context);\r\n            width = metrics.actualBoundingBoxLeft + metrics.actualBoundingBoxRight;\r\n        } while ((width > maxWidth) && text != \"\");\r\n        return text;\r\n    }\r\n    _measureText(text, context) {\r\n        let metrics = context.measureText(text);\r\n        let fakeMetrics = {};\r\n        if (metrics.actualBoundingBoxAscent == null) {\r\n            const div = document.createElement(\"div\");\r\n            div.innerText = text;\r\n            div.style.visibility = \"hidden\";\r\n            div.style.position = \"absolute\";\r\n            div.style.top = \"-1000000px;\";\r\n            div.style.fontFamily = this.style.fontFamily || \"\";\r\n            div.style.fontSize = this.style.fontSize + \"\";\r\n            document.body.appendChild(div);\r\n            const bbox = div.getBoundingClientRect();\r\n            document.body.removeChild(div);\r\n            const h = bbox.height;\r\n            const w = metrics.width;\r\n            let left = 0;\r\n            let right = w;\r\n            fakeMetrics = {\r\n                actualBoundingBoxAscent: h,\r\n                actualBoundingBoxDescent: 0,\r\n                actualBoundingBoxLeft: left,\r\n                actualBoundingBoxRight: right,\r\n                fontBoundingBoxAscent: h,\r\n                fontBoundingBoxDescent: 0,\r\n                width: w\r\n            };\r\n            //return fake;\r\n        }\r\n        else {\r\n            fakeMetrics = {\r\n                actualBoundingBoxAscent: metrics.actualBoundingBoxAscent,\r\n                actualBoundingBoxDescent: metrics.actualBoundingBoxDescent,\r\n                actualBoundingBoxLeft: metrics.actualBoundingBoxLeft,\r\n                actualBoundingBoxRight: metrics.actualBoundingBoxRight,\r\n                fontBoundingBoxAscent: metrics.actualBoundingBoxAscent,\r\n                fontBoundingBoxDescent: metrics.actualBoundingBoxDescent,\r\n                width: metrics.width\r\n            };\r\n        }\r\n        const w = metrics.width;\r\n        switch (this.style.textAlign) {\r\n            case \"right\":\r\n            case \"end\":\r\n                fakeMetrics.actualBoundingBoxLeft = w;\r\n                fakeMetrics.actualBoundingBoxRight = 0;\r\n                break;\r\n            case \"center\":\r\n                fakeMetrics.actualBoundingBoxLeft = w / 2;\r\n                fakeMetrics.actualBoundingBoxRight = w / 2;\r\n                break;\r\n            default:\r\n                fakeMetrics.actualBoundingBoxLeft = 0;\r\n                fakeMetrics.actualBoundingBoxRight = w;\r\n        }\r\n        return fakeMetrics;\r\n    }\r\n}\r\n/**\r\n * @ignore\r\n */\r\nexport class CanvasTextStyle {\r\n    constructor() {\r\n        //public wordWrapWidth: number = 100;\r\n        Object.defineProperty(this, \"fill\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"fillOpacity\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"textAlign\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"fontFamily\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"fontSize\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"fontWeight\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"fontStyle\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"fontVariant\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"textDecoration\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"shadowColor\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"shadowBlur\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"shadowOffsetX\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"shadowOffsetY\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"shadowOpacity\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        // leading?: number;\r\n        // letterSpacing?: number;\r\n        Object.defineProperty(this, \"lineHeight\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: percent(120)\r\n        });\r\n        Object.defineProperty(this, \"baselineRatio\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: 0.19\r\n        });\r\n        // padding?: number;\r\n        // stroke?: number;\r\n        // strokeThickness?: number;\r\n        // trim?: number;\r\n        // wordWrap?: boolean;\r\n        Object.defineProperty(this, \"direction\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"textBaseline\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"oversizedBehavior\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: \"none\"\r\n        });\r\n        Object.defineProperty(this, \"breakWords\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: false\r\n        });\r\n        Object.defineProperty(this, \"ellipsis\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: \"\"\r\n        });\r\n        Object.defineProperty(this, \"maxWidth\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"maxHeight\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"minScale\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"ignoreFormatting\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: false\r\n        });\r\n    }\r\n}\r\n/**\r\n * @ignore\r\n */\r\nexport class CanvasRadialText extends CanvasText {\r\n    constructor() {\r\n        super(...arguments);\r\n        Object.defineProperty(this, \"textType\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: \"circular\"\r\n        });\r\n        Object.defineProperty(this, \"radius\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"startAngle\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"inside\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: false\r\n        });\r\n        Object.defineProperty(this, \"orientation\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: \"auto\"\r\n        });\r\n        Object.defineProperty(this, \"kerning\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: 0\r\n        });\r\n        Object.defineProperty(this, \"_textReversed\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: false\r\n        });\r\n    }\r\n    _render(status) {\r\n        switch (this.textType) {\r\n            case \"circular\":\r\n                this._renderCircular(status);\r\n                break;\r\n            default:\r\n                super._render(status);\r\n                break;\r\n        }\r\n    }\r\n    _renderCircular(status) {\r\n        if (this.textVisible) {\r\n            this._prerender(status);\r\n            const interactive = this._isInteractive(status);\r\n            const context = status.layer.context;\r\n            const layerDirty = status.layer.dirty;\r\n            const ghostContext = this._renderer._ghostLayer.context;\r\n            // Savepoint\r\n            context.save();\r\n            if (interactive) {\r\n                ghostContext.save();\r\n            }\r\n            // We need measurements in order to properly position text for alignment\r\n            if (!this._textInfo) {\r\n                this._measure(status);\r\n            }\r\n            // Init\r\n            let radius = (this.radius || 0);\r\n            let startAngle = (this.startAngle || 0);\r\n            let deltaAngle = 0;\r\n            let orientation = this.orientation;\r\n            let inward = orientation == \"auto\" ? \"auto\" : orientation == \"inward\";\r\n            const inside = this.inside;\r\n            const align = this.style.textAlign || \"left\";\r\n            const kerning = this.kerning || 0;\r\n            let clockwise = align == \"left\" ? 1 : -1;\r\n            const shouldReverse = !this._textReversed;\r\n            // Check if we need to invert the whole stuff\r\n            if (inward == \"auto\") {\r\n                // Calc max angle so we know whether we need to flip it\r\n                let maxAngle = 0;\r\n                let midAngle = 0;\r\n                $array.each(this._textInfo, (line, _index) => {\r\n                    const deltaAngle = startAngle + (line.width / (radius - line.height)) / 2 * -clockwise;\r\n                    if (deltaAngle > maxAngle) {\r\n                        maxAngle = deltaAngle;\r\n                    }\r\n                });\r\n                if (align == \"left\") {\r\n                    midAngle = (maxAngle + deltaAngle / 2) * $math.DEGREES;\r\n                }\r\n                else if (align == \"right\") {\r\n                    midAngle = (maxAngle - deltaAngle / 2) * $math.DEGREES;\r\n                }\r\n                else {\r\n                    midAngle = startAngle * $math.DEGREES;\r\n                }\r\n                midAngle = $math.normalizeAngle(midAngle);\r\n                inward = (midAngle >= 270) || (midAngle <= 90);\r\n            }\r\n            if (inward == true && shouldReverse) {\r\n                this._textInfo.reverse();\r\n                this._textReversed = true;\r\n            }\r\n            // if ((inward == false && align == \"left\") || (inward == true && align == \"right\")) {\r\n            // \tclockwise *= -1;\r\n            // }\r\n            // Process text info produced by _measure()\r\n            $array.each(this._textInfo, (line, _index) => {\r\n                const textHeight = line.height;\r\n                // Adjust radius (for `inside = false`)\r\n                // Radius adjustment for `inside = false` is below the line calculation\r\n                if (!inside) {\r\n                    radius += textHeight;\r\n                }\r\n                // Reverse letters if we're painting them counter-clockwise\r\n                if (((clockwise == -1 && inward) || (clockwise == 1 && !inward)) && shouldReverse) {\r\n                    line.textChunks.reverse();\r\n                }\r\n                // Init angles\r\n                let lineStartAngle = startAngle;\r\n                deltaAngle = 0;\r\n                // Adjust for center-align\r\n                if (align == \"center\") {\r\n                    lineStartAngle += (line.width / (radius - textHeight)) / 2 * -clockwise;\r\n                    deltaAngle = lineStartAngle - startAngle;\r\n                }\r\n                // if (inward == \"auto\") {\r\n                // \tlet midAngle;\r\n                // \tif (align == \"left\") {\r\n                // \t\tmidAngle = (lineStartAngle + deltaAngle / 2) * $math.DEGREES;\r\n                // \t}\r\n                // \telse if () {\r\n                // \t\tmidAngle = (lineStartAngle - deltaAngle / 2) * $math.DEGREES;\r\n                // \t}\r\n                // \tinward = (midAngle >= 270) || (midAngle <= 90);\r\n                // }\r\n                // Rotate letters if they are facing outward\r\n                lineStartAngle += (Math.PI * (inward ? 0 : 1)); // Rotate 180 if outward\r\n                // Savepoint\r\n                context.save();\r\n                if (interactive) {\r\n                    ghostContext.save();\r\n                }\r\n                // Assume starting angle\r\n                context.rotate(lineStartAngle);\r\n                if (interactive) {\r\n                    ghostContext.rotate(lineStartAngle);\r\n                }\r\n                let angleShift = 0;\r\n                $array.each(line.textChunks, (chunk, _index) => {\r\n                    // Draw the letter\r\n                    const char = chunk.text;\r\n                    const charWidth = chunk.width;\r\n                    // Rotate half a letter\r\n                    angleShift = (charWidth / 2) / (radius - textHeight) * clockwise;\r\n                    context.rotate(angleShift);\r\n                    if (interactive) {\r\n                        ghostContext.rotate(angleShift);\r\n                    }\r\n                    // Set style\r\n                    if (chunk.style) {\r\n                        context.save();\r\n                        ghostContext.save();\r\n                        context.font = chunk.style;\r\n                        if (interactive) {\r\n                            ghostContext.font = chunk.style;\r\n                        }\r\n                    }\r\n                    if (chunk.fill) {\r\n                        context.save();\r\n                        context.fillStyle = chunk.fill.toCSS();\r\n                        // Color does not affect ghostContext so we not set it\r\n                    }\r\n                    // Center letters\r\n                    context.textBaseline = \"middle\";\r\n                    context.textAlign = \"center\";\r\n                    if (interactive) {\r\n                        ghostContext.textBaseline = \"middle\";\r\n                        ghostContext.textAlign = \"center\";\r\n                    }\r\n                    // Plop the letter\r\n                    if (layerDirty) {\r\n                        context.fillText(char, 0, (inward ? 1 : -1) * (0 - radius + textHeight / 2));\r\n                    }\r\n                    if (interactive) {\r\n                        ghostContext.fillText(char, 0, (inward ? 1 : -1) * (0 - radius + textHeight / 2));\r\n                    }\r\n                    if (chunk.fill) {\r\n                        context.restore();\r\n                        // Color does not affect ghostContext so we not set it\r\n                    }\r\n                    // Reset style\r\n                    if (chunk.style) {\r\n                        context.restore();\r\n                        ghostContext.restore();\r\n                    }\r\n                    // Rotate half a letter and add spacing\r\n                    angleShift = (charWidth / 2 + kerning) / (radius - textHeight) * clockwise;\r\n                    context.rotate(angleShift);\r\n                    if (interactive) {\r\n                        ghostContext.rotate(angleShift);\r\n                    }\r\n                });\r\n                // Restore angle\r\n                context.restore();\r\n                if (interactive) {\r\n                    ghostContext.restore();\r\n                }\r\n                // Adjust radius (for `inside = true`)\r\n                if (inside) {\r\n                    radius -= textHeight;\r\n                }\r\n            });\r\n            // Restore\r\n            context.restore();\r\n            if (interactive) {\r\n                ghostContext.restore();\r\n            }\r\n        }\r\n    }\r\n    _measure(status) {\r\n        switch (this.textType) {\r\n            case \"circular\":\r\n                return this._measureCircular(status);\r\n            default:\r\n                return super._measure(status);\r\n        }\r\n    }\r\n    _measureCircular(status) {\r\n        const context = status.layer.context;\r\n        const ghostContext = this._renderer._ghostLayer.context;\r\n        const rtl = this.style.direction == \"rtl\";\r\n        const oversizedBehavior = this.style.oversizedBehavior;\r\n        const maxWidth = this.style.maxWidth;\r\n        const truncate = $type.isNumber(maxWidth) && oversizedBehavior == \"truncate\";\r\n        const ellipsis = this.style.ellipsis || \"\";\r\n        let ellipsisMetrics;\r\n        //const wrap = $type.isNumber(maxWidth) && (oversizedBehavior == \"wrap\" || oversizedBehavior == \"wrap-no-break\");\r\n        // Reset text info\r\n        this.textVisible = true;\r\n        this._textInfo = [];\r\n        this._textReversed = false;\r\n        // Pre-render\r\n        context.save();\r\n        ghostContext.save();\r\n        this._prerender(status, true);\r\n        // Split up text into lines\r\n        const lines = this.text.toString().replace(/\\r/g, \"\").split(/\\n/);\r\n        let styleRestored = true;\r\n        let totalWidth = 0;\r\n        // Iterate through the lines\r\n        let offsetY = 0;\r\n        $array.each(lines, (line, _index) => {\r\n            // Split up line into format/value chunks\r\n            let chunks = TextFormatter.chunk(line, false, this.style.ignoreFormatting);\r\n            // Init line object\r\n            let lineInfo = {\r\n                offsetY: offsetY,\r\n                ascent: 0,\r\n                width: 0,\r\n                height: 0,\r\n                left: 0,\r\n                right: 0,\r\n                textChunks: []\r\n            };\r\n            let currentStyle;\r\n            let currentFill;\r\n            let currentChunkWidth;\r\n            //while(chunk = chunks.shift()) {\r\n            $array.each(chunks, (chunk, _index) => {\r\n                // Format chunk\r\n                if (chunk.type == \"format\") {\r\n                    if (chunk.text == \"[/]\") {\r\n                        if (!styleRestored) {\r\n                            context.restore();\r\n                            ghostContext.restore();\r\n                            styleRestored = true;\r\n                        }\r\n                        currentFill = undefined;\r\n                        currentStyle = undefined;\r\n                        currentChunkWidth = undefined;\r\n                    }\r\n                    else {\r\n                        let format = TextFormatter.getTextStyle(chunk.text);\r\n                        const fontStyle = this._getFontStyle(format);\r\n                        context.save();\r\n                        ghostContext.save();\r\n                        context.font = fontStyle;\r\n                        currentStyle = fontStyle;\r\n                        if (format.fill) {\r\n                            currentFill = format.fill;\r\n                        }\r\n                        if (format.width) {\r\n                            currentChunkWidth = $type.toNumber(format.width);\r\n                        }\r\n                        styleRestored = false;\r\n                    }\r\n                    if (truncate) {\r\n                        ellipsisMetrics = this._measureText(ellipsis, context);\r\n                    }\r\n                }\r\n                // Text format\r\n                else if (chunk.type == \"value\") {\r\n                    // Measure each letter\r\n                    let chars = chunk.text.match(/./ug) || [];\r\n                    if (rtl) {\r\n                        chars = $utils.splitString(chunk.text);\r\n                        chars.reverse();\r\n                    }\r\n                    for (let i = 0; i < chars.length; i++) {\r\n                        const char = chars[i];\r\n                        // Measure\r\n                        const metrics = this._measureText(char, context);\r\n                        let chunkWidth = metrics.width;\r\n                        // Chunk width?\r\n                        if (currentStyle && currentChunkWidth && (currentChunkWidth > chunkWidth)) {\r\n                            chunkWidth = currentChunkWidth;\r\n                        }\r\n                        const chunkHeight = metrics.actualBoundingBoxAscent + metrics.actualBoundingBoxDescent;\r\n                        if (chunkHeight > lineInfo.height) {\r\n                            lineInfo.height = chunkHeight;\r\n                        }\r\n                        if (metrics.actualBoundingBoxAscent > lineInfo.ascent) {\r\n                            lineInfo.ascent = metrics.actualBoundingBoxAscent;\r\n                        }\r\n                        totalWidth += chunkWidth;\r\n                        // Handle oversized behavior\r\n                        if (truncate) {\r\n                            // Measure ellipsis and check if it fits\r\n                            if (!ellipsisMetrics) {\r\n                                ellipsisMetrics = this._measureText(ellipsis, context);\r\n                            }\r\n                            const ellipsisWidth = ellipsisMetrics.actualBoundingBoxLeft + ellipsisMetrics.actualBoundingBoxRight;\r\n                            //totalWidth += ellipsisWidth;\r\n                            if ((totalWidth + ellipsisWidth) > maxWidth) {\r\n                                if (lineInfo.textChunks.length == 1) {\r\n                                    this.textVisible = false;\r\n                                }\r\n                                else {\r\n                                    lineInfo.width += ellipsisWidth;\r\n                                    lineInfo.left += ellipsisMetrics.actualBoundingBoxLeft;\r\n                                    lineInfo.right += ellipsisMetrics.actualBoundingBoxRight;\r\n                                    lineInfo.textChunks.push({\r\n                                        style: currentStyle,\r\n                                        fill: currentFill,\r\n                                        text: ellipsis,\r\n                                        width: ellipsisWidth,\r\n                                        height: chunkHeight + ellipsisMetrics.actualBoundingBoxDescent,\r\n                                        left: ellipsisMetrics.actualBoundingBoxLeft,\r\n                                        right: ellipsisMetrics.actualBoundingBoxRight,\r\n                                        ascent: ellipsisMetrics.actualBoundingBoxAscent,\r\n                                        offsetX: 0,\r\n                                        offsetY: chunkHeight,\r\n                                        textDecoration: undefined\r\n                                    });\r\n                                }\r\n                                break;\r\n                            }\r\n                        }\r\n                        lineInfo.width += chunkWidth;\r\n                        lineInfo.left += metrics.actualBoundingBoxLeft;\r\n                        lineInfo.right += metrics.actualBoundingBoxRight;\r\n                        lineInfo.textChunks.push({\r\n                            style: currentStyle,\r\n                            fill: currentFill,\r\n                            text: char,\r\n                            width: chunkWidth,\r\n                            height: chunkHeight + metrics.actualBoundingBoxDescent,\r\n                            left: metrics.actualBoundingBoxLeft,\r\n                            right: metrics.actualBoundingBoxRight,\r\n                            ascent: metrics.actualBoundingBoxAscent,\r\n                            offsetX: 0,\r\n                            offsetY: chunkHeight,\r\n                            textDecoration: undefined\r\n                        });\r\n                        if (rtl) {\r\n                            // @todo still needed?\r\n                            //break;\r\n                        }\r\n                    }\r\n                }\r\n            });\r\n            if (this.style.lineHeight instanceof Percent) {\r\n                lineInfo.height *= this.style.lineHeight.value;\r\n            }\r\n            else {\r\n                lineInfo.height *= this.style.lineHeight || 1.2;\r\n            }\r\n            this._textInfo.push(lineInfo);\r\n            //lineInfo.offsetY += lineInfo.ascent;\r\n            offsetY += lineInfo.height;\r\n        });\r\n        if (!styleRestored) {\r\n            context.restore();\r\n            ghostContext.restore();\r\n        }\r\n        if (oversizedBehavior == \"hide\" && (totalWidth > maxWidth)) {\r\n            this.textVisible = false;\r\n        }\r\n        // Adjust chunk internal offsets\r\n        $array.each(this._textInfo, (lineInfo) => {\r\n            $array.each(lineInfo.textChunks, (chunk) => {\r\n                chunk.offsetY += Math.round((lineInfo.height - chunk.height + (lineInfo.ascent - chunk.ascent)) / 2);\r\n            });\r\n        });\r\n        context.restore();\r\n        ghostContext.restore();\r\n        return {\r\n            left: 0,\r\n            top: 0,\r\n            right: 0,\r\n            bottom: 0,\r\n        };\r\n    }\r\n}\r\n/**\r\n * @ignore\r\n */\r\nexport class CanvasImage extends CanvasDisplayObject {\r\n    constructor(renderer, image) {\r\n        super(renderer);\r\n        Object.defineProperty(this, \"width\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"height\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"image\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"tainted\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"shadowColor\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"shadowBlur\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"shadowOffsetX\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"shadowOffsetY\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"shadowOpacity\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"_imageMask\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        this.image = image;\r\n    }\r\n    _dispose() {\r\n        super._dispose();\r\n        if (this._imageMask) {\r\n            clearCanvas(this._imageMask);\r\n        }\r\n    }\r\n    getLocalBounds() {\r\n        if (!this._localBounds) {\r\n            let w = 0;\r\n            let h = 0;\r\n            if (this.width) {\r\n                w = this.width;\r\n            }\r\n            if (this.height) {\r\n                h = this.height;\r\n            }\r\n            this._localBounds = {\r\n                left: 0,\r\n                top: 0,\r\n                right: w,\r\n                bottom: h\r\n            };\r\n            this._addBounds(this._localBounds);\r\n        }\r\n        return this._localBounds;\r\n    }\r\n    _render(status) {\r\n        super._render(status);\r\n        if (this.image) {\r\n            if (this.tainted === undefined) {\r\n                this.tainted = isTainted(this.image);\r\n                status.layer.tainted = true;\r\n            }\r\n            if (this.tainted && this._renderer._omitTainted) {\r\n                return;\r\n            }\r\n            if (status.layer.dirty) {\r\n                if (this.shadowColor) {\r\n                    status.layer.context.shadowColor = this.shadowColor.toCSS(this.shadowOpacity || 1);\r\n                }\r\n                if (this.shadowBlur) {\r\n                    status.layer.context.shadowBlur = this.shadowBlur;\r\n                }\r\n                if (this.shadowOffsetX) {\r\n                    status.layer.context.shadowOffsetX = this.shadowOffsetX;\r\n                }\r\n                if (this.shadowOffsetY) {\r\n                    status.layer.context.shadowOffsetY = this.shadowOffsetY;\r\n                }\r\n                // TODO should this round ?\r\n                const width = this.width || this.image.naturalWidth;\r\n                const height = this.height || this.image.naturalHeight;\r\n                status.layer.context.drawImage(this.image, 0, 0, width, height);\r\n            }\r\n            if (this.interactive && this._isInteractive(status)) {\r\n                const mask = this._getMask(this.image);\r\n                this._renderer._ghostLayer.context.drawImage(mask, 0, 0);\r\n            }\r\n        }\r\n    }\r\n    clear() {\r\n        super.clear();\r\n        this.image = undefined;\r\n        this._imageMask = undefined;\r\n    }\r\n    _getMask(image) {\r\n        if (this._imageMask === undefined) {\r\n            // TODO should this round ?\r\n            const width = this.width || image.naturalWidth;\r\n            const height = this.height || image.naturalHeight;\r\n            // We need to create a second canvas because destination-in clears out the entire canvas\r\n            const canvas = document.createElement(\"canvas\");\r\n            canvas.width = width;\r\n            canvas.height = height;\r\n            const context = canvas.getContext(\"2d\");\r\n            context.imageSmoothingEnabled = false;\r\n            context.fillStyle = this._getColorId();\r\n            context.fillRect(0, 0, width, height);\r\n            if (!isTainted(image)) {\r\n                context.globalCompositeOperation = \"destination-in\";\r\n                context.drawImage(image, 0, 0, width, height);\r\n            }\r\n            this._imageMask = canvas;\r\n        }\r\n        return this._imageMask;\r\n    }\r\n}\r\n/**\r\n * @ignore\r\n */\r\nexport class CanvasRendererEvent {\r\n    constructor(event, originalPoint, point, bbox) {\r\n        Object.defineProperty(this, \"event\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: event\r\n        });\r\n        Object.defineProperty(this, \"originalPoint\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: originalPoint\r\n        });\r\n        Object.defineProperty(this, \"point\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: point\r\n        });\r\n        Object.defineProperty(this, \"bbox\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: bbox\r\n        });\r\n        Object.defineProperty(this, \"id\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"simulated\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: false\r\n        });\r\n        Object.defineProperty(this, \"native\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: true\r\n        });\r\n        if ($utils.supports(\"touchevents\") && event instanceof Touch) {\r\n            this.id = event.identifier;\r\n        }\r\n        else {\r\n            this.id = null;\r\n        }\r\n    }\r\n}\r\n/**\r\n * @ignore\r\n */\r\nexport class CanvasRenderer extends ArrayDisposer {\r\n    constructor(resolution) {\r\n        super();\r\n        Object.defineProperty(this, \"view\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: document.createElement(\"div\")\r\n        });\r\n        Object.defineProperty(this, \"_layerDom\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: document.createElement(\"div\")\r\n        });\r\n        Object.defineProperty(this, \"layers\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: []\r\n        });\r\n        Object.defineProperty(this, \"_dirtyLayers\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: []\r\n        });\r\n        Object.defineProperty(this, \"defaultLayer\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: this.getLayer(0)\r\n        });\r\n        Object.defineProperty(this, \"_ghostLayer\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: new GhostLayer()\r\n        });\r\n        Object.defineProperty(this, \"_patternCanvas\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: document.createElement(\"canvas\")\r\n        });\r\n        Object.defineProperty(this, \"_patternContext\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: this._patternCanvas.getContext(\"2d\")\r\n        });\r\n        Object.defineProperty(this, \"_realWidth\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: 0\r\n        });\r\n        Object.defineProperty(this, \"_realHeight\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: 0\r\n        });\r\n        Object.defineProperty(this, \"_calculatedWidth\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: 0\r\n        });\r\n        Object.defineProperty(this, \"_calculatedHeight\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: 0\r\n        });\r\n        Object.defineProperty(this, \"resolution\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"interactionsEnabled\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: true\r\n        });\r\n        Object.defineProperty(this, \"_listeners\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: {}\r\n        });\r\n        Object.defineProperty(this, \"_events\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: {}\r\n        });\r\n        Object.defineProperty(this, \"_colorId\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: 0\r\n        });\r\n        Object.defineProperty(this, \"_colorMap\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: {}\r\n        });\r\n        Object.defineProperty(this, \"_forceInteractive\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: 0\r\n        });\r\n        Object.defineProperty(this, \"_omitTainted\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: false\r\n        });\r\n        // TODO this should store the Id as well\r\n        Object.defineProperty(this, \"_hovering\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: new Set()\r\n        });\r\n        Object.defineProperty(this, \"_dragging\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: []\r\n        });\r\n        Object.defineProperty(this, \"_mousedown\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: []\r\n        });\r\n        Object.defineProperty(this, \"_lastPointerMoveEvent\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"tapToActivate\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: false\r\n        });\r\n        Object.defineProperty(this, \"tapToActivateTimeout\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: 3000\r\n        });\r\n        Object.defineProperty(this, \"_touchActive\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: false\r\n        });\r\n        Object.defineProperty(this, \"_touchActiveTimeout\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        if (resolution == null) {\r\n            this.resolution = window.devicePixelRatio;\r\n        }\r\n        else {\r\n            this.resolution = resolution;\r\n        }\r\n        this.view.style.position = \"absolute\";\r\n        this.view.setAttribute(\"aria-hidden\", \"true\");\r\n        this.view.appendChild(this._layerDom);\r\n        this._disposers.push(new Disposer(() => {\r\n            $object.each(this._events, (_key, events) => {\r\n                events.disposer.dispose();\r\n            });\r\n            $array.each(this.layers, (layer) => {\r\n                clearCanvas(layer.view);\r\n                if (layer.exportableView) {\r\n                    clearCanvas(layer.exportableView);\r\n                }\r\n            });\r\n            clearCanvas(this._ghostLayer.view);\r\n            clearCanvas(this._patternCanvas);\r\n        }));\r\n        /*\r\n        this._disposers.push($utils.addEventListener(this._ghostLayer.view, \"click\", (originalEvent: MouseEvent) => {\r\n            const event = this.getEvent(originalEvent);\r\n            const target = this._getHitTarget(event.originalPoint, event.bbox);\r\n            console.debug(target);\r\n        }));\r\n        */\r\n        // Monitor for possible pixel ratio changes (when page is zoomed)\r\n        this._disposers.push($utils.onZoom(() => {\r\n            if (resolution == null) {\r\n                this.resolution = window.devicePixelRatio;\r\n            }\r\n        }));\r\n        // We need this in order top prevent default touch gestures when dragging\r\n        // draggable elements\r\n        if ($utils.supports(\"touchevents\")) {\r\n            const listener = (ev) => {\r\n                if (this._dragging.length !== 0) {\r\n                    $array.eachContinue(this._dragging, (item) => {\r\n                        if (item.value.shouldCancelTouch()) {\r\n                            ev.preventDefault();\r\n                            return false;\r\n                        }\r\n                        return true;\r\n                    });\r\n                }\r\n                // If touch down happends, delay touch out\r\n                if (this._touchActiveTimeout) {\r\n                    this._delayTouchDeactivate();\r\n                }\r\n            };\r\n            this._disposers.push($utils.addEventListener(window, \"touchstart\", listener, { passive: false }));\r\n            this._disposers.push($utils.addEventListener(this.view, \"touchstart\", listener, { passive: false }));\r\n            this._disposers.push($utils.addEventListener(this.view, \"touchmove\", () => {\r\n                // If touch is moving, delay touch out\r\n                if (this._touchActiveTimeout) {\r\n                    this._delayTouchDeactivate();\r\n                }\r\n            }, { passive: true }));\r\n            this._disposers.push($utils.addEventListener(window, \"click\", (_ev) => {\r\n                this._touchActive = false;\r\n            }, { passive: true }));\r\n            this._disposers.push($utils.addEventListener(this.view, \"click\", (_ev) => {\r\n                window.setTimeout(() => {\r\n                    this._touchActive = true;\r\n                    this._delayTouchDeactivate();\r\n                }, 100);\r\n            }, { passive: true }));\r\n        }\r\n        // Prevent scrolling of the window when hovering on \"wheelable\" object\r\n        if ($utils.supports(\"wheelevents\")) {\r\n            this._disposers.push($utils.addEventListener(this.view, \"wheel\", (ev) => {\r\n                let prevent = false;\r\n                this._hovering.forEach((obj) => {\r\n                    if (obj.wheelable) {\r\n                        prevent = true;\r\n                        return false;\r\n                    }\r\n                });\r\n                if (prevent) {\r\n                    ev.preventDefault();\r\n                }\r\n            }, { passive: false }));\r\n        }\r\n    }\r\n    /*protected _mouseMoveThrottler: Throttler = new Throttler(() => {\r\n        this._dispatchGlobalMousemove(this._lastPointerMoveEvent.event, this._lastPointerMoveEvent.native);\r\n    });\r\n    */\r\n    resetImageArray() {\r\n        this._ghostLayer.imageArray = undefined;\r\n    }\r\n    _delayTouchDeactivate() {\r\n        if (this._touchActiveTimeout) {\r\n            clearTimeout(this._touchActiveTimeout);\r\n        }\r\n        if (this.tapToActivateTimeout > 0) {\r\n            this._touchActiveTimeout = window.setTimeout(() => {\r\n                this._touchActive = false;\r\n            }, this.tapToActivateTimeout);\r\n        }\r\n    }\r\n    get debugGhostView() {\r\n        return !!this._ghostLayer.view.parentNode;\r\n    }\r\n    set debugGhostView(value) {\r\n        if (value) {\r\n            if (!this._ghostLayer.view.parentNode) {\r\n                this.view.appendChild(this._ghostLayer.view);\r\n            }\r\n        }\r\n        else {\r\n            if (this._ghostLayer.view.parentNode) {\r\n                this._ghostLayer.view.parentNode.removeChild(this._ghostLayer.view);\r\n            }\r\n        }\r\n    }\r\n    createLinearGradient(x1, y1, x2, y2) {\r\n        return this.defaultLayer.context.createLinearGradient(x1, y1, x2, y2);\r\n    }\r\n    createRadialGradient(x1, y1, radius1, x2, y2, radius2) {\r\n        return this.defaultLayer.context.createRadialGradient(x1, y1, radius1, x2, y2, radius2);\r\n    }\r\n    createPattern(graphics, background, repetition, width, height) {\r\n        // const patternCanvas = document.createElement(\"canvas\");\r\n        // const patternContext = patternCanvas.getContext(\"2d\")!;\r\n        // patternCanvas.width = width;\r\n        // patternCanvas.height = height;\r\n        // if (fill) {\r\n        // \tpatternContext.fillStyle = fill.toCSS();\r\n        // \tpatternContext.fillRect(0, 0, patternCanvas.width, patternCanvas.height);\r\n        // }\r\n        // const layer = {\r\n        // \tview: patternCanvas,\r\n        // \tcontext: patternContext,\r\n        // \tvisible: true,\r\n        // \torder: 0,\r\n        // \twidth: width,\r\n        // \theight: height,\r\n        // \tdirty: true\r\n        // };\r\n        // // patternContext.arc(0, 0, 50, 0, .5 * Math.PI);\r\n        // // patternContext.stroke();\r\n        // image.targetLayer = layer;\r\n        // image.render(layer);\r\n        //this._layerDom.appendChild(patternCanvas);\r\n        this._patternCanvas.width = width;\r\n        this._patternCanvas.height = height;\r\n        this._patternContext.clearRect(0, 0, width, height);\r\n        // patternCanvas.style.width = width * this.resolution + \"px\";\r\n        // patternCanvas.style.height = height * this.resolution + \"px\";\r\n        background.renderDetached(this._patternContext);\r\n        graphics.renderDetached(this._patternContext);\r\n        return this._patternContext.createPattern(this._patternCanvas, repetition);\r\n    }\r\n    makeContainer() {\r\n        return new CanvasContainer(this);\r\n    }\r\n    makeGraphics() {\r\n        return new CanvasGraphics(this);\r\n    }\r\n    makeText(text, style) {\r\n        return new CanvasText(this, text, style);\r\n    }\r\n    makeTextStyle() {\r\n        return new CanvasTextStyle();\r\n    }\r\n    makeRadialText(text, style) {\r\n        return new CanvasRadialText(this, text, style);\r\n    }\r\n    makePicture(image) {\r\n        return new CanvasImage(this, image);\r\n    }\r\n    resizeLayer(layer) {\r\n        layer.resize(this._calculatedWidth, this._calculatedHeight, this._calculatedWidth, this._calculatedHeight, this.resolution);\r\n    }\r\n    resizeGhost() {\r\n        this._ghostLayer.resize(this._calculatedWidth, this._calculatedHeight, this._calculatedWidth, this._calculatedHeight, this.resolution);\r\n    }\r\n    resize(realWidth, realHeight, calculatedWidth, calculatedHeight) {\r\n        this._realWidth = realWidth;\r\n        this._realHeight = realHeight;\r\n        this._calculatedWidth = calculatedWidth;\r\n        this._calculatedHeight = calculatedHeight;\r\n        $array.each(this.layers, (layer) => {\r\n            if (layer) {\r\n                layer.dirty = true;\r\n                this.resizeLayer(layer);\r\n            }\r\n        });\r\n        this.resizeGhost();\r\n        this.view.style.width = calculatedWidth + \"px\";\r\n        this.view.style.height = calculatedHeight + \"px\";\r\n    }\r\n    createDetachedLayer(willReadFrequently = false) {\r\n        const view = document.createElement(\"canvas\");\r\n        const context = view.getContext(\"2d\", { willReadFrequently: willReadFrequently });\r\n        const layer = new CanvasLayer(view, context);\r\n        view.style.position = \"absolute\";\r\n        view.style.top = \"0px\";\r\n        view.style.left = \"0px\";\r\n        return layer;\r\n    }\r\n    getLayerByOrder(order) {\r\n        const layers = this.layers;\r\n        const length = layers.length;\r\n        for (let i = 0; i < length; i++) {\r\n            const layer = layers[i];\r\n            if (layer.order == order) {\r\n                return layer;\r\n            }\r\n        }\r\n    }\r\n    getLayer(order, visible = true) {\r\n        let existingLayer = this.getLayerByOrder(order);\r\n        if (existingLayer) {\r\n            return existingLayer;\r\n        }\r\n        const layer = this.createDetachedLayer(order == 99);\r\n        layer.order = order;\r\n        layer.visible = visible;\r\n        layer.view.className = \"am5-layer-\" + order;\r\n        if (layer.visible) {\r\n            this.resizeLayer(layer);\r\n        }\r\n        const layers = this.layers;\r\n        layers.push(layer);\r\n        layers.sort((a, b) => {\r\n            if (a.order > b.order) {\r\n                return 1;\r\n            }\r\n            else if (a.order < b.order) {\r\n                return -1;\r\n            }\r\n            else {\r\n                return 0;\r\n            }\r\n        });\r\n        const length = layers.length;\r\n        const layerIndex = $array.indexOf(layers, layer);\r\n        let next;\r\n        for (let i = layerIndex + 1; i < length; i++) {\r\n            if (layers[i].visible) {\r\n                next = layers[i];\r\n                break;\r\n            }\r\n        }\r\n        if (layer.visible) {\r\n            if (next === undefined) {\r\n                this._layerDom.appendChild(layer.view);\r\n            }\r\n            else {\r\n                this._layerDom.insertBefore(layer.view, next.view);\r\n            }\r\n        }\r\n        return layer;\r\n    }\r\n    render(root) {\r\n        this._dirtyLayers.length = 0;\r\n        $array.each(this.layers, (layer) => {\r\n            if (layer) {\r\n                if (layer.dirty && layer.visible) {\r\n                    this._dirtyLayers.push(layer);\r\n                    layer.clear();\r\n                }\r\n            }\r\n        });\r\n        this._ghostLayer.clear();\r\n        root.render({\r\n            inactive: null,\r\n            layer: this.defaultLayer,\r\n        });\r\n        this._ghostLayer.context.restore();\r\n        //setTimeout(() => {\r\n        // Remove this after the Chrome bug is fixed:\r\n        // https://bugs.chromium.org/p/chromium/issues/detail?id=1279394\r\n        $array.each(this.layers, (layer) => {\r\n            if (layer) {\r\n                const context = layer.context;\r\n                context.beginPath();\r\n                context.moveTo(0, 0);\r\n                context.stroke();\r\n            }\r\n        });\r\n        $array.each(this._dirtyLayers, (layer) => {\r\n            layer.context.restore();\r\n            layer.dirty = false;\r\n        });\r\n        //}, 100)\r\n        if (this._hovering.size && this._lastPointerMoveEvent) {\r\n            const { events, target, native } = this._lastPointerMoveEvent;\r\n            //this._mouseMoveThrottler.run();\r\n            $array.each(events, (event) => {\r\n                this._dispatchGlobalMousemove(event, target, native);\r\n            });\r\n        }\r\n    }\r\n    paintId(obj) {\r\n        const id = distributeId(++this._colorId);\r\n        const color = Color.fromHex(id).toCSS();\r\n        this._colorMap[color] = obj;\r\n        return color;\r\n    }\r\n    _removeObject(obj) {\r\n        if (obj._colorId !== undefined) {\r\n            delete this._colorMap[obj._colorId];\r\n        }\r\n    }\r\n    // protected _identifyObjectByColor(colorId: number): CanvasDisplayObject | undefined {\r\n    // \treturn this._colorMap[colorId];\r\n    // }\r\n    _adjustBoundingBox(bbox) {\r\n        const margin = this._ghostLayer.margin;\r\n        return new DOMRect(-margin.left, -margin.top, bbox.width + margin.left + margin.right, bbox.height + margin.top + margin.bottom);\r\n    }\r\n    getEvent(originalEvent, adjustPoint = true) {\r\n        const bbox = this.view.getBoundingClientRect();\r\n        const x = originalEvent.clientX || 0;\r\n        const y = originalEvent.clientY || 0;\r\n        const widthScale = this._calculatedWidth / this._realWidth;\r\n        const heightScale = this._calculatedHeight / this._realHeight;\r\n        const originalPoint = {\r\n            x: x - bbox.left,\r\n            y: y - bbox.top,\r\n        };\r\n        const point = {\r\n            x: (x - (adjustPoint ? bbox.left : 0)) * widthScale,\r\n            y: (y - (adjustPoint ? bbox.top : 0)) * heightScale,\r\n        };\r\n        return new CanvasRendererEvent(originalEvent, originalPoint, point, this._adjustBoundingBox(bbox));\r\n    }\r\n    _getHitTarget(point, bbox, target) {\r\n        if (bbox.width === 0 || bbox.height === 0 || point.x < bbox.left || point.x > bbox.right || point.y < bbox.top || point.y > bbox.bottom) {\r\n            return;\r\n        }\r\n        if (!target || !this._layerDom.contains(target)) {\r\n            return;\r\n        }\r\n        const pixel = this._ghostLayer.getImageData(point, bbox);\r\n        if (pixel.data[0] === 0 && pixel.data[1] === 0 && pixel.data[2] === 0) {\r\n            return false;\r\n        }\r\n        const colorId = Color.fromRGB(pixel.data[0], pixel.data[1], pixel.data[2]).toCSS();\r\n        const hit = this._colorMap[colorId];\r\n        return hit;\r\n    }\r\n    getObjectAtPoint(point) {\r\n        const data = this._ghostLayer.getImageArray(point);\r\n        if (data[0] === 0 && data[1] === 0 && data[2] === 0) {\r\n            return undefined;\r\n        }\r\n        const colorId = Color.fromRGB(data[0], data[1], data[2]).toCSS();\r\n        const hit = this._colorMap[colorId];\r\n        return hit;\r\n    }\r\n    _withEvents(key, f) {\r\n        const events = this._events[key];\r\n        if (events !== undefined) {\r\n            events.dispatching = true;\r\n            try {\r\n                f(events);\r\n            }\r\n            finally {\r\n                events.dispatching = false;\r\n                if (events.cleanup) {\r\n                    events.cleanup = false;\r\n                    $array.keepIf(events.callbacks, (callback) => {\r\n                        return !callback.disposed;\r\n                    });\r\n                    if (events.callbacks.length === 0) {\r\n                        events.disposer.dispose();\r\n                        delete this._events[key];\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n    _dispatchEventAll(key, event) {\r\n        if (!this.interactionsEnabled) {\r\n            return;\r\n        }\r\n        this._withEvents(key, (events) => {\r\n            $array.each(events.callbacks, (callback) => {\r\n                if (!callback.disposed) {\r\n                    callback.callback.call(callback.context, event);\r\n                }\r\n            });\r\n        });\r\n    }\r\n    _dispatchEvent(key, target, event) {\r\n        if (!this.interactionsEnabled) {\r\n            return false;\r\n        }\r\n        let dispatched = false;\r\n        this._withEvents(key, (events) => {\r\n            $array.each(events.callbacks, (callback) => {\r\n                if (!callback.disposed && callback.object === target) {\r\n                    callback.callback.call(callback.context, event);\r\n                    dispatched = true;\r\n                }\r\n            });\r\n        });\r\n        return dispatched;\r\n    }\r\n    _dispatchMousedown(originalEvent, originalTarget) {\r\n        const button = originalEvent.button;\r\n        if (button != 0 && button != 2 && button != 1 && button !== undefined) {\r\n            // Ignore non-primary mouse buttons\r\n            return;\r\n        }\r\n        const event = this.getEvent(originalEvent);\r\n        const target = this._getHitTarget(event.originalPoint, event.bbox, originalTarget);\r\n        if (target) {\r\n            const id = event.id;\r\n            let dragged = false;\r\n            eachTargets(target, (obj) => {\r\n                const info = { id: id, value: obj };\r\n                this._mousedown.push(info);\r\n                if (!dragged && this._dispatchEvent(\"pointerdown\", obj, event)) {\r\n                    // Only dispatch the first element which matches\r\n                    dragged = true;\r\n                    const has = this._dragging.some((x) => {\r\n                        return x.value === obj && x.id === id;\r\n                    });\r\n                    if (!has) {\r\n                        this._dragging.push(info);\r\n                    }\r\n                }\r\n                return true;\r\n            });\r\n        }\r\n    }\r\n    _dispatchGlobalMousemove(originalEvent, originalTarget, native) {\r\n        const event = this.getEvent(originalEvent);\r\n        const target = this._getHitTarget(event.originalPoint, event.bbox, originalTarget);\r\n        event.native = native;\r\n        if (target) {\r\n            this._hovering.forEach((obj) => {\r\n                if (!obj.contains(target)) {\r\n                    this._hovering.delete(obj);\r\n                    if (obj.cursorOverStyle) {\r\n                        $utils.setStyle(document.body, \"cursor\", obj._replacedCursorStyle);\r\n                    }\r\n                    this._dispatchEvent(\"pointerout\", obj, event);\r\n                }\r\n            });\r\n            if (event.native) {\r\n                eachTargets(target, (obj) => {\r\n                    if (!this._hovering.has(obj)) {\r\n                        this._hovering.add(obj);\r\n                        if (obj.cursorOverStyle) {\r\n                            obj._replacedCursorStyle = $utils.getStyle(document.body, \"cursor\");\r\n                            $utils.setStyle(document.body, \"cursor\", obj.cursorOverStyle);\r\n                        }\r\n                        this._dispatchEvent(\"pointerover\", obj, event);\r\n                    }\r\n                    return true;\r\n                });\r\n            }\r\n            //} else if (target === false) {\r\n        }\r\n        else {\r\n            this._hovering.forEach((obj) => {\r\n                if (obj.cursorOverStyle) {\r\n                    $utils.setStyle(document.body, \"cursor\", obj._replacedCursorStyle);\r\n                }\r\n                this._dispatchEvent(\"pointerout\", obj, event);\r\n            });\r\n            this._hovering.clear();\r\n        }\r\n        this._dispatchEventAll(\"globalpointermove\", event);\r\n    }\r\n    removeHovering(graphics) {\r\n        this._hovering.delete(graphics);\r\n        if (graphics.cursorOverStyle) {\r\n            $utils.setStyle(document.body, \"cursor\", graphics._replacedCursorStyle);\r\n        }\r\n    }\r\n    _dispatchGlobalMouseup(originalEvent, native) {\r\n        const event = this.getEvent(originalEvent);\r\n        event.native = native;\r\n        //const target = this._getHitTarget(event.originalPoint);\r\n        this._dispatchEventAll(\"globalpointerup\", event);\r\n    }\r\n    _dispatchDragMove(originalEvent) {\r\n        if (this._dragging.length !== 0) {\r\n            const event = this.getEvent(originalEvent);\r\n            const id = event.id;\r\n            this._dragging.forEach((obj) => {\r\n                if (obj.id === id) {\r\n                    this._dispatchEvent(\"pointermove\", obj.value, event);\r\n                }\r\n            });\r\n        }\r\n    }\r\n    _dispatchDragEnd(originalEvent, originalTarget) {\r\n        const button = originalEvent.button;\r\n        let clickevent;\r\n        if (button == 0 || button === undefined) {\r\n            clickevent = \"click\";\r\n        }\r\n        else if (button == 2) {\r\n            clickevent = \"rightclick\";\r\n        }\r\n        else if (button == 1) {\r\n            clickevent = \"middleclick\";\r\n        }\r\n        else {\r\n            // Ignore non-primary mouse buttons\r\n            return;\r\n        }\r\n        const event = this.getEvent(originalEvent);\r\n        const id = event.id;\r\n        if (this._mousedown.length !== 0) {\r\n            const target = this._getHitTarget(event.originalPoint, event.bbox, originalTarget);\r\n            if (target) {\r\n                this._mousedown.forEach((obj) => {\r\n                    if (obj.id === id && obj.value.contains(target)) {\r\n                        this._dispatchEvent(clickevent, obj.value, event);\r\n                    }\r\n                });\r\n            }\r\n            this._mousedown.length = 0;\r\n        }\r\n        if (this._dragging.length !== 0) {\r\n            this._dragging.forEach((obj) => {\r\n                if (obj.id === id) {\r\n                    this._dispatchEvent(\"pointerup\", obj.value, event);\r\n                }\r\n            });\r\n            this._dragging.length = 0;\r\n        }\r\n    }\r\n    _dispatchDoubleClick(originalEvent, originalTarget) {\r\n        const event = this.getEvent(originalEvent);\r\n        const target = this._getHitTarget(event.originalPoint, event.bbox, originalTarget);\r\n        if (target) {\r\n            eachTargets(target, (obj) => {\r\n                if (this._dispatchEvent(\"dblclick\", obj, event)) {\r\n                    return false;\r\n                }\r\n                else {\r\n                    return true;\r\n                }\r\n            });\r\n        }\r\n    }\r\n    _dispatchWheel(originalEvent, originalTarget) {\r\n        const event = this.getEvent(originalEvent);\r\n        const target = this._getHitTarget(event.originalPoint, event.bbox, originalTarget);\r\n        if (target) {\r\n            eachTargets(target, (obj) => {\r\n                if (this._dispatchEvent(\"wheel\", obj, event)) {\r\n                    return false;\r\n                }\r\n                else {\r\n                    return true;\r\n                }\r\n            });\r\n        }\r\n    }\r\n    _makeSharedEvent(key, f) {\r\n        if (this._listeners[key] === undefined) {\r\n            const listener = f();\r\n            this._listeners[key] = new CounterDisposer(() => {\r\n                delete this._listeners[key];\r\n                listener.dispose();\r\n            });\r\n        }\r\n        return this._listeners[key].increment();\r\n    }\r\n    _onPointerEvent(name, f) {\r\n        let native = false;\r\n        let timer = null;\r\n        function clear() {\r\n            timer = null;\r\n            native = false;\r\n        }\r\n        return new MultiDisposer([\r\n            new Disposer(() => {\r\n                if (timer !== null) {\r\n                    clearTimeout(timer);\r\n                }\r\n                clear();\r\n            }),\r\n            $utils.addEventListener(this.view, $utils.getRendererEvent(name), (_) => {\r\n                native = true;\r\n                if (timer !== null) {\r\n                    clearTimeout(timer);\r\n                }\r\n                timer = window.setTimeout(clear, 0);\r\n            }),\r\n            onPointerEvent(window, name, (ev, target) => {\r\n                if (timer !== null) {\r\n                    clearTimeout(timer);\r\n                    timer = null;\r\n                }\r\n                f(ev, target, native);\r\n                native = false;\r\n            }),\r\n        ]);\r\n    }\r\n    // This ensures that only a single DOM event is added (e.g. only a single mousemove event listener)\r\n    _initEvent(key) {\r\n        switch (key) {\r\n            case \"globalpointermove\":\r\n            case \"pointerover\":\r\n            case \"pointerout\":\r\n                return this._makeSharedEvent(\"pointermove\", () => {\r\n                    const listener = (events, target, native) => {\r\n                        this._lastPointerMoveEvent = { events, target, native };\r\n                        $array.each(events, (event) => {\r\n                            this._dispatchGlobalMousemove(event, target, native);\r\n                        });\r\n                    };\r\n                    return new MultiDisposer([\r\n                        this._onPointerEvent(\"pointerdown\", listener),\r\n                        this._onPointerEvent(\"pointermove\", listener),\r\n                    ]);\r\n                });\r\n            case \"globalpointerup\":\r\n                return this._makeSharedEvent(\"pointerup\", () => {\r\n                    const mouseup = this._onPointerEvent(\"pointerup\", (events, target, native) => {\r\n                        $array.each(events, (event) => {\r\n                            this._dispatchGlobalMouseup(event, native);\r\n                        });\r\n                        this._lastPointerMoveEvent = { events, target, native };\r\n                    });\r\n                    const pointercancel = this._onPointerEvent(\"pointercancel\", (events, target, native) => {\r\n                        $array.each(events, (event) => {\r\n                            this._dispatchGlobalMouseup(event, native);\r\n                        });\r\n                        this._lastPointerMoveEvent = { events, target, native };\r\n                    });\r\n                    return new Disposer(() => {\r\n                        mouseup.dispose();\r\n                        pointercancel.dispose();\r\n                    });\r\n                });\r\n            case \"click\":\r\n            case \"rightclick\":\r\n            case \"middleclick\":\r\n            case \"pointerdown\":\r\n            /*\r\n                return this._makeSharedEvent(\"pointerdown\", () => {\r\n                    return this._onPointerEvent(\"pointerdown\", (event, target, native) => {\r\n                        this._lastPointerMoveEvent = { event, target, native };\r\n                        this._dispatchMousedown(event)\r\n                    });\r\n                });\r\n            */\r\n            case \"pointermove\":\r\n            case \"pointerup\":\r\n                return this._makeSharedEvent(\"pointerdown\", () => {\r\n                    //const throttler = new Throttler();\r\n                    const mousedown = this._onPointerEvent(\"pointerdown\", (events, target) => {\r\n                        $array.each(events, (ev) => {\r\n                            this._dispatchMousedown(ev, target);\r\n                        });\r\n                    });\r\n                    // TODO handle throttling properly for multitouch\r\n                    const mousemove = this._onPointerEvent(\"pointermove\", (ev) => {\r\n                        //throttler.throttle(() => {\r\n                        $array.each(ev, (ev) => {\r\n                            this._dispatchDragMove(ev);\r\n                        });\r\n                        //});\r\n                    });\r\n                    const mouseup = this._onPointerEvent(\"pointerup\", (ev, target) => {\r\n                        $array.each(ev, (ev) => {\r\n                            this._dispatchDragEnd(ev, target);\r\n                        });\r\n                    });\r\n                    const pointercancel = this._onPointerEvent(\"pointercancel\", (ev, target) => {\r\n                        $array.each(ev, (ev) => {\r\n                            this._dispatchDragEnd(ev, target);\r\n                        });\r\n                    });\r\n                    return new Disposer(() => {\r\n                        mousedown.dispose();\r\n                        mousemove.dispose();\r\n                        mouseup.dispose();\r\n                        pointercancel.dispose();\r\n                    });\r\n                });\r\n            case \"dblclick\":\r\n                return this._makeSharedEvent(\"dblclick\", () => {\r\n                    return this._onPointerEvent(\"dblclick\", (ev, target) => {\r\n                        $array.each(ev, (ev) => {\r\n                            this._dispatchDoubleClick(ev, target);\r\n                        });\r\n                    });\r\n                });\r\n            case \"wheel\":\r\n                return this._makeSharedEvent(\"wheel\", () => {\r\n                    return $utils.addEventListener(this.view, $utils.getRendererEvent(\"wheel\"), (event) => {\r\n                        this._dispatchWheel(event, $utils.getEventTarget(event));\r\n                    }, { passive: false });\r\n                });\r\n        }\r\n    }\r\n    _addEvent(object, key, callback, context) {\r\n        let events = this._events[key];\r\n        if (events === undefined) {\r\n            events = this._events[key] = {\r\n                disposer: this._initEvent(key),\r\n                callbacks: [],\r\n                dispatching: false,\r\n                cleanup: false,\r\n            };\r\n        }\r\n        const listener = { object, context, callback, disposed: false };\r\n        events.callbacks.push(listener);\r\n        return new Disposer(() => {\r\n            listener.disposed = true;\r\n            if (events.dispatching) {\r\n                events.cleanup = true;\r\n            }\r\n            else {\r\n                $array.removeFirst(events.callbacks, listener);\r\n                if (events.callbacks.length === 0) {\r\n                    events.disposer.dispose();\r\n                    delete this._events[key];\r\n                }\r\n            }\r\n        });\r\n    }\r\n    getCanvas(root, options) {\r\n        // Make sure everything is rendered\r\n        this.render(root);\r\n        if (!options) {\r\n            options = {};\r\n        }\r\n        let scale = this.resolution;\r\n        let canvasWidth = Math.floor(this._calculatedWidth * this.resolution);\r\n        let canvasHeight = Math.floor(this._calculatedHeight * this.resolution);\r\n        // Check if we need to scale\r\n        if (options.minWidth && (options.minWidth > canvasWidth)) {\r\n            let minScale = options.minWidth / canvasWidth;\r\n            if (minScale > scale) {\r\n                scale = minScale * this.resolution;\r\n            }\r\n        }\r\n        if (options.minHeight && (options.minHeight > canvasHeight)) {\r\n            let minScale = options.minHeight / canvasHeight;\r\n            if (minScale > scale) {\r\n                scale = minScale * this.resolution;\r\n            }\r\n        }\r\n        if (options.maxWidth && (options.maxWidth < canvasWidth)) {\r\n            let maxScale = options.maxWidth / canvasWidth;\r\n            if (maxScale < scale) {\r\n                scale = maxScale * this.resolution;\r\n            }\r\n        }\r\n        if (options.maxHeight && (options.maxHeight > canvasHeight)) {\r\n            let maxScale = options.maxHeight / canvasHeight;\r\n            if (maxScale < scale) {\r\n                scale = maxScale * this.resolution;\r\n            }\r\n        }\r\n        // Check if we need to compensate for pixel ratio\r\n        if (options.maintainPixelRatio) {\r\n            scale /= this.resolution;\r\n        }\r\n        // Init list canvases to remove from DOM after export\r\n        const canvases = [];\r\n        // Set up new canvas for export\r\n        let forceRender = false;\r\n        const canvas = document.createElement(\"canvas\");\r\n        if (scale != this.resolution) {\r\n            forceRender = true;\r\n            canvasWidth = canvasWidth * scale / this.resolution;\r\n            canvasHeight = canvasHeight * scale / this.resolution;\r\n        }\r\n        canvas.width = canvasWidth;\r\n        canvas.height = canvasHeight;\r\n        // Add to DOM so it inherits CSS\r\n        canvas.style.position = \"fixed\";\r\n        canvas.style.top = \"-10000px\";\r\n        this.view.appendChild(canvas);\r\n        canvases.push(canvas);\r\n        // Context\r\n        const context = canvas.getContext(\"2d\");\r\n        let width = 0;\r\n        let height = 0;\r\n        let needRerender = false;\r\n        $array.each(this.layers, (layer) => {\r\n            if (layer && layer.visible) {\r\n                if (layer.tainted || forceRender) {\r\n                    needRerender = true;\r\n                    layer.exportableView = layer.view;\r\n                    layer.exportableContext = layer.context;\r\n                    layer.view = document.createElement(\"canvas\");\r\n                    // Add to DOM so it inherits CSS\r\n                    layer.view.style.position = \"fixed\";\r\n                    layer.view.style.top = \"-10000px\";\r\n                    this.view.appendChild(layer.view);\r\n                    canvases.push(layer.view);\r\n                    let extraX = 0;\r\n                    let extraY = 0;\r\n                    if (layer.margin) {\r\n                        extraX += layer.margin.left || 0 + layer.margin.right || 0;\r\n                        extraY += layer.margin.top || 0 + layer.margin.bottom || 0;\r\n                    }\r\n                    layer.view.width = canvasWidth + extraX;\r\n                    layer.view.height = canvasHeight + extraY;\r\n                    layer.context = layer.view.getContext(\"2d\");\r\n                    layer.dirty = true;\r\n                    layer.scale = scale;\r\n                }\r\n            }\r\n        });\r\n        if (needRerender) {\r\n            this._omitTainted = true;\r\n            this.render(root);\r\n            this._omitTainted = false;\r\n        }\r\n        $array.each(this.layers, (layer) => {\r\n            if (layer && layer.visible) {\r\n                // Layer is fine. Just plop it into our target canvas\r\n                let x = 0;\r\n                let y = 0;\r\n                if (layer.margin) {\r\n                    x = -(layer.margin.left || 0) * this.resolution;\r\n                    y = -(layer.margin.top || 0) * this.resolution;\r\n                }\r\n                context.drawImage(layer.view, x, y);\r\n                // Restore layer original canvas\r\n                if (layer.exportableView) {\r\n                    layer.view = layer.exportableView;\r\n                    layer.exportableView = undefined;\r\n                }\r\n                if (layer.exportableContext) {\r\n                    layer.context = layer.exportableContext;\r\n                    layer.exportableContext = undefined;\r\n                }\r\n                if (width < layer.view.clientWidth) {\r\n                    width = layer.view.clientWidth;\r\n                }\r\n                if (height < layer.view.clientHeight) {\r\n                    height = layer.view.clientHeight;\r\n                }\r\n                layer.scale = undefined;\r\n            }\r\n        });\r\n        canvas.style.width = width + \"px\";\r\n        canvas.style.height = height + \"px\";\r\n        $array.each(canvases, (canvas) => {\r\n            canvas.style.position = \"\";\r\n            canvas.style.top = \"\";\r\n            this.view.removeChild(canvas);\r\n        });\r\n        return canvas;\r\n    }\r\n}\r\nclass GhostLayer {\r\n    constructor() {\r\n        Object.defineProperty(this, \"view\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"context\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"margin\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: {\r\n                left: 0,\r\n                right: 0,\r\n                top: 0,\r\n                bottom: 0,\r\n            }\r\n        });\r\n        Object.defineProperty(this, \"_resolution\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: 1\r\n        });\r\n        Object.defineProperty(this, \"_width\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: 0\r\n        });\r\n        Object.defineProperty(this, \"_height\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: 0\r\n        });\r\n        Object.defineProperty(this, \"imageArray\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        this.view = document.createElement(\"canvas\");\r\n        this.context = this.view.getContext(\"2d\", { alpha: false, willReadFrequently: true });\r\n        this.context.imageSmoothingEnabled = false;\r\n        this.view.style.position = \"absolute\";\r\n        this.view.style.top = \"0px\";\r\n        this.view.style.left = \"0px\";\r\n    }\r\n    resize(canvasWidth, canvasHeight, domWidth, domHeight, resolution) {\r\n        this._resolution = resolution;\r\n        canvasWidth += (this.margin.left + this.margin.right);\r\n        canvasHeight += (this.margin.top + this.margin.bottom);\r\n        // TODO this should take into account calculateSize\r\n        domWidth += (this.margin.left + this.margin.right);\r\n        domHeight += (this.margin.top + this.margin.bottom);\r\n        this.view.style.left = -this.margin.left + \"px\";\r\n        this.view.style.top = -this.margin.top + \"px\";\r\n        this._width = Math.floor(canvasWidth * resolution);\r\n        this._height = Math.floor(canvasHeight * resolution);\r\n        this.view.width = this._width;\r\n        this.view.style.width = domWidth + \"px\";\r\n        this.view.height = this._height;\r\n        this.view.style.height = domHeight + \"px\";\r\n    }\r\n    getImageData(point, bbox) {\r\n        return this.context.getImageData(\r\n        // TODO should this round ?\r\n        Math.round(((point.x - bbox.left) / bbox.width) * this._width), Math.round(((point.y - bbox.top) / bbox.height) * this._height), 1, 1);\r\n    }\r\n    getImageArray(point) {\r\n        if (!this.imageArray) {\r\n            this.imageArray = this.context.getImageData(0, 0, this._width, this._height).data;\r\n        }\r\n        const data = this.imageArray;\r\n        const x = Math.round(point.x * this._resolution);\r\n        const y = Math.round(point.y * this._resolution);\r\n        const i = (y * this._width + x) * 4;\r\n        return [data[i], data[i + 1], data[i + 2], data[i + 3]];\r\n    }\r\n    setMargin(layers) {\r\n        this.margin.left = 0;\r\n        this.margin.right = 0;\r\n        this.margin.top = 0;\r\n        this.margin.bottom = 0;\r\n        $array.each(layers, (layer) => {\r\n            if (layer.margin) {\r\n                this.margin.left = Math.max(this.margin.left, layer.margin.left);\r\n                this.margin.right = Math.max(this.margin.right, layer.margin.right);\r\n                this.margin.top = Math.max(this.margin.top, layer.margin.top);\r\n                this.margin.bottom = Math.max(this.margin.bottom, layer.margin.bottom);\r\n            }\r\n        });\r\n    }\r\n    clear() {\r\n        this.context.save();\r\n        this.context.fillStyle = '#000';\r\n        this.context.fillRect(0, 0, this._width, this._height);\r\n    }\r\n}\r\n/**\r\n * @ignore\r\n */\r\nexport class CanvasLayer {\r\n    constructor(view, context) {\r\n        Object.defineProperty(this, \"view\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"context\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"tainted\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: true\r\n        });\r\n        Object.defineProperty(this, \"margin\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"order\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: 0\r\n        });\r\n        Object.defineProperty(this, \"visible\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: true\r\n        });\r\n        Object.defineProperty(this, \"width\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"height\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"scale\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"dirty\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: true\r\n        });\r\n        Object.defineProperty(this, \"exportableView\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"exportableContext\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"_width\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: 0\r\n        });\r\n        Object.defineProperty(this, \"_height\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: 0\r\n        });\r\n        this.view = view;\r\n        this.context = context;\r\n    }\r\n    resize(canvasWidth, canvasHeight, domWidth, domHeight, resolution) {\r\n        // TODO should this take into account calculateSize ?\r\n        if (this.width != null) {\r\n            canvasWidth = this.width;\r\n            domWidth = this.width;\r\n        }\r\n        // TODO should this take into account calculateSize ?\r\n        if (this.height != null) {\r\n            canvasHeight = this.height;\r\n            domHeight = this.height;\r\n        }\r\n        if (this.margin) {\r\n            canvasWidth += (this.margin.left + this.margin.right);\r\n            canvasHeight += (this.margin.top + this.margin.bottom);\r\n            // TODO this should take into account calculateSize\r\n            domWidth += (this.margin.left + this.margin.right);\r\n            domHeight += (this.margin.top + this.margin.bottom);\r\n            this.view.style.left = -this.margin.left + \"px\";\r\n            this.view.style.top = -this.margin.top + \"px\";\r\n        }\r\n        else {\r\n            this.view.style.left = \"0px\";\r\n            this.view.style.top = \"0px\";\r\n        }\r\n        this._width = Math.floor(canvasWidth * resolution);\r\n        this._height = Math.floor(canvasHeight * resolution);\r\n        this.view.width = this._width;\r\n        this.view.style.width = domWidth + \"px\";\r\n        this.view.height = this._height;\r\n        this.view.style.height = domHeight + \"px\";\r\n    }\r\n    clear() {\r\n        this.context.save();\r\n        this.context.clearRect(0, 0, this._width, this._height);\r\n    }\r\n}\r\n//# sourceMappingURL=CanvasRenderer.js.map","import { AnimationState } from \"./util/Animation\";\r\nimport { Container } from \"./render/Container\";\r\nimport { Text } from \"./render/Text\";\r\nimport { HorizontalLayout } from \"./render/HorizontalLayout\";\r\nimport { VerticalLayout } from \"./render/VerticalLayout\";\r\nimport { GridLayout } from \"./render/GridLayout\";\r\nimport { Disposer } from \"./util/Disposer\";\r\nimport { ResizeSensor } from \"./util/ResizeSensor\";\r\nimport { InterfaceColors } from \"./util/InterfaceColors\";\r\nimport { Graphics } from \"./render/Graphics\";\r\nimport { Rectangle } from \"./render/Rectangle\";\r\nimport { Tooltip } from \"./render/Tooltip\";\r\nimport { NumberFormatter } from \"./util/NumberFormatter\";\r\nimport { DateFormatter } from \"./util/DateFormatter\";\r\nimport { DurationFormatter } from \"./util/DurationFormatter\";\r\nimport { Language } from \"./util/Language\";\r\nimport { EventDispatcher } from \"./util/EventDispatcher\";\r\nimport { DefaultTheme } from \"../themes/DefaultTheme\";\r\nimport { CanvasRenderer } from \"./render/backend/CanvasRenderer\";\r\nimport { p100, percent } from \"./util/Percent\";\r\nimport { color } from \"./util/Color\";\r\nimport { populateString } from \"./util/PopulateString\";\r\nimport { registry } from \"./Registry\";\r\nimport * as $order from \"./util/Order\";\r\nimport * as $array from \"./util/Array\";\r\nimport * as $object from \"./util/Object\";\r\nimport * as $utils from \"./util/Utils\";\r\nimport * as $type from \"./util/Type\";\r\nimport en from \"../../locales/en\";\r\nfunction rAF(fps, callback) {\r\n    if (fps == null) {\r\n        requestAnimationFrame(callback);\r\n    }\r\n    else {\r\n        setTimeout(() => {\r\n            requestAnimationFrame(callback);\r\n        }, 1000 / fps);\r\n    }\r\n}\r\n// TODO implement Disposer\r\n/**\r\n * Root element of the chart.\r\n *\r\n * @see {@link https://www.amcharts.com/docs/v5/getting-started/#Root_element} for more info\r\n */\r\nexport class Root {\r\n    constructor(id, settings = {}, isReal) {\r\n        /**\r\n         * A reference to original chart container (div element).\r\n         */\r\n        Object.defineProperty(this, \"dom\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"_inner\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"_settings\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"_isDirty\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: false\r\n        });\r\n        Object.defineProperty(this, \"_isDirtyParents\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: false\r\n        });\r\n        Object.defineProperty(this, \"_isDirtyAnimation\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: false\r\n        });\r\n        Object.defineProperty(this, \"_dirty\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: {}\r\n        });\r\n        Object.defineProperty(this, \"_dirtyParents\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: {}\r\n        });\r\n        Object.defineProperty(this, \"_dirtyBounds\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: {}\r\n        });\r\n        Object.defineProperty(this, \"_dirtyPositions\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: {}\r\n        });\r\n        Object.defineProperty(this, \"_ticker\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: null\r\n        });\r\n        Object.defineProperty(this, \"_tickers\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: []\r\n        });\r\n        Object.defineProperty(this, \"_updateTick\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: true\r\n        });\r\n        /**\r\n         * Root's event dispatcher.\r\n         *\r\n         * @see {@link https://www.amcharts.com/docs/v5/concepts/events/} for more info\r\n         */\r\n        Object.defineProperty(this, \"events\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: new EventDispatcher()\r\n        });\r\n        /**\r\n         * @ignore\r\n         * @todo needs description\r\n         */\r\n        Object.defineProperty(this, \"animationTime\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: null\r\n        });\r\n        Object.defineProperty(this, \"_animations\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: []\r\n        });\r\n        Object.defineProperty(this, \"_renderer\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"_rootContainer\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        /**\r\n         * Main content container.\r\n         */\r\n        Object.defineProperty(this, \"container\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        /**\r\n         * A [[Container]] used to display tooltips in.\r\n         */\r\n        Object.defineProperty(this, \"tooltipContainer\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"_tooltipContainerSettings\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"_tooltip\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        // Locale-related\r\n        /**\r\n         * @ignore\r\n         */\r\n        Object.defineProperty(this, \"language\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: Language.new(this, {})\r\n        });\r\n        /**\r\n         * Locale used by the chart.\r\n         *\r\n         * @see {@link https://www.amcharts.com/docs/v5/concepts/locales/}\r\n         */\r\n        Object.defineProperty(this, \"locale\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: en\r\n        });\r\n        // Date-time related\r\n        /**\r\n         * Use UTC when formatting date/time.\r\n         *\r\n         * @see {@link https://www.amcharts.com/docs/v5/concepts/formatters/formatting-dates/#utc-and-time-zones} for more info\r\n         */\r\n        Object.defineProperty(this, \"utc\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: false\r\n        });\r\n        /**\r\n         * If set, will format date/time in specific time zone.\r\n         *\r\n         * The value should be named time zone, e.g.:\r\n         * `\"America/Vancouver\"`, `\"Australia/Sydney\"`, `\"UTC\"`.\r\n         *\r\n         * NOTE: Using time zone feature may noticeable affect performance of the\r\n         * chart, especially with large data sets, since every single date will need\r\n         * to be recalculated.\r\n         *\r\n         * @see {@link https://www.amcharts.com/docs/v5/getting-started/root-element/#time-zone} for more info\r\n         * @since 5.1.0\r\n         */\r\n        Object.defineProperty(this, \"timezone\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        /**\r\n         * The maximum FPS that the Root will run at.\r\n         *\r\n         * If `undefined` it will run at the highest FPS.\r\n         *\r\n         * @see {@link https://www.amcharts.com/docs/v5/getting-started/root-element/#Performance} for more info\r\n         */\r\n        Object.defineProperty(this, \"fps\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        /**\r\n         * Number formatter.\r\n         *\r\n         * @see {@link https://www.amcharts.com/docs/v5/concepts/formatters/formatting-numbers/} for more info\r\n         */\r\n        Object.defineProperty(this, \"numberFormatter\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: NumberFormatter.new(this, {})\r\n        });\r\n        /**\r\n         * Date/time formatter.\r\n         *\r\n         * @see {@link https://www.amcharts.com/docs/v5/concepts/formatters/formatting-dates/} for more info\r\n         */\r\n        Object.defineProperty(this, \"dateFormatter\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: DateFormatter.new(this, {})\r\n        });\r\n        /**\r\n         * Duration formatter.\r\n         *\r\n         * @see {@link https://www.amcharts.com/docs/v5/concepts/formatters/formatting-dates/} for more info\r\n         */\r\n        Object.defineProperty(this, \"durationFormatter\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: DurationFormatter.new(this, {})\r\n        });\r\n        // Accessibility\r\n        /**\r\n         * Global tab index for using for the whole chart\r\n         *\r\n         * @see {@link https://www.amcharts.com/docs/v5/concepts/accessibility/} for more info\r\n         */\r\n        Object.defineProperty(this, \"tabindex\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: 0\r\n        });\r\n        //@todo maybe make this better\r\n        Object.defineProperty(this, \"_tabindexes\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: []\r\n        });\r\n        Object.defineProperty(this, \"_a11yD\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: false\r\n        });\r\n        Object.defineProperty(this, \"_focusElementDirty\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: false\r\n        });\r\n        Object.defineProperty(this, \"_focusElementContainer\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"_focusedSprite\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"_isShift\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"_keyboardDragPoint\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"_tooltipElementContainer\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"_readerAlertElement\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"_logo\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"_tooltipDiv\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        /**\r\n         * Used for dynamically-created CSS and JavaScript with strict source policies.\r\n         */\r\n        Object.defineProperty(this, \"nonce\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        /**\r\n         * Special color set to be used for various controls.\r\n         *\r\n         * @see {@link https://www.amcharts.com/docs/v5/concepts/colors-gradients-and-patterns/#Interface_colors} for more info\r\n         */\r\n        Object.defineProperty(this, \"interfaceColors\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        /**\r\n         * An instance of vertical layout object that can be used to set `layout` setting\r\n         * of a [[Container]].\r\n         *\r\n         * @default VerticalLayout.new()\r\n         */\r\n        Object.defineProperty(this, \"verticalLayout\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: VerticalLayout.new(this, {})\r\n        });\r\n        /**\r\n         * An instance of horizontal layout object that can be used to set `layout` setting\r\n         * of a [[Container]].\r\n         *\r\n         * @default HorizontalLayout.new()\r\n         */\r\n        Object.defineProperty(this, \"horizontalLayout\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: HorizontalLayout.new(this, {})\r\n        });\r\n        /**\r\n         * An instance of grid layout object that can be used to set `layout` setting\r\n         * of a [[Container]].\r\n         *\r\n         * @default VerticalLayout.new()\r\n         */\r\n        Object.defineProperty(this, \"gridLayout\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: GridLayout.new(this, {})\r\n        });\r\n        Object.defineProperty(this, \"_paused\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: false\r\n        });\r\n        /**\r\n         * Indicates whether chart should resized automatically when parent container\r\n         * width and/or height changes.\r\n         *\r\n         * If disabled (`autoResize = false`) you can make the chart resize manually\r\n         * by calling root element's `resize()` method.\r\n         */\r\n        Object.defineProperty(this, \"autoResize\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: true\r\n        });\r\n        Object.defineProperty(this, \"_fontHash\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: \"\"\r\n        });\r\n        Object.defineProperty(this, \"_isDisposed\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: false\r\n        });\r\n        Object.defineProperty(this, \"_disposers\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: []\r\n        });\r\n        Object.defineProperty(this, \"_resizeSensorDisposer\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"_tooltips\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: []\r\n        });\r\n        Object.defineProperty(this, \"_htmlElementContainer\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"_htmlEnabledContainers\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: []\r\n        });\r\n        if (!isReal) {\r\n            throw new Error(\"You cannot use `new Class()`, instead use `Class.new()`\");\r\n        }\r\n        this._settings = settings;\r\n        if (settings.accessible == false) {\r\n            this._a11yD = true;\r\n        }\r\n        if (settings.useSafeResolution == null) {\r\n            settings.useSafeResolution = true;\r\n        }\r\n        let resolution;\r\n        if (settings.useSafeResolution) {\r\n            resolution = $utils.getSafeResolution();\r\n        }\r\n        this._renderer = new CanvasRenderer(resolution);\r\n        let dom;\r\n        if (id instanceof HTMLElement) {\r\n            dom = id;\r\n        }\r\n        else {\r\n            dom = document.getElementById(id);\r\n        }\r\n        $array.each(registry.rootElements, (root) => {\r\n            if (root.dom === dom) {\r\n                throw new Error(\"You cannot have multiple Roots on the same DOM node\");\r\n            }\r\n        });\r\n        this.interfaceColors = InterfaceColors.new(this, {});\r\n        if (dom === null) {\r\n            throw new Error(\"Could not find HTML element with id `\" + id + \"`\");\r\n        }\r\n        this.dom = dom;\r\n        let inner = document.createElement(\"div\");\r\n        inner.style.position = \"relative\";\r\n        inner.style.width = \"100%\";\r\n        inner.style.height = \"100%\";\r\n        dom.appendChild(inner);\r\n        const tooltipContainerBounds = settings.tooltipContainerBounds;\r\n        if (tooltipContainerBounds) {\r\n            this._tooltipContainerSettings = tooltipContainerBounds;\r\n        }\r\n        this._inner = inner;\r\n        this._updateComputedStyles();\r\n        registry.rootElements.push(this);\r\n    }\r\n    static new(id, settings) {\r\n        const root = new Root(id, settings, true);\r\n        root._init();\r\n        return root;\r\n    }\r\n    moveDOM(id) {\r\n        let dom;\r\n        if (id instanceof HTMLElement) {\r\n            dom = id;\r\n        }\r\n        else {\r\n            dom = document.getElementById(id);\r\n        }\r\n        if (dom) {\r\n            while (this.dom.childNodes.length > 0) {\r\n                dom.appendChild(this.dom.childNodes[0]);\r\n            }\r\n            this.dom = dom;\r\n            this._initResizeSensor();\r\n            this.resize();\r\n        }\r\n    }\r\n    _handleLogo() {\r\n        if (this._logo) {\r\n            const w = this.dom.offsetWidth;\r\n            const h = this.dom.offsetHeight;\r\n            if ((w <= 150) || (h <= 60)) {\r\n                this._logo.hide();\r\n            }\r\n            else {\r\n                this._logo.show();\r\n            }\r\n        }\r\n    }\r\n    _showBranding() {\r\n        if (!this._logo) {\r\n            const logo = this.tooltipContainer.children.push(Container.new(this, {\r\n                interactive: true,\r\n                interactiveChildren: false,\r\n                position: \"absolute\",\r\n                setStateOnChildren: true,\r\n                paddingTop: 9,\r\n                paddingRight: 9,\r\n                paddingBottom: 9,\r\n                paddingLeft: 9,\r\n                scale: .6,\r\n                y: percent(100),\r\n                centerY: p100,\r\n                tooltipText: \"Created using amCharts 5\",\r\n                tooltipX: p100,\r\n                cursorOverStyle: \"pointer\",\r\n                background: Rectangle.new(this, {\r\n                    fill: color(0x474758),\r\n                    fillOpacity: 0,\r\n                    tooltipY: 5\r\n                })\r\n            }));\r\n            const tooltip = Tooltip.new(this, {\r\n                pointerOrientation: \"horizontal\",\r\n                paddingTop: 4,\r\n                paddingRight: 7,\r\n                paddingBottom: 4,\r\n                paddingLeft: 7\r\n            });\r\n            tooltip.label.setAll({\r\n                fontSize: 12\r\n            });\r\n            tooltip.get(\"background\").setAll({\r\n                fill: this.interfaceColors.get(\"background\"),\r\n                stroke: this.interfaceColors.get(\"grid\"),\r\n                strokeOpacity: 0.3\r\n            });\r\n            logo.set(\"tooltip\", tooltip);\r\n            logo.events.on(\"click\", () => {\r\n                window.open(\"https://www.amcharts.com/\", \"_blank\");\r\n            });\r\n            logo.states.create(\"hover\", {});\r\n            const m = logo.children.push(Graphics.new(this, {\r\n                stroke: color(0xcccccc),\r\n                strokeWidth: 3,\r\n                svgPath: \"M5 25 L13 25h13.6c3.4 0 6 0 10.3-4.3s5.2-12 8.6-12c3.4 0 4.3 8.6 7.7 8.6M83.4 25H79.8c-3.4 0-6 0-10.3-4.3s-5.2-12-8.6-12-4.3 8.6-7.7 8.6\"\r\n            }));\r\n            m.states.create(\"hover\", { stroke: color(0x3CABFF) });\r\n            const a = logo.children.push(Graphics.new(this, {\r\n                stroke: color(0x888888),\r\n                strokeWidth: 3,\r\n                svgPath: \"M83.4 25h-31C37 25 39.5 4.4 28.4 4.4S18.9 24.2 4.3 25H0\"\r\n            }));\r\n            a.states.create(\"hover\", { stroke: color(0x474758) });\r\n            //logo.set(\"tooltip\", this._tooltip);\r\n            //logo.setPrivate(\"tooltipTarget\", logo.get(\"background\"));\r\n            this._logo = logo;\r\n            this._handleLogo();\r\n        }\r\n    }\r\n    _getRealSize() {\r\n        return this.dom.getBoundingClientRect();\r\n    }\r\n    _getCalculatedSize(rect) {\r\n        if (this._settings.calculateSize) {\r\n            return this._settings.calculateSize(rect);\r\n        }\r\n        else {\r\n            return {\r\n                width: rect.width,\r\n                height: rect.height,\r\n            };\r\n        }\r\n    }\r\n    _init() {\r\n        const settings = this._settings;\r\n        if (settings.accessible !== false) {\r\n            if (settings.focusable) {\r\n                this._inner.setAttribute(\"focusable\", \"true\");\r\n                this._inner.setAttribute(\"tabindex\", this.tabindex + \"\");\r\n            }\r\n            if (settings.ariaLabel) {\r\n                this._inner.setAttribute(\"aria-label\", settings.ariaLabel);\r\n            }\r\n            if (settings.role) {\r\n                this._inner.setAttribute(\"role\", settings.role);\r\n            }\r\n        }\r\n        const renderer = this._renderer;\r\n        const rect = this._getRealSize();\r\n        const size = this._getCalculatedSize(rect);\r\n        const width = Math.floor(size.width);\r\n        const height = Math.floor(size.height);\r\n        const realWidth = Math.floor(rect.width);\r\n        const realHeight = Math.floor(rect.height);\r\n        const rootContainer = Container.new(this, {\r\n            visible: true,\r\n            width: width,\r\n            height: height,\r\n        });\r\n        this._rootContainer = rootContainer;\r\n        this._rootContainer._defaultThemes.push(DefaultTheme.new(this));\r\n        const container = rootContainer.children.push(Container.new(this, { visible: true, width: p100, height: p100 }));\r\n        this.container = container;\r\n        renderer.resize(realWidth, realHeight, width, height);\r\n        //@todo: better appendChild - refer\r\n        this._inner.appendChild(renderer.view);\r\n        // TODO: TMP TMP TMP for testing only, remove\r\n        //renderer.debugGhostView = true;\r\n        this._initResizeSensor();\r\n        // HTML content holder\r\n        const htmlElementContainer = document.createElement(\"div\");\r\n        this._htmlElementContainer = htmlElementContainer;\r\n        htmlElementContainer.className = \"am5-html-container\";\r\n        htmlElementContainer.style.position = \"absolute\";\r\n        htmlElementContainer.style.pointerEvents = \"none\";\r\n        if (!this._tooltipContainerSettings) {\r\n            htmlElementContainer.style.overflow = \"hidden\";\r\n        }\r\n        this._inner.appendChild(htmlElementContainer);\r\n        if (this._a11yD !== true) {\r\n            // Create element which is used to make announcements to screen reader\r\n            const readerAlertElement = document.createElement(\"div\");\r\n            readerAlertElement.className = \"am5-reader-container\";\r\n            readerAlertElement.setAttribute(\"role\", \"alert\");\r\n            // readerAlertElement.style.zIndex = \"-100000\";\r\n            // readerAlertElement.style.opacity = \"0\";\r\n            // readerAlertElement.style.top = \"0\";\r\n            readerAlertElement.style.position = \"absolute\";\r\n            readerAlertElement.style.width = \"1px\";\r\n            readerAlertElement.style.height = \"1px\";\r\n            readerAlertElement.style.overflow = \"hidden\";\r\n            readerAlertElement.style.clip = \"rect(1px, 1px, 1px, 1px)\";\r\n            this._readerAlertElement = readerAlertElement;\r\n            this._inner.appendChild(this._readerAlertElement);\r\n            const focusElementContainer = document.createElement(\"div\");\r\n            focusElementContainer.className = \"am5-focus-container\";\r\n            focusElementContainer.style.position = \"absolute\";\r\n            focusElementContainer.style.pointerEvents = \"none\";\r\n            focusElementContainer.style.top = \"0px\";\r\n            focusElementContainer.style.left = \"0px\";\r\n            focusElementContainer.style.overflow = \"hidden\";\r\n            focusElementContainer.style.width = width + \"px\";\r\n            focusElementContainer.style.height = height + \"px\";\r\n            focusElementContainer.setAttribute(\"role\", \"graphics-document\");\r\n            $utils.setInteractive(focusElementContainer, false);\r\n            this._focusElementContainer = focusElementContainer;\r\n            this._inner.appendChild(this._focusElementContainer);\r\n            const tooltipElementContainer = document.createElement(\"div\");\r\n            this._tooltipElementContainer = tooltipElementContainer;\r\n            tooltipElementContainer.className = \"am5-tooltip-container\";\r\n            this._inner.appendChild(tooltipElementContainer);\r\n            // Add keyboard events for accessibility, e.g. simulating drag with arrow\r\n            // keys and click with ENTER\r\n            if ($utils.supports(\"keyboardevents\")) {\r\n                this._disposers.push($utils.addEventListener(window, \"keydown\", (ev) => {\r\n                    const eventKey = $utils.getEventKey(ev);\r\n                    if (eventKey == \"Shift\") {\r\n                        this._isShift = true;\r\n                    }\r\n                    else if (eventKey == \"Tab\") {\r\n                        this._isShift = ev.shiftKey;\r\n                    }\r\n                }));\r\n                this._disposers.push($utils.addEventListener(window, \"keyup\", (ev) => {\r\n                    const eventKey = $utils.getEventKey(ev);\r\n                    if (eventKey == \"Shift\") {\r\n                        this._isShift = false;\r\n                    }\r\n                }));\r\n                this._disposers.push($utils.addEventListener(focusElementContainer, \"click\", () => {\r\n                    // Some screen readers convert ENTER (and some SPACE) press whil on\r\n                    // focused element to a \"click\" event, preventing actual \"keydown\"\r\n                    // event from firing. We're using this \"click\" event to still\r\n                    // generate internal click events.\r\n                    const focusedSprite = this._focusedSprite;\r\n                    if (focusedSprite) {\r\n                        const downEvent = renderer.getEvent(new MouseEvent(\"click\"));\r\n                        focusedSprite.events.dispatch(\"click\", {\r\n                            type: \"click\",\r\n                            originalEvent: downEvent.event,\r\n                            point: downEvent.point,\r\n                            simulated: true,\r\n                            target: focusedSprite\r\n                        });\r\n                    }\r\n                }));\r\n                this._disposers.push($utils.addEventListener(focusElementContainer, \"keydown\", (ev) => {\r\n                    const focusedSprite = this._focusedSprite;\r\n                    if (focusedSprite) {\r\n                        if (ev.key == \"Escape\") {\r\n                            // ESC pressed - lose current focus\r\n                            $utils.blur();\r\n                            this._focusedSprite = undefined;\r\n                        }\r\n                        let dragOffsetX = 0;\r\n                        let dragOffsetY = 0;\r\n                        // TODO: figure out if using bogus MouseEvent is fine, or it will\r\n                        // fail on some platforms\r\n                        const eventKey = $utils.getEventKey(ev);\r\n                        switch (eventKey) {\r\n                            case \"Enter\":\r\n                            case \" \":\r\n                                if (eventKey == \" \" && focusedSprite.get(\"role\") != \"checkbox\") {\r\n                                    return;\r\n                                }\r\n                                ev.preventDefault();\r\n                                const downEvent = renderer.getEvent(new MouseEvent(\"mouse\"));\r\n                                focusedSprite.events.dispatch(\"click\", {\r\n                                    type: \"click\",\r\n                                    originalEvent: downEvent.event,\r\n                                    point: downEvent.point,\r\n                                    simulated: true,\r\n                                    target: focusedSprite\r\n                                });\r\n                                return;\r\n                            case \"ArrowLeft\":\r\n                                dragOffsetX = -6;\r\n                                break;\r\n                            case \"ArrowRight\":\r\n                                dragOffsetX = 6;\r\n                                break;\r\n                            case \"ArrowUp\":\r\n                                dragOffsetY = -6;\r\n                                break;\r\n                            case \"ArrowDown\":\r\n                                dragOffsetY = 6;\r\n                                break;\r\n                            default:\r\n                                return;\r\n                        }\r\n                        if (dragOffsetX != 0 || dragOffsetY != 0) {\r\n                            ev.preventDefault();\r\n                            if (!focusedSprite.isDragging()) {\r\n                                // Start dragging\r\n                                this._keyboardDragPoint = {\r\n                                    x: 0,\r\n                                    y: 0\r\n                                };\r\n                                const downEvent = renderer.getEvent(new MouseEvent(\"mousedown\", {\r\n                                    clientX: 0,\r\n                                    clientY: 0\r\n                                }));\r\n                                if (focusedSprite.events.isEnabled(\"pointerdown\")) {\r\n                                    focusedSprite.events.dispatch(\"pointerdown\", {\r\n                                        type: \"pointerdown\",\r\n                                        originalEvent: downEvent.event,\r\n                                        point: downEvent.point,\r\n                                        simulated: true,\r\n                                        target: focusedSprite\r\n                                    });\r\n                                }\r\n                            }\r\n                            else {\r\n                                // Move focus marker\r\n                                //this._positionFocusElement(focusedSprite);\r\n                            }\r\n                            // Move incrementally\r\n                            const dragPoint = this._keyboardDragPoint;\r\n                            dragPoint.x += dragOffsetX;\r\n                            dragPoint.y += dragOffsetY;\r\n                            const moveEvent = renderer.getEvent(new MouseEvent(\"mousemove\", {\r\n                                clientX: dragPoint.x,\r\n                                clientY: dragPoint.y\r\n                            }), false);\r\n                            if (focusedSprite.events.isEnabled(\"globalpointermove\")) {\r\n                                focusedSprite.events.dispatch(\"globalpointermove\", {\r\n                                    type: \"globalpointermove\",\r\n                                    originalEvent: moveEvent.event,\r\n                                    point: moveEvent.point,\r\n                                    simulated: true,\r\n                                    target: focusedSprite\r\n                                });\r\n                            }\r\n                        }\r\n                    }\r\n                }));\r\n                this._disposers.push($utils.addEventListener(focusElementContainer, \"keyup\", (ev) => {\r\n                    if (this._focusedSprite) {\r\n                        const focusedSprite = this._focusedSprite;\r\n                        const eventKey = $utils.getEventKey(ev);\r\n                        switch (eventKey) {\r\n                            case \"ArrowLeft\":\r\n                            case \"ArrowRight\":\r\n                            case \"ArrowTop\":\r\n                            case \"ArrowDown\":\r\n                                if (focusedSprite.isDragging()) {\r\n                                    // Simulate drag stop\r\n                                    const dragPoint = this._keyboardDragPoint;\r\n                                    const upEvent = renderer.getEvent(new MouseEvent(\"mouseup\", {\r\n                                        clientX: dragPoint.x,\r\n                                        clientY: dragPoint.y\r\n                                    }));\r\n                                    if (focusedSprite.events.isEnabled(\"globalpointerup\")) {\r\n                                        focusedSprite.events.dispatch(\"globalpointerup\", {\r\n                                            type: \"globalpointerup\",\r\n                                            originalEvent: upEvent.event,\r\n                                            point: upEvent.point,\r\n                                            simulated: true,\r\n                                            target: focusedSprite\r\n                                        });\r\n                                    }\r\n                                    //this._positionFocusElement(focusedSprite);\r\n                                    this._keyboardDragPoint = undefined;\r\n                                    // @todo dispatch mouseup event instead of calling dragStop?\r\n                                    // this._dispatchEvent(\"globalpointerup\", target, upEvent);\r\n                                    return;\r\n                                }\r\n                                else if (focusedSprite.get(\"focusableGroup\")) {\r\n                                    // Find next item in focusable group\r\n                                    const group = focusedSprite.get(\"focusableGroup\");\r\n                                    const items = this._tabindexes.filter((item) => {\r\n                                        return item.get(\"focusableGroup\") == group && item.getPrivate(\"focusable\") !== false && item.isVisibleDeep() ? true : false;\r\n                                    });\r\n                                    let index = items.indexOf(focusedSprite);\r\n                                    const lastIndex = items.length - 1;\r\n                                    index += (eventKey == \"ArrowRight\" || eventKey == \"ArrowDown\") ? 1 : -1;\r\n                                    if (index < 0) {\r\n                                        index = lastIndex;\r\n                                    }\r\n                                    else if (index > lastIndex) {\r\n                                        index = 0;\r\n                                    }\r\n                                    $utils.focus(items[index].getPrivate(\"focusElement\").dom);\r\n                                }\r\n                                break;\r\n                        }\r\n                    }\r\n                }));\r\n            }\r\n        }\r\n        this._startTicker();\r\n        this.setThemes([]);\r\n        this._addTooltip();\r\n        if (!this._hasLicense()) {\r\n            this._showBranding();\r\n        }\r\n    }\r\n    _initResizeSensor() {\r\n        if (this._resizeSensorDisposer) {\r\n            this._resizeSensorDisposer.dispose();\r\n        }\r\n        this._resizeSensorDisposer = new ResizeSensor(this.dom, () => {\r\n            if (this.autoResize) {\r\n                this.resize();\r\n            }\r\n        });\r\n        this._disposers.push(this._resizeSensorDisposer);\r\n    }\r\n    /**\r\n     * If automatic resizing of char is disabled (`root.autoResize = false`), it\r\n     * can be resized manually by calling this method.\r\n     */\r\n    resize() {\r\n        const rect = this._getRealSize();\r\n        const size = this._getCalculatedSize(rect);\r\n        const w = Math.floor(size.width);\r\n        const h = Math.floor(size.height);\r\n        if (w > 0 && h > 0) {\r\n            const realWidth = Math.floor(rect.width);\r\n            const realHeight = Math.floor(rect.height);\r\n            const htmlElementContainer = this._htmlElementContainer;\r\n            htmlElementContainer.style.width = w + \"px\";\r\n            htmlElementContainer.style.height = h + \"px\";\r\n            if (this._a11yD !== true) {\r\n                const focusElementContainer = this._focusElementContainer;\r\n                focusElementContainer.style.width = w + \"px\";\r\n                focusElementContainer.style.height = h + \"px\";\r\n            }\r\n            this._renderer.resize(realWidth, realHeight, w, h);\r\n            const rootContainer = this._rootContainer;\r\n            rootContainer.setPrivate(\"width\", w);\r\n            rootContainer.setPrivate(\"height\", h);\r\n            this._render();\r\n            this._handleLogo();\r\n        }\r\n    }\r\n    _render() {\r\n        this._renderer.render(this._rootContainer._display);\r\n        if (this._focusElementDirty) {\r\n            this._updateCurrentFocus();\r\n            this._focusElementDirty = false;\r\n        }\r\n    }\r\n    _runTickers(currentTime) {\r\n        $array.each(this._tickers, (f) => {\r\n            f(currentTime);\r\n        });\r\n    }\r\n    _runAnimations(currentTime) {\r\n        let running = 0;\r\n        $array.keepIf(this._animations, (animation) => {\r\n            const state = animation._runAnimation(currentTime);\r\n            if (state === AnimationState.Stopped) {\r\n                return false;\r\n            }\r\n            else if (state === AnimationState.Playing) {\r\n                ++running;\r\n                return true;\r\n            }\r\n            else {\r\n                return true;\r\n            }\r\n        });\r\n        this._isDirtyAnimation = false;\r\n        return running === 0;\r\n    }\r\n    _runDirties() {\r\n        //console.log(\"tick **************************************************************\");\r\n        let allParents = {};\r\n        while (this._isDirtyParents) {\r\n            // This must be before calling _prepareChildren\r\n            this._isDirtyParents = false;\r\n            $object.keys(this._dirtyParents).forEach((key) => {\r\n                const parent = this._dirtyParents[key];\r\n                delete this._dirtyParents[key];\r\n                if (!parent.isDisposed()) {\r\n                    allParents[parent.uid] = parent;\r\n                    parent._prepareChildren();\r\n                }\r\n            });\r\n        }\r\n        $object.keys(allParents).forEach((key) => {\r\n            allParents[key]._updateChildren();\r\n        });\r\n        const objects = [];\r\n        //\t\tconsole.log(\"_beforeChanged\")\r\n        $object.keys(this._dirty).forEach((key) => {\r\n            const entity = this._dirty[key];\r\n            if (entity.isDisposed()) {\r\n                delete this._dirty[entity.uid];\r\n            }\r\n            else {\r\n                objects.push(entity);\r\n                entity._beforeChanged();\r\n            }\r\n        });\r\n        //\t\tconsole.log(\"_changed\")\r\n        objects.forEach((entity) => {\r\n            entity._changed();\r\n            delete this._dirty[entity.uid];\r\n            entity._clearDirty();\r\n        });\r\n        this._isDirty = false;\r\n        const depths = {};\r\n        const bounds = [];\r\n        $object.keys(this._dirtyBounds).forEach((key) => {\r\n            const entity = this._dirtyBounds[key];\r\n            delete this._dirtyBounds[key];\r\n            if (!entity.isDisposed()) {\r\n                depths[entity.uid] = entity.depth();\r\n                bounds.push(entity);\r\n            }\r\n        });\r\n        this._positionHTMLElements();\r\n        // High depth -> low depth\r\n        bounds.sort((x, y) => {\r\n            return $order.compare(depths[y.uid], depths[x.uid]);\r\n        });\r\n        //\t\tconsole.log(\"_updateBounds\")\r\n        bounds.forEach((entity) => {\r\n            entity._updateBounds();\r\n        });\r\n        //\t\tconsole.log(\"_updatePosition\")\r\n        const dirtyPositions = this._dirtyPositions;\r\n        $object.keys(dirtyPositions).forEach((key) => {\r\n            const sprite = dirtyPositions[key];\r\n            delete dirtyPositions[key];\r\n            if (!sprite.isDisposed()) {\r\n                sprite._updatePosition();\r\n            }\r\n        });\r\n        //\t\tconsole.log(\"_afterChanged\")\r\n        objects.forEach((entity) => {\r\n            entity._afterChanged();\r\n        });\r\n    }\r\n    _renderFrame(currentTime) {\r\n        if (this._updateTick) {\r\n            if (this.events.isEnabled(\"framestarted\")) {\r\n                this.events.dispatch(\"framestarted\", {\r\n                    type: \"framestarted\",\r\n                    target: this,\r\n                    timestamp: currentTime,\r\n                });\r\n            }\r\n            this._checkComputedStyles();\r\n            this._runTickers(currentTime);\r\n            const animationDone = this._runAnimations(currentTime);\r\n            this._runDirties();\r\n            this._render();\r\n            this._renderer.resetImageArray();\r\n            this._positionHTMLElements();\r\n            if (this.events.isEnabled(\"frameended\")) {\r\n                this.events.dispatch(\"frameended\", {\r\n                    type: \"frameended\",\r\n                    target: this,\r\n                    timestamp: currentTime,\r\n                });\r\n            }\r\n            return this._tickers.length === 0 &&\r\n                animationDone &&\r\n                !this._isDirtyAnimation &&\r\n                !this._isDirty;\r\n        }\r\n        else {\r\n            return true;\r\n        }\r\n    }\r\n    _runTicker(currentTime, now) {\r\n        if (!this.isDisposed()) {\r\n            this.animationTime = currentTime;\r\n            const done = this._renderFrame(currentTime);\r\n            // No more work to do\r\n            if (done) {\r\n                this._ticker = null;\r\n                this.animationTime = null;\r\n            }\r\n            else {\r\n                if (!this._paused) {\r\n                    if (now) {\r\n                        this._ticker;\r\n                    }\r\n                    else {\r\n                        rAF(this.fps, this._ticker);\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n    _runTickerNow(timeout = 10000) {\r\n        if (!this.isDisposed()) {\r\n            const endTime = performance.now() + timeout;\r\n            for (;;) {\r\n                const currentTime = performance.now();\r\n                if (currentTime >= endTime) {\r\n                    this.animationTime = null;\r\n                    break;\r\n                }\r\n                this.animationTime = currentTime;\r\n                const done = this._renderFrame(currentTime);\r\n                if (done) {\r\n                    this.animationTime = null;\r\n                    break;\r\n                }\r\n            }\r\n        }\r\n    }\r\n    _startTicker() {\r\n        if (this._ticker === null) {\r\n            this.animationTime = null;\r\n            this._ticker = (currentTime) => {\r\n                this._runTicker(currentTime);\r\n            };\r\n            rAF(this.fps, this._ticker);\r\n        }\r\n    }\r\n    /**\r\n     * Returns whether the root is updating or not.\r\n     */\r\n    get updateTick() {\r\n        return this._updateTick;\r\n    }\r\n    /**\r\n     * Enables or disables the root updating.\r\n     */\r\n    set updateTick(value) {\r\n        this._updateTick = value;\r\n        if (value) {\r\n            this._startTicker();\r\n        }\r\n    }\r\n    _addDirtyEntity(entity) {\r\n        this._isDirty = true;\r\n        if (this._dirty[entity.uid] === undefined) {\r\n            this._dirty[entity.uid] = entity;\r\n        }\r\n        this._startTicker();\r\n    }\r\n    _addDirtyParent(parent) {\r\n        this._isDirty = true;\r\n        this._isDirtyParents = true;\r\n        if (this._dirtyParents[parent.uid] === undefined) {\r\n            this._dirtyParents[parent.uid] = parent;\r\n        }\r\n        this._startTicker();\r\n    }\r\n    _addDirtyBounds(entity) {\r\n        this._isDirty = true;\r\n        if (this._dirtyBounds[entity.uid] === undefined) {\r\n            this._dirtyBounds[entity.uid] = entity;\r\n        }\r\n        this._startTicker();\r\n    }\r\n    _addDirtyPosition(sprite) {\r\n        this._isDirty = true;\r\n        if (this._dirtyPositions[sprite.uid] === undefined) {\r\n            this._dirtyPositions[sprite.uid] = sprite;\r\n        }\r\n        this._startTicker();\r\n    }\r\n    _addAnimation(animation) {\r\n        this._isDirtyAnimation = true;\r\n        // TODO use numeric id instead\r\n        if (this._animations.indexOf(animation) === -1) {\r\n            this._animations.push(animation);\r\n        }\r\n        this._startTicker();\r\n    }\r\n    _markDirty() {\r\n        this._isDirty = true;\r\n    }\r\n    _markDirtyRedraw() {\r\n        this.events.once(\"frameended\", () => {\r\n            this._isDirty = true;\r\n            this._startTicker();\r\n        });\r\n    }\r\n    eachFrame(f) {\r\n        this._tickers.push(f);\r\n        this._startTicker();\r\n        return new Disposer(() => {\r\n            $array.removeFirst(this._tickers, f);\r\n        });\r\n    }\r\n    markDirtyGlobal(container) {\r\n        if (!container) {\r\n            container = this.container;\r\n        }\r\n        container.walkChildren((child) => {\r\n            if (child instanceof Container) {\r\n                this.markDirtyGlobal(child);\r\n            }\r\n            child.markDirty();\r\n            child.markDirtyBounds();\r\n        });\r\n    }\r\n    /**\r\n     * Returns width of the target container, in pixels.\r\n     *\r\n     * @return Width\r\n     */\r\n    width() {\r\n        // TODO make this more efficient, maybe just return the renderer's width ?\r\n        return Math.floor(this._getCalculatedSize(this._getRealSize()).width);\r\n    }\r\n    /**\r\n     * Returns height of the target container, in pixels.\r\n     *\r\n     * @return Height\r\n     */\r\n    height() {\r\n        // TODO make this more efficient, maybe just return the renderer's height ?\r\n        return Math.floor(this._getCalculatedSize(this._getRealSize()).height);\r\n    }\r\n    /**\r\n     * Disposes root and all the content in it.\r\n     */\r\n    dispose() {\r\n        if (!this._isDisposed) {\r\n            this._isDisposed = true;\r\n            this._rootContainer.dispose();\r\n            this._renderer.dispose();\r\n            this.horizontalLayout.dispose();\r\n            this.verticalLayout.dispose();\r\n            this.interfaceColors.dispose();\r\n            $array.each(this._disposers, (x) => {\r\n                x.dispose();\r\n            });\r\n            if (this._inner) {\r\n                $utils.removeElement(this._inner);\r\n            }\r\n            $array.remove(registry.rootElements, this);\r\n        }\r\n    }\r\n    /**\r\n     * Returns `true` if root element is disposed.\r\n     *\r\n     * @return Disposed?\r\n     */\r\n    isDisposed() {\r\n        return this._isDisposed;\r\n    }\r\n    /**\r\n     * Triggers screen reader read out a message.\r\n     *\r\n     * @see {@link https://www.amcharts.com/docs/v5/concepts/accessibility/} for more info\r\n     * @param  text  Alert text\r\n     */\r\n    readerAlert(text) {\r\n        if (this._a11yD !== true) {\r\n            this._readerAlertElement.innerHTML = $utils.stripTags(text);\r\n        }\r\n    }\r\n    /**\r\n     * Sets themes to be used for the chart.\r\n     *\r\n     * @see {@link https://www.amcharts.com/docs/v5/concepts/themes/} for more info\r\n     * @param  themes  A list of themes\r\n     */\r\n    setThemes(themes) {\r\n        this._rootContainer.set(\"themes\", themes);\r\n        // otherwise new themes are not applied\r\n        const tooltipContainer = this.tooltipContainer;\r\n        if (tooltipContainer) {\r\n            tooltipContainer._applyThemes();\r\n        }\r\n        // @todo review this\r\n        const interfaceColors = this.interfaceColors;\r\n        if (interfaceColors) {\r\n            interfaceColors._applyThemes();\r\n        }\r\n    }\r\n    _addTooltip() {\r\n        if (!this.tooltipContainer) {\r\n            const tooltipContainerSettings = this._tooltipContainerSettings;\r\n            const tooltipContainer = this._rootContainer.children.push(Container.new(this, {\r\n                position: \"absolute\",\r\n                isMeasured: false,\r\n                width: p100,\r\n                height: p100,\r\n                layer: tooltipContainerSettings ? 35 : 30,\r\n                layerMargin: tooltipContainerSettings ? tooltipContainerSettings : undefined\r\n            }));\r\n            this.tooltipContainer = tooltipContainer;\r\n            const tooltip = Tooltip.new(this, {});\r\n            this.container.set(\"tooltip\", tooltip);\r\n            tooltip.hide(0);\r\n            this._tooltip = tooltip;\r\n        }\r\n    }\r\n    /**\r\n     * Accesibility\r\n     */\r\n    _registerTabindexOrder(target) {\r\n        if (this._a11yD == true) {\r\n            return;\r\n        }\r\n        if (target.get(\"focusable\")) {\r\n            $array.pushOne(this._tabindexes, target);\r\n        }\r\n        else {\r\n            $array.remove(this._tabindexes, target);\r\n        }\r\n        this._invalidateTabindexes();\r\n    }\r\n    _unregisterTabindexOrder(target) {\r\n        if (this._a11yD == true) {\r\n            return;\r\n        }\r\n        $array.remove(this._tabindexes, target);\r\n        this._invalidateTabindexes();\r\n    }\r\n    _invalidateTabindexes() {\r\n        if (this._a11yD == true) {\r\n            return;\r\n        }\r\n        this._tabindexes.sort((a, b) => {\r\n            const aindex = a.get(\"tabindexOrder\", 0);\r\n            const bindex = b.get(\"tabindexOrder\", 0);\r\n            if (aindex == bindex) {\r\n                return 0;\r\n            }\r\n            else if (aindex > bindex) {\r\n                return 1;\r\n            }\r\n            else {\r\n                return -1;\r\n            }\r\n        });\r\n        const groups = [];\r\n        $array.each(this._tabindexes, (item, index) => {\r\n            if (!item.getPrivate(\"focusElement\")) {\r\n                this._makeFocusElement(index, item);\r\n            }\r\n            else {\r\n                this._moveFocusElement(index, item);\r\n            }\r\n            const group = item.get(\"focusableGroup\");\r\n            if (group && item.getPrivate(\"focusable\") !== false) {\r\n                if (groups.indexOf(group) !== -1) {\r\n                    // Non-first element in the group, make it not directly focusable\r\n                    item.getPrivate(\"focusElement\").dom.setAttribute(\"tabindex\", \"-1\");\r\n                }\r\n                else {\r\n                    groups.push(group);\r\n                }\r\n            }\r\n        });\r\n    }\r\n    _updateCurrentFocus() {\r\n        if (this._a11yD == true) {\r\n            return;\r\n        }\r\n        if (this._focusedSprite) {\r\n            this._decorateFocusElement(this._focusedSprite);\r\n            this._positionFocusElement(this._focusedSprite);\r\n        }\r\n    }\r\n    _decorateFocusElement(target, focusElement) {\r\n        if (this._a11yD == true) {\r\n            return;\r\n        }\r\n        // Decorate with proper accessibility attributes\r\n        if (!focusElement) {\r\n            focusElement = target.getPrivate(\"focusElement\").dom;\r\n        }\r\n        if (!focusElement) {\r\n            return;\r\n        }\r\n        const role = target.get(\"role\");\r\n        if (role) {\r\n            focusElement.setAttribute(\"role\", role);\r\n        }\r\n        else {\r\n            focusElement.removeAttribute(\"role\");\r\n        }\r\n        const ariaLabel = target.get(\"ariaLabel\");\r\n        if (ariaLabel) {\r\n            const label = populateString(target, ariaLabel);\r\n            focusElement.setAttribute(\"aria-label\", label);\r\n        }\r\n        else {\r\n            focusElement.removeAttribute(\"aria-label\");\r\n        }\r\n        const ariaLive = target.get(\"ariaLive\");\r\n        if (ariaLive) {\r\n            focusElement.setAttribute(\"aria-live\", ariaLive);\r\n        }\r\n        else {\r\n            focusElement.removeAttribute(\"aria-live\");\r\n        }\r\n        const ariaChecked = target.get(\"ariaChecked\");\r\n        if (ariaChecked != null && role && [\"checkbox\", \"option\", \"radio\", \"menuitemcheckbox\", \"menuitemradio\", \"treeitem\"].indexOf(role) !== -1) {\r\n            focusElement.setAttribute(\"aria-checked\", ariaChecked ? \"true\" : \"false\");\r\n        }\r\n        else {\r\n            focusElement.removeAttribute(\"aria-checked\");\r\n        }\r\n        const ariaCurrent = target.get(\"ariaCurrent\");\r\n        if (ariaCurrent != null) {\r\n            focusElement.setAttribute(\"aria-current\", ariaCurrent);\r\n        }\r\n        else {\r\n            focusElement.removeAttribute(\"aria-current\");\r\n        }\r\n        const ariaSelected = target.get(\"ariaSelected\");\r\n        if (ariaSelected != null && role && [\"gridcell\", \"option\", \"row\", \"tab\", \"columnheader\", \"rowheader\", \"treeitem\"].indexOf(role) !== -1) {\r\n            focusElement.setAttribute(\"aria-selected\", ariaSelected ? \"true\" : \"false\");\r\n        }\r\n        else {\r\n            focusElement.removeAttribute(\"aria-selected\");\r\n        }\r\n        if (target.get(\"ariaHidden\")) {\r\n            focusElement.setAttribute(\"aria-hidden\", \"true\");\r\n        }\r\n        else {\r\n            focusElement.removeAttribute(\"aria-hidden\");\r\n        }\r\n        const ariaOrientation = target.get(\"ariaOrientation\");\r\n        if (ariaOrientation) {\r\n            focusElement.setAttribute(\"aria-orientation\", ariaOrientation);\r\n        }\r\n        else {\r\n            focusElement.removeAttribute(\"aria-orientation\");\r\n        }\r\n        const ariaValueNow = target.get(\"ariaValueNow\");\r\n        if (ariaValueNow) {\r\n            focusElement.setAttribute(\"aria-valuenow\", ariaValueNow);\r\n        }\r\n        else {\r\n            focusElement.removeAttribute(\"aria-valuenow\");\r\n        }\r\n        const ariaValueMin = target.get(\"ariaValueMin\");\r\n        if (ariaValueMin) {\r\n            focusElement.setAttribute(\"aria-valuemin\", ariaValueMin);\r\n        }\r\n        else {\r\n            focusElement.removeAttribute(\"aria-valuemin\");\r\n        }\r\n        const ariaValueMax = target.get(\"ariaValueMax\");\r\n        if (ariaValueMax) {\r\n            focusElement.setAttribute(\"aria-valuemax\", ariaValueMax);\r\n        }\r\n        else {\r\n            focusElement.removeAttribute(\"aria-valuemax\");\r\n        }\r\n        const ariaValueText = target.get(\"ariaValueText\");\r\n        if (ariaValueText) {\r\n            focusElement.setAttribute(\"aria-valuetext\", ariaValueText);\r\n        }\r\n        else {\r\n            focusElement.removeAttribute(\"aria-valuetext\");\r\n        }\r\n        const ariaControls = target.get(\"ariaControls\");\r\n        if (ariaControls) {\r\n            focusElement.setAttribute(\"aria-controls\", ariaControls);\r\n        }\r\n        else {\r\n            focusElement.removeAttribute(\"aria-controls\");\r\n        }\r\n        if (target.get(\"visible\") && target.get(\"opacity\") !== 0 && target.get(\"role\") != \"tooltip\" && !target.isHidden() && target.getPrivate(\"focusable\") !== false) {\r\n            if (focusElement.getAttribute(\"tabindex\") != \"-1\") {\r\n                focusElement.setAttribute(\"tabindex\", \"\" + this.tabindex);\r\n            }\r\n            focusElement.removeAttribute(\"aria-hidden\");\r\n        }\r\n        else {\r\n            focusElement.removeAttribute(\"tabindex\");\r\n            focusElement.setAttribute(\"aria-hidden\", \"true\");\r\n        }\r\n    }\r\n    _makeFocusElement(index, target) {\r\n        if (target.getPrivate(\"focusElement\") || this._a11yD == true) {\r\n            return;\r\n        }\r\n        // Init\r\n        const focusElement = document.createElement(\"div\");\r\n        if (target.get(\"role\") != \"tooltip\") {\r\n            focusElement.tabIndex = this.tabindex;\r\n        }\r\n        focusElement.style.position = \"absolute\";\r\n        $utils.setInteractive(focusElement, false);\r\n        const disposers = [];\r\n        target.setPrivate(\"focusElement\", {\r\n            dom: focusElement,\r\n            disposers,\r\n        });\r\n        this._decorateFocusElement(target);\r\n        disposers.push($utils.addEventListener(focusElement, \"focus\", (ev) => {\r\n            this._handleFocus(ev);\r\n        }));\r\n        disposers.push($utils.addEventListener(focusElement, \"blur\", (ev) => {\r\n            this._handleBlur(ev);\r\n        }));\r\n        this._moveFocusElement(index, target);\r\n    }\r\n    _removeFocusElement(target) {\r\n        if (this._a11yD == true) {\r\n            return;\r\n        }\r\n        $array.remove(this._tabindexes, target);\r\n        const focusElement = target.getPrivate(\"focusElement\");\r\n        if (focusElement) {\r\n            const container = this._focusElementContainer;\r\n            container.removeChild(focusElement.dom);\r\n            $array.each(focusElement.disposers, (x) => {\r\n                x.dispose();\r\n            });\r\n        }\r\n    }\r\n    _hideFocusElement(target) {\r\n        if (this._a11yD == true) {\r\n            return;\r\n        }\r\n        const focusElement = target.getPrivate(\"focusElement\");\r\n        focusElement.dom.style.display = \"none\";\r\n    }\r\n    _moveFocusElement(index, target) {\r\n        if (this._a11yD == true) {\r\n            return;\r\n        }\r\n        // Get container\r\n        const container = this._focusElementContainer;\r\n        const focusElement = target.getPrivate(\"focusElement\").dom;\r\n        if (focusElement === this._focusElementContainer.children[index]) {\r\n            // Nothing to do\r\n            return;\r\n        }\r\n        const next = this._focusElementContainer.children[index + 1];\r\n        if (next) {\r\n            container.insertBefore(focusElement, next);\r\n        }\r\n        else {\r\n            container.append(focusElement);\r\n        }\r\n    }\r\n    _positionFocusElement(target) {\r\n        if (this._a11yD == true || target == undefined) {\r\n            return;\r\n        }\r\n        const bounds = target.globalBounds();\r\n        let width = bounds.right == bounds.left ? target.width() : bounds.right - bounds.left;\r\n        let height = bounds.top == bounds.bottom ? target.height() : bounds.bottom - bounds.top;\r\n        const padding = this._settings.focusPadding !== undefined ? this._settings.focusPadding : 2;\r\n        let x = bounds.left - padding;\r\n        let y = bounds.top - padding;\r\n        if (width < 0) {\r\n            x += width;\r\n            width = Math.abs(width);\r\n        }\r\n        if (height < 0) {\r\n            y += height;\r\n            height = Math.abs(height);\r\n        }\r\n        const focusElement = target.getPrivate(\"focusElement\").dom;\r\n        focusElement.style.top = y + \"px\";\r\n        focusElement.style.left = x + \"px\";\r\n        focusElement.style.width = (width + padding * 2) + \"px\";\r\n        focusElement.style.height = (height + padding * 2) + \"px\";\r\n    }\r\n    _getSpriteByFocusElement(target) {\r\n        let found;\r\n        $array.eachContinue(this._tabindexes, (item, _index) => {\r\n            if (item.getPrivate(\"focusElement\").dom === target) {\r\n                found = item;\r\n                return false;\r\n            }\r\n            return true;\r\n        });\r\n        return found;\r\n    }\r\n    _handleFocus(ev) {\r\n        if (this._a11yD == true) {\r\n            return;\r\n        }\r\n        // Get element\r\n        //const focused = this._tabindexes[index];\r\n        const focused = this._getSpriteByFocusElement(ev.target);\r\n        if (!focused) {\r\n            return;\r\n        }\r\n        // Jump over hidden elements\r\n        if (!focused.isVisibleDeep()) {\r\n            this._focusNext(ev.target, this._isShift ? -1 : 1);\r\n            return;\r\n        }\r\n        // Size and position\r\n        this._positionFocusElement(focused);\r\n        //this._decorateFocusElement(focused);\r\n        this._focusedSprite = focused;\r\n        if (focused.events.isEnabled(\"focus\")) {\r\n            focused.events.dispatch(\"focus\", {\r\n                type: \"focus\",\r\n                originalEvent: ev,\r\n                target: focused\r\n            });\r\n        }\r\n    }\r\n    _focusNext(el, direction) {\r\n        if (this._a11yD == true) {\r\n            return;\r\n        }\r\n        const focusableElements = Array.from(document.querySelectorAll([\r\n            'a[href]',\r\n            'area[href]',\r\n            'button:not([disabled])',\r\n            'details',\r\n            'input:not([disabled])',\r\n            'iframe:not([disabled])',\r\n            'select:not([disabled])',\r\n            'textarea:not([disabled])',\r\n            '[contentEditable=\"\"]',\r\n            '[contentEditable=\"true\"]',\r\n            '[contentEditable=\"TRUE\"]',\r\n            '[tabindex]:not([tabindex^=\"-\"])',\r\n            //':not([disabled])'\r\n        ].join(',')));\r\n        let index = focusableElements.indexOf(el) + direction;\r\n        if (index < 0) {\r\n            index = focusableElements.length - 1;\r\n        }\r\n        else if (index >= focusableElements.length) {\r\n            index = 0;\r\n        }\r\n        focusableElements[index].focus();\r\n    }\r\n    _handleBlur(ev) {\r\n        if (this._a11yD == true) {\r\n            return;\r\n        }\r\n        const focused = this._focusedSprite;\r\n        if (focused && !focused.isDisposed() && focused.events.isEnabled(\"blur\")) {\r\n            focused.events.dispatch(\"blur\", {\r\n                type: \"blur\",\r\n                originalEvent: ev,\r\n                target: focused\r\n            });\r\n        }\r\n        this._focusedSprite = undefined;\r\n    }\r\n    /**\r\n     * @ignore\r\n     */\r\n    updateTooltip(target) {\r\n        if (this._a11yD == true) {\r\n            return;\r\n        }\r\n        const text = $utils.stripTags(target._getText());\r\n        let tooltipElement = target.getPrivate(\"tooltipElement\");\r\n        if (target.get(\"role\") == \"tooltip\" && text != \"\") {\r\n            if (!tooltipElement) {\r\n                tooltipElement = this._makeTooltipElement(target);\r\n            }\r\n            if (tooltipElement.innerHTML != text) {\r\n                tooltipElement.innerHTML = text;\r\n            }\r\n            tooltipElement.setAttribute(\"aria-hidden\", target.isVisibleDeep() ? \"false\" : \"true\");\r\n        }\r\n        else if (tooltipElement) {\r\n            tooltipElement.remove();\r\n            target.removePrivate(\"tooltipElement\");\r\n        }\r\n    }\r\n    _makeTooltipElement(target) {\r\n        const container = this._tooltipElementContainer;\r\n        const tooltipElement = document.createElement(\"div\");\r\n        tooltipElement.style.position = \"absolute\";\r\n        tooltipElement.style.width = \"1px\";\r\n        tooltipElement.style.height = \"1px\";\r\n        tooltipElement.style.overflow = \"hidden\";\r\n        tooltipElement.style.clip = \"rect(1px, 1px, 1px, 1px)\";\r\n        $utils.setInteractive(tooltipElement, false);\r\n        this._decorateFocusElement(target, tooltipElement);\r\n        container.append(tooltipElement);\r\n        target.setPrivate(\"tooltipElement\", tooltipElement);\r\n        return tooltipElement;\r\n    }\r\n    _removeTooltipElement(target) {\r\n        if (this._a11yD == true) {\r\n            return;\r\n        }\r\n        const tooltipElement = target.getPrivate(\"tooltipElement\");\r\n        if (tooltipElement) {\r\n            const parent = tooltipElement.parentElement;\r\n            if (parent) {\r\n                parent.removeChild(tooltipElement);\r\n            }\r\n        }\r\n    }\r\n    _invalidateAccessibility(target) {\r\n        if (this._a11yD == true) {\r\n            return;\r\n        }\r\n        this._focusElementDirty = true;\r\n        const focusElement = target.getPrivate(\"focusElement\");\r\n        if (target.get(\"focusable\")) {\r\n            if (focusElement) {\r\n                this._decorateFocusElement(target);\r\n                this._positionFocusElement(target);\r\n            }\r\n            // else {\r\n            // \tthis._renderer._makeFocusElement(0, this);\r\n            // }\r\n        }\r\n        else if (focusElement) {\r\n            this._removeFocusElement(target);\r\n        }\r\n        //this.updateCurrentFocus();\r\n    }\r\n    /**\r\n     * Returns `true` if `target` is currently focused.\r\n     *\r\n     * @param   target  Target\r\n     * @return          Focused?\r\n     */\r\n    focused(target) {\r\n        return this._focusedSprite === target;\r\n    }\r\n    /**\r\n     * Converts document coordinates to coordinates withing root element.\r\n     *\r\n     * @param   point  Document point\r\n     * @return         Root point\r\n     */\r\n    documentPointToRoot(point) {\r\n        const rect = this._getRealSize();\r\n        const size = this._getCalculatedSize(rect);\r\n        const scaleWidth = size.width / rect.width;\r\n        const scaleHeight = size.height / rect.height;\r\n        return {\r\n            x: (point.x - rect.left) * scaleWidth,\r\n            y: (point.y - rect.top) * scaleHeight,\r\n        };\r\n    }\r\n    /**\r\n     * Converts root coordinates to document\r\n     *\r\n     * @param   point  Document point\r\n     * @return         Root point\r\n     */\r\n    rootPointToDocument(point) {\r\n        const rect = this._getRealSize();\r\n        const size = this._getCalculatedSize(rect);\r\n        const scaleWidth = size.width / rect.width;\r\n        const scaleHeight = size.height / rect.height;\r\n        return {\r\n            x: (point.x / scaleWidth) + rect.left,\r\n            y: (point.y / scaleHeight) + rect.top\r\n        };\r\n    }\r\n    /**\r\n     * @ignore\r\n     */\r\n    addDisposer(disposer) {\r\n        this._disposers.push(disposer);\r\n        return disposer;\r\n    }\r\n    _updateComputedStyles() {\r\n        const styles = window.getComputedStyle(this.dom);\r\n        let fontHash = \"\";\r\n        $object.each(styles, (key, val) => {\r\n            if ($type.isString(key) && key.match(/^font/)) {\r\n                fontHash += val;\r\n            }\r\n        });\r\n        const changed = fontHash != this._fontHash;\r\n        if (changed) {\r\n            this._fontHash = fontHash;\r\n        }\r\n        return changed;\r\n    }\r\n    _checkComputedStyles() {\r\n        if (this._updateComputedStyles()) {\r\n            this._invalidateLabelBounds(this.container);\r\n        }\r\n    }\r\n    _invalidateLabelBounds(target) {\r\n        if (target instanceof Container) {\r\n            target.children.each((child) => {\r\n                this._invalidateLabelBounds(child);\r\n            });\r\n        }\r\n        else if (target instanceof Text) {\r\n            target.markDirtyBounds();\r\n        }\r\n    }\r\n    /**\r\n     * To all the clever heads out there. Yes, we did not make any attempts to\r\n     * scramble this.\r\n     *\r\n     * This is a part of a tool meant for our users to manage their commercial\r\n     * licenses for removal of amCharts branding from charts.\r\n     *\r\n     * The only legit way to do so is to purchase a commercial license for amCharts:\r\n     * https://www.amcharts.com/online-store/\r\n     *\r\n     * Removing or altering this code, or disabling amCharts branding in any other\r\n     * way is against the license and thus illegal.\r\n     */\r\n    _hasLicense() {\r\n        for (let i = 0; i < registry.licenses.length; i++) {\r\n            if (registry.licenses[i].match(/^AM5C.{5,}/i)) {\r\n                return true;\r\n            }\r\n        }\r\n        return false;\r\n    }\r\n    _licenseApplied() {\r\n        if (this._logo) {\r\n            this._logo.set(\"forceHidden\", true);\r\n        }\r\n    }\r\n    /**\r\n     * @ignore\r\n     */\r\n    get debugGhostView() {\r\n        return this._renderer.debugGhostView;\r\n    }\r\n    /**\r\n     * @ignore\r\n     */\r\n    set debugGhostView(value) {\r\n        this._renderer.debugGhostView = value;\r\n    }\r\n    /**\r\n     * Set this to `true` if you need chart to require first a tap onto it before\r\n     * touch gesture related functionality like zoom/pan is turned on.\r\n     *\r\n     * @see {@link https://www.amcharts.com/docs/v5/getting-started/root-element/#Touch_related_options} for more info\r\n     * @default false\r\n     * @since 5.2.9\r\n     * @param  value  Needs a tap to activate touch functions\r\n     */\r\n    set tapToActivate(value) {\r\n        this._renderer.tapToActivate = value;\r\n    }\r\n    /**\r\n     * @return Needs a tap to activate touch functions\r\n     */\r\n    get tapToActivate() {\r\n        return this._renderer.tapToActivate;\r\n    }\r\n    /**\r\n     * If `tapToActivate` is set to `true`, this setting will determine number\r\n     * of milliseconds the chart will stay \"active\", before releasing the\r\n     * controls back to the page.\r\n     *\r\n     * @see {@link https://www.amcharts.com/docs/v5/getting-started/root-element/#Touch_related_options} for more info\r\n     * @default 3000\r\n     * @since 5.2.9\r\n     * @param  value  Timeout\r\n     */\r\n    set tapToActivateTimeout(value) {\r\n        this._renderer.tapToActivateTimeout = value;\r\n    }\r\n    /**\r\n     * @return Timeout\r\n     */\r\n    get tapToActivateTimeout() {\r\n        return this._renderer.tapToActivateTimeout;\r\n    }\r\n    _makeHTMLElement(target) {\r\n        // Get container\r\n        const container = this._htmlElementContainer;\r\n        // Init\r\n        const htmlElement = document.createElement(\"div\");\r\n        target.setPrivate(\"htmlElement\", htmlElement);\r\n        //htmlElement.tabIndex = this.tabindex;\r\n        htmlElement.style.position = \"absolute\";\r\n        htmlElement.style.overflow = \"auto\";\r\n        htmlElement.style.boxSizing = \"border-box\";\r\n        $utils.setInteractive(htmlElement, target.get(\"interactive\", false));\r\n        // Translate events\r\n        if (target.events.isEnabled(\"click\")) {\r\n            $utils.setInteractive(htmlElement, true);\r\n            this._disposers.push($utils.addEventListener(htmlElement, \"click\", (ev) => {\r\n                const downEvent = this._renderer.getEvent(ev);\r\n                target.events.dispatch(\"click\", {\r\n                    type: \"click\",\r\n                    originalEvent: downEvent.event,\r\n                    point: downEvent.point,\r\n                    simulated: false,\r\n                    target: target\r\n                });\r\n            }));\r\n        }\r\n        this._positionHTMLElement(target);\r\n        container.append(htmlElement);\r\n        $array.pushOne(this._htmlEnabledContainers, target);\r\n        return htmlElement;\r\n    }\r\n    _positionHTMLElements() {\r\n        $array.each(this._htmlEnabledContainers, (target) => {\r\n            this._positionHTMLElement(target);\r\n        });\r\n    }\r\n    _positionHTMLElement(target) {\r\n        const htmlElement = target.getPrivate(\"htmlElement\");\r\n        if (htmlElement) {\r\n            // Translate settings\r\n            const visualSettings = [\"paddingTop\", \"paddingRight\", \"paddingBottom\", \"paddingLeft\", \"minWidth\", \"minHeight\", \"maxWidth\", \"maxHeight\"];\r\n            $array.each(visualSettings, (setting) => {\r\n                const value = target.get(setting);\r\n                if (value) {\r\n                    htmlElement.style[setting] = value + \"px\";\r\n                }\r\n                else {\r\n                    htmlElement.style[setting] = \"\";\r\n                }\r\n            });\r\n            // Init and reset scale / rotation\r\n            const scale = target.compositeScale() || 1;\r\n            const rotation = target.compositeRotation() || 0;\r\n            htmlElement.style.transform = \"\";\r\n            htmlElement.style.transformOrigin = \"\";\r\n            // Deal with opacity\r\n            const opacity = target.compositeOpacity();\r\n            setTimeout(() => {\r\n                htmlElement.style.opacity = opacity + \"\";\r\n            }, 10);\r\n            const visible = target.isVisibleDeep();\r\n            if (visible) {\r\n                htmlElement.style.display = \"block\";\r\n            }\r\n            // Deal with position\r\n            const bounds = target.globalBounds();\r\n            htmlElement.style.top = (bounds.top) + \"px\";\r\n            htmlElement.style.left = (bounds.left) + \"px\";\r\n            // Use width/height if those are set\r\n            const width = target.get(\"width\");\r\n            const height = target.get(\"height\");\r\n            let w = 0;\r\n            let h = 0;\r\n            if (width) {\r\n                w = target.width();\r\n            }\r\n            if (height) {\r\n                h = target.height();\r\n            }\r\n            if (!width || !height) {\r\n                htmlElement.style.position = \"fixed\";\r\n                htmlElement.style.width = \"\";\r\n                htmlElement.style.height = \"\";\r\n                const bbox = htmlElement.getBoundingClientRect();\r\n                htmlElement.style.position = \"absolute\";\r\n                if (!width)\r\n                    w = bbox.width;\r\n                if (!height)\r\n                    h = bbox.height;\r\n                target._adjustedLocalBounds = { left: 0, right: 0, top: 0, bottom: 0 };\r\n                target.setPrivate(\"minWidth\", w / scale);\r\n                target.setPrivate(\"minHeight\", h / scale);\r\n            }\r\n            else {\r\n                target.removePrivate(\"minWidth\");\r\n                target.removePrivate(\"minHeight\");\r\n            }\r\n            if (w > 0) {\r\n                htmlElement.style.minWidth = (w) + \"px\";\r\n            }\r\n            if (h > 0) {\r\n                htmlElement.style.minHeight = (h) + \"px\";\r\n            }\r\n            // Hide or show\r\n            if (!visible || opacity == 0) {\r\n                htmlElement.style.display = \"none\";\r\n            }\r\n            // Deal with scale\r\n            if (scale != 1) {\r\n                htmlElement.style.transform += \"scale(\" + scale + \")\";\r\n            }\r\n            if (rotation != 0) {\r\n                htmlElement.style.transform += \" rotate(\" + rotation + \"deg)\";\r\n            }\r\n            if (htmlElement.style.transform != \"\") {\r\n                htmlElement.style.transformOrigin = target.get(\"centerX\", 0) + \"%  \" + target.get(\"centerY\", 0) + \"%\";\r\n            }\r\n        }\r\n    }\r\n    _setHTMLContent(target, html) {\r\n        let htmlElement = target.getPrivate(\"htmlElement\");\r\n        if (!htmlElement) {\r\n            htmlElement = this._makeHTMLElement(target);\r\n        }\r\n        if (htmlElement.innerHTML != html) {\r\n            htmlElement.innerHTML = html;\r\n        }\r\n    }\r\n    _removeHTMLContent(target) {\r\n        let htmlElement = target.getPrivate(\"htmlElement\");\r\n        if (htmlElement) {\r\n            this._htmlElementContainer.removeChild(htmlElement);\r\n            target.removePrivate(\"htmlElement\");\r\n        }\r\n        $array.remove(this._htmlEnabledContainers, target);\r\n    }\r\n}\r\n//# sourceMappingURL=Root.js.map","import * as $type from \"../util/Type\";\r\nimport * as $math from \"../util/Math\";\r\nimport * as $utils from \"../util/Utils\";\r\nimport { Rectangle } from \"./Rectangle\";\r\n/**\r\n * Draws a rectangle with rounded corners.\r\n *\r\n * @see {@link https://www.amcharts.com/docs/v5/concepts/common-elements/graphics/} for more info\r\n * @important\r\n */\r\nexport class RoundedRectangle extends Rectangle {\r\n    _beforeChanged() {\r\n        super._beforeChanged();\r\n        if (this.isDirty(\"cornerRadiusTL\") || this.isDirty(\"cornerRadiusTR\") || this.isDirty(\"cornerRadiusBR\") || this.isDirty(\"cornerRadiusBL\")) {\r\n            this._clear = true;\r\n        }\r\n    }\r\n    _draw() {\r\n        let width = this.width();\r\n        let height = this.height();\r\n        let w = width;\r\n        let h = height;\r\n        let wSign = w / Math.abs(width);\r\n        let hSign = h / Math.abs(height);\r\n        if ($type.isNumber(w) && $type.isNumber(h)) {\r\n            let minSide = Math.min(w, h) / 2;\r\n            let crtl = $utils.relativeToValue(this.get(\"cornerRadiusTL\", 8), minSide);\r\n            let crtr = $utils.relativeToValue(this.get(\"cornerRadiusTR\", 8), minSide);\r\n            let crbr = $utils.relativeToValue(this.get(\"cornerRadiusBR\", 8), minSide);\r\n            let crbl = $utils.relativeToValue(this.get(\"cornerRadiusBL\", 8), minSide);\r\n            let maxcr = Math.min(Math.abs(w / 2), Math.abs(h / 2));\r\n            crtl = $math.fitToRange(crtl, 0, maxcr);\r\n            crtr = $math.fitToRange(crtr, 0, maxcr);\r\n            crbr = $math.fitToRange(crbr, 0, maxcr);\r\n            crbl = $math.fitToRange(crbl, 0, maxcr);\r\n            const display = this._display;\r\n            display.moveTo(crtl * wSign, 0);\r\n            display.lineTo(w - crtr * wSign, 0);\r\n            if (crtr > 0) {\r\n                display.arcTo(w, 0, w, crtr * hSign, crtr);\r\n            }\r\n            display.lineTo(w, h - crbr * hSign);\r\n            if (crbr > 0) {\r\n                display.arcTo(w, h, w - crbr * wSign, h, crbr);\r\n            }\r\n            display.lineTo(crbl * wSign, h);\r\n            if (crbl > 0) {\r\n                display.arcTo(0, h, 0, h - crbl * hSign, crbl);\r\n            }\r\n            display.lineTo(0, crtl * hSign);\r\n            if (crtl > 0) {\r\n                display.arcTo(0, 0, crtl * wSign, 0, crtl);\r\n            }\r\n            display.closePath();\r\n        }\r\n    }\r\n}\r\nObject.defineProperty(RoundedRectangle, \"className\", {\r\n    enumerable: true,\r\n    configurable: true,\r\n    writable: true,\r\n    value: \"RoundedRectangle\"\r\n});\r\nObject.defineProperty(RoundedRectangle, \"classNames\", {\r\n    enumerable: true,\r\n    configurable: true,\r\n    writable: true,\r\n    value: Rectangle.classNames.concat([RoundedRectangle.className])\r\n});\r\n//# sourceMappingURL=RoundedRectangle.js.map","import { RoundedRectangle } from \"../render/RoundedRectangle\";\r\nimport { Container } from \"./Container\";\r\nimport * as $utils from \"../../core/util/Utils\";\r\n/**\r\n * Draws an interactive button.\r\n *\r\n * @see {@link https://www.amcharts.com/docs/v5/concepts/common-elements/buttons/} for more info\r\n * @important\r\n */\r\nexport class Button extends Container {\r\n    _afterNew() {\r\n        this._settings.themeTags = $utils.mergeTags(this._settings.themeTags, [\"button\"]);\r\n        super._afterNew();\r\n        if (!this._settings.background) {\r\n            this.set(\"background\", RoundedRectangle.new(this._root, {\r\n                themeTags: $utils.mergeTags(this._settings.themeTags, [\"background\"])\r\n            }));\r\n        }\r\n        this.setPrivate(\"trustBounds\", true);\r\n    }\r\n    _prepareChildren() {\r\n        super._prepareChildren();\r\n        if (this.isDirty(\"icon\")) {\r\n            const previous = this._prevSettings.icon;\r\n            const icon = this.get(\"icon\");\r\n            if (icon !== previous) {\r\n                this._disposeProperty(\"icon\");\r\n                if (previous) {\r\n                    previous.dispose();\r\n                }\r\n                if (icon) {\r\n                    this.children.push(icon);\r\n                }\r\n                this._prevSettings.icon = icon;\r\n            }\r\n        }\r\n        if (this.isDirty(\"label\")) {\r\n            const previous = this._prevSettings.label;\r\n            const label = this.get(\"label\");\r\n            if (label !== previous) {\r\n                this._disposeProperty(\"label\");\r\n                if (previous) {\r\n                    previous.dispose();\r\n                }\r\n                if (label) {\r\n                    this.children.push(label);\r\n                }\r\n                this._prevSettings.label = label;\r\n            }\r\n        }\r\n    }\r\n}\r\nObject.defineProperty(Button, \"className\", {\r\n    enumerable: true,\r\n    configurable: true,\r\n    writable: true,\r\n    value: \"Button\"\r\n});\r\nObject.defineProperty(Button, \"classNames\", {\r\n    enumerable: true,\r\n    configurable: true,\r\n    writable: true,\r\n    value: Container.classNames.concat([Button.className])\r\n});\r\n//# sourceMappingURL=Button.js.map","import { List } from \"./List\";\r\n/**\r\n * A [[List]] that holds components data.\r\n *\r\n * @see {@link https://www.amcharts.com/docs/v5/concepts/data/} for more info\r\n */\r\nexport class ListData extends List {\r\n    constructor() {\r\n        super(...arguments);\r\n        /**\r\n         * An optional processor for data.\r\n         *\r\n         * @see {@link https://www.amcharts.com/docs/v5/concepts/data/#Pre_processing_data} for more info\r\n         */\r\n        Object.defineProperty(this, \"processor\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n    }\r\n    /**\r\n     * @ignore\r\n     */\r\n    incrementRef() { }\r\n    /**\r\n     * @ignore\r\n     */\r\n    decrementRef() { }\r\n    _onPush(newValue) {\r\n        if (this.processor) {\r\n            this.processor.processRow(newValue);\r\n        }\r\n        super._onPush(newValue);\r\n    }\r\n    _onInsertIndex(index, newValue) {\r\n        if (this.processor) {\r\n            this.processor.processRow(newValue);\r\n        }\r\n        super._onInsertIndex(index, newValue);\r\n    }\r\n    _onSetIndex(index, oldValue, newValue) {\r\n        if (this.processor) {\r\n            this.processor.processRow(newValue);\r\n        }\r\n        super._onSetIndex(index, oldValue, newValue);\r\n    }\r\n}\r\n/**\r\n * @deprecated\r\n * @todo remove\r\n */\r\nexport class JsonData {\r\n    constructor(value) {\r\n        Object.defineProperty(this, \"processor\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"_value\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        this._value = value;\r\n    }\r\n    incrementRef() { }\r\n    decrementRef() { }\r\n}\r\n//# sourceMappingURL=Data.js.map","import { __awaiter } from \"tslib\";\r\nimport { Settings } from \"../util/Entity\";\r\nimport { Container } from \"./Container\";\r\nimport { ListData } from \"../util/Data\";\r\nimport * as $array from \"../util/Array\";\r\nimport * as $object from \"../util/Object\";\r\n/**\r\n * A base element that holds data bit (data item) for any [[Component]].\r\n */\r\nexport class DataItem extends Settings {\r\n    constructor(component, dataContext, settings) {\r\n        super(settings);\r\n        /**\r\n         * A data item's owener [[Component]].\r\n         */\r\n        Object.defineProperty(this, \"component\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        /**\r\n         * A reference to actual item in source data this item is based on.\r\n         */\r\n        Object.defineProperty(this, \"dataContext\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        /**\r\n         * @todo requires description\r\n         */\r\n        Object.defineProperty(this, \"bullets\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        /**\r\n         * A set of \"open\" values.\r\n         */\r\n        Object.defineProperty(this, \"open\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        /**\r\n         * A set of \"close\" values.\r\n         */\r\n        Object.defineProperty(this, \"close\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        this.dataContext = dataContext;\r\n        this.component = component;\r\n        this._settings.visible = true;\r\n        this._checkDirty();\r\n    }\r\n    /**\r\n     * @ignore\r\n     */\r\n    markDirty() {\r\n        this.component.markDirtyValues(this);\r\n    }\r\n    _startAnimation() {\r\n        this.component._root._addAnimation(this);\r\n    }\r\n    _animationTime() {\r\n        return this.component._root.animationTime;\r\n    }\r\n    _dispose() {\r\n        if (this.component) {\r\n            this.component.disposeDataItem(this);\r\n        }\r\n        super._dispose();\r\n    }\r\n    /**\r\n     * Shows a data item that's currently hidden.\r\n     */\r\n    show(duration) {\r\n        this.setRaw(\"visible\", true);\r\n        if (this.component) {\r\n            this.component.showDataItem(this, duration);\r\n        }\r\n    }\r\n    /**\r\n     * Hides a data item that's currently visible.\r\n     */\r\n    hide(duration) {\r\n        this.setRaw(\"visible\", false);\r\n        if (this.component) {\r\n            this.component.hideDataItem(this, duration);\r\n        }\r\n    }\r\n    isHidden() {\r\n        return !this.get(\"visible\");\r\n    }\r\n}\r\n/**\r\n * A base class for elements that make use of data.\r\n */\r\nexport class Component extends Container {\r\n    constructor() {\r\n        super(...arguments);\r\n        Object.defineProperty(this, \"_data\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: new ListData()\r\n        });\r\n        Object.defineProperty(this, \"_dataItems\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: []\r\n        });\r\n        Object.defineProperty(this, \"_mainDataItems\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: this._dataItems\r\n        });\r\n        Object.defineProperty(this, \"valueFields\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: []\r\n        });\r\n        Object.defineProperty(this, \"fields\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: [\"id\"]\r\n        });\r\n        Object.defineProperty(this, \"_valueFields\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"_valueFieldsF\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"_fields\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"_fieldsF\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"_valuesDirty\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: false\r\n        });\r\n        Object.defineProperty(this, \"_dataChanged\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: false\r\n        });\r\n        Object.defineProperty(this, \"_dataGrouped\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: false\r\n        });\r\n        /**\r\n         * Indicates if the component has already been initialized.\r\n         */\r\n        Object.defineProperty(this, \"inited\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: false\r\n        });\r\n    }\r\n    /**\r\n     * Component's data.\r\n     *\r\n     * @see {@link https://www.amcharts.com/docs/v5/concepts/data/} for more info\r\n     */\r\n    set data(data) {\r\n        data.incrementRef();\r\n        this._data.decrementRef();\r\n        this._data = data;\r\n    }\r\n    /**\r\n     * @return  Data\r\n     */\r\n    get data() {\r\n        return this._data;\r\n    }\r\n    _dispose() {\r\n        super._dispose();\r\n        this._data.decrementRef();\r\n    }\r\n    _onDataClear() {\r\n    }\r\n    _afterNew() {\r\n        super._afterNew();\r\n        this._data.incrementRef();\r\n        this._updateFields();\r\n        this._disposers.push(this.data.events.onAll((change) => {\r\n            const dataItems = this._mainDataItems;\r\n            this.markDirtyValues();\r\n            this._markDirtyGroup();\r\n            this._dataChanged = true;\r\n            if (change.type === \"clear\") {\r\n                $array.each(dataItems, (dataItem) => {\r\n                    dataItem.dispose();\r\n                });\r\n                dataItems.length = 0;\r\n                this._onDataClear();\r\n            }\r\n            else if (change.type === \"push\") {\r\n                const dataItem = new DataItem(this, change.newValue, this._makeDataItem(change.newValue));\r\n                dataItems.push(dataItem);\r\n                this.processDataItem(dataItem);\r\n            }\r\n            else if (change.type === \"setIndex\") {\r\n                const dataItem = dataItems[change.index];\r\n                const properties = this._makeDataItem(change.newValue);\r\n                if (dataItem.bullets && dataItem.bullets.length == 0) {\r\n                    dataItem.bullets = undefined;\r\n                }\r\n                $object.keys(properties).forEach((key) => {\r\n                    dataItem.animate({\r\n                        key: key,\r\n                        to: properties[key],\r\n                        duration: this.get(\"interpolationDuration\", 0),\r\n                        easing: this.get(\"interpolationEasing\"),\r\n                    });\r\n                });\r\n                dataItem.dataContext = change.newValue;\r\n            }\r\n            else if (change.type === \"insertIndex\") {\r\n                const dataItem = new DataItem(this, change.newValue, this._makeDataItem(change.newValue));\r\n                dataItems.splice(change.index, 0, dataItem);\r\n                this.processDataItem(dataItem);\r\n            }\r\n            else if (change.type === \"removeIndex\") {\r\n                const dataItem = dataItems[change.index];\r\n                dataItem.dispose();\r\n                dataItems.splice(change.index, 1);\r\n            }\r\n            else if (change.type === \"moveIndex\") {\r\n                const dataItem = dataItems[change.oldIndex];\r\n                dataItems.splice(change.oldIndex, 1);\r\n                dataItems.splice(change.newIndex, 0, dataItem);\r\n            }\r\n            else {\r\n                throw new Error(\"Unknown IStreamEvent type\");\r\n            }\r\n            this._afterDataChange();\r\n        }));\r\n    }\r\n    _updateFields() {\r\n        if (this.valueFields) {\r\n            this._valueFields = [];\r\n            this._valueFieldsF = {};\r\n            $array.each(this.valueFields, (key) => {\r\n                const field = this.get((key + \"Field\"));\r\n                if (field) {\r\n                    this._valueFields.push(key);\r\n                    this._valueFieldsF[key] = { fieldKey: key + \"Field\", workingKey: key + \"Working\" };\r\n                }\r\n            });\r\n        }\r\n        if (this.fields) {\r\n            this._fields = [];\r\n            this._fieldsF = {};\r\n            $array.each(this.fields, (key) => {\r\n                const field = this.get((key + \"Field\"));\r\n                if (field) {\r\n                    this._fields.push(key);\r\n                    this._fieldsF[key] = key + \"Field\";\r\n                }\r\n            });\r\n        }\r\n    }\r\n    /**\r\n     * A list of component's data items.\r\n     *\r\n     * @return  Data items\r\n     */\r\n    get dataItems() {\r\n        return this._dataItems;\r\n    }\r\n    processDataItem(_dataItem) { }\r\n    _makeDataItem(data) {\r\n        //const output: this[\"_dataItemSettings\"] = {};\r\n        const output = {}; // temporary to solve error\r\n        if (this._valueFields) {\r\n            $array.each(this._valueFields, (key) => {\r\n                const field = this.get((this._valueFieldsF[key].fieldKey));\r\n                output[key] = data[field];\r\n                output[this._valueFieldsF[key].workingKey] = output[key];\r\n            });\r\n        }\r\n        if (this._fields) {\r\n            $array.each(this._fields, (key) => {\r\n                const field = this.get((this._fieldsF[key]));\r\n                output[key] = data[field];\r\n            });\r\n        }\r\n        return output;\r\n    }\r\n    /**\r\n     * Creates a new data item and processes it.\r\n     *\r\n     * @param   data         Data item settings\r\n     * @param   dataContext  Data context\r\n     * @return               New data item\r\n     */\r\n    makeDataItem(data, dataContext) {\r\n        let dataItem = new DataItem(this, dataContext, data);\r\n        this.processDataItem(dataItem);\r\n        return dataItem;\r\n    }\r\n    /**\r\n     * Adds new explicit data item to series.\r\n     *\r\n     * @param   data         Data item settings\r\n     * @param   dataContext  Data context\r\n     * @return               New data item\r\n     */\r\n    pushDataItem(data, dataContext) {\r\n        const dataItem = this.makeDataItem(data, dataContext);\r\n        this._mainDataItems.push(dataItem);\r\n        return dataItem;\r\n    }\r\n    /**\r\n     * @ignore\r\n     */\r\n    disposeDataItem(_dataItem) {\r\n    }\r\n    /**\r\n     * Shows component's data item.\r\n     *\r\n     * @param   dataItem   Data item\r\n     * @param   _duration  Animation duration in milliseconds\r\n     * @return             Promise\r\n     */\r\n    showDataItem(dataItem, _duration) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            dataItem.set(\"visible\", true);\r\n        });\r\n    }\r\n    /**\r\n     * Hides component's data item.\r\n     *\r\n     * @param   dataItem   Data item\r\n     * @param   _duration  Animation duration in milliseconds\r\n     * @return             Promise\r\n     */\r\n    hideDataItem(dataItem, _duration) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            dataItem.set(\"visible\", false);\r\n        });\r\n    }\r\n    _clearDirty() {\r\n        super._clearDirty();\r\n        this._valuesDirty = false;\r\n    }\r\n    _afterDataChange() {\r\n    }\r\n    _afterChanged() {\r\n        super._afterChanged();\r\n        if (this._dataChanged) {\r\n            const type = \"datavalidated\";\r\n            if (this.events.isEnabled(type)) {\r\n                this.events.dispatch(type, { type: type, target: this });\r\n            }\r\n            this._dataChanged = false;\r\n        }\r\n        this.inited = true;\r\n    }\r\n    /**\r\n     * Forces a repaint of the element which relies on data.\r\n     *\r\n     * @since 5.0.21\r\n     */\r\n    markDirtyValues(_dataItem) {\r\n        this.markDirty();\r\n        this._valuesDirty = true;\r\n    }\r\n    _markDirtyGroup() {\r\n        this._dataGrouped = false;\r\n    }\r\n    /**\r\n     * @ignore\r\n     */\r\n    markDirtySize() {\r\n        this._sizeDirty = true;\r\n        this.markDirty();\r\n    }\r\n}\r\nObject.defineProperty(Component, \"className\", {\r\n    enumerable: true,\r\n    configurable: true,\r\n    writable: true,\r\n    value: \"Component\"\r\n});\r\nObject.defineProperty(Component, \"classNames\", {\r\n    enumerable: true,\r\n    configurable: true,\r\n    writable: true,\r\n    value: Container.classNames.concat([Component.className])\r\n});\r\n//# sourceMappingURL=Component.js.map","import { Entity } from \"../../util/Entity\";\r\n/**\r\n * Base class for gradients.\r\n *\r\n * @see {@link https://www.amcharts.com/docs/v5/concepts/colors-gradients-and-patterns/gradients/} for more info\r\n */\r\nexport class Gradient extends Entity {\r\n    _afterNew() {\r\n        // Applying themes because gradient will not have parent\r\n        super._afterNewApplyThemes();\r\n    }\r\n    /**\r\n     * @ignore\r\n     */\r\n    getFill(_target) {\r\n        return {\r\n            addColorStop: (_offset, _color) => { }\r\n        };\r\n    }\r\n    _changed() {\r\n        super._changed();\r\n        //if (this.isDirty(\"target\") && this.get(\"target\")) {\r\n        //\tthis.get(\"target\")!.events.on(\"boundschanged\", () => {\r\n        //\t});\r\n        //}\r\n    }\r\n    /**\r\n     * @ignore\r\n     */\r\n    getBounds(target) {\r\n        const gradientTarget = this.get(\"target\");\r\n        if (gradientTarget) {\r\n            let bounds = gradientTarget.globalBounds();\r\n            const p0 = target.toLocal({ x: bounds.left, y: bounds.top });\r\n            const p1 = target.toLocal({ x: bounds.right, y: bounds.top });\r\n            const p2 = target.toLocal({ x: bounds.right, y: bounds.bottom });\r\n            const p3 = target.toLocal({ x: bounds.left, y: bounds.bottom });\r\n            return {\r\n                left: Math.min(p0.x, p1.x, p2.x, p3.x),\r\n                top: Math.min(p0.y, p1.y, p2.y, p3.y),\r\n                right: Math.max(p0.x, p1.x, p2.x, p3.x),\r\n                bottom: Math.max(p0.y, p1.y, p2.y, p3.y)\r\n            };\r\n        }\r\n        return target._display.getLocalBounds();\r\n    }\r\n}\r\nObject.defineProperty(Gradient, \"className\", {\r\n    enumerable: true,\r\n    configurable: true,\r\n    writable: true,\r\n    value: \"Gradient\"\r\n});\r\nObject.defineProperty(Gradient, \"classNames\", {\r\n    enumerable: true,\r\n    configurable: true,\r\n    writable: true,\r\n    value: Entity.classNames.concat([Gradient.className])\r\n});\r\n//# sourceMappingURL=Gradient.js.map","import { Gradient } from \"./Gradient\";\r\nimport { Color } from \"../../util/Color\";\r\nimport * as $array from \"../../util/Array\";\r\nimport * as $type from \"../../util/Type\";\r\nimport * as $math from \"../../util/Math\";\r\n/**\r\n * Linear gradient.\r\n *\r\n * @see {@link https://www.amcharts.com/docs/v5/concepts/colors-gradients-and-patterns/gradients/} for more info\r\n */\r\nexport class LinearGradient extends Gradient {\r\n    /**\r\n     * @ignore\r\n     */\r\n    getFill(target) {\r\n        const rotation = this.get(\"rotation\", 0);\r\n        let bounds = this.getBounds(target);\r\n        let l = bounds.left || 0;\r\n        let r = bounds.right || 0;\r\n        let t = bounds.top || 0;\r\n        let b = bounds.bottom || 0;\r\n        let cos = $math.cos(rotation);\r\n        let sin = $math.sin(rotation);\r\n        let w = cos * (r - l);\r\n        let h = sin * (b - t);\r\n        if (w == 0) {\r\n            w = 1;\r\n        }\r\n        if (h == 0) {\r\n            h = 1;\r\n        }\r\n        let longer = Math.max(w, h);\r\n        const gradient = this._root._renderer.createLinearGradient(l, t, l + longer * cos, t + longer * sin);\r\n        const stops = this.get(\"stops\");\r\n        if (stops) {\r\n            let i = 0;\r\n            $array.each(stops, (stop) => {\r\n                let offset = stop.offset;\r\n                if (!$type.isNumber(offset)) {\r\n                    offset = i / (stops.length - 1);\r\n                }\r\n                let opacity = stop.opacity;\r\n                if (!$type.isNumber(opacity)) {\r\n                    opacity = 1;\r\n                }\r\n                let color = stop.color;\r\n                if (color) {\r\n                    const lighten = stop.lighten;\r\n                    if (lighten) {\r\n                        color = Color.lighten(color, lighten);\r\n                    }\r\n                    const brighten = stop.brighten;\r\n                    if (brighten) {\r\n                        color = Color.brighten(color, brighten);\r\n                    }\r\n                    gradient.addColorStop(offset, 'rgba(' + color.r + ',' + color.g + ',' + color.b + ',' + opacity + ')');\r\n                }\r\n                i++;\r\n            });\r\n        }\r\n        return gradient;\r\n    }\r\n}\r\nObject.defineProperty(LinearGradient, \"className\", {\r\n    enumerable: true,\r\n    configurable: true,\r\n    writable: true,\r\n    value: \"LinearGradient\"\r\n});\r\nObject.defineProperty(LinearGradient, \"classNames\", {\r\n    enumerable: true,\r\n    configurable: true,\r\n    writable: true,\r\n    value: Gradient.classNames.concat([LinearGradient.className])\r\n});\r\n//# sourceMappingURL=LinearGradient.js.map","/**\r\n * ============================================================================\r\n * IMPORTS\r\n * ============================================================================\r\n * @hidden\r\n */\r\nimport * as $type from \"./Type\";\r\nimport * as $utils from \"./Utils\";\r\n/**\r\n * Returns a `Promise` which can be used to execute code after number of\r\n * milliseconds.\r\n *\r\n * @param   ms  Sleep duration in ms\r\n * @return      Promise\r\n */\r\nexport function sleep(ms) {\r\n    return new Promise((resolve, _reject) => {\r\n        setTimeout(resolve, ms);\r\n    });\r\n}\r\n/**\r\n * Maps time period names to their numeric representations in milliseconds.\r\n *\r\n * @ignore Exclude from docs\r\n */\r\nexport let timeUnitDurations = {\r\n    millisecond: 1,\r\n    second: 1000,\r\n    minute: 60000,\r\n    hour: 3600000,\r\n    day: 86400000,\r\n    week: 604800000,\r\n    month: 365.242 / 12 * 86400000,\r\n    year: 31536000000\r\n};\r\n/**\r\n * Returns the next time unit that goes after source `unit`.\r\n *\r\n * E.g. \"hour\" is the next unit after \"minute\", etc.\r\n *\r\n * @ignore Exclude from docs\r\n * @param unit  Source time unit\r\n * @return Next time unit\r\n */\r\nexport function getNextUnit(unit) {\r\n    switch (unit) {\r\n        case \"year\":\r\n            return;\r\n        case \"month\":\r\n            return \"year\";\r\n        case \"week\":\r\n            return \"month\";\r\n        case \"day\":\r\n            return \"month\"; // not a mistake\r\n        case \"hour\":\r\n            return \"day\";\r\n        case \"minute\":\r\n            return \"hour\";\r\n        case \"second\":\r\n            return \"minute\";\r\n        case \"millisecond\":\r\n            return \"second\";\r\n    }\r\n}\r\n/**\r\n * Returns number of milliseconds in the `count` of time `unit`.\r\n *\r\n * Available units: \"millisecond\", \"second\", \"minute\", \"hour\", \"day\", \"week\",\r\n * \"month\", and \"year\".\r\n *\r\n * @param unit   Time unit\r\n * @param count  Number of units\r\n * @return Milliseconds\r\n */\r\nexport function getDuration(unit, count) {\r\n    if (count == null) {\r\n        count = 1;\r\n    }\r\n    return timeUnitDurations[unit] * count;\r\n}\r\n/**\r\n * @ignore\r\n */\r\nexport function getIntervalDuration(interval) {\r\n    if (interval) {\r\n        return timeUnitDurations[interval.timeUnit] * interval.count;\r\n    }\r\n    return 0;\r\n}\r\nexport function getDateIntervalDuration(interval, date, firstDateOfWeek, utc, timezone) {\r\n    const unit = interval.timeUnit;\r\n    const count = interval.count;\r\n    if (unit == \"hour\" || unit == \"minute\" || unit == \"second\" || unit == \"millisecond\") {\r\n        return timeUnitDurations[interval.timeUnit] * interval.count;\r\n    }\r\n    else {\r\n        const firstTime = round(new Date(date.getTime()), unit, count, firstDateOfWeek, utc, undefined, timezone).getTime();\r\n        let lastTime = firstTime + count * getDuration(unit) * 1.05;\r\n        lastTime = round(new Date(lastTime), unit, 1, firstDateOfWeek, utc, undefined, timezone).getTime();\r\n        return lastTime - firstTime;\r\n    }\r\n}\r\n/**\r\n * Returns current `Date` object.\r\n *\r\n * @return Current date\r\n */\r\nexport function now() {\r\n    return new Date();\r\n}\r\n/**\r\n * Returns current timestamp.\r\n *\r\n * @return Current timestamp\r\n */\r\nexport function getTime() {\r\n    return now().getTime();\r\n}\r\n/**\r\n * Returns a copy of the `Date` object.\r\n *\r\n * @param date  Source date\r\n * @return Copy\r\n */\r\nexport function copy(date) {\r\n    return new Date(date.getTime()); // todo: check if this is ok. new Date(date) used to strip milliseconds on FF in v3\r\n}\r\n/**\r\n * Checks if the `unit` part of two `Date` objects do not match. Two dates\r\n * represent a \"range\" of time, rather the same time date.\r\n *\r\n * @param timeOne  timestamp\r\n * @param timeTwo  timestamp\r\n * @param unit     Time unit to check\r\n * @return Range?\r\n */\r\nexport function checkChange(timeOne, timeTwo, unit, utc, timezone) {\r\n    // quick\r\n    if ((timeTwo - timeOne) > getDuration(unit, 1.2)) {\r\n        return true;\r\n    }\r\n    let dateOne = new Date(timeOne);\r\n    let dateTwo = new Date(timeTwo);\r\n    if (timezone) {\r\n        dateOne = timezone.convertLocal(dateOne);\r\n        dateTwo = timezone.convertLocal(dateTwo);\r\n    }\r\n    let timeZoneOffset1 = 0;\r\n    let timeZoneOffset2 = 0;\r\n    if (!utc && unit != \"millisecond\") {\r\n        timeZoneOffset1 = dateOne.getTimezoneOffset();\r\n        dateOne.setUTCMinutes(dateOne.getUTCMinutes() - timeZoneOffset1);\r\n        timeZoneOffset2 = dateTwo.getTimezoneOffset();\r\n        dateTwo.setUTCMinutes(dateTwo.getUTCMinutes() - timeZoneOffset2);\r\n    }\r\n    let changed = false;\r\n    switch (unit) {\r\n        case \"year\":\r\n            if (dateOne.getUTCFullYear() != dateTwo.getUTCFullYear()) {\r\n                changed = true;\r\n            }\r\n            break;\r\n        case \"month\":\r\n            if (dateOne.getUTCFullYear() != dateTwo.getUTCFullYear()) {\r\n                changed = true;\r\n            }\r\n            else if (dateOne.getUTCMonth() != dateTwo.getUTCMonth()) {\r\n                changed = true;\r\n            }\r\n            break;\r\n        case \"day\":\r\n            if (dateOne.getUTCMonth() != dateTwo.getUTCMonth()) {\r\n                changed = true;\r\n            }\r\n            else if (dateOne.getUTCDate() != dateTwo.getUTCDate()) {\r\n                changed = true;\r\n            }\r\n            break;\r\n        case \"hour\":\r\n            if (dateOne.getUTCHours() != dateTwo.getUTCHours()) {\r\n                changed = true;\r\n            }\r\n            break;\r\n        case \"minute\":\r\n            if (dateOne.getUTCMinutes() != dateTwo.getUTCMinutes()) {\r\n                changed = true;\r\n            }\r\n            break;\r\n        case \"second\":\r\n            if (dateOne.getUTCSeconds() != dateTwo.getUTCSeconds()) {\r\n                changed = true;\r\n            }\r\n            break;\r\n        case \"millisecond\":\r\n            if (dateOne.getTime() != dateTwo.getTime()) {\r\n                changed = true;\r\n            }\r\n            break;\r\n    }\r\n    if (changed) {\r\n        return changed;\r\n    }\r\n    let nextUnit = getNextUnit(unit);\r\n    if (nextUnit) {\r\n        return checkChange(timeOne, timeTwo, nextUnit, utc, timezone);\r\n    }\r\n    else {\r\n        return false;\r\n    }\r\n}\r\n/**\r\n * Adds `count` of time `unit` to the source date. Returns a modified `Date` object.\r\n *\r\n * @param date   Source date\r\n * @param unit   Time unit\r\n * @param count  Number of units to add\r\n * @return Modified date\r\n */\r\nexport function add(date, unit, count, utc, timezone) {\r\n    let timeZoneOffset = 0;\r\n    if (!utc && unit != \"millisecond\") {\r\n        timeZoneOffset = date.getTimezoneOffset();\r\n        if (timezone) {\r\n            timeZoneOffset -= timezone.offsetUTC(date);\r\n        }\r\n        date.setUTCMinutes(date.getUTCMinutes() - timeZoneOffset);\r\n    }\r\n    switch (unit) {\r\n        case \"day\":\r\n            let day = date.getUTCDate();\r\n            date.setUTCDate(day + count);\r\n            break;\r\n        case \"second\":\r\n            let seconds = date.getUTCSeconds();\r\n            date.setUTCSeconds(seconds + count);\r\n            break;\r\n        case \"millisecond\":\r\n            let milliseconds = date.getUTCMilliseconds();\r\n            date.setUTCMilliseconds(milliseconds + count);\r\n            break;\r\n        case \"hour\":\r\n            let hours = date.getUTCHours();\r\n            date.setUTCHours(hours + count);\r\n            break;\r\n        case \"minute\":\r\n            let minutes = date.getUTCMinutes();\r\n            date.setUTCMinutes(minutes + count);\r\n            break;\r\n        case \"year\":\r\n            let year = date.getUTCFullYear();\r\n            date.setUTCFullYear(year + count);\r\n            break;\r\n        case \"month\":\r\n            const endDays = date.getUTCDate();\r\n            const startDays = new Date(date.getUTCFullYear(), date.getUTCMonth(), 0).getUTCDate();\r\n            let month = date.getUTCMonth();\r\n            if (endDays > startDays) {\r\n                date.setUTCMonth(month + count, startDays);\r\n            }\r\n            else {\r\n                date.setUTCMonth(month + count);\r\n            }\r\n            break;\r\n        case \"week\":\r\n            let wday = date.getUTCDate();\r\n            date.setUTCDate(wday + count * 7);\r\n            break;\r\n    }\r\n    if (!utc && unit != \"millisecond\") {\r\n        date.setUTCMinutes(date.getUTCMinutes() + timeZoneOffset);\r\n        if (unit == \"day\" || unit == \"week\" || unit == \"month\" || unit == \"year\") {\r\n            let newTimeZoneOffset = date.getTimezoneOffset();\r\n            if (timezone) {\r\n                newTimeZoneOffset += timezone.offsetUTC(date);\r\n            }\r\n            if (newTimeZoneOffset != timeZoneOffset) {\r\n                let diff = newTimeZoneOffset - timeZoneOffset;\r\n                date.setUTCMinutes(date.getUTCMinutes() + diff);\r\n                // solves issues if new time falls back to old time zone\r\n                if (date.getTimezoneOffset() != newTimeZoneOffset) {\r\n                    date.setUTCMinutes(date.getUTCMinutes() - diff);\r\n                }\r\n            }\r\n        }\r\n    }\r\n    return date;\r\n}\r\n/**\r\n * @ignore\r\n */\r\nexport function roun(time, unit, count, root, firstTime) {\r\n    let firstDate;\r\n    if (firstTime != null) {\r\n        firstDate = new Date(firstTime);\r\n    }\r\n    return round(new Date(time), unit, count, root.locale.firstDayOfWeek, root.utc, firstDate, root.timezone).getTime();\r\n}\r\n/**\r\n * \"Rounds\" the date to specific time unit.\r\n *\r\n * @param date             Source date\r\n * @param unit             Time unit\r\n * @param count            Number of units to round to\r\n * @param firstDateOfWeek  First day of week\r\n * @param utc              Use UTC timezone\r\n * @param firstDate        First date to round to\r\n * @param roundMinutes     Minutes to round to (some timezones use non-whole hour)\r\n * @param timezone         Use specific named timezone when rounding\r\n * @return New date\r\n */\r\nexport function round(date, unit, count, firstDateOfWeek, utc, firstDate, timezone) {\r\n    if (!timezone || utc) {\r\n        let timeZoneOffset = 0;\r\n        if (!utc && unit != \"millisecond\") {\r\n            timeZoneOffset = date.getTimezoneOffset();\r\n            date.setUTCMinutes(date.getUTCMinutes() - timeZoneOffset);\r\n        }\r\n        switch (unit) {\r\n            case \"day\":\r\n                let day = date.getUTCDate();\r\n                if (count > 1) {\r\n                    //\tday = Math.floor(day / count) * count;\r\n                    if (firstDate) {\r\n                        firstDate = round(firstDate, \"day\", 1);\r\n                        let difference = date.getTime() - firstDate.getTime();\r\n                        let unitCount = Math.floor(difference / getDuration(\"day\") / count);\r\n                        let duration = getDuration(\"day\", unitCount * count);\r\n                        date.setTime(firstDate.getTime() + duration - timeZoneOffset * getDuration(\"minute\"));\r\n                    }\r\n                }\r\n                else {\r\n                    date.setUTCDate(day);\r\n                }\r\n                date.setUTCHours(0, 0, 0, 0);\r\n                break;\r\n            case \"second\":\r\n                let seconds = date.getUTCSeconds();\r\n                if (count > 1) {\r\n                    seconds = Math.floor(seconds / count) * count;\r\n                }\r\n                date.setUTCSeconds(seconds, 0);\r\n                break;\r\n            case \"millisecond\":\r\n                if (count == 1) {\r\n                    return date; // much better for perf!\r\n                }\r\n                let milliseconds = date.getUTCMilliseconds();\r\n                milliseconds = Math.floor(milliseconds / count) * count;\r\n                date.setUTCMilliseconds(milliseconds);\r\n                break;\r\n            case \"hour\":\r\n                let hours = date.getUTCHours();\r\n                if (count > 1) {\r\n                    hours = Math.floor(hours / count) * count;\r\n                }\r\n                date.setUTCHours(hours, 0, 0, 0);\r\n                break;\r\n            case \"minute\":\r\n                let minutes = date.getUTCMinutes();\r\n                if (count > 1) {\r\n                    minutes = Math.floor(minutes / count) * count;\r\n                }\r\n                date.setUTCMinutes(minutes, 0, 0);\r\n                break;\r\n            case \"month\":\r\n                let month = date.getUTCMonth();\r\n                if (count > 1) {\r\n                    month = Math.floor(month / count) * count;\r\n                }\r\n                date.setUTCMonth(month, 1);\r\n                date.setUTCHours(0, 0, 0, 0);\r\n                break;\r\n            case \"year\":\r\n                let year = date.getUTCFullYear();\r\n                if (count > 1) {\r\n                    year = Math.floor(year / count) * count;\r\n                }\r\n                date.setUTCFullYear(year, 0, 1);\r\n                date.setUTCHours(0, 0, 0, 0);\r\n                break;\r\n            case \"week\":\r\n                if (count > 1) {\r\n                    if (firstDate) {\r\n                        firstDate = round(firstDate, \"week\", 1);\r\n                        let difference = date.getTime() - firstDate.getTime();\r\n                        let unitCount = Math.floor(difference / getDuration(\"week\") / count);\r\n                        let duration = getDuration(\"week\", unitCount * count);\r\n                        date.setTime(firstDate.getTime() + duration - timeZoneOffset * getDuration(\"minute\"));\r\n                    }\r\n                }\r\n                let wday = date.getUTCDate();\r\n                let weekDay = date.getUTCDay();\r\n                if (!$type.isNumber(firstDateOfWeek)) {\r\n                    firstDateOfWeek = 1;\r\n                }\r\n                if (weekDay >= firstDateOfWeek) {\r\n                    wday = wday - weekDay + firstDateOfWeek;\r\n                }\r\n                else {\r\n                    wday = wday - (7 + weekDay) + firstDateOfWeek;\r\n                }\r\n                date.setUTCDate(wday);\r\n                date.setUTCHours(0, 0, 0, 0);\r\n                break;\r\n        }\r\n        if (!utc && unit != \"millisecond\") {\r\n            date.setUTCMinutes(date.getUTCMinutes() + timeZoneOffset);\r\n            if (unit == \"day\" || unit == \"week\" || unit == \"month\" || unit == \"year\") {\r\n                let newTimeZoneOffset = date.getTimezoneOffset();\r\n                if (newTimeZoneOffset != timeZoneOffset) {\r\n                    let diff = newTimeZoneOffset - timeZoneOffset;\r\n                    date.setUTCMinutes(date.getUTCMinutes() + diff);\r\n                }\r\n            }\r\n        }\r\n        return date;\r\n    }\r\n    else {\r\n        if (isNaN(date.getTime())) {\r\n            return date;\r\n        }\r\n        let tzoffset = timezone.offsetUTC(date);\r\n        let timeZoneOffset = date.getTimezoneOffset();\r\n        let parsedDate = timezone.parseDate(date);\r\n        let year = parsedDate.year;\r\n        let month = parsedDate.month;\r\n        let day = parsedDate.day;\r\n        let hour = parsedDate.hour;\r\n        let minute = parsedDate.minute;\r\n        let second = parsedDate.second;\r\n        let millisecond = parsedDate.millisecond;\r\n        let weekday = parsedDate.weekday;\r\n        let offsetDif = tzoffset - timeZoneOffset;\r\n        switch (unit) {\r\n            case \"day\":\r\n                if (count > 1 && firstDate) {\r\n                    firstDate = round(firstDate, \"day\", 1, firstDateOfWeek, utc, undefined, timezone);\r\n                    let difference = date.getTime() - firstDate.getTime();\r\n                    let unitCount = Math.floor(difference / getDuration(\"day\") / count);\r\n                    let duration = getDuration(\"day\", unitCount * count);\r\n                    date.setTime(firstDate.getTime() + duration);\r\n                    parsedDate = timezone.parseDate(date);\r\n                    year = parsedDate.year;\r\n                    month = parsedDate.month;\r\n                    day = parsedDate.day;\r\n                }\r\n                hour = 0;\r\n                minute = offsetDif;\r\n                second = 0;\r\n                millisecond = 0;\r\n                break;\r\n            case \"second\":\r\n                minute += offsetDif;\r\n                if (count > 1) {\r\n                    second = Math.floor(second / count) * count;\r\n                }\r\n                millisecond = 0;\r\n                break;\r\n            case \"millisecond\":\r\n                minute += offsetDif;\r\n                if (count > 1) {\r\n                    millisecond = Math.floor(millisecond / count) * count;\r\n                }\r\n                break;\r\n            case \"hour\":\r\n                if (count > 1) {\r\n                    hour = Math.floor(hour / count) * count;\r\n                }\r\n                minute = offsetDif;\r\n                second = 0;\r\n                millisecond = 0;\r\n                break;\r\n            case \"minute\":\r\n                if (count > 1) {\r\n                    minute = Math.floor(minute / count) * count;\r\n                }\r\n                minute += offsetDif;\r\n                second = 0;\r\n                millisecond = 0;\r\n                break;\r\n            case \"month\":\r\n                if (count > 1) {\r\n                    month = Math.floor(month / count) * count;\r\n                }\r\n                day = 1;\r\n                hour = 0;\r\n                minute = offsetDif;\r\n                second = 0;\r\n                millisecond = 0;\r\n                break;\r\n            case \"year\":\r\n                if (count > 1) {\r\n                    year = Math.floor(year / count) * count;\r\n                }\r\n                month = 0;\r\n                day = 1;\r\n                hour = 0;\r\n                minute = offsetDif;\r\n                second = 0;\r\n                millisecond = 0;\r\n                break;\r\n            case \"week\":\r\n                if (!$type.isNumber(firstDateOfWeek)) {\r\n                    firstDateOfWeek = 1;\r\n                }\r\n                if (weekday >= firstDateOfWeek) {\r\n                    day = day - weekday + firstDateOfWeek;\r\n                }\r\n                else {\r\n                    day = day - (7 + weekday) + firstDateOfWeek;\r\n                }\r\n                hour = 0;\r\n                minute = offsetDif;\r\n                second = 0;\r\n                millisecond = 0;\r\n                break;\r\n        }\r\n        date = new Date(year, month, day, hour, minute, second, millisecond);\r\n        let newTimeZoneOffset = date.getTimezoneOffset();\r\n        let newTzoffset = timezone.offsetUTC(date);\r\n        let newDiff = newTzoffset - newTimeZoneOffset;\r\n        if (newDiff != offsetDif) {\r\n            date.setTime(date.getTime() + (newDiff - offsetDif) * 60000);\r\n        }\r\n        return date;\r\n    }\r\n}\r\n/**\r\n * @ignore\r\n */\r\nexport function chooseInterval(index, duration, gridCount, intervals) {\r\n    let gridInterval = intervals[index];\r\n    let intervalDuration = getIntervalDuration(gridInterval);\r\n    let lastIndex = intervals.length - 1;\r\n    if (index >= lastIndex) {\r\n        return Object.assign({}, intervals[lastIndex]);\r\n    }\r\n    let count = Math.ceil(duration / intervalDuration);\r\n    if (duration < intervalDuration && index > 0) {\r\n        return Object.assign({}, intervals[index - 1]);\r\n    }\r\n    if (count <= gridCount) {\r\n        return Object.assign({}, intervals[index]);\r\n    }\r\n    else {\r\n        if (index + 1 < intervals.length) {\r\n            return chooseInterval(index + 1, duration, gridCount, intervals);\r\n        }\r\n        else {\r\n            return Object.assign({}, intervals[index]);\r\n        }\r\n    }\r\n}\r\n/**\r\n * @ignore\r\n */\r\nexport function getUnitValue(date, unit) {\r\n    switch (unit) {\r\n        case \"day\":\r\n            return date.getDate();\r\n        case \"second\":\r\n            return date.getSeconds();\r\n        case \"millisecond\":\r\n            return date.getMilliseconds();\r\n        case \"hour\":\r\n            return date.getHours();\r\n        case \"minute\":\r\n            return date.getMinutes();\r\n        case \"month\":\r\n            return date.getMonth();\r\n        case \"year\":\r\n            return date.getFullYear();\r\n        case \"week\":\r\n            return $utils.getWeek(date);\r\n    }\r\n}\r\n//# sourceMappingURL=Time.js.map","/** @ignore */ /** */\r\nimport * as $math from \"./Math\";\r\n/**\r\n * @ignore\r\n */\r\nexport function segmentedLine(display, segments) {\r\n    for (let s = 0, len = segments.length; s < len; s++) {\r\n        const groups = segments[s];\r\n        if (groups.length > 0) {\r\n            let firstGroup = groups[0];\r\n            if (firstGroup.length > 0) {\r\n                let firstPoint = firstGroup[0];\r\n                display.moveTo(firstPoint.x, firstPoint.y);\r\n                for (let g = 0, len = groups.length; g < len; g++) {\r\n                    line(display, groups[g]);\r\n                }\r\n            }\r\n        }\r\n    }\r\n}\r\n/**\r\n * @ignore\r\n */\r\nexport function line(display, points) {\r\n    for (let p = 0, len = points.length; p < len; p++) {\r\n        const point = points[p];\r\n        display.lineTo(point.x, point.y);\r\n    }\r\n}\r\n/**\r\n * @ignore\r\n */\r\nexport function moveTo(display, point) {\r\n    display.moveTo(point.x, point.y);\r\n}\r\n/**\r\n * @ignore\r\n */\r\nexport function clear(display) {\r\n    display.clear();\r\n}\r\n/**\r\n * @ignore\r\n */\r\nexport function smoothedSegmentedline(display, segments, tensionX, tensionY) {\r\n    for (let s = 0, len = segments.length; s < len; s++) {\r\n        const groups = segments[s];\r\n        if (groups.length > 0) {\r\n            let firstGroup = groups[0];\r\n            if (firstGroup.length > 0) {\r\n                let firstPoint = firstGroup[0];\r\n                display.moveTo(firstPoint.x, firstPoint.y);\r\n                for (let g = 0, len = groups.length; g < len; g++) {\r\n                    const points = groups[g];\r\n                    if (points.length > 0) {\r\n                        display.lineTo(points[0].x, points[0].y);\r\n                    }\r\n                    smoothedLine(display, points, tensionX, tensionY);\r\n                }\r\n            }\r\n        }\r\n    }\r\n}\r\n/**\r\n * @ignore\r\n */\r\nexport function smoothedLine(display, points, tensionX, tensionY) {\r\n    for (let i = points.length - 1; i > 0; i--) {\r\n        let p0 = points[i];\r\n        let p1 = points[i - 1];\r\n        if (Math.abs(p0.x - p1.x) < 0.1 && Math.abs(p0.y - p1.y) < 0.1) {\r\n            points.splice(i - 1, 1);\r\n        }\r\n    }\r\n    if (points.length < 3 || (tensionX >= 1 && tensionY >= 1)) {\r\n        line(display, points);\r\n        return;\r\n    }\r\n    tensionX = 1 - tensionX + 0.00001;\r\n    tensionY = 1 - tensionY + 0.00001;\r\n    let first = points[0];\r\n    let last = points[points.length - 1];\r\n    let closed = false;\r\n    if ($math.round(first.x, 3) == $math.round(last.x) && $math.round(first.y) == $math.round(last.y)) {\r\n        closed = true;\r\n    }\r\n    // Can't moveTo here, as it wont be possible to have fill then.\r\n    let path = \"\";\r\n    for (let i = 0, len = points.length - 1; i < len; i++) {\r\n        let p0 = points[i - 1];\r\n        let p1 = points[i];\r\n        let p2 = points[i + 1];\r\n        let p3 = points[i + 2];\r\n        if (i === 0) {\r\n            if (closed) {\r\n                p0 = points[len - 2];\r\n            }\r\n            else {\r\n                p0 = points[0];\r\n            }\r\n        }\r\n        else if (i == len - 1) {\r\n            if (closed) {\r\n                p3 = points[1];\r\n            }\r\n            else {\r\n                p3 = p2;\r\n            }\r\n        }\r\n        let controlPointA = $math.getCubicControlPointA(p0, p1, p2, tensionX, tensionY);\r\n        let controlPointB = $math.getCubicControlPointB(p1, p2, p3, tensionX, tensionY);\r\n        display.bezierCurveTo(controlPointA.x, controlPointA.y, controlPointB.x, controlPointB.y, p2.x, p2.y);\r\n    }\r\n    return path;\r\n}\r\n//# sourceMappingURL=Draw.js.map","import { Graphics } from \"./Graphics\";\r\nimport * as $draw from \"../util/Draw\";\r\n/**\r\n * Draws a line.\r\n *\r\n * @see {@link https://www.amcharts.com/docs/v5/concepts/common-elements/graphics/} for more info\r\n * @important\r\n */\r\nexport class Line extends Graphics {\r\n    _beforeChanged() {\r\n        super._beforeChanged();\r\n        if (this.isDirty(\"points\") || this.isDirty(\"segments\") || this._sizeDirty || this.isPrivateDirty(\"width\") || this.isPrivateDirty(\"height\")) {\r\n            this._clear = true;\r\n        }\r\n    }\r\n    _changed() {\r\n        super._changed();\r\n        if (this._clear) {\r\n            const points = this.get(\"points\");\r\n            const segments = this.get(\"segments\");\r\n            if (points && points.length > 0) {\r\n                let point = points[0];\r\n                this._display.moveTo(point.x, point.y);\r\n                $draw.segmentedLine(this._display, [[points]]);\r\n            }\r\n            else if (segments) {\r\n                $draw.segmentedLine(this._display, segments);\r\n            }\r\n            else if (!this.get(\"draw\")) {\r\n                let w = this.width();\r\n                let h = this.height();\r\n                this._display.moveTo(0, 0);\r\n                this._display.lineTo(w, h);\r\n            }\r\n        }\r\n    }\r\n}\r\nObject.defineProperty(Line, \"className\", {\r\n    enumerable: true,\r\n    configurable: true,\r\n    writable: true,\r\n    value: \"Line\"\r\n});\r\nObject.defineProperty(Line, \"classNames\", {\r\n    enumerable: true,\r\n    configurable: true,\r\n    writable: true,\r\n    value: Graphics.classNames.concat([Line.className])\r\n});\r\n//# sourceMappingURL=Line.js.map","import { Text } from \"./Text\";\r\nimport * as $math from \"../util/Math\";\r\n/**\r\n * @ignore\r\n */\r\nexport class RadialText extends Text {\r\n    constructor() {\r\n        super(...arguments);\r\n        Object.defineProperty(this, \"_display\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: this._root._renderer.makeRadialText(\"\", this.textStyle)\r\n        });\r\n    }\r\n    _afterNew() {\r\n        super._afterNew();\r\n    }\r\n    _beforeChanged() {\r\n        super._beforeChanged();\r\n        this._display.clear();\r\n        if (this.isDirty(\"textType\")) {\r\n            this._display.textType = this.get(\"textType\");\r\n            this.markDirtyBounds();\r\n        }\r\n        if (this.isDirty(\"radius\")) {\r\n            this._display.radius = this.get(\"radius\");\r\n            this.markDirtyBounds();\r\n        }\r\n        if (this.isDirty(\"startAngle\")) {\r\n            this._display.startAngle = (this.get(\"startAngle\", 0) + 90) * $math.RADIANS;\r\n            this.markDirtyBounds();\r\n        }\r\n        if (this.isDirty(\"inside\")) {\r\n            this._display.inside = this.get(\"inside\");\r\n            this.markDirtyBounds();\r\n        }\r\n        if (this.isDirty(\"orientation\")) {\r\n            this._display.orientation = this.get(\"orientation\");\r\n            this.markDirtyBounds();\r\n        }\r\n        if (this.isDirty(\"kerning\")) {\r\n            this._display.kerning = this.get(\"kerning\");\r\n            this.markDirtyBounds();\r\n        }\r\n    }\r\n}\r\nObject.defineProperty(RadialText, \"className\", {\r\n    enumerable: true,\r\n    configurable: true,\r\n    writable: true,\r\n    value: \"RadialText\"\r\n});\r\nObject.defineProperty(RadialText, \"classNames\", {\r\n    enumerable: true,\r\n    configurable: true,\r\n    writable: true,\r\n    value: Text.classNames.concat([RadialText.className])\r\n});\r\n//# sourceMappingURL=RadialText.js.map","// import * as $object from \"../util/Object\";\r\nimport { p50, Percent } from \"../util/Percent\";\r\nimport { Label } from \"./Label\";\r\nimport { RadialText } from \"./RadialText\";\r\nimport * as $math from \"../util/Math\";\r\nimport * as $utils from \"../util/Utils\";\r\nexport class RadialLabel extends Label {\r\n    constructor() {\r\n        super(...arguments);\r\n        Object.defineProperty(this, \"_flipped\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: false\r\n        });\r\n    }\r\n    _afterNew() {\r\n        this._textKeys.push(\"textType\", \"kerning\");\r\n        super._afterNew();\r\n    }\r\n    _makeText() {\r\n        this._text = this.children.push(RadialText.new(this._root, {}));\r\n    }\r\n    /**\r\n     * Returns base radius in pixels.\r\n     *\r\n     * @return Base radius\r\n     */\r\n    baseRadius() {\r\n        const radiusPrivate = this.getPrivate(\"radius\", 0);\r\n        const innerRadiusPrivate = this.getPrivate(\"innerRadius\", 0);\r\n        const baseRadius = this.get(\"baseRadius\", 0);\r\n        return innerRadiusPrivate + $utils.relativeToValue(baseRadius, radiusPrivate - innerRadiusPrivate);\r\n    }\r\n    /**\r\n     * Returns radius adjustment in pixels.\r\n     *\r\n     * @return Radius\r\n     */\r\n    radius() {\r\n        const inside = this.get(\"inside\", false);\r\n        return this.baseRadius() + this.get(\"radius\", 0) * (inside ? -1 : 1);\r\n    }\r\n    _updateChildren() {\r\n        super._updateChildren();\r\n        if (this.isDirty(\"baseRadius\") || this.isPrivateDirty(\"radius\") || this.isPrivateDirty(\"innerRadius\") || this.isDirty(\"labelAngle\") || this.isDirty(\"radius\") || this.isDirty(\"inside\") || this.isDirty(\"orientation\") || this.isDirty(\"textType\")) {\r\n            const textType = this.get(\"textType\", \"adjusted\");\r\n            const inside = this.get(\"inside\", false);\r\n            const orientation = this.get(\"orientation\");\r\n            let labelAngle = $math.normalizeAngle(this.get(\"labelAngle\", 0));\r\n            this._text.set(\"startAngle\", this.get(\"labelAngle\", 0));\r\n            this._text.set(\"inside\", inside);\r\n            const sin = $math.sin(labelAngle);\r\n            const cos = $math.cos(labelAngle);\r\n            let baseRadius = this.baseRadius();\r\n            let radius = this.radius();\r\n            this._display.angle = 0;\r\n            if (textType == \"circular\") {\r\n                this.setAll({\r\n                    paddingTop: 0,\r\n                    paddingBottom: 0,\r\n                    paddingLeft: 0,\r\n                    paddingRight: 0\r\n                });\r\n                this.setRaw(\"x\", undefined);\r\n                this.setRaw(\"y\", undefined);\r\n                // Circular labels are handled and positioned differently\r\n                this._text.set(\"orientation\", orientation);\r\n                this._text.set(\"radius\", radius);\r\n            }\r\n            else {\r\n                if (baseRadius == 0) {\r\n                    labelAngle = 0;\r\n                    radius = 0;\r\n                }\r\n                // Positioning of radial/regular labels are teh same\r\n                let x = radius * cos;\r\n                let y = radius * sin;\r\n                if (textType == \"radial\") {\r\n                    this.setRaw(\"x\", x);\r\n                    this.setRaw(\"y\", y);\r\n                    if ((labelAngle < 90) || (labelAngle > 270) || orientation != \"auto\") {\r\n                        this._display.angle = labelAngle; // + 90;\r\n                        this._flipped = false;\r\n                    }\r\n                    else {\r\n                        this._display.angle = labelAngle + 180;\r\n                        this._flipped = true;\r\n                    }\r\n                    this._dirty.rotation = false;\r\n                }\r\n                else if (textType == \"adjusted\") {\r\n                    this.setRaw(\"centerX\", p50);\r\n                    this.setRaw(\"centerY\", p50);\r\n                    this.setRaw(\"x\", x);\r\n                    this.setRaw(\"y\", y);\r\n                }\r\n                else if (textType == \"regular\") {\r\n                    this.setRaw(\"x\", x);\r\n                    this.setRaw(\"y\", y);\r\n                }\r\n            }\r\n            this.markDirtyPosition();\r\n            this.markDirtyBounds();\r\n        }\r\n    }\r\n    _updatePosition() {\r\n        const textType = this.get(\"textType\", \"regular\");\r\n        const inside = this.get(\"inside\", false);\r\n        let dx = 0;\r\n        let dy = 0;\r\n        let labelAngle = this.get(\"labelAngle\", 0);\r\n        let bounds = this.localBounds();\r\n        let w = bounds.right - bounds.left;\r\n        let h = bounds.bottom - bounds.top;\r\n        if (textType == \"radial\") {\r\n            if (this._flipped) {\r\n                let centerX = this.get(\"centerX\");\r\n                if (centerX instanceof Percent) {\r\n                    w = w * (1 - centerX.value * 2);\r\n                }\r\n                dx = w * $math.cos(labelAngle);\r\n                dy = w * $math.sin(labelAngle);\r\n            }\r\n        }\r\n        else if (!inside && textType == \"adjusted\") {\r\n            dx = w / 2 * $math.cos(labelAngle);\r\n            dy = h / 2 * $math.sin(labelAngle);\r\n        }\r\n        this.setRaw(\"dx\", dx);\r\n        this.setRaw(\"dy\", dy);\r\n        super._updatePosition();\r\n    }\r\n    /**\r\n     * @ignore\r\n     */\r\n    get text() {\r\n        return this._text;\r\n    }\r\n}\r\nObject.defineProperty(RadialLabel, \"className\", {\r\n    enumerable: true,\r\n    configurable: true,\r\n    writable: true,\r\n    value: \"RadialLabel\"\r\n});\r\nObject.defineProperty(RadialLabel, \"classNames\", {\r\n    enumerable: true,\r\n    configurable: true,\r\n    writable: true,\r\n    value: Label.classNames.concat([RadialLabel.className])\r\n});\r\n//# sourceMappingURL=RadialLabel.js.map","import { Graphics } from \"./Graphics\";\r\nimport * as $type from \"../util/Type\";\r\nimport { Percent } from \"../util/Percent\";\r\nimport { arc } from \"d3-shape\";\r\nimport * as $math from \"../util/Math\";\r\n/**\r\n * Draws a slice shape.\r\n *\r\n * @see {@link https://www.amcharts.com/docs/v5/concepts/common-elements/graphics/} for more info\r\n */\r\nexport class Slice extends Graphics {\r\n    constructor() {\r\n        super(...arguments);\r\n        /**\r\n         * @ignore\r\n         */\r\n        Object.defineProperty(this, \"ix\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: 0\r\n        });\r\n        /**\r\n         * @ignore\r\n         */\r\n        Object.defineProperty(this, \"iy\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: 0\r\n        });\r\n        Object.defineProperty(this, \"_generator\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: arc()\r\n        });\r\n    }\r\n    _getTooltipPoint() {\r\n        let tooltipX = this.get(\"tooltipX\");\r\n        let tooltipY = this.get(\"tooltipY\");\r\n        let x = 0;\r\n        let y = 0;\r\n        if ($type.isNumber(tooltipX)) {\r\n            x = tooltipX;\r\n        }\r\n        if ($type.isNumber(tooltipY)) {\r\n            y = tooltipY;\r\n        }\r\n        let radius = this.get(\"radius\", 0);\r\n        let innerRadius = this.get(\"innerRadius\", 0);\r\n        let dRadius = this.get(\"dRadius\", 0);\r\n        let dInnerRadius = this.get(\"dInnerRadius\", 0);\r\n        radius += dRadius;\r\n        innerRadius += dInnerRadius;\r\n        if (innerRadius < 0) {\r\n            innerRadius = radius + innerRadius;\r\n        }\r\n        if (tooltipX instanceof Percent) {\r\n            x = this.ix * (innerRadius + (radius - innerRadius) * tooltipX.value);\r\n        }\r\n        if (tooltipY instanceof Percent) {\r\n            y = this.iy * (innerRadius + (radius - innerRadius) * tooltipY.value);\r\n        }\r\n        if (this.get(\"arc\") >= 360 && innerRadius == 0) {\r\n            x = 0;\r\n            y = 0;\r\n        }\r\n        return { x, y };\r\n    }\r\n    _beforeChanged() {\r\n        super._beforeChanged();\r\n        if (this.isDirty(\"radius\") || this.isDirty(\"arc\") || this.isDirty(\"innerRadius\") || this.isDirty(\"startAngle\") || this.isDirty(\"dRadius\") || this.isDirty(\"dInnerRadius\") || this.isDirty(\"cornerRadius\") || this.isDirty(\"shiftRadius\")) {\r\n            this._clear = true;\r\n        }\r\n    }\r\n    _changed() {\r\n        super._changed();\r\n        if (this._clear) {\r\n            let startAngle = this.get(\"startAngle\", 0);\r\n            let arc = this.get(\"arc\", 0);\r\n            const generator = this._generator;\r\n            if (arc < 0) {\r\n                startAngle = startAngle + arc;\r\n                arc = arc * -1;\r\n            }\r\n            if (arc > 0.1) { // this fixes bug with full circle when arc is very small\r\n                generator.cornerRadius(this.get(\"cornerRadius\", 0));\r\n            }\r\n            generator.context(this._display);\r\n            let radius = this.get(\"radius\", 0);\r\n            let innerRadius = this.get(\"innerRadius\", 0);\r\n            let dRadius = this.get(\"dRadius\", 0);\r\n            let dInnerRadius = this.get(\"dInnerRadius\", 0);\r\n            radius += dRadius;\r\n            innerRadius += dInnerRadius;\r\n            if (innerRadius < 0) {\r\n                innerRadius = radius + innerRadius;\r\n            }\r\n            generator({ innerRadius: innerRadius, outerRadius: radius, startAngle: (startAngle + 90) * $math.RADIANS, endAngle: (startAngle + arc + 90) * $math.RADIANS });\r\n            let middleAngle = startAngle + arc / 2;\r\n            this.ix = $math.cos(middleAngle);\r\n            this.iy = $math.sin(middleAngle);\r\n            const shiftRadius = this.get(\"shiftRadius\", 0);\r\n            this.setRaw(\"dx\", this.ix * shiftRadius);\r\n            this.setRaw(\"dy\", this.iy * shiftRadius);\r\n            this.markDirtyPosition();\r\n        }\r\n    }\r\n}\r\nObject.defineProperty(Slice, \"className\", {\r\n    enumerable: true,\r\n    configurable: true,\r\n    writable: true,\r\n    value: \"Slice\"\r\n});\r\nObject.defineProperty(Slice, \"classNames\", {\r\n    enumerable: true,\r\n    configurable: true,\r\n    writable: true,\r\n    value: Graphics.classNames.concat([Slice.className])\r\n});\r\n//# sourceMappingURL=Slice.js.map","import { Container } from \"../../core/render/Container\";\r\nimport { p100 } from \"../../core/util/Percent\";\r\n/**\r\n * A base class for all charts.\r\n */\r\nexport class Chart extends Container {\r\n    constructor() {\r\n        super(...arguments);\r\n        /**\r\n         * A [[Container]] chart places its elements in.\r\n         *\r\n         * @default Container.new()\r\n         */\r\n        Object.defineProperty(this, \"chartContainer\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: this.children.push(Container.new(this._root, { width: p100, height: p100, interactiveChildren: false }))\r\n        });\r\n        /**\r\n         * A [[Container]] chart places its bullets in.\r\n         *\r\n         * @default Container.new()\r\n         */\r\n        Object.defineProperty(this, \"bulletsContainer\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: Container.new(this._root, { interactiveChildren: false, isMeasured: false, position: \"absolute\", width: p100, height: p100 })\r\n        });\r\n    }\r\n}\r\nObject.defineProperty(Chart, \"className\", {\r\n    enumerable: true,\r\n    configurable: true,\r\n    writable: true,\r\n    value: \"Chart\"\r\n});\r\nObject.defineProperty(Chart, \"classNames\", {\r\n    enumerable: true,\r\n    configurable: true,\r\n    writable: true,\r\n    value: Container.classNames.concat([Chart.className])\r\n});\r\n//# sourceMappingURL=Chart.js.map","import { Chart } from \"./Chart\";\r\nimport { Container } from \"../../core/render/Container\";\r\nimport { ListAutoDispose } from \"../../core/util/List\";\r\nimport { p100 } from \"../../core/util/Percent\";\r\nimport * as $array from \"../../core/util/Array\";\r\n/**\r\n * A base class for all series-based charts.\r\n */\r\nexport class SerialChart extends Chart {\r\n    constructor() {\r\n        super(...arguments);\r\n        /**\r\n         * A [[Container]] where chart will store all series.\r\n         *\r\n         * @default Container.new()\r\n         */\r\n        Object.defineProperty(this, \"seriesContainer\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: Container.new(this._root, { width: p100, height: p100, isMeasured: false })\r\n        });\r\n        /**\r\n         * A list of chart's series.\r\n         */\r\n        Object.defineProperty(this, \"series\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: new ListAutoDispose()\r\n        });\r\n    }\r\n    _afterNew() {\r\n        super._afterNew();\r\n        this._disposers.push(this.series);\r\n        const children = this.seriesContainer.children;\r\n        this._disposers.push(this.series.events.onAll((change) => {\r\n            if (change.type === \"clear\") {\r\n                $array.each(change.oldValues, (series) => {\r\n                    this._removeSeries(series);\r\n                });\r\n                const colors = this.get(\"colors\");\r\n                if (colors) {\r\n                    colors.reset();\r\n                }\r\n                const patterns = this.get(\"patterns\");\r\n                if (patterns) {\r\n                    patterns.reset();\r\n                }\r\n            }\r\n            else if (change.type === \"push\") {\r\n                children.moveValue(change.newValue);\r\n                this._processSeries(change.newValue);\r\n            }\r\n            else if (change.type === \"setIndex\") {\r\n                children.setIndex(change.index, change.newValue);\r\n                this._processSeries(change.newValue);\r\n            }\r\n            else if (change.type === \"insertIndex\") {\r\n                children.insertIndex(change.index, change.newValue);\r\n                this._processSeries(change.newValue);\r\n            }\r\n            else if (change.type === \"removeIndex\") {\r\n                this._removeSeries(change.oldValue);\r\n            }\r\n            else if (change.type === \"moveIndex\") {\r\n                children.moveValue(change.value, change.newIndex);\r\n                this._processSeries(change.value);\r\n            }\r\n            else {\r\n                throw new Error(\"Unknown IListEvent type\");\r\n            }\r\n        }));\r\n    }\r\n    _processSeries(series) {\r\n        series.chart = this;\r\n        series._placeBulletsContainer(this);\r\n    }\r\n    _removeSeries(series) {\r\n        if (!series.isDisposed()) {\r\n            this.seriesContainer.children.removeValue(series);\r\n            series._removeBulletsContainer();\r\n        }\r\n    }\r\n}\r\nObject.defineProperty(SerialChart, \"className\", {\r\n    enumerable: true,\r\n    configurable: true,\r\n    writable: true,\r\n    value: \"SerialChart\"\r\n});\r\nObject.defineProperty(SerialChart, \"classNames\", {\r\n    enumerable: true,\r\n    configurable: true,\r\n    writable: true,\r\n    value: Chart.classNames.concat([SerialChart.className])\r\n});\r\n//# sourceMappingURL=SerialChart.js.map","import { Line } from \"./Line\";\r\n/**\r\n * Draws a tick element (mostly used on axes).\r\n *\r\n * @see {@link https://www.amcharts.com/docs/v5/concepts/common-elements/graphics/} for more info\r\n */\r\nexport class Tick extends Line {\r\n}\r\nObject.defineProperty(Tick, \"className\", {\r\n    enumerable: true,\r\n    configurable: true,\r\n    writable: true,\r\n    value: \"Tick\"\r\n});\r\nObject.defineProperty(Tick, \"classNames\", {\r\n    enumerable: true,\r\n    configurable: true,\r\n    writable: true,\r\n    value: Line.classNames.concat([Tick.className])\r\n});\r\n//# sourceMappingURL=Tick.js.map","import { Entity } from \"./Entity\";\r\nimport { Color } from \"./Color\";\r\n/**\r\n * An object which holds list of colors and can generate new ones.\r\n *\r\n * @see {@link https://www.amcharts.com/docs/v5/concepts/colors-gradients-and-patterns/#Color_sets} for more info\r\n */\r\nexport class ColorSet extends Entity {\r\n    //protected _currentPass: number = 0;\r\n    _afterNew() {\r\n        // Applying themes because color set will not have parent\r\n        super._afterNewApplyThemes();\r\n        this._dirty[\"colors\"] = false;\r\n    }\r\n    _beforeChanged() {\r\n        if (this.isDirty(\"colors\")) {\r\n            this.reset();\r\n        }\r\n    }\r\n    /**\r\n     * @ignore\r\n     */\r\n    generateColors() {\r\n        this.setPrivate(\"currentPass\", this.getPrivate(\"currentPass\", 0) + 1);\r\n        const pass = this.getPrivate(\"currentPass\");\r\n        const colors = this.get(\"colors\", [this.get(\"baseColor\", Color.fromHex(0xff0000))]);\r\n        if (!this.getPrivate(\"numColors\")) {\r\n            this.setPrivate(\"numColors\", colors.length);\r\n        }\r\n        //const len = colors.length;\r\n        const len = this.getPrivate(\"numColors\");\r\n        //const start = len - this.getPrivate(\"numColors\")!;\r\n        const start = 0;\r\n        const passOptions = this.get(\"passOptions\");\r\n        const reuse = this.get(\"reuse\");\r\n        for (let i = start; i < len; i++) {\r\n            if (reuse) {\r\n                colors.push(colors[i]);\r\n            }\r\n            else {\r\n                const hsl = colors[i].toHSL();\r\n                let h = hsl.h + (passOptions.hue || 0) * pass;\r\n                while (h > 1)\r\n                    h -= 1;\r\n                let s = hsl.s + (passOptions.saturation || 0) * pass;\r\n                //if (s > 1) s -= Math.floor(s);\r\n                if (s > 1)\r\n                    s = 1;\r\n                if (s < 0)\r\n                    s = 0;\r\n                let l = hsl.l + (passOptions.lightness || 0) * pass;\r\n                //if (l > 1) l -= Math.floor(l);\r\n                while (l > 1)\r\n                    l -= 1;\r\n                colors.push(Color.fromHSL(h, s, l));\r\n            }\r\n        }\r\n    }\r\n    /**\r\n     * Returns a [[Color]] at specific index.\r\n     *\r\n     * If there's no color at this index, a new color is generated.\r\n     *\r\n     * @param   index  Index\r\n     * @return         Color\r\n     */\r\n    getIndex(index) {\r\n        const colors = this.get(\"colors\", []);\r\n        const saturation = this.get(\"saturation\");\r\n        if (index >= colors.length) {\r\n            this.generateColors();\r\n            return this.getIndex(index);\r\n        }\r\n        return saturation != null ? Color.saturate(colors[index], saturation) : colors[index];\r\n    }\r\n    /**\r\n     * Returns next [[Color]] in the list.\r\n     *\r\n     * If the list is out of colors, new ones are generated dynamically.\r\n     */\r\n    next() {\r\n        let currentStep = this.getPrivate(\"currentStep\", this.get(\"startIndex\", 0));\r\n        this.setPrivate(\"currentStep\", currentStep + this.get(\"step\", 1));\r\n        return this.getIndex(currentStep);\r\n    }\r\n    /**\r\n     * Resets counter to the start of the list, so the next call for `next()` will\r\n     * return the first color.\r\n     */\r\n    reset() {\r\n        this.setPrivate(\"currentStep\", this.get(\"startIndex\", 0));\r\n        this.setPrivate(\"currentPass\", 0);\r\n    }\r\n}\r\nObject.defineProperty(ColorSet, \"className\", {\r\n    enumerable: true,\r\n    configurable: true,\r\n    writable: true,\r\n    value: \"ColorSet\"\r\n});\r\nObject.defineProperty(ColorSet, \"classNames\", {\r\n    enumerable: true,\r\n    configurable: true,\r\n    writable: true,\r\n    value: Entity.classNames.concat([ColorSet.className])\r\n});\r\n//# sourceMappingURL=ColorSet.js.map","import { Theme } from \"../../core/Theme\";\r\nimport { percent, p50, p100 } from \"../../core/util/Percent\";\r\nimport { Color } from \"../../core/util/Color\";\r\nimport { ColorSet } from \"../../core/util/ColorSet\";\r\nimport { setColor } from \"../../themes/DefaultTheme\";\r\nimport * as $time from \"../../core/util/Time\";\r\nimport * as $type from \"../../core/util/Type\";\r\nimport * as $math from \"../../core/util/Math\";\r\nimport * as $object from \"../../core/util/Object\";\r\nimport * as $array from \"../../core/util/Array\";\r\n/**\r\n * @ignore\r\n */\r\nexport class XYChartDefaultTheme extends Theme {\r\n    setupDefaultRules() {\r\n        super.setupDefaultRules();\r\n        const ic = this._root.interfaceColors;\r\n        const language = this._root.language;\r\n        const r = this.rule.bind(this);\r\n        /**\r\n         * ========================================================================\r\n         * charts/xy\r\n         * ========================================================================\r\n         */\r\n        r(\"XYChart\").setAll({\r\n            colors: ColorSet.new(this._root, {}),\r\n            paddingLeft: 20,\r\n            paddingRight: 20,\r\n            paddingTop: 16,\r\n            paddingBottom: 16,\r\n            panX: false,\r\n            panY: false,\r\n            wheelStep: 0.25,\r\n            arrangeTooltips: true,\r\n            pinchZoomX: false,\r\n            pinchZoomY: false\r\n        });\r\n        r(\"XYSeries\").setAll({\r\n            legendLabelText: \"{name}\"\r\n        });\r\n        r(\"Rectangle\", [\"plotbackground\", \"xy\", \"background\"]).setAll({\r\n            fill: Color.fromHex(0x000000),\r\n            fillOpacity: 0\r\n        });\r\n        /**\r\n         * ------------------------------------------------------------------------\r\n         * charts/xy: XYChartScrollbar\r\n         * ------------------------------------------------------------------------\r\n         */\r\n        r(\"XYChart\", [\"scrollbar\", \"chart\"]).setAll({\r\n            paddingBottom: 0,\r\n            paddingLeft: 0,\r\n            paddingTop: 0,\r\n            paddingRight: 0,\r\n            colors: ColorSet.new(this._root, {\r\n                saturation: 0\r\n            })\r\n        });\r\n        {\r\n            const rule = r(\"Graphics\", [\"scrollbar\", \"overlay\"]);\r\n            rule.setAll({\r\n                fillOpacity: 0.5\r\n            });\r\n            setColor(rule, \"fill\", ic, \"background\");\r\n        }\r\n        // Class: RoundedRectangle\r\n        r(\"RoundedRectangle\", [\"xy\", \"scrollbar\", \"thumb\"]).setAll({\r\n            cornerRadiusTR: 0,\r\n            cornerRadiusTL: 0,\r\n            cornerRadiusBR: 0,\r\n            cornerRadiusBL: 0,\r\n            fillOpacity: 0,\r\n            focusable: true\r\n        });\r\n        r(\"RoundedRectangle\", [\"xy\", \"scrollbar\", \"thumb\"]).states.create(\"hover\", { fillOpacity: 0.4 });\r\n        r(\"RoundedRectangle\", [\"xy\", \"scrollbar\", \"chart\", \"background\"]).setAll({\r\n            cornerRadiusTL: 0,\r\n            cornerRadiusBL: 0,\r\n            cornerRadiusTR: 0,\r\n            cornerRadiusBR: 0\r\n        });\r\n        r(\"RoundedRectangle\", [\"xy\", \"scrollbar\", \"chart\", \"background\", \"resize\", \"button\"]).setAll({\r\n            cornerRadiusBL: 40,\r\n            cornerRadiusBR: 40,\r\n            cornerRadiusTL: 40,\r\n            cornerRadiusTR: 40\r\n        });\r\n        r(\"AxisRendererX\", [\"xy\", \"chart\", \"scrollbar\"]).setAll({\r\n            strokeOpacity: 0,\r\n            inside: true\r\n        });\r\n        r(\"AxisRendererY\", [\"xy\", \"chart\", \"scrollbar\"]).setAll({\r\n            strokeOpacity: 0,\r\n            inside: true,\r\n            minGridDistance: 5\r\n        });\r\n        r(\"AxisLabel\", [\"xy\", \"scrollbar\", \"x\"]).setAll({\r\n            opacity: 0.5,\r\n            centerY: p100,\r\n            minPosition: 0.01,\r\n            maxPosition: 0.99,\r\n            fontSize: \"0.8em\"\r\n        });\r\n        r(\"AxisLabel\", [\"category\"]).setAll({\r\n            text: \"{category}\",\r\n            populateText: true\r\n        });\r\n        r(\"AxisLabel\", [\"x\"]).setAll({\r\n            centerY: 0\r\n        });\r\n        r(\"AxisLabel\", [\"x\", \"inside\"]).setAll({\r\n            centerY: p100\r\n        });\r\n        r(\"AxisLabel\", [\"x\", \"inside\", \"opposite\"]).setAll({\r\n            centerY: 0\r\n        });\r\n        r(\"AxisLabel\", [\"x\", \"opposite\"]).setAll({\r\n            centerY: p100\r\n        });\r\n        r(\"AxisLabel\", [\"y\"]).setAll({\r\n            centerX: p100\r\n        });\r\n        r(\"AxisLabel\", [\"y\", \"inside\"]).setAll({\r\n            centerX: 0\r\n        });\r\n        r(\"AxisLabel\", [\"y\", \"inside\", \"opposite\"]).setAll({\r\n            centerX: p100\r\n        });\r\n        r(\"AxisLabel\", [\"y\", \"opposite\"]).setAll({\r\n            centerX: 0\r\n        });\r\n        r(\"AxisLabel\", [\"minor\"]).setAll({\r\n            fontSize: \"0.6em\"\r\n        });\r\n        r(\"AxisLabel\", [\"xy\", \"scrollbar\", \"y\"]).setAll({\r\n            visible: false\r\n        });\r\n        // Class: Grid\r\n        r(\"Grid\", [\"xy\", \"scrollbar\", \"y\"]).setAll({\r\n            visible: false\r\n        });\r\n        // Class: Grid\r\n        r(\"Grid\", [\"xy\", \"scrollbar\", \"x\"]).setAll({\r\n            opacity: 0.5\r\n        });\r\n        /**\r\n         * ------------------------------------------------------------------------\r\n         * charts/xy: Cursor\r\n         * ------------------------------------------------------------------------\r\n         */\r\n        r(\"XYCursor\").setAll({\r\n            behavior: \"none\",\r\n            layer: 30,\r\n            exportable: false,\r\n            snapToSeriesBy: \"xy\",\r\n            moveThreshold: 1\r\n        });\r\n        {\r\n            const rule = r(\"Grid\", [\"cursor\", \"x\"]);\r\n            rule.setAll({\r\n                forceInactive: true,\r\n                strokeOpacity: 0.8,\r\n                strokeDasharray: [2, 2],\r\n                role: \"slider\",\r\n                ariaLabel: language.translate(\"Use left and right arrows to move selection\")\r\n            });\r\n            setColor(rule, \"stroke\", ic, \"alternativeBackground\");\r\n        }\r\n        {\r\n            const rule = r(\"Grid\", [\"cursor\", \"y\"]);\r\n            rule.setAll({\r\n                forceInactive: true,\r\n                strokeOpacity: 0.8,\r\n                strokeDasharray: [2, 2],\r\n                role: \"slider\",\r\n                ariaLabel: language.translate(\"Use up and down arrows to move selection\")\r\n            });\r\n            setColor(rule, \"stroke\", ic, \"alternativeBackground\");\r\n        }\r\n        {\r\n            const rule = r(\"Graphics\", [\"cursor\", \"selection\"]);\r\n            rule.setAll({\r\n                fillOpacity: 0.15,\r\n            });\r\n            setColor(rule, \"fill\", ic, \"alternativeBackground\");\r\n        }\r\n        /**\r\n         * ------------------------------------------------------------------------\r\n         * charts/xy: Axes\r\n         * ------------------------------------------------------------------------\r\n         */\r\n        r(\"Axis\").setAll({\r\n            start: 0,\r\n            end: 1,\r\n            minZoomCount: 1,\r\n            maxZoomCount: Infinity,\r\n            maxZoomFactor: 1000,\r\n            maxDeviation: 0.1,\r\n            snapTooltip: true,\r\n            tooltipLocation: 0.5,\r\n            panX: true,\r\n            panY: true,\r\n            zoomX: true,\r\n            zoomY: true,\r\n            fixAxisSize: true\r\n        });\r\n        r(\"AxisLabel\").setAll({\r\n            location: 0.5,\r\n            multiLocation: 0,\r\n            centerX: p50,\r\n            centerY: p50,\r\n            paddingTop: 3,\r\n            paddingBottom: 3,\r\n            paddingLeft: 5,\r\n            paddingRight: 5\r\n        });\r\n        // The following is deprecated following text measuring updates in 5.0.5\r\n        // r(\"AxisLabel\", [\"y\"]).setAll({\r\n        // \ttextAlign: \"right\"\r\n        // });\r\n        // r(\"AxisLabel\", [\"y\", \"opposite\"]).setAll({\r\n        // \ttextAlign: \"left\"\r\n        // });\r\n        r(\"Container\", [\"axis\", \"header\"]).setAll({\r\n            layer: 30\r\n        });\r\n        r(\"Rectangle\", [\"axis\", \"header\", \"background\"]).setAll({\r\n            crisp: true\r\n        });\r\n        {\r\n            const rule = r(\"AxisRenderer\");\r\n            rule.setAll({\r\n                crisp: true,\r\n                strokeOpacity: 0\r\n            });\r\n            setColor(rule, \"stroke\", ic, \"grid\");\r\n        }\r\n        r(\"AxisRendererX\").setAll({\r\n            minGridDistance: 120,\r\n            opposite: false,\r\n            inversed: false,\r\n            cellStartLocation: 0,\r\n            cellEndLocation: 1,\r\n            width: p100\r\n        });\r\n        r(\"AxisRendererY\").setAll({\r\n            minGridDistance: 40,\r\n            opposite: false,\r\n            inversed: false,\r\n            cellStartLocation: 0,\r\n            cellEndLocation: 1,\r\n            height: p100\r\n        });\r\n        {\r\n            const rule = r(\"Rectangle\", [\"axis\", \"thumb\"]);\r\n            rule.setAll({\r\n                fillOpacity: 0\r\n            });\r\n            setColor(rule, \"fill\", ic, \"alternativeBackground\");\r\n            rule.states.create(\"hover\", { fillOpacity: 0.1 });\r\n        }\r\n        r(\"Rectangle\", [\"axis\", \"thumb\", \"x\"]).setAll({\r\n            cursorOverStyle: \"ew-resize\"\r\n        });\r\n        r(\"Rectangle\", [\"axis\", \"thumb\", \"y\"]).setAll({\r\n            cursorOverStyle: \"ns-resize\"\r\n        });\r\n        {\r\n            const rule = r(\"Grid\");\r\n            rule.setAll({\r\n                location: 0,\r\n                strokeOpacity: 0.15,\r\n                crisp: true\r\n            });\r\n            setColor(rule, \"stroke\", ic, \"grid\");\r\n        }\r\n        {\r\n            const rule = r(\"Grid\", [\"minor\"]);\r\n            rule.setAll({\r\n                location: 0,\r\n                strokeOpacity: 0.07,\r\n                crisp: true\r\n            });\r\n            setColor(rule, \"stroke\", ic, \"grid\");\r\n        }\r\n        r(\"Grid\", [\"base\"]).setAll({\r\n            strokeOpacity: 0.3\r\n        });\r\n        {\r\n            const rule = r(\"Graphics\", [\"axis\", \"fill\"]);\r\n            rule.setAll({\r\n                visible: false,\r\n                isMeasured: false,\r\n                position: \"absolute\",\r\n                fillOpacity: 0.05,\r\n            });\r\n            setColor(rule, \"fill\", ic, \"alternativeBackground\");\r\n        }\r\n        r(\"Graphics\", [\"axis\", \"fill\", \"range\"]).setAll({\r\n            isMeasured: true\r\n        });\r\n        // hides all elements of series axis range\r\n        r(\"Graphics\", [\"series\", \"fill\", \"range\"]).setAll({\r\n            visible: false,\r\n            isMeasured: true\r\n        });\r\n        r(\"Grid\", [\"series\", \"range\"]).setAll({\r\n            visible: false\r\n        });\r\n        r(\"AxisTick\", [\"series\", \"range\"]).setAll({\r\n            visible: false\r\n        });\r\n        r(\"AxisLabel\", [\"series\", \"range\"]).setAll({\r\n            visible: false\r\n        });\r\n        {\r\n            const rule = r(\"AxisTick\");\r\n            rule.setAll({\r\n                location: 0.5,\r\n                multiLocation: 0,\r\n                strokeOpacity: 1,\r\n                isMeasured: false,\r\n                position: \"absolute\",\r\n                visible: false\r\n            });\r\n            setColor(rule, \"stroke\", ic, \"grid\");\r\n        }\r\n        r(\"CategoryAxis\").setAll({\r\n            startLocation: 0,\r\n            endLocation: 1,\r\n            fillRule: (dataItem, index) => {\r\n                const axisFill = dataItem.get(\"axisFill\");\r\n                if (axisFill) {\r\n                    if (!$type.isNumber(index) || index % 2 == 0) {\r\n                        axisFill.setPrivate(\"visible\", true);\r\n                    }\r\n                    else {\r\n                        axisFill.setPrivate(\"visible\", false);\r\n                    }\r\n                }\r\n            }\r\n        });\r\n        const gridIntervals = [\r\n            { timeUnit: \"millisecond\", count: 1 },\r\n            { timeUnit: \"millisecond\", count: 5 },\r\n            { timeUnit: \"millisecond\", count: 10 },\r\n            { timeUnit: \"millisecond\", count: 50 },\r\n            { timeUnit: \"millisecond\", count: 100 },\r\n            { timeUnit: \"millisecond\", count: 500 },\r\n            { timeUnit: \"second\", count: 1 },\r\n            { timeUnit: \"second\", count: 5 },\r\n            { timeUnit: \"second\", count: 10 },\r\n            { timeUnit: \"second\", count: 30 },\r\n            { timeUnit: \"minute\", count: 1 },\r\n            { timeUnit: \"minute\", count: 5 },\r\n            { timeUnit: \"minute\", count: 10 },\r\n            { timeUnit: \"minute\", count: 15 },\r\n            { timeUnit: \"minute\", count: 30 },\r\n            { timeUnit: \"hour\", count: 1 },\r\n            { timeUnit: \"hour\", count: 3 },\r\n            { timeUnit: \"hour\", count: 6 },\r\n            { timeUnit: \"hour\", count: 12 },\r\n            { timeUnit: \"day\", count: 1 },\r\n            { timeUnit: \"day\", count: 2 },\r\n            { timeUnit: \"day\", count: 3 },\r\n            { timeUnit: \"day\", count: 4 },\r\n            { timeUnit: \"day\", count: 5 },\r\n            { timeUnit: \"week\", count: 1 },\r\n            { timeUnit: \"month\", count: 1 },\r\n            { timeUnit: \"month\", count: 2 },\r\n            { timeUnit: \"month\", count: 3 },\r\n            { timeUnit: \"month\", count: 6 },\r\n            { timeUnit: \"year\", count: 1 },\r\n            { timeUnit: \"year\", count: 2 },\r\n            { timeUnit: \"year\", count: 5 },\r\n            { timeUnit: \"year\", count: 10 },\r\n            { timeUnit: \"year\", count: 50 },\r\n            { timeUnit: \"year\", count: 100 },\r\n            { timeUnit: \"year\", count: 200 },\r\n            { timeUnit: \"year\", count: 500 },\r\n            { timeUnit: \"year\", count: 1000 },\r\n            { timeUnit: \"year\", count: 2000 },\r\n            { timeUnit: \"year\", count: 5000 },\r\n            { timeUnit: \"year\", count: 10000 },\r\n            { timeUnit: \"year\", count: 100000 }\r\n        ];\r\n        const dateFormats = {\r\n            \"millisecond\": language.translate(\"_date_millisecond\"),\r\n            \"second\": language.translate(\"_date_second\"),\r\n            \"minute\": language.translate(\"_date_minute\"),\r\n            \"hour\": language.translate(\"_date_hour\"),\r\n            \"day\": language.translate(\"_date_day\"),\r\n            \"week\": language.translate(\"_date_day\"),\r\n            \"month\": language.translate(\"_date_month\"),\r\n            \"year\": language.translate(\"_date_year\")\r\n        };\r\n        const periodChangeDateFormats = {\r\n            \"millisecond\": language.translate(\"_date_millisecond\"),\r\n            \"second\": language.translate(\"_date_second\"),\r\n            \"minute\": language.translate(\"_date_minute\"),\r\n            \"hour\": language.translate(\"_date_day\"),\r\n            \"day\": language.translate(\"_date_day\"),\r\n            \"week\": language.translate(\"_date_day\"),\r\n            \"month\": language.translate(\"_date_month\") + \" \" + language.translate(\"_date_year\"),\r\n            \"year\": language.translate(\"_date_year\")\r\n        };\r\n        const tooltipDateFormats = {\r\n            \"millisecond\": language.translate(\"_date_millisecond_full\"),\r\n            \"second\": language.translate(\"_date_second_full\"),\r\n            \"minute\": language.translate(\"_date_minute_full\"),\r\n            \"hour\": language.translate(\"_date_hour_full\"),\r\n            \"day\": language.translate(\"_date_day_full\"),\r\n            \"week\": language.translate(\"_date_week_full\"),\r\n            \"month\": language.translate(\"_date_month_full\"),\r\n            \"year\": language.translate(\"_date_year\")\r\n        };\r\n        r(\"CategoryDateAxis\").setAll({\r\n            markUnitChange: true,\r\n            gridIntervals: $array.copy(gridIntervals),\r\n            dateFormats: $object.copy(dateFormats),\r\n            periodChangeDateFormats: $object.copy(periodChangeDateFormats)\r\n        });\r\n        r(\"DateAxis\").setAll({\r\n            maxZoomFactor: null,\r\n            strictMinMax: true,\r\n            startLocation: 0,\r\n            endLocation: 1,\r\n            markUnitChange: true,\r\n            groupData: false,\r\n            groupCount: 500,\r\n            gridIntervals: $array.copy(gridIntervals),\r\n            dateFormats: $object.copy(dateFormats),\r\n            periodChangeDateFormats: $object.copy(periodChangeDateFormats),\r\n            tooltipDateFormats: tooltipDateFormats,\r\n            groupIntervals: [\r\n                { timeUnit: \"millisecond\", count: 1 },\r\n                { timeUnit: \"millisecond\", count: 10 },\r\n                { timeUnit: \"millisecond\", count: 100 },\r\n                { timeUnit: \"second\", count: 1 },\r\n                { timeUnit: \"second\", count: 10 },\r\n                { timeUnit: \"minute\", count: 1 },\r\n                { timeUnit: \"minute\", count: 10 },\r\n                { timeUnit: \"hour\", count: 1 },\r\n                { timeUnit: \"day\", count: 1 },\r\n                { timeUnit: \"week\", count: 1 },\r\n                { timeUnit: \"month\", count: 1 },\r\n                { timeUnit: \"year\", count: 1 }\r\n            ],\r\n            fillRule: (dataItem) => {\r\n                const axisFill = dataItem.get(\"axisFill\");\r\n                if (axisFill) {\r\n                    const axis = dataItem.component;\r\n                    const value = dataItem.get(\"value\");\r\n                    const endValue = dataItem.get(\"endValue\");\r\n                    const intervalDuration = axis.intervalDuration();\r\n                    const baseInterval = axis.getPrivate(\"baseInterval\");\r\n                    const gridInterval = axis.getPrivate(\"gridInterval\", baseInterval);\r\n                    let min = axis.getPrivate(\"min\", 0);\r\n                    min = $time.round(new Date(min), gridInterval.timeUnit, gridInterval.count, this._root.locale.firstDayOfWeek, this._root.utc, undefined, this._root.timezone).getTime();\r\n                    if (value != null && endValue != null) {\r\n                        const val = Math.round(Math.round((value - min) / intervalDuration)) / 2;\r\n                        if (val == Math.round(val)) {\r\n                            axisFill.setPrivate(\"visible\", true);\r\n                        }\r\n                        else {\r\n                            axisFill.setPrivate(\"visible\", false);\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        });\r\n        r(\"GaplessDateAxis\").setAll({\r\n            fillRule: (dataItem) => {\r\n                const axisFill = dataItem.get(\"axisFill\");\r\n                if (axisFill) {\r\n                    const index = dataItem.get(\"index\");\r\n                    let visible = false;\r\n                    if (!$type.isNumber(index) || index % 2 == 0) {\r\n                        visible = true;\r\n                    }\r\n                    axisFill.setPrivate(\"visible\", visible);\r\n                }\r\n            }\r\n        });\r\n        r(\"ValueAxis\").setAll({\r\n            baseValue: 0,\r\n            logarithmic: false,\r\n            strictMinMax: false,\r\n            autoZoom: true,\r\n            fillRule: (dataItem) => {\r\n                const axisFill = dataItem.get(\"axisFill\");\r\n                if (axisFill) {\r\n                    const axis = dataItem.component;\r\n                    const value = dataItem.get(\"value\");\r\n                    const step = axis.getPrivate(\"step\");\r\n                    if ($type.isNumber(value) && $type.isNumber(step)) {\r\n                        if ($math.round(value / step / 2, 5) == Math.round(value / step / 2)) {\r\n                            axisFill.setPrivate(\"visible\", false);\r\n                        }\r\n                        else {\r\n                            axisFill.setPrivate(\"visible\", true);\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        });\r\n        r(\"DurationAxis\").setAll({\r\n            baseUnit: \"second\"\r\n        });\r\n        /**\r\n         * ------------------------------------------------------------------------\r\n         * charts/xy: Series\r\n         * ------------------------------------------------------------------------\r\n         */\r\n        r(\"XYSeries\").setAll({\r\n            maskBullets: true,\r\n            stackToNegative: true,\r\n            locationX: 0.5,\r\n            locationY: 0.5,\r\n            snapTooltip: false,\r\n            openValueXGrouped: \"open\",\r\n            openValueYGrouped: \"open\",\r\n            valueXGrouped: \"close\",\r\n            valueYGrouped: \"close\",\r\n            seriesTooltipTarget: \"series\"\r\n        });\r\n        r(\"BaseColumnSeries\").setAll({\r\n            adjustBulletPosition: true\r\n        });\r\n        r(\"ColumnSeries\").setAll({\r\n            clustered: true\r\n        });\r\n        r(\"RoundedRectangle\", [\"series\", \"column\"]).setAll({\r\n            position: \"absolute\",\r\n            isMeasured: false,\r\n            width: percent(70),\r\n            height: percent(70),\r\n            strokeWidth: 1,\r\n            strokeOpacity: 1,\r\n            cornerRadiusBL: 0,\r\n            cornerRadiusTL: 0,\r\n            cornerRadiusBR: 0,\r\n            cornerRadiusTR: 0,\r\n            fillOpacity: 1,\r\n            role: \"figure\"\r\n        });\r\n        r(\"LineSeries\").setAll({\r\n            connect: true,\r\n            autoGapCount: 1.1,\r\n            stackToNegative: false\r\n        });\r\n        r(\"Graphics\", [\"series\", \"stroke\"]).setAll({\r\n            position: \"absolute\",\r\n            strokeWidth: 1,\r\n            strokeOpacity: 1,\r\n            isMeasured: false\r\n        });\r\n        r(\"Graphics\", [\"series\", \"fill\"]).setAll({\r\n            visible: false,\r\n            fillOpacity: 0,\r\n            position: \"absolute\",\r\n            strokeWidth: 0,\r\n            strokeOpacity: 0,\r\n            isMeasured: false\r\n        });\r\n        r(\"Graphics\", [\"line\", \"series\", \"legend\", \"marker\", \"stroke\"]).setAll({\r\n            draw: (display, sprite) => {\r\n                const parent = sprite.parent;\r\n                if (parent) {\r\n                    const h = parent.height();\r\n                    const w = parent.width();\r\n                    display.moveTo(0, h / 2);\r\n                    display.lineTo(w, h / 2);\r\n                }\r\n            }\r\n        });\r\n        {\r\n            const rule = r(\"Graphics\", [\"line\", \"series\", \"legend\", \"marker\", \"stroke\"]).states.create(\"disabled\", {});\r\n            setColor(rule, \"stroke\", ic, \"disabled\");\r\n        }\r\n        r(\"Graphics\", [\"line\", \"series\", \"legend\", \"marker\", \"fill\"]).setAll({\r\n            draw: (display, sprite) => {\r\n                const parent = sprite.parent;\r\n                if (parent) {\r\n                    const h = parent.height();\r\n                    const w = parent.width();\r\n                    display.moveTo(0, 0);\r\n                    display.lineTo(w, 0);\r\n                    display.lineTo(w, h);\r\n                    display.lineTo(0, h);\r\n                    display.lineTo(0, 0);\r\n                }\r\n            }\r\n        });\r\n        {\r\n            const rule = r(\"Graphics\", [\"line\", \"series\", \"legend\", \"marker\", \"fill\"]).states.create(\"disabled\", {});\r\n            setColor(rule, \"stroke\", ic, \"disabled\");\r\n        }\r\n        r(\"SmoothedXYLineSeries\").setAll({\r\n            tension: 0.5\r\n        });\r\n        r(\"SmoothedXLineSeries\").setAll({\r\n            tension: 0.5\r\n        });\r\n        r(\"SmoothedYLineSeries\").setAll({\r\n            tension: 0.5\r\n        });\r\n        r(\"Candlestick\").setAll({\r\n            position: \"absolute\",\r\n            isMeasured: false,\r\n            width: percent(50),\r\n            height: percent(50),\r\n            strokeWidth: 1,\r\n            strokeOpacity: 1,\r\n            cornerRadiusBL: 0,\r\n            cornerRadiusTL: 0,\r\n            cornerRadiusBR: 0,\r\n            cornerRadiusTR: 0,\r\n            fillOpacity: 1,\r\n            role: \"figure\"\r\n        });\r\n        r(\"OHLC\").setAll({\r\n            width: percent(80),\r\n            height: percent(80)\r\n        });\r\n        r(\"CandlestickSeries\").setAll({\r\n            lowValueXGrouped: \"low\",\r\n            lowValueYGrouped: \"low\",\r\n            highValueXGrouped: \"high\",\r\n            highValueYGrouped: \"high\",\r\n            openValueXGrouped: \"open\",\r\n            openValueYGrouped: \"open\",\r\n            valueXGrouped: \"close\",\r\n            valueYGrouped: \"close\"\r\n        });\r\n        // These rules can be used for regular columns, too\r\n        {\r\n            const rule = r(\"Rectangle\", [\"column\", \"autocolor\"]).states.create(\"riseFromOpen\", {});\r\n            setColor(rule, \"fill\", ic, \"positive\");\r\n            setColor(rule, \"stroke\", ic, \"positive\");\r\n        }\r\n        {\r\n            const rule = r(\"Rectangle\", [\"column\", \"autocolor\"]).states.create(\"dropFromOpen\", {});\r\n            setColor(rule, \"fill\", ic, \"negative\");\r\n            setColor(rule, \"stroke\", ic, \"negative\");\r\n        }\r\n        // Hollow\r\n        r(\"Rectangle\", [\"column\", \"autocolor\", \"pro\"]).states.create(\"riseFromOpen\", { fillOpacity: 0 });\r\n        r(\"Rectangle\", [\"column\", \"autocolor\", \"pro\"]).states.create(\"dropFromOpen\", { fillOpacity: 1 });\r\n        {\r\n            const rule = r(\"Rectangle\", [\"column\", \"autocolor\", \"pro\"]).states.create(\"riseFromPrevious\", {});\r\n            setColor(rule, \"fill\", ic, \"positive\");\r\n            setColor(rule, \"stroke\", ic, \"positive\");\r\n        }\r\n        {\r\n            const rule = r(\"Rectangle\", [\"column\", \"autocolor\", \"pro\"]).states.create(\"dropFromPrevious\", {});\r\n            setColor(rule, \"fill\", ic, \"negative\");\r\n            setColor(rule, \"stroke\", ic, \"negative\");\r\n        }\r\n        // AXIS RANGE GRIP\r\n        {\r\n            const rule = r(\"RoundedRectangle\", [\"rangegrip\"]);\r\n            rule.setAll({\r\n                strokeOpacity: 0,\r\n                fillOpacity: 0,\r\n                strokeWidth: 1,\r\n                width: 12,\r\n                height: 12\r\n            });\r\n        }\r\n        {\r\n            const rule = r(\"Graphics\", [\"rangegrip\", \"button\", \"icon\"]);\r\n            rule.setAll({\r\n                interactive: false,\r\n                crisp: true,\r\n                strokeOpacity: 0.5,\r\n                draw: (display) => {\r\n                    display.moveTo(0, 0.5);\r\n                    display.lineTo(0, 12.5);\r\n                    display.moveTo(2, 0.5);\r\n                    display.lineTo(2, 12.5);\r\n                    display.moveTo(4, 0.5);\r\n                    display.lineTo(4, 12.5);\r\n                }\r\n            });\r\n            setColor(rule, \"stroke\", ic, \"secondaryButtonText\");\r\n        }\r\n        r(\"Button\", [\"rangegrip\"]).setAll({\r\n            draggable: true,\r\n            paddingTop: 0,\r\n            paddingBottom: 0\r\n        });\r\n        r(\"Button\", [\"rangegrip\", \"vertical\"]).setAll({\r\n            rotation: 90,\r\n            cursorOverStyle: \"ns-resize\",\r\n            centerX: p50\r\n        });\r\n        r(\"Button\", [\"rangegrip\", \"horizontal\"]).setAll({\r\n            cursorOverStyle: \"ew-resize\",\r\n            centerX: p50\r\n        });\r\n        r(\"Button\", [\"rangegrip\", \"vertical\", \"left\"]).setAll({\r\n            centerY: p100\r\n        });\r\n        r(\"Button\", [\"rangegrip\", \"vertical\", \"right\"]).setAll({\r\n            centerY: 0\r\n        });\r\n        r(\"Button\", [\"rangegrip\", \"horizontal\", \"top\"]).setAll({\r\n            centerY: 0\r\n        });\r\n        r(\"Button\", [\"rangegrip\", \"horizontal\", \"bottom\"]).setAll({\r\n            centerY: p100\r\n        });\r\n    }\r\n}\r\n//# sourceMappingURL=XYChartDefaultTheme.js.map",";\r\nimport { XYChartDefaultTheme } from \"./XYChartDefaultTheme\";\r\nimport { Container } from \"../../core/render/Container\";\r\nimport { Rectangle } from \"../../core/render/Rectangle\";\r\nimport { SerialChart } from \"../../core/render/SerialChart\";\r\nimport { ListAutoDispose } from \"../../core/util/List\";\r\nimport { p100 } from \"../../core/util/Percent\";\r\nimport { Button } from \"../../core/render/Button\";\r\nimport { Graphics } from \"../../core/render/Graphics\";\r\nimport { Percent } from \"../../core/util/Percent\";\r\nimport * as $array from \"../../core/util/Array\";\r\nimport * as $type from \"../../core/util/Type\";\r\nimport * as $order from \"../../core/util/Order\";\r\nimport * as $object from \"../../core/util/Object\";\r\nimport * as $utils from \"../../core/util/Utils\";\r\nimport * as $math from \"../../core/util/Math\";\r\n/**\r\n * Creates an XY chart.\r\n *\r\n * @see {@link https://www.amcharts.com/docs/v5/charts/xy-chart/} for more info\r\n * @important\r\n */\r\nexport class XYChart extends SerialChart {\r\n    constructor() {\r\n        super(...arguments);\r\n        /**\r\n         * A list of horizontal axes.\r\n         */\r\n        Object.defineProperty(this, \"xAxes\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: new ListAutoDispose()\r\n        });\r\n        /**\r\n         * A list of vertical axes.\r\n         */\r\n        Object.defineProperty(this, \"yAxes\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: new ListAutoDispose()\r\n        });\r\n        /**\r\n         * A [[Container]] located on top of the chart, used to store top horizontal\r\n         * axes.\r\n         *\r\n         * @see {@link https://www.amcharts.com/docs/v5/charts/xy-chart/xy-chart-containers/} for more info\r\n         * @default Container.new()\r\n         */\r\n        Object.defineProperty(this, \"topAxesContainer\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: this.chartContainer.children.push(Container.new(this._root, { width: p100, layout: this._root.verticalLayout }))\r\n        });\r\n        /**\r\n         * A [[Container]] located in the middle the chart, used to store vertical axes\r\n         * and plot area container.\r\n         *\r\n         * @see {@link https://www.amcharts.com/docs/v5/charts/xy-chart/xy-chart-containers/} for more info\r\n         * @default Container.new()\r\n         */\r\n        Object.defineProperty(this, \"yAxesAndPlotContainer\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: this.chartContainer.children.push(Container.new(this._root, { width: p100, height: p100, layout: this._root.horizontalLayout }))\r\n        });\r\n        /**\r\n         * A [[Container]] located on bottom of the chart, used to store bottom\r\n         * horizontal axes.\r\n         *\r\n         * @see {@link https://www.amcharts.com/docs/v5/charts/xy-chart/xy-chart-containers/} for more info\r\n         * @default Container.new()\r\n         */\r\n        Object.defineProperty(this, \"bottomAxesContainer\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: this.chartContainer.children.push(Container.new(this._root, { width: p100, layout: this._root.verticalLayout }))\r\n        });\r\n        /**\r\n         * A [[Container]] located on left of the chart, used to store left-hand\r\n         * vertical axes.\r\n         *\r\n         * @see {@link https://www.amcharts.com/docs/v5/charts/xy-chart/xy-chart-containers/} for more info\r\n         * @default Container.new()\r\n         */\r\n        Object.defineProperty(this, \"leftAxesContainer\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: this.yAxesAndPlotContainer.children.push(Container.new(this._root, { height: p100, layout: this._root.horizontalLayout }))\r\n        });\r\n        /**\r\n         * A [[Container]] located in the middle of the chart, used to store plotContainer and topPlotContainer\r\n         *\r\n         * @see {@link https://www.amcharts.com/docs/v5/charts/xy-chart/xy-chart-containers/} for more info\r\n         * @default Container.new()\r\n         */\r\n        Object.defineProperty(this, \"plotsContainer\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: this.yAxesAndPlotContainer.children.push(Container.new(this._root, { width: p100, height: p100, maskContent: false }))\r\n        });\r\n        /**\r\n         * A [[Container]] located in the middle of the chart, used to store actual\r\n         * plots (series).\r\n         *\r\n         * NOTE: `plotContainer` will automatically have its `background` preset. If\r\n         * you need to modify background or outline for chart's plot area, you can\r\n         * use `plotContainer.get(\"background\")` for that.*\r\n         *\r\n         * @see {@link https://www.amcharts.com/docs/v5/charts/xy-chart/xy-chart-containers/} for more info\r\n         * @default Container.new()\r\n         */\r\n        Object.defineProperty(this, \"plotContainer\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: this.plotsContainer.children.push(Container.new(this._root, { width: p100, height: p100 }))\r\n        });\r\n        /**\r\n         * A [[Container]] used for any elements that need to be displayed over\r\n         * regular `plotContainer`.\r\n         *\r\n         * @see {@link https://www.amcharts.com/docs/v5/charts/xy-chart/xy-chart-containers/} for more info\r\n         * @default Container.new()\r\n         */\r\n        Object.defineProperty(this, \"topPlotContainer\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: this.plotsContainer.children.push(Container.new(this._root, { width: p100, height: p100 }))\r\n        });\r\n        /**\r\n         * A [[Container]] axis grid elements are stored in.\r\n         *\r\n         * @see {@link https://www.amcharts.com/docs/v5/charts/xy-chart/xy-chart-containers/} for more info\r\n         * @default Container.new()\r\n         */\r\n        Object.defineProperty(this, \"gridContainer\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: this.plotContainer.children.push(Container.new(this._root, { width: p100, height: p100, isMeasured: false }))\r\n        });\r\n        /**\r\n         * A [[Container]] axis background grid elements are stored in.\r\n         *\r\n         * @see {@link https://www.amcharts.com/docs/v5/charts/xy-chart/xy-chart-containers/} for more info\r\n         * @default Container.new()\r\n         */\r\n        Object.defineProperty(this, \"topGridContainer\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: Container.new(this._root, { width: p100, height: p100, isMeasured: false })\r\n        });\r\n        /**\r\n         * A [[Container]] located on right of the chart, used to store right-hand\r\n         * vertical axes.\r\n         *\r\n         * @see {@link https://www.amcharts.com/docs/v5/charts/xy-chart/xy-chart-containers/} for more info\r\n         * @default Container.new()\r\n         */\r\n        Object.defineProperty(this, \"rightAxesContainer\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: this.yAxesAndPlotContainer.children.push(Container.new(this._root, { height: p100, layout: this._root.horizontalLayout }))\r\n        });\r\n        /**\r\n         * A [[Container]] axis headers are stored in.\r\n         *\r\n         * @see {@link https://www.amcharts.com/docs/v5/charts/xy-chart/axes/axis-headers/} for more info\r\n         * @default Container.new()\r\n         */\r\n        Object.defineProperty(this, \"axisHeadersContainer\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: this.plotContainer.children.push(Container.new(this._root, {}))\r\n        });\r\n        /**\r\n         * A button that is shown when chart is not fully zoomed out.\r\n         *\r\n         * @see {@link https://www.amcharts.com/docs/v5/charts/xy-chart/zoom-and-pan/#Zoom_out_button} for more info\r\n         * @default Button.new()\r\n         */\r\n        Object.defineProperty(this, \"zoomOutButton\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: this.topPlotContainer.children.push(Button.new(this._root, {\r\n                themeTags: [\"zoom\"],\r\n                icon: Graphics.new(this._root, {\r\n                    themeTags: [\"button\", \"icon\"]\r\n                })\r\n            }))\r\n        });\r\n        Object.defineProperty(this, \"_movePoint\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: { x: 0, y: 0 }\r\n        });\r\n        Object.defineProperty(this, \"_wheelDp\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"_otherCharts\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"_movePoints\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: {}\r\n        });\r\n        Object.defineProperty(this, \"_downStartX\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"_downEndX\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"_downStartY\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"_downEndY\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n    }\r\n    _afterNew() {\r\n        this._defaultThemes.push(XYChartDefaultTheme.new(this._root));\r\n        super._afterNew();\r\n        this._disposers.push(this.xAxes);\r\n        this._disposers.push(this.yAxes);\r\n        const root = this._root;\r\n        let verticalLayout = this._root.verticalLayout;\r\n        const zoomOutButton = this.zoomOutButton;\r\n        zoomOutButton.events.on(\"click\", () => {\r\n            this.zoomOut();\r\n        });\r\n        zoomOutButton.hide(0);\r\n        zoomOutButton.states.lookup(\"default\").set(\"opacity\", 1);\r\n        this.chartContainer.set(\"layout\", verticalLayout);\r\n        const plotContainer = this.plotContainer;\r\n        plotContainer.children.push(this.seriesContainer);\r\n        this._disposers.push(this._processAxis(this.xAxes, this.bottomAxesContainer));\r\n        this._disposers.push(this._processAxis(this.yAxes, this.leftAxesContainer));\r\n        plotContainer.children.push(this.topGridContainer);\r\n        plotContainer.children.push(this.bulletsContainer);\r\n        // Setting trasnparent background so that full body of the plot container\r\n        // is interactive\r\n        plotContainer.set(\"interactive\", true);\r\n        plotContainer.set(\"interactiveChildren\", false);\r\n        plotContainer.set(\"background\", Rectangle.new(root, {\r\n            themeTags: [\"plotbackground\", \"xy\", \"background\"]\r\n        }));\r\n        this._disposers.push(plotContainer.events.on(\"pointerdown\", (event) => {\r\n            this._handlePlotDown(event);\r\n        }));\r\n        this._disposers.push(plotContainer.events.on(\"globalpointerup\", (event) => {\r\n            this._handlePlotUp(event);\r\n        }));\r\n        this._disposers.push(plotContainer.events.on(\"globalpointermove\", (event) => {\r\n            this._handlePlotMove(event);\r\n        }));\r\n        this._maskGrid();\r\n        this._setUpTouch();\r\n    }\r\n    _beforeChanged() {\r\n        super._beforeChanged();\r\n        if (this.isDirty(\"pinchZoomX\") || this.isDirty(\"pinchZoomY\") || this.get(\"panX\") || this.get(\"panY\")) {\r\n            this._setUpTouch();\r\n        }\r\n    }\r\n    _setUpTouch() {\r\n        if (!this.plotContainer._display.cancelTouch) {\r\n            this.plotContainer._display.cancelTouch = (this.get(\"pinchZoomX\") || this.get(\"pinchZoomY\") || this.get(\"panX\") || this.get(\"panY\")) ? true : false;\r\n        }\r\n    }\r\n    _maskGrid() {\r\n        this.gridContainer.set(\"maskContent\", true);\r\n        this.topGridContainer.set(\"maskContent\", true);\r\n    }\r\n    _removeSeries(series) {\r\n        series._unstack();\r\n        if (series._posXDp) {\r\n            series._posXDp.dispose();\r\n        }\r\n        if (series._posYDp) {\r\n            series._posYDp.dispose();\r\n        }\r\n        series.set(\"baseAxis\", undefined);\r\n        const xAxis = series.get(\"xAxis\");\r\n        if (xAxis) {\r\n            $array.remove(xAxis.series, series);\r\n            xAxis.markDirtyExtremes();\r\n        }\r\n        const yAxis = series.get(\"yAxis\");\r\n        if (yAxis) {\r\n            $array.remove(yAxis.series, series);\r\n            yAxis.markDirtyExtremes();\r\n        }\r\n        const cursor = this.get(\"cursor\");\r\n        if (cursor) {\r\n            const snapToSeries = cursor.get(\"snapToSeries\");\r\n            if (snapToSeries) {\r\n                $array.remove(snapToSeries, series);\r\n            }\r\n        }\r\n        super._removeSeries(series);\r\n    }\r\n    /**\r\n     * This method is invoked when mouse wheel is used over chart's plot\r\n     * container, and handles zooming/pan.\r\n     *\r\n     * You can invoke this method manually, if you need to mimic chart's wheel\r\n     * behavior over other elements of the chart.\r\n     */\r\n    handleWheel(event) {\r\n        const wheelX = this.get(\"wheelX\");\r\n        const wheelY = this.get(\"wheelY\");\r\n        const plotContainer = this.plotContainer;\r\n        const wheelEvent = event.originalEvent;\r\n        // Ignore wheel event if it is happening on a non-chart element, e.g. if\r\n        // some page element is over the chart.\r\n        if ($utils.isLocalEvent(wheelEvent, this)) {\r\n            wheelEvent.preventDefault();\r\n        }\r\n        else {\r\n            return;\r\n        }\r\n        const plotPoint = plotContainer.toLocal(event.point);\r\n        const wheelStep = this.get(\"wheelStep\", 0.2);\r\n        const shiftY = wheelEvent.deltaY / 100;\r\n        const shiftX = wheelEvent.deltaX / 100;\r\n        const wheelZoomPositionX = this.get(\"wheelZoomPositionX\");\r\n        const wheelZoomPositionY = this.get(\"wheelZoomPositionY\");\r\n        if ((wheelX === \"zoomX\" || wheelX === \"zoomXY\") && shiftX != 0) {\r\n            this.xAxes.each((axis) => {\r\n                if (axis.get(\"zoomX\")) {\r\n                    let start = axis.get(\"start\");\r\n                    let end = axis.get(\"end\");\r\n                    let position = axis.fixPosition(plotPoint.x / plotContainer.width());\r\n                    if (wheelZoomPositionX != null) {\r\n                        position = wheelZoomPositionX;\r\n                    }\r\n                    let newStart = start - wheelStep * (end - start) * shiftX * position;\r\n                    let newEnd = end + wheelStep * (end - start) * shiftX * (1 - position);\r\n                    if (1 / (newEnd - newStart) < axis.getPrivate(\"maxZoomFactor\", Infinity) / axis.get(\"minZoomCount\", 1)) {\r\n                        this._handleWheelAnimation(axis.zoom(newStart, newEnd));\r\n                    }\r\n                }\r\n            });\r\n        }\r\n        if ((wheelY === \"zoomX\" || wheelY === \"zoomXY\") && shiftY != 0) {\r\n            this.xAxes.each((axis) => {\r\n                if (axis.get(\"zoomX\")) {\r\n                    let start = axis.get(\"start\");\r\n                    let end = axis.get(\"end\");\r\n                    let position = axis.fixPosition(plotPoint.x / plotContainer.width());\r\n                    if (wheelZoomPositionX != null) {\r\n                        position = wheelZoomPositionX;\r\n                    }\r\n                    let newStart = start - wheelStep * (end - start) * shiftY * position;\r\n                    let newEnd = end + wheelStep * (end - start) * shiftY * (1 - position);\r\n                    if (1 / (newEnd - newStart) < axis.getPrivate(\"maxZoomFactor\", Infinity) / axis.get(\"minZoomCount\", 1)) {\r\n                        this._handleWheelAnimation(axis.zoom(newStart, newEnd));\r\n                    }\r\n                }\r\n            });\r\n        }\r\n        if ((wheelX === \"zoomY\" || wheelX === \"zoomXY\") && shiftX != 0) {\r\n            this.yAxes.each((axis) => {\r\n                if (axis.get(\"zoomY\")) {\r\n                    let start = axis.get(\"start\");\r\n                    let end = axis.get(\"end\");\r\n                    let position = axis.fixPosition(plotPoint.y / plotContainer.height());\r\n                    if (wheelZoomPositionY != null) {\r\n                        position = wheelZoomPositionY;\r\n                    }\r\n                    let newStart = start - wheelStep * (end - start) * shiftX * position;\r\n                    let newEnd = end + wheelStep * (end - start) * shiftX * (1 - position);\r\n                    if (1 / (newEnd - newStart) < axis.getPrivate(\"maxZoomFactor\", Infinity) / axis.get(\"minZoomCount\", 1)) {\r\n                        this._handleWheelAnimation(axis.zoom(newStart, newEnd));\r\n                    }\r\n                }\r\n            });\r\n        }\r\n        if ((wheelY === \"zoomY\" || wheelY === \"zoomXY\") && shiftY != 0) {\r\n            this.yAxes.each((axis) => {\r\n                if (axis.get(\"zoomY\")) {\r\n                    let start = axis.get(\"start\");\r\n                    let end = axis.get(\"end\");\r\n                    let position = axis.fixPosition(plotPoint.y / plotContainer.height());\r\n                    if (wheelZoomPositionY != null) {\r\n                        position = wheelZoomPositionY;\r\n                    }\r\n                    let newStart = start - wheelStep * (end - start) * shiftY * position;\r\n                    let newEnd = end + wheelStep * (end - start) * shiftY * (1 - position);\r\n                    if (1 / (newEnd - newStart) < axis.getPrivate(\"maxZoomFactor\", Infinity) / axis.get(\"minZoomCount\", 1)) {\r\n                        this._handleWheelAnimation(axis.zoom(newStart, newEnd));\r\n                    }\r\n                }\r\n            });\r\n        }\r\n        if ((wheelX === \"panX\" || wheelX === \"panXY\") && shiftX != 0) {\r\n            this.xAxes.each((axis) => {\r\n                if (axis.get(\"panX\")) {\r\n                    let start = axis.get(\"start\");\r\n                    let end = axis.get(\"end\");\r\n                    let delta = this._getWheelSign(axis) * wheelStep * (end - start) * shiftX;\r\n                    let newStart = start + delta;\r\n                    let newEnd = end + delta;\r\n                    let se = this._fixWheel(newStart, newEnd);\r\n                    newStart = se[0];\r\n                    newEnd = se[1];\r\n                    this._handleWheelAnimation(axis.zoom(newStart, newEnd));\r\n                }\r\n            });\r\n        }\r\n        if ((wheelY === \"panX\" || wheelY === \"panXY\") && shiftY != 0) {\r\n            this.xAxes.each((axis) => {\r\n                if (axis.get(\"panX\")) {\r\n                    let start = axis.get(\"start\");\r\n                    let end = axis.get(\"end\");\r\n                    let delta = this._getWheelSign(axis) * wheelStep * (end - start) * shiftY;\r\n                    let newStart = start + delta;\r\n                    let newEnd = end + delta;\r\n                    let se = this._fixWheel(newStart, newEnd);\r\n                    newStart = se[0];\r\n                    newEnd = se[1];\r\n                    this._handleWheelAnimation(axis.zoom(newStart, newEnd));\r\n                }\r\n            });\r\n        }\r\n        if ((wheelX === \"panY\" || wheelX === \"panXY\") && shiftX != 0) {\r\n            this.yAxes.each((axis) => {\r\n                if (axis.get(\"panY\")) {\r\n                    let start = axis.get(\"start\");\r\n                    let end = axis.get(\"end\");\r\n                    let delta = this._getWheelSign(axis) * wheelStep * (end - start) * shiftX;\r\n                    let newStart = start + delta;\r\n                    let newEnd = end + delta;\r\n                    let se = this._fixWheel(newStart, newEnd);\r\n                    newStart = se[0];\r\n                    newEnd = se[1];\r\n                    this._handleWheelAnimation(axis.zoom(newStart, newEnd));\r\n                }\r\n            });\r\n        }\r\n        if ((wheelY === \"panY\" || wheelY === \"panXY\") && shiftY != 0) {\r\n            this.yAxes.each((axis) => {\r\n                if (axis.get(\"panY\")) {\r\n                    let start = axis.get(\"start\");\r\n                    let end = axis.get(\"end\");\r\n                    let delta = this._getWheelSign(axis) * wheelStep * (end - start) * shiftY;\r\n                    let newStart = start - delta;\r\n                    let newEnd = end - delta;\r\n                    let se = this._fixWheel(newStart, newEnd);\r\n                    newStart = se[0];\r\n                    newEnd = se[1];\r\n                    this._handleWheelAnimation(axis.zoom(newStart, newEnd));\r\n                }\r\n            });\r\n        }\r\n    }\r\n    _handleSetWheel() {\r\n        const wheelX = this.get(\"wheelX\");\r\n        const wheelY = this.get(\"wheelY\");\r\n        const plotContainer = this.plotContainer;\r\n        if (wheelX !== \"none\" || wheelY !== \"none\") {\r\n            this._wheelDp = plotContainer.events.on(\"wheel\", (event) => {\r\n                const wheelEvent = event.originalEvent;\r\n                if ((wheelX !== \"none\" && Math.abs(wheelEvent.deltaX) != 0) || (wheelY !== \"none\" && Math.abs(wheelEvent.deltaY) != 0)) {\r\n                    this.handleWheel(event);\r\n                }\r\n            });\r\n            this._disposers.push(this._wheelDp);\r\n        }\r\n        else {\r\n            if (this._wheelDp) {\r\n                this._wheelDp.dispose();\r\n            }\r\n        }\r\n    }\r\n    _getWheelSign(axis) {\r\n        let sign = 1;\r\n        if (axis.get(\"renderer\").get(\"inversed\")) {\r\n            sign = -1;\r\n        }\r\n        return sign;\r\n    }\r\n    _fixWheel(start, end) {\r\n        const diff = end - start;\r\n        if (start < 0) {\r\n            start = 0;\r\n            end = start + diff;\r\n        }\r\n        if (end > 1) {\r\n            end = 1;\r\n            start = end - diff;\r\n        }\r\n        return [start, end];\r\n    }\r\n    _handlePlotDown(event) {\r\n        const originalEvent = event.originalEvent;\r\n        if (originalEvent.button == 2) {\r\n            return;\r\n        }\r\n        const plotContainer = this.plotContainer;\r\n        let local = plotContainer.toLocal(event.point);\r\n        if (this.get(\"pinchZoomX\") || this.get(\"pinchZoomY\")) {\r\n            const pointerId = originalEvent.pointerId;\r\n            if (pointerId) {\r\n                if ($object.keys(plotContainer._downPoints).length > 0) {\r\n                    const xAxis = this.xAxes.getIndex(0);\r\n                    const yAxis = this.yAxes.getIndex(0);\r\n                    if (xAxis) {\r\n                        this._downStartX = xAxis.get(\"start\", 0);\r\n                        this._downEndX = xAxis.get(\"end\", 1);\r\n                    }\r\n                    if (yAxis) {\r\n                        this._downStartY = yAxis.get(\"start\", 0);\r\n                        this._downEndY = yAxis.get(\"end\", 1);\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        if (this.get(\"panX\") || this.get(\"panY\")) {\r\n            if (local.x >= 0 && local.y >= 0 && local.x <= plotContainer.width() && local.y <= this.height()) {\r\n                //this._downPoint = local;\r\n                this._downPoint = { x: originalEvent.clientX, y: originalEvent.clientY };\r\n                const panX = this.get(\"panX\");\r\n                const panY = this.get(\"panY\");\r\n                if (panX) {\r\n                    this.xAxes.each((axis) => {\r\n                        axis._panStart = axis.get(\"start\");\r\n                        axis._panEnd = axis.get(\"end\");\r\n                    });\r\n                }\r\n                if (panY) {\r\n                    this.yAxes.each((axis) => {\r\n                        axis._panStart = axis.get(\"start\");\r\n                        axis._panEnd = axis.get(\"end\");\r\n                    });\r\n                }\r\n                const eventType = \"panstarted\";\r\n                if (this.events.isEnabled(eventType)) {\r\n                    this.events.dispatch(eventType, { type: eventType, target: this, originalEvent: event.originalEvent });\r\n                }\r\n            }\r\n        }\r\n    }\r\n    _handleWheelAnimation(animation) {\r\n        if (animation) {\r\n            animation.events.on(\"stopped\", () => {\r\n                this._dispatchWheelAnimation();\r\n            });\r\n        }\r\n        else {\r\n            this._dispatchWheelAnimation();\r\n        }\r\n    }\r\n    _dispatchWheelAnimation() {\r\n        const eventType = \"wheelended\";\r\n        if (this.events.isEnabled(eventType)) {\r\n            this.events.dispatch(eventType, { type: eventType, target: this });\r\n        }\r\n    }\r\n    _handlePlotUp(event) {\r\n        const downPoint = this._downPoint;\r\n        if (downPoint) {\r\n            if (this.get(\"panX\") || this.get(\"panY\")) {\r\n                if (event.originalEvent.clientX == downPoint.x && event.originalEvent.clientY == downPoint.y) {\r\n                    const eventType = \"pancancelled\";\r\n                    if (this.events.isEnabled(eventType)) {\r\n                        this.events.dispatch(eventType, { type: eventType, target: this, originalEvent: event.originalEvent });\r\n                    }\r\n                }\r\n                const eventType = \"panended\";\r\n                if (this.events.isEnabled(eventType)) {\r\n                    this.events.dispatch(eventType, { type: eventType, target: this, originalEvent: event.originalEvent });\r\n                }\r\n            }\r\n        }\r\n        // TODO: handle multitouch\r\n        this._downPoint = undefined;\r\n        this.xAxes.each((xAxis) => {\r\n            xAxis._isPanning = false;\r\n        });\r\n        this.yAxes.each((yAxis) => {\r\n            yAxis._isPanning = false;\r\n        });\r\n    }\r\n    _handlePlotMove(event) {\r\n        const plotContainer = this.plotContainer;\r\n        if (this.get(\"pinchZoomX\") || this.get(\"pinchZoomY\")) {\r\n            const touchEvent = event.originalEvent;\r\n            const pointerId = touchEvent.pointerId;\r\n            if (pointerId) {\r\n                this._movePoints[pointerId] = event.point;\r\n                if ($object.keys(plotContainer._downPoints).length > 1) {\r\n                    this._handlePinch();\r\n                    return;\r\n                }\r\n            }\r\n        }\r\n        let downPoint = this._downPoint;\r\n        if (downPoint) {\r\n            downPoint = plotContainer.toLocal(this._root.documentPointToRoot(downPoint));\r\n            let local = plotContainer.toLocal(event.point);\r\n            const panX = this.get(\"panX\");\r\n            const panY = this.get(\"panY\");\r\n            if (panX) {\r\n                let scrollbarX = this.get(\"scrollbarX\");\r\n                if (scrollbarX) {\r\n                    scrollbarX.events.disableType(\"rangechanged\");\r\n                }\r\n                this.xAxes.each((axis) => {\r\n                    if (axis.get(\"panX\")) {\r\n                        axis._isPanning = true;\r\n                        //const maxDeviation = axis.get(\"maxDeviation\", 0);\r\n                        let panStart = axis._panStart;\r\n                        let panEnd = axis._panEnd;\r\n                        let difference = (panEnd - panStart);\r\n                        let deltaX = difference * (downPoint.x - local.x) / plotContainer.width();\r\n                        if (axis.get(\"renderer\").get(\"inversed\")) {\r\n                            deltaX *= -1;\r\n                        }\r\n                        let start = panStart + deltaX;\r\n                        let end = panEnd + deltaX;\r\n                        if (end - start < 1 + axis.get(\"maxDeviation\", 1) * 2) {\r\n                            axis.set(\"start\", start);\r\n                            axis.set(\"end\", end);\r\n                        }\r\n                    }\r\n                });\r\n                if (scrollbarX) {\r\n                    scrollbarX.events.enableType(\"rangechanged\");\r\n                }\r\n            }\r\n            if (panY) {\r\n                let scrollbarY = this.get(\"scrollbarY\");\r\n                if (scrollbarY) {\r\n                    scrollbarY.events.disableType(\"rangechanged\");\r\n                }\r\n                this.yAxes.each((axis) => {\r\n                    if (axis.get(\"panY\")) {\r\n                        axis._isPanning = true;\r\n                        //const maxDeviation = axis.get(\"maxDeviation\", 0);\r\n                        let panStart = axis._panStart;\r\n                        let panEnd = axis._panEnd;\r\n                        let difference = (panEnd - panStart);\r\n                        let deltaY = difference * (downPoint.y - local.y) / plotContainer.height();\r\n                        if (axis.get(\"renderer\").get(\"inversed\")) {\r\n                            deltaY *= -1;\r\n                        }\r\n                        let start = panStart - deltaY;\r\n                        let end = panEnd - deltaY;\r\n                        if (end - start < 1 + axis.get(\"maxDeviation\", 1) * 2) {\r\n                            axis.set(\"start\", start);\r\n                            axis.set(\"end\", end);\r\n                        }\r\n                    }\r\n                });\r\n                if (scrollbarY) {\r\n                    scrollbarY.events.enableType(\"rangechanged\");\r\n                }\r\n            }\r\n        }\r\n    }\r\n    _handlePinch() {\r\n        const plotContainer = this.plotContainer;\r\n        let i = 0;\r\n        let downPoints = [];\r\n        let movePoints = [];\r\n        $object.each(plotContainer._downPoints, (k, point) => {\r\n            downPoints[i] = point;\r\n            let movePoint = this._movePoints[k];\r\n            if (movePoint) {\r\n                movePoints[i] = movePoint;\r\n            }\r\n            i++;\r\n        });\r\n        if (downPoints.length > 1 && movePoints.length > 1) {\r\n            const w = plotContainer.width();\r\n            const h = plotContainer.height();\r\n            let downPoint0 = downPoints[0];\r\n            let downPoint1 = downPoints[1];\r\n            let movePoint0 = movePoints[0];\r\n            let movePoint1 = movePoints[1];\r\n            if (downPoint0 && downPoint1 && movePoint0 && movePoint1) {\r\n                movePoint0 = plotContainer.toLocal(movePoint0);\r\n                movePoint1 = plotContainer.toLocal(movePoint1);\r\n                downPoint0 = plotContainer.toLocal(downPoint0);\r\n                downPoint1 = plotContainer.toLocal(downPoint1);\r\n                if (this.get(\"pinchZoomX\")) {\r\n                    const downStartX = this._downStartX;\r\n                    const downEndX = this._downEndX;\r\n                    if (downStartX != null && downEndX != null) {\r\n                        if (downPoint0.x > downPoint1.x) {\r\n                            [downPoint0, downPoint1] = [downPoint1, downPoint0];\r\n                            [movePoint0, movePoint1] = [movePoint1, movePoint0];\r\n                        }\r\n                        let downPos0 = downStartX + (downPoint0.x / w) * (downEndX - downStartX);\r\n                        let downPos1 = downStartX + (downPoint1.x / w) * (downEndX - downStartX);\r\n                        let movePos0 = downStartX + (movePoint0.x / w) * (downEndX - downStartX);\r\n                        let movePos1 = downStartX + (movePoint1.x / w) * (downEndX - downStartX);\r\n                        let initialDistance = Math.max(0.001, downPos1 - downPos0);\r\n                        let currentDistance = Math.max(0.001, movePos1 - movePos0);\r\n                        let d = initialDistance / currentDistance;\r\n                        let s = downStartX * d + downPos0 - movePos0 * d;\r\n                        let e = downEndX * d + downPos1 - movePos1 * d;\r\n                        this.xAxes.each((xAxis) => {\r\n                            let sa = xAxis.fixPosition(s);\r\n                            let ea = xAxis.fixPosition(e);\r\n                            xAxis.zoom(sa, ea, 0);\r\n                        });\r\n                    }\r\n                }\r\n                if (this.get(\"pinchZoomY\")) {\r\n                    const downStartY = this._downStartY;\r\n                    const downEndY = this._downEndY;\r\n                    if (downStartY != null && downEndY != null) {\r\n                        if (downPoint0.y < downPoint1.y) {\r\n                            [downPoint0, downPoint1] = [downPoint1, downPoint0];\r\n                            [movePoint0, movePoint1] = [movePoint1, movePoint0];\r\n                        }\r\n                        let downPos0 = downStartY + (1 - downPoint0.y / h) * (downEndY - downStartY);\r\n                        let downPos1 = downStartY + (1 - downPoint1.y / h) * (downEndY - downStartY);\r\n                        let movePos0 = downStartY + (1 - movePoint0.y / h) * (downEndY - downStartY);\r\n                        let movePos1 = downStartY + (1 - movePoint1.y / h) * (downEndY - downStartY);\r\n                        let initialDistance = Math.max(0.001, downPos1 - downPos0);\r\n                        let currentDistance = Math.max(0.001, movePos1 - movePos0);\r\n                        let d = initialDistance / currentDistance;\r\n                        let s = downStartY * d + downPos0 - movePos0 * d;\r\n                        let e = downEndY * d + downPos1 - movePos1 * d;\r\n                        this.yAxes.each((yAxis) => {\r\n                            let sa = yAxis.fixPosition(s);\r\n                            let ea = yAxis.fixPosition(e);\r\n                            yAxis.zoom(sa, ea, 0);\r\n                        });\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n    _handleCursorPosition() {\r\n        const cursor = this.get(\"cursor\");\r\n        if (cursor) {\r\n            const cursorPoint = cursor.getPrivate(\"point\");\r\n            let snapToSeries = cursor.get(\"snapToSeries\");\r\n            if (cursor._downPoint) {\r\n                snapToSeries = undefined;\r\n            }\r\n            if (snapToSeries && cursorPoint) {\r\n                const snapToSeriesBy = cursor.get(\"snapToSeriesBy\");\r\n                const dataItems = [];\r\n                $array.each(snapToSeries, (series) => {\r\n                    if (!series.isHidden() && !series.isHiding()) {\r\n                        if (snapToSeriesBy != \"x!\" && snapToSeriesBy != \"y!\") {\r\n                            const startIndex = series.startIndex();\r\n                            const endIndex = series.endIndex();\r\n                            for (let i = startIndex; i < endIndex; i++) {\r\n                                const dataItem = series.dataItems[i];\r\n                                if (dataItem && !dataItem.isHidden()) {\r\n                                    dataItems.push(dataItem);\r\n                                }\r\n                            }\r\n                        }\r\n                        else {\r\n                            const tooltipDataItem = series.get(\"tooltipDataItem\");\r\n                            if (tooltipDataItem) {\r\n                                dataItems.push(tooltipDataItem);\r\n                            }\r\n                        }\r\n                    }\r\n                });\r\n                let minDistance = Infinity;\r\n                let closestItem;\r\n                $array.each(dataItems, (dataItem) => {\r\n                    const point = dataItem.get(\"point\");\r\n                    if (point) {\r\n                        let distance = 0;\r\n                        if (snapToSeriesBy == \"x\" || snapToSeriesBy == \"x!\") {\r\n                            distance = Math.abs(cursorPoint.x - point.x);\r\n                        }\r\n                        else if (snapToSeriesBy == \"y\" || snapToSeriesBy == \"y!\") {\r\n                            distance = Math.abs(cursorPoint.y - point.y);\r\n                        }\r\n                        else {\r\n                            distance = Math.hypot(cursorPoint.x - point.x, cursorPoint.y - point.y);\r\n                        }\r\n                        if (distance < minDistance) {\r\n                            minDistance = distance;\r\n                            closestItem = dataItem;\r\n                        }\r\n                    }\r\n                });\r\n                $array.each(snapToSeries, (series) => {\r\n                    const tooltip = series.get(\"tooltip\");\r\n                    if (tooltip) {\r\n                        tooltip._setDataItem(undefined);\r\n                    }\r\n                });\r\n                if (closestItem) {\r\n                    let series = closestItem.component;\r\n                    series.showDataItemTooltip(closestItem);\r\n                    series.setRaw(\"tooltipDataItem\", closestItem);\r\n                    const point = closestItem.get(\"point\");\r\n                    if (point) {\r\n                        // removing x and y to solve #72225\r\n                        cursor.handleMove(series.toGlobal({ x: point.x - series.x(), y: point.y - series.y() }), true);\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n    _updateCursor() {\r\n        let cursor = this.get(\"cursor\");\r\n        if (cursor) {\r\n            cursor.updateCursor();\r\n        }\r\n    }\r\n    _addCursor(cursor) {\r\n        this.plotContainer.children.push(cursor);\r\n    }\r\n    _prepareChildren() {\r\n        super._prepareChildren();\r\n        this.series.each((series) => {\r\n            this._colorize(series);\r\n        });\r\n        if (this.isDirty(\"wheelX\") || this.isDirty(\"wheelY\")) {\r\n            this._handleSetWheel();\r\n        }\r\n        if (this.isDirty(\"cursor\")) {\r\n            const previous = this._prevSettings.cursor;\r\n            const cursor = this.get(\"cursor\");\r\n            if (cursor !== previous) {\r\n                this._disposeProperty(\"cursor\");\r\n                if (previous) {\r\n                    previous.dispose();\r\n                }\r\n                if (cursor) {\r\n                    cursor._setChart(this);\r\n                    this._addCursor(cursor);\r\n                    this._pushPropertyDisposer(\"cursor\", cursor.events.on(\"selectended\", () => {\r\n                        this._handleCursorSelectEnd();\r\n                    }));\r\n                }\r\n                //this.setRaw(\"cursor\", cursor) // to reset previous value\r\n                this._prevSettings.cursor = cursor;\r\n            }\r\n        }\r\n        if (this.isDirty(\"scrollbarX\")) {\r\n            const previous = this._prevSettings.scrollbarX;\r\n            const scrollbarX = this.get(\"scrollbarX\");\r\n            if (scrollbarX !== previous) {\r\n                this._disposeProperty(\"scrollbarX\");\r\n                if (previous) {\r\n                    previous.dispose();\r\n                }\r\n                if (scrollbarX) {\r\n                    if (!scrollbarX.parent) {\r\n                        this.topAxesContainer.children.push(scrollbarX);\r\n                    }\r\n                    this._pushPropertyDisposer(\"scrollbarX\", scrollbarX.events.on(\"rangechanged\", (e) => {\r\n                        this._handleScrollbar(this.xAxes, e.start, e.end, e.grip);\r\n                    }));\r\n                    this._pushPropertyDisposer(\"scrollbarX\", scrollbarX.events.on(\"released\", () => {\r\n                        this.xAxes.each((axis) => {\r\n                            if (axis.get(\"zoomable\")) {\r\n                                this._handleAxisSelection(axis);\r\n                            }\r\n                        });\r\n                    }));\r\n                    // Used to populate `ariaLabel` with meaningful values\r\n                    scrollbarX.setPrivate(\"positionTextFunction\", (position) => {\r\n                        const axis = this.xAxes.getIndex(0);\r\n                        return axis ? axis.getTooltipText(position, false) || \"\" : \"\";\r\n                    });\r\n                }\r\n                this._prevSettings.scrollbarX = scrollbarX;\r\n            }\r\n        }\r\n        if (this.isDirty(\"scrollbarY\")) {\r\n            const previous = this._prevSettings.scrollbarY;\r\n            const scrollbarY = this.get(\"scrollbarY\");\r\n            if (scrollbarY !== previous) {\r\n                this._disposeProperty(\"scrollbarY\");\r\n                if (previous) {\r\n                    previous.dispose();\r\n                }\r\n                if (scrollbarY) {\r\n                    if (!scrollbarY.parent) {\r\n                        this.rightAxesContainer.children.push(scrollbarY);\r\n                    }\r\n                    this._pushPropertyDisposer(\"scrollbarY\", scrollbarY.events.on(\"rangechanged\", (e) => {\r\n                        this._handleScrollbar(this.yAxes, e.start, e.end, e.grip);\r\n                    }));\r\n                    this._pushPropertyDisposer(\"scrollbarY\", scrollbarY.events.on(\"released\", () => {\r\n                        this.yAxes.each((axis) => {\r\n                            if (axis.get(\"zoomable\")) {\r\n                                this._handleAxisSelection(axis);\r\n                            }\r\n                        });\r\n                    }));\r\n                    // Used to populate `ariaLabel` with meaningful values\r\n                    scrollbarY.setPrivate(\"positionTextFunction\", (position) => {\r\n                        const axis = this.yAxes.getIndex(0);\r\n                        return axis ? axis.getTooltipText(position, false) || \"\" : \"\";\r\n                    });\r\n                }\r\n                this._prevSettings.scrollbarY = scrollbarY;\r\n            }\r\n        }\r\n        this._handleZoomOut();\r\n    }\r\n    _processSeries(series) {\r\n        super._processSeries(series);\r\n        const xAxis = series.get(\"xAxis\");\r\n        const yAxis = series.get(\"yAxis\");\r\n        $array.move(xAxis.series, series);\r\n        $array.move(yAxis.series, series);\r\n        series._posXDp = series.addDisposer(xAxis.events.on(\"positionchanged\", () => {\r\n            series._fixPosition();\r\n        }));\r\n        series._posXDp = series.addDisposer(yAxis.events.on(\"positionchanged\", () => {\r\n            series._fixPosition();\r\n        }));\r\n        if (!series.get(\"baseAxis\")) {\r\n            if (yAxis.isType(\"CategoryAxis\") || yAxis.isType(\"DateAxis\")) {\r\n                series.set(\"baseAxis\", yAxis);\r\n            }\r\n            else {\r\n                series.set(\"baseAxis\", xAxis);\r\n            }\r\n        }\r\n        if (series.get(\"stacked\")) {\r\n            series._markDirtyKey(\"stacked\");\r\n            $array.each(series.dataItems, (dataItem) => {\r\n                dataItem.set(\"stackToItemY\", undefined);\r\n                dataItem.set(\"stackToItemX\", undefined);\r\n            });\r\n        }\r\n        series._markDirtyAxes();\r\n        yAxis.markDirtyExtremes();\r\n        xAxis.markDirtyExtremes();\r\n        xAxis._seriesAdded = true;\r\n        yAxis._seriesAdded = true;\r\n        this._colorize(series);\r\n    }\r\n    _colorize(series) {\r\n        const colorSet = this.get(\"colors\");\r\n        if (colorSet) {\r\n            if (series.get(\"fill\") == null) {\r\n                const color = colorSet.next();\r\n                series._setSoft(\"stroke\", color);\r\n                series._setSoft(\"fill\", color);\r\n            }\r\n        }\r\n        const patternSet = this.get(\"patterns\");\r\n        if (patternSet) {\r\n            if (series.get(\"fillPattern\") == null) {\r\n                const pattern = patternSet.next();\r\n                series._setSoft(\"fillPattern\", pattern);\r\n            }\r\n        }\r\n    }\r\n    _handleCursorSelectEnd() {\r\n        const cursor = this.get(\"cursor\");\r\n        const behavior = cursor.get(\"behavior\");\r\n        const downPositionX = cursor.getPrivate(\"downPositionX\", 0);\r\n        const downPositionY = cursor.getPrivate(\"downPositionY\", 0);\r\n        const positionX = Math.min(1, Math.max(0, cursor.getPrivate(\"positionX\", 0.5)));\r\n        const positionY = Math.min(1, Math.max(0, cursor.getPrivate(\"positionY\", 0.5)));\r\n        this.xAxes.each((axis) => {\r\n            if (behavior === \"zoomX\" || behavior === \"zoomXY\") {\r\n                let position0 = axis.toAxisPosition(downPositionX);\r\n                let position1 = axis.toAxisPosition(positionX);\r\n                axis.zoom(position0, position1);\r\n            }\r\n            axis.setPrivate(\"updateScrollbar\", true);\r\n        });\r\n        this.yAxes.each((axis) => {\r\n            if (behavior === \"zoomY\" || behavior === \"zoomXY\") {\r\n                let position0 = axis.toAxisPosition(downPositionY);\r\n                let position1 = axis.toAxisPosition(positionY);\r\n                axis.zoom(position0, position1);\r\n            }\r\n            axis.setPrivate(\"updateScrollbar\", true);\r\n        });\r\n    }\r\n    _handleScrollbar(axes, start, end, priority) {\r\n        axes.each((axis) => {\r\n            let axisStart = axis.fixPosition(start);\r\n            let axisEnd = axis.fixPosition(end);\r\n            let zoomAnimation = axis.zoom(axisStart, axisEnd, undefined, priority);\r\n            const updateScrollbar = \"updateScrollbar\";\r\n            axis.setPrivateRaw(updateScrollbar, false);\r\n            if (zoomAnimation) {\r\n                zoomAnimation.events.on(\"stopped\", () => {\r\n                    axis.setPrivateRaw(updateScrollbar, true);\r\n                });\r\n            }\r\n            else {\r\n                axis.setPrivateRaw(updateScrollbar, true);\r\n            }\r\n        });\r\n    }\r\n    _processAxis(axes, container) {\r\n        return axes.events.onAll((change) => {\r\n            if (change.type === \"clear\") {\r\n                $array.each(change.oldValues, (axis) => {\r\n                    this._removeAxis(axis);\r\n                });\r\n            }\r\n            else if (change.type === \"push\") {\r\n                container.children.push(change.newValue);\r\n                change.newValue.processChart(this);\r\n            }\r\n            else if (change.type === \"setIndex\") {\r\n                container.children.setIndex(change.index, change.newValue);\r\n                change.newValue.processChart(this);\r\n            }\r\n            else if (change.type === \"insertIndex\") {\r\n                container.children.insertIndex(change.index, change.newValue);\r\n                change.newValue.processChart(this);\r\n            }\r\n            else if (change.type === \"removeIndex\") {\r\n                this._removeAxis(change.oldValue);\r\n            }\r\n            else if (change.type === \"moveIndex\") {\r\n                container.children.moveValue(change.value, change.newIndex);\r\n                change.value.processChart(this);\r\n            }\r\n            else {\r\n                throw new Error(\"Unknown IListEvent type\");\r\n            }\r\n        });\r\n    }\r\n    _removeAxis(axis) {\r\n        if (!axis.isDisposed()) {\r\n            const axisParent = axis.parent;\r\n            if (axisParent) {\r\n                axisParent.children.removeValue(axis);\r\n            }\r\n            const gridContainer = axis.gridContainer;\r\n            const gridParent = gridContainer.parent;\r\n            if (gridParent) {\r\n                gridParent.children.removeValue(gridContainer);\r\n            }\r\n            const topGridContainer = axis.topGridContainer;\r\n            const topGridParent = topGridContainer.parent;\r\n            if (topGridParent) {\r\n                topGridParent.children.removeValue(topGridContainer);\r\n            }\r\n        }\r\n    }\r\n    _updateChartLayout() {\r\n        const left = this.leftAxesContainer.width();\r\n        const right = this.rightAxesContainer.width();\r\n        const bottomAxesContainer = this.bottomAxesContainer;\r\n        bottomAxesContainer.set(\"paddingLeft\", left);\r\n        bottomAxesContainer.set(\"paddingRight\", right);\r\n        const topAxesContainer = this.topAxesContainer;\r\n        topAxesContainer.set(\"paddingLeft\", left);\r\n        topAxesContainer.set(\"paddingRight\", right);\r\n    }\r\n    /**\r\n     * @ignore\r\n     */\r\n    processAxis(axis) {\r\n        var cursor = this.get(\"cursor\");\r\n        if (cursor) {\r\n            this.addDisposer(axis.on(\"start\", () => {\r\n                this._updateCursor();\r\n            }));\r\n            this.addDisposer(axis.on(\"end\", () => {\r\n                this._updateCursor();\r\n            }));\r\n        }\r\n    }\r\n    _handleAxisSelection(axis, force) {\r\n        let start = axis.fixPosition(axis.get(\"start\", 0));\r\n        let end = axis.fixPosition(axis.get(\"end\", 1));\r\n        if (start > end) {\r\n            [start, end] = [end, start];\r\n        }\r\n        if (this.xAxes.indexOf(axis) != -1) {\r\n            if (force || axis.getPrivate(\"updateScrollbar\")) {\r\n                let scrollbarX = this.get(\"scrollbarX\");\r\n                if (scrollbarX && (!scrollbarX.getPrivate(\"isBusy\") || force)) {\r\n                    scrollbarX.setRaw(\"start\", start);\r\n                    scrollbarX.setRaw(\"end\", end);\r\n                    scrollbarX.updateGrips();\r\n                }\r\n            }\r\n        }\r\n        else if (this.yAxes.indexOf(axis) != -1) {\r\n            if (force || axis.getPrivate(\"updateScrollbar\")) {\r\n                let scrollbarY = this.get(\"scrollbarY\");\r\n                if (scrollbarY && (!scrollbarY.getPrivate(\"isBusy\") || force)) {\r\n                    scrollbarY.setRaw(\"start\", start);\r\n                    scrollbarY.setRaw(\"end\", end);\r\n                    scrollbarY.updateGrips();\r\n                }\r\n            }\r\n        }\r\n        this._handleZoomOut();\r\n    }\r\n    _handleZoomOut() {\r\n        let zoomOutButton = this.zoomOutButton;\r\n        if (zoomOutButton && zoomOutButton.parent) {\r\n            let visible = false;\r\n            this.xAxes.each((axis) => {\r\n                if ($math.round(axis.get(\"start\", 0), 6) != 0 || $math.round(axis.get(\"end\", 1), 6) != 1) {\r\n                    visible = true;\r\n                }\r\n            });\r\n            this.yAxes.each((axis) => {\r\n                if ($math.round(axis.get(\"start\", 0), 6) != 0 || $math.round(axis.get(\"end\", 1), 6) != 1) {\r\n                    visible = true;\r\n                }\r\n            });\r\n            if (visible) {\r\n                if (zoomOutButton.isHidden()) {\r\n                    zoomOutButton.show();\r\n                }\r\n            }\r\n            else {\r\n                zoomOutButton.hide();\r\n            }\r\n        }\r\n    }\r\n    /**\r\n     * Checks if point is within plot area.\r\n     *\r\n     * @param   point  Reference point\r\n     * @return         Is within plot area?\r\n     */\r\n    inPlot(point) {\r\n        const plotContainer = this.plotContainer;\r\n        const otherCharts = this.getPrivate(\"otherCharts\", this._otherCharts);\r\n        const global = plotContainer.toGlobal(point);\r\n        if (point.x >= -0.5 && point.y >= -0.5 && point.x <= plotContainer.width() + 0.5 && point.y <= plotContainer.height() + 0.5) {\r\n            return true;\r\n        }\r\n        if (otherCharts) {\r\n            for (let i = otherCharts.length - 1; i >= 0; i--) {\r\n                const chart = otherCharts[i];\r\n                if (chart != this) {\r\n                    const chartPlotContainer = chart.plotContainer;\r\n                    const documentPoint = this._root.rootPointToDocument(global);\r\n                    const chartRoot = chart._root.documentPointToRoot(documentPoint);\r\n                    const local = chartPlotContainer.toLocal(chartRoot);\r\n                    if (local.x >= -0.1 && local.y >= -0.1 && local.x <= chartPlotContainer.width() + 0.1 && local.y <= chartPlotContainer.height() + 0.1) {\r\n                        return true;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        return false;\r\n    }\r\n    /**\r\n     * @ignore\r\n     */\r\n    arrangeTooltips() {\r\n        const plotContainer = this.plotContainer;\r\n        const w = plotContainer.width();\r\n        const h = plotContainer.height();\r\n        const hh = this.height();\r\n        let plotT = plotContainer._display.toGlobal({ x: 0, y: 0 });\r\n        let plotB = plotContainer._display.toGlobal({ x: w, y: h });\r\n        const tooltips = [];\r\n        let sum = 0;\r\n        let minDistance = Infinity;\r\n        let movePoint = this._movePoint;\r\n        let maxTooltipDistance = this.get(\"maxTooltipDistance\");\r\n        let maxTooltipDistanceBy = this.get(\"maxTooltipDistanceBy\", \"xy\");\r\n        let closest;\r\n        let closestPoint;\r\n        if ($type.isNumber(maxTooltipDistance)) {\r\n            this.series.each((series) => {\r\n                if (!series.isHidden()) {\r\n                    const tooltip = series.get(\"tooltip\");\r\n                    if (tooltip) {\r\n                        let point = tooltip.get(\"pointTo\");\r\n                        if (point) {\r\n                            let distance = Math.hypot(movePoint.x - point.x, movePoint.y - point.y);\r\n                            if (maxTooltipDistanceBy == \"x\") {\r\n                                distance = Math.abs(movePoint.x - point.x);\r\n                            }\r\n                            else if (maxTooltipDistanceBy == \"y\") {\r\n                                distance = Math.abs(movePoint.y - point.y);\r\n                            }\r\n                            if (distance < minDistance) {\r\n                                minDistance = distance;\r\n                                closest = series;\r\n                                closestPoint = point;\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n            });\r\n        }\r\n        const tooltipSeries = [];\r\n        this.series.each((series) => {\r\n            const tooltip = series.get(\"tooltip\");\r\n            if (tooltip && !tooltip.get(\"forceHidden\")) {\r\n                let hidden = false;\r\n                let point = tooltip.get(\"pointTo\");\r\n                if (point) {\r\n                    if (maxTooltipDistance >= 0) {\r\n                        let point = tooltip.get(\"pointTo\");\r\n                        if (point && closestPoint) {\r\n                            if (series != closest) {\r\n                                let distance = Math.hypot(closestPoint.x - point.x, closestPoint.y - point.y);\r\n                                if (maxTooltipDistanceBy == \"x\") {\r\n                                    distance = Math.abs(closestPoint.x - point.x);\r\n                                }\r\n                                else if (maxTooltipDistanceBy == \"y\") {\r\n                                    distance = Math.abs(closestPoint.y - point.y);\r\n                                }\r\n                                if (distance > maxTooltipDistance) {\r\n                                    hidden = true;\r\n                                }\r\n                            }\r\n                        }\r\n                    }\r\n                    else if (maxTooltipDistance == -1) {\r\n                        if (series != closest) {\r\n                            hidden = true;\r\n                        }\r\n                    }\r\n                    if (!this.inPlot(this._tooltipToLocal(point)) || !tooltip.dataItem) {\r\n                        hidden = true;\r\n                    }\r\n                    else {\r\n                        if (!hidden) {\r\n                            sum += point.y;\r\n                        }\r\n                    }\r\n                    if (hidden || series.isHidden() || series.isHiding()) {\r\n                        tooltip.hide(0);\r\n                    }\r\n                    else {\r\n                        tooltip.show();\r\n                        tooltips.push(tooltip);\r\n                        tooltipSeries.push(series);\r\n                    }\r\n                }\r\n            }\r\n        });\r\n        this.setPrivate(\"tooltipSeries\", tooltipSeries);\r\n        if (this.get(\"arrangeTooltips\")) {\r\n            const tooltipContainer = this._root.tooltipContainer;\r\n            const count = tooltips.length;\r\n            const average = sum / count;\r\n            if (average > h / 2 + plotT.y) {\r\n                tooltips.sort((a, b) => $order.compareNumber(b.get(\"pointTo\").y, a.get(\"pointTo\").y));\r\n                let prevY = plotB.y;\r\n                $array.each(tooltips, (tooltip) => {\r\n                    let height = tooltip.height();\r\n                    let centerY = tooltip.get(\"centerY\");\r\n                    if (centerY instanceof Percent) {\r\n                        height *= centerY.value;\r\n                    }\r\n                    height += tooltip.get(\"marginBottom\", 0);\r\n                    tooltip.set(\"bounds\", { left: plotT.x, top: plotT.y, right: plotB.x, bottom: prevY });\r\n                    tooltip.setPrivate(\"customData\", { left: plotT.x, top: plotT.y, right: plotB.x, bottom: prevY });\r\n                    prevY = Math.min(prevY - height, tooltip._fy - height);\r\n                    if (tooltip.parent == tooltipContainer) {\r\n                        tooltipContainer.children.moveValue(tooltip, 0);\r\n                    }\r\n                });\r\n                if (prevY < 0) {\r\n                    tooltips.reverse();\r\n                    let prevBottom = prevY;\r\n                    $array.each(tooltips, (tooltip) => {\r\n                        let bounds = tooltip.get(\"bounds\");\r\n                        if (bounds) {\r\n                            let top = bounds.top - prevY;\r\n                            let bottom = bounds.bottom - prevY;\r\n                            if (top < prevBottom) {\r\n                                top = prevBottom;\r\n                                bottom = top + tooltip.height();\r\n                            }\r\n                            tooltip.set(\"bounds\", { left: bounds.left, top: top, right: bounds.right, bottom: bottom });\r\n                            prevBottom = bounds.bottom - prevY + tooltip.get(\"marginBottom\", 0);\r\n                        }\r\n                    });\r\n                }\r\n            }\r\n            else {\r\n                tooltips.reverse();\r\n                tooltips.sort((a, b) => $order.compareNumber(a.get(\"pointTo\").y, b.get(\"pointTo\").y));\r\n                let prevY = 0;\r\n                $array.each(tooltips, (tooltip) => {\r\n                    let height = tooltip.height();\r\n                    let centerY = tooltip.get(\"centerY\");\r\n                    if (centerY instanceof Percent) {\r\n                        height *= centerY.value;\r\n                    }\r\n                    height += tooltip.get(\"marginBottom\", 0);\r\n                    tooltip.set(\"bounds\", { left: plotT.x, top: prevY, right: plotB.x, bottom: Math.max(plotT.y + hh, prevY + height) });\r\n                    if (tooltip.parent == tooltipContainer) {\r\n                        tooltipContainer.children.moveValue(tooltip, 0);\r\n                    }\r\n                    prevY = Math.max(prevY + height, tooltip._fy + height);\r\n                });\r\n                if (prevY > hh) {\r\n                    tooltips.reverse();\r\n                    let prevBottom = hh;\r\n                    $array.each(tooltips, (tooltip) => {\r\n                        let bounds = tooltip.get(\"bounds\");\r\n                        if (bounds) {\r\n                            let top = bounds.top - (hh - prevY);\r\n                            let bottom = bounds.bottom - (hh - prevY);\r\n                            if (bottom > prevBottom) {\r\n                                bottom = prevBottom;\r\n                                top = bottom - tooltip.height();\r\n                            }\r\n                            tooltip.set(\"bounds\", { left: bounds.left, top: top, right: bounds.right, bottom: bottom });\r\n                            prevBottom = bottom - tooltip.height() - tooltip.get(\"marginBottom\", 0);\r\n                        }\r\n                    });\r\n                }\r\n            }\r\n        }\r\n    }\r\n    _tooltipToLocal(point) {\r\n        return this.plotContainer.toLocal(point);\r\n    }\r\n    /**\r\n     * Fully zooms out the chart.\r\n     */\r\n    zoomOut() {\r\n        this.xAxes.each((axis) => {\r\n            axis.setPrivate(\"updateScrollbar\", true);\r\n            axis.zoom(0, 1);\r\n        });\r\n        this.yAxes.each((axis) => {\r\n            axis.setPrivate(\"updateScrollbar\", true);\r\n            axis.zoom(0, 1);\r\n        });\r\n    }\r\n    _dispose() {\r\n        super._dispose();\r\n        // Explicitly disposing cursor to avoid memory leak of cursor adding\r\n        // keyboard events after parent chart has been disposed\r\n        const cursor = this.get(\"cursor\");\r\n        if (cursor) {\r\n            cursor.dispose();\r\n        }\r\n    }\r\n}\r\nObject.defineProperty(XYChart, \"className\", {\r\n    enumerable: true,\r\n    configurable: true,\r\n    writable: true,\r\n    value: \"XYChart\"\r\n});\r\nObject.defineProperty(XYChart, \"classNames\", {\r\n    enumerable: true,\r\n    configurable: true,\r\n    writable: true,\r\n    value: SerialChart.classNames.concat([XYChart.className])\r\n});\r\n//# sourceMappingURL=XYChart.js.map","import { Graphics } from \"../../../core/render/Graphics\";\r\n/**\r\n * Creates an axis grid line.\r\n *\r\n * @see {@link https://www.amcharts.com/docs/v5/charts/xy-chart/axes/#Grid} for more info\r\n * @important\r\n */\r\nexport class Grid extends Graphics {\r\n    _beforeChanged() {\r\n        super._beforeChanged();\r\n        if (this.isPrivateDirty(\"width\") || this.isPrivateDirty(\"height\")) {\r\n            this._clear = true;\r\n        }\r\n    }\r\n}\r\nObject.defineProperty(Grid, \"className\", {\r\n    enumerable: true,\r\n    configurable: true,\r\n    writable: true,\r\n    value: \"Grid\"\r\n});\r\nObject.defineProperty(Grid, \"classNames\", {\r\n    enumerable: true,\r\n    configurable: true,\r\n    writable: true,\r\n    value: Graphics.classNames.concat([Grid.className])\r\n});\r\n//# sourceMappingURL=Grid.js.map","import { DataItem } from \"../../../core/render/Component\";\r\nimport { Component } from \"../../../core/render/Component\";\r\nimport { Container } from \"../../../core/render/Container\";\r\nimport { p100 } from \"../../../core/util/Percent\";\r\nimport { List } from \"../../../core/util/List\";\r\nimport { Rectangle } from \"../../../core/render/Rectangle\";\r\nimport * as $array from \"../../../core/util/Array\";\r\nimport * as $type from \"../../../core/util/Type\";\r\nimport * as $utils from \"../../../core/util/Utils\";\r\n/**\r\n * A base class for all axes.\r\n *\r\n * @see {@link https://www.amcharts.com/docs/v5/charts/xy-chart/#Adding_axes} for more info\r\n */\r\nexport class Axis extends Component {\r\n    constructor() {\r\n        super(...arguments);\r\n        Object.defineProperty(this, \"_series\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: []\r\n        });\r\n        Object.defineProperty(this, \"_isPanning\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: false\r\n        });\r\n        /**\r\n         * Array of minor data items.\r\n         */\r\n        Object.defineProperty(this, \"minorDataItems\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: []\r\n        });\r\n        /**\r\n         * A [[Container]] that holds all the axis label elements.\r\n         *\r\n         * @default Container.new()\r\n         */\r\n        Object.defineProperty(this, \"labelsContainer\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: this.children.push(Container.new(this._root, {}))\r\n        });\r\n        /**\r\n         * A [[Container]] that holds all the axis grid and fill elements.\r\n         *\r\n         * @default Container.new()\r\n         */\r\n        Object.defineProperty(this, \"gridContainer\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: Container.new(this._root, { width: p100, height: p100 })\r\n        });\r\n        /**\r\n         * A [[Container]] that holds axis grid elements which goes above the series.\r\n         *\r\n         * @default Container.new()\r\n         */\r\n        Object.defineProperty(this, \"topGridContainer\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: Container.new(this._root, { width: p100, height: p100 })\r\n        });\r\n        /**\r\n         * A [[Container]] that holds all the axis bullet elements.\r\n         *\r\n         * @default new Container\r\n         */\r\n        Object.defineProperty(this, \"bulletsContainer\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: this.children.push(Container.new(this._root, { isMeasured: false, width: p100, height: p100, position: \"absolute\" }))\r\n        });\r\n        /**\r\n         * A referenece to the the chart the axis belongs to.\r\n         */\r\n        Object.defineProperty(this, \"chart\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"_rangesDirty\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: false\r\n        });\r\n        Object.defineProperty(this, \"_panStart\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: 0\r\n        });\r\n        Object.defineProperty(this, \"_panEnd\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: 1\r\n        });\r\n        Object.defineProperty(this, \"_sAnimation\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"_eAnimation\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"_skipSync\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: false\r\n        });\r\n        /**\r\n         * A list of axis ranges.\r\n         *\r\n         * @see {@link https://www.amcharts.com/docs/v5/charts/xy-chart/axes/axis-ranges/} for more info\r\n         * @default new List()\r\n         */\r\n        Object.defineProperty(this, \"axisRanges\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: new List()\r\n        });\r\n        Object.defineProperty(this, \"_seriesAxisRanges\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: []\r\n        });\r\n        /**\r\n         * A control label that is invisible but is used to keep width the width of\r\n         * the axis constant.\r\n         *\r\n         * @see {@link https://www.amcharts.com/docs/v5/charts/xy-chart/axes/value-axis/#Ghost_label} for more info\r\n         */\r\n        Object.defineProperty(this, \"ghostLabel\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"_cursorPosition\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: -1\r\n        });\r\n        Object.defineProperty(this, \"_snapToSeries\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"_seriesValuesDirty\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: false\r\n        });\r\n        Object.defineProperty(this, \"_seriesAdded\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: false\r\n        });\r\n        /**\r\n         * A container above the axis that can be used to add additional stuff into\r\n         * it. For example a legend, label, or an icon.\r\n         *\r\n         * @see {@link https://www.amcharts.com/docs/v5/charts/xy-chart/axes/axis-headers/} for more info\r\n         * @default new Container\r\n         */\r\n        Object.defineProperty(this, \"axisHeader\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: this.children.push(Container.new(this._root, {\r\n                themeTags: [\"axis\", \"header\"],\r\n                position: \"absolute\",\r\n                background: Rectangle.new(this._root, {\r\n                    themeTags: [\"header\", \"background\"],\r\n                    fill: this._root.interfaceColors.get(\"background\")\r\n                })\r\n            }))\r\n        });\r\n        Object.defineProperty(this, \"_bullets\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: {}\r\n        });\r\n    }\r\n    _dispose() {\r\n        // these could be in other parents, so disposing just in case\r\n        this.gridContainer.dispose();\r\n        this.topGridContainer.dispose();\r\n        this.bulletsContainer.dispose();\r\n        this.labelsContainer.dispose();\r\n        this.axisHeader.dispose();\r\n        super._dispose();\r\n    }\r\n    _afterNew() {\r\n        super._afterNew();\r\n        this.setPrivate(\"updateScrollbar\", true);\r\n        this._disposers.push(this.axisRanges.events.onAll((change) => {\r\n            if (change.type === \"clear\") {\r\n                $array.each(change.oldValues, (dataItem) => {\r\n                    this.disposeDataItem(dataItem);\r\n                });\r\n            }\r\n            else if (change.type === \"push\") {\r\n                this._processAxisRange(change.newValue, [\"range\"]);\r\n            }\r\n            else if (change.type === \"setIndex\") {\r\n                this._processAxisRange(change.newValue, [\"range\"]);\r\n            }\r\n            else if (change.type === \"insertIndex\") {\r\n                this._processAxisRange(change.newValue, [\"range\"]);\r\n            }\r\n            else if (change.type === \"removeIndex\") {\r\n                this.disposeDataItem(change.oldValue);\r\n            }\r\n            else if (change.type === \"moveIndex\") {\r\n                this._processAxisRange(change.value, [\"range\"]);\r\n            }\r\n            else {\r\n                throw new Error(\"Unknown IStreamEvent type\");\r\n            }\r\n        }));\r\n        const renderer = this.get(\"renderer\");\r\n        if (renderer) {\r\n            renderer.axis = this;\r\n            renderer.processAxis();\r\n        }\r\n        this.children.push(renderer);\r\n        this.ghostLabel = renderer.makeLabel(new DataItem(this, undefined, {}), []);\r\n        this.ghostLabel.adapters.disable(\"text\");\r\n        this.ghostLabel.setAll({ opacity: 0, tooltipText: undefined, tooltipHTML: undefined, interactive: false });\r\n        this.ghostLabel.events.disable();\r\n    }\r\n    _updateFinals(_start, _end) {\r\n    }\r\n    /**\r\n     * Zooms the axis to relative locations.\r\n     *\r\n     * Both `start` and `end` are relative: 0 means start of the axis, 1 - end.\r\n     *\r\n     * @param   start     Relative start\r\n     * @param   end       Relative end\r\n     * @param   duration  Duration of the zoom animation in milliseconds\r\n     * @return            Zoom animation\r\n     */\r\n    zoom(start, end, duration, priority) {\r\n        if (this.get(\"zoomable\", true)) {\r\n            this._updateFinals(start, end);\r\n            if (this.get(\"start\") !== start || this.get(\"end\") != end) {\r\n                let sAnimation = this._sAnimation;\r\n                let eAnimation = this._eAnimation;\r\n                let maxDeviation = this.get(\"maxDeviation\", 0.5) * Math.min(1, (end - start));\r\n                if (start < -maxDeviation) {\r\n                    start = -maxDeviation;\r\n                }\r\n                if (end > 1 + maxDeviation) {\r\n                    end = 1 + maxDeviation;\r\n                }\r\n                if (start > end) {\r\n                    [start, end] = [end, start];\r\n                }\r\n                if (!$type.isNumber(duration)) {\r\n                    duration = this.get(\"interpolationDuration\", 0);\r\n                }\r\n                if (!priority) {\r\n                    priority = \"end\";\r\n                }\r\n                let maxZoomFactor = this.getPrivate(\"maxZoomFactor\", this.get(\"maxZoomFactor\", 100));\r\n                let maxZoomFactorReal = maxZoomFactor;\r\n                if (end === 1 && start !== 0) {\r\n                    if (start < this.get(\"start\", 0)) {\r\n                        priority = \"start\";\r\n                    }\r\n                    else {\r\n                        priority = \"end\";\r\n                    }\r\n                }\r\n                if (start === 0 && end !== 1) {\r\n                    if (end > this.get(\"end\", 1)) {\r\n                        priority = \"end\";\r\n                    }\r\n                    else {\r\n                        priority = \"start\";\r\n                    }\r\n                }\r\n                let minZoomCount = this.get(\"minZoomCount\", 0);\r\n                let maxZoomCount = this.get(\"maxZoomCount\", Infinity);\r\n                if ($type.isNumber(minZoomCount)) {\r\n                    maxZoomFactor = maxZoomFactorReal / minZoomCount;\r\n                }\r\n                let minZoomFactor = 1;\r\n                if ($type.isNumber(maxZoomCount)) {\r\n                    minZoomFactor = maxZoomFactorReal / maxZoomCount;\r\n                }\r\n                // most likely we are dragging left scrollbar grip here, so we tend to modify end\r\n                if (priority === \"start\") {\r\n                    if (maxZoomCount > 0) {\r\n                        // add to the end\r\n                        if (1 / (end - start) < minZoomFactor) {\r\n                            end = start + 1 / minZoomFactor;\r\n                        }\r\n                    }\r\n                    // add to the end\r\n                    if (1 / (end - start) > maxZoomFactor) {\r\n                        end = start + 1 / maxZoomFactor;\r\n                    }\r\n                    //unless end is > 0\r\n                    if (end > 1 && end - start < 1 / maxZoomFactor) {\r\n                        //end = 1;\r\n                        start = end - 1 / maxZoomFactor;\r\n                    }\r\n                }\r\n                // most likely we are dragging right, so we modify left\r\n                else {\r\n                    if (maxZoomCount > 0) {\r\n                        // add to the end\r\n                        if (1 / (end - start) < minZoomFactor) {\r\n                            start = end - 1 / minZoomFactor;\r\n                        }\r\n                    }\r\n                    // remove from start\r\n                    if (1 / (end - start) > maxZoomFactor) {\r\n                        start = end - 1 / maxZoomFactor;\r\n                    }\r\n                    if (start < 0 && end - start < 1 / maxZoomFactor) {\r\n                        //start = 0;\r\n                        end = start + 1 / maxZoomFactor;\r\n                    }\r\n                }\r\n                if (1 / (end - start) > maxZoomFactor) {\r\n                    end = start + 1 / maxZoomFactor;\r\n                }\r\n                if (1 / (end - start) > maxZoomFactor) {\r\n                    start = end - 1 / maxZoomFactor;\r\n                }\r\n                if (maxZoomCount != null && minZoomCount != null && (start == this.get(\"start\") && end == this.get(\"end\"))) {\r\n                    const chart = this.chart;\r\n                    if (chart) {\r\n                        chart._handleAxisSelection(this, true);\r\n                    }\r\n                }\r\n                if (((sAnimation && sAnimation.playing && sAnimation.to == start) || this.get(\"start\") == start) && ((eAnimation && eAnimation.playing && eAnimation.to == end) || this.get(\"end\") == end)) {\r\n                    return;\r\n                }\r\n                if (duration > 0) {\r\n                    let easing = this.get(\"interpolationEasing\");\r\n                    let sAnimation, eAnimation;\r\n                    if (this.get(\"start\") != start) {\r\n                        sAnimation = this.animate({ key: \"start\", to: start, duration: duration, easing: easing });\r\n                    }\r\n                    if (this.get(\"end\") != end) {\r\n                        eAnimation = this.animate({ key: \"end\", to: end, duration: duration, easing: easing });\r\n                    }\r\n                    this._sAnimation = sAnimation;\r\n                    this._eAnimation = eAnimation;\r\n                    if (sAnimation) {\r\n                        return sAnimation;\r\n                    }\r\n                    else if (eAnimation) {\r\n                        return eAnimation;\r\n                    }\r\n                }\r\n                else {\r\n                    this.set(\"start\", start);\r\n                    this.set(\"end\", end);\r\n                }\r\n            }\r\n            else {\r\n                if (this._sAnimation) {\r\n                    this._sAnimation.stop();\r\n                }\r\n                if (this._eAnimation) {\r\n                    this._eAnimation.stop();\r\n                }\r\n            }\r\n        }\r\n    }\r\n    /**\r\n     * A list of series using this axis.\r\n     *\r\n     * @return Series\r\n     */\r\n    get series() {\r\n        return this._series;\r\n    }\r\n    _processAxisRange(dataItem, themeTags) {\r\n        dataItem.setRaw(\"isRange\", true);\r\n        this._createAssets(dataItem, themeTags);\r\n        this._rangesDirty = true;\r\n        this._prepareDataItem(dataItem);\r\n        const above = dataItem.get(\"above\");\r\n        const container = this.topGridContainer;\r\n        const grid = dataItem.get(\"grid\");\r\n        if (above && grid) {\r\n            container.children.moveValue(grid);\r\n        }\r\n        const fill = dataItem.get(\"axisFill\");\r\n        if (above && fill) {\r\n            container.children.moveValue(fill);\r\n        }\r\n    }\r\n    _prepareDataItem(_dataItem, _index) { }\r\n    /**\r\n     * @ignore\r\n     */\r\n    markDirtyExtremes() {\r\n    }\r\n    /**\r\n     * @ignore\r\n     */\r\n    markDirtySelectionExtremes() {\r\n    }\r\n    _calculateTotals() {\r\n    }\r\n    _updateAxisRanges() {\r\n        this._bullets = {};\r\n        this.axisRanges.each((axisRange) => {\r\n            this._prepareDataItem(axisRange);\r\n        });\r\n        $array.each(this._seriesAxisRanges, (axisRange) => {\r\n            this._prepareDataItem(axisRange);\r\n        });\r\n    }\r\n    _prepareChildren() {\r\n        super._prepareChildren();\r\n        if (this.get(\"fixAxisSize\")) {\r\n            this.ghostLabel.set(\"visible\", true);\r\n        }\r\n        else {\r\n            this.ghostLabel.set(\"visible\", false);\r\n        }\r\n        if (this.isDirty(\"start\") || this.isDirty(\"end\")) {\r\n            const chart = this.chart;\r\n            if (chart) {\r\n                chart._updateCursor();\r\n            }\r\n            let start = this.get(\"start\", 0);\r\n            let end = this.get(\"end\", 1);\r\n            let maxDeviation = this.get(\"maxDeviation\", 0.5) * Math.min(1, (end - start));\r\n            if (start < -maxDeviation) {\r\n                let delta = start + maxDeviation;\r\n                start = -maxDeviation;\r\n                this.setRaw(\"start\", start);\r\n                if (this.isDirty(\"end\")) {\r\n                    this.setRaw(\"end\", end - delta);\r\n                }\r\n            }\r\n            if (end > 1 + maxDeviation) {\r\n                let delta = end - 1 - maxDeviation;\r\n                end = 1 + maxDeviation;\r\n                this.setRaw(\"end\", end);\r\n                if (this.isDirty(\"start\")) {\r\n                    this.setRaw(\"start\", start - delta);\r\n                }\r\n            }\r\n        }\r\n        const renderer = this.get(\"renderer\");\r\n        renderer._start = this.get(\"start\");\r\n        renderer._end = this.get(\"end\");\r\n        renderer._inversed = renderer.get(\"inversed\", false);\r\n        renderer._axisLength = renderer.axisLength() / (renderer._end - renderer._start);\r\n        renderer._updateLC();\r\n        if (this.isDirty(\"tooltip\")) {\r\n            const tooltip = this.get(\"tooltip\");\r\n            if (tooltip) {\r\n                const rendererTags = renderer.get(\"themeTags\");\r\n                tooltip.addTag(\"axis\");\r\n                tooltip.addTag(this.className.toLowerCase());\r\n                tooltip._applyThemes();\r\n                if (rendererTags) {\r\n                    tooltip.set(\"themeTags\", $utils.mergeTags(tooltip.get(\"themeTags\"), rendererTags));\r\n                    tooltip.label._applyThemes();\r\n                }\r\n            }\r\n        }\r\n    }\r\n    _updateTooltipBounds() {\r\n        const tooltip = this.get(\"tooltip\");\r\n        if (tooltip) {\r\n            this.get(\"renderer\").updateTooltipBounds(tooltip);\r\n        }\r\n    }\r\n    _updateBounds() {\r\n        super._updateBounds();\r\n        this._updateTooltipBounds();\r\n    }\r\n    /**\r\n     * @ignore\r\n     */\r\n    processChart(chart) {\r\n        this.chart = chart;\r\n        const renderer = this.get(\"renderer\");\r\n        renderer.chart = chart;\r\n        chart.gridContainer.children.push(this.gridContainer);\r\n        chart.topGridContainer.children.push(this.topGridContainer);\r\n        chart.axisHeadersContainer.children.push(this.axisHeader);\r\n        this.on(\"start\", () => {\r\n            chart._handleAxisSelection(this);\r\n        });\r\n        this.on(\"end\", () => {\r\n            chart._handleAxisSelection(this);\r\n        });\r\n        chart.plotContainer.onPrivate(\"width\", () => {\r\n            this.markDirtySize();\r\n        });\r\n        chart.plotContainer.onPrivate(\"height\", () => {\r\n            this.markDirtySize();\r\n        });\r\n        chart.processAxis(this);\r\n    }\r\n    /**\r\n     * @ignore\r\n     */\r\n    hideDataItem(dataItem) {\r\n        this._toggleFHDataItem(dataItem, true);\r\n        return super.hideDataItem(dataItem);\r\n    }\r\n    /**\r\n     * @ignore\r\n     */\r\n    showDataItem(dataItem) {\r\n        this._toggleFHDataItem(dataItem, false);\r\n        return super.showDataItem(dataItem);\r\n    }\r\n    _toggleFHDataItem(dataItem, forceHidden) {\r\n        const fh = \"forceHidden\";\r\n        const label = dataItem.get(\"label\");\r\n        if (label) {\r\n            label.set(fh, forceHidden);\r\n        }\r\n        const grid = dataItem.get(\"grid\");\r\n        if (grid) {\r\n            grid.set(fh, forceHidden);\r\n        }\r\n        const tick = dataItem.get(\"tick\");\r\n        if (tick) {\r\n            tick.set(fh, forceHidden);\r\n        }\r\n        const axisFill = dataItem.get(\"axisFill\");\r\n        if (axisFill) {\r\n            axisFill.set(fh, forceHidden);\r\n        }\r\n        const bullet = dataItem.get(\"bullet\");\r\n        if (bullet) {\r\n            const sprite = bullet.get(\"sprite\");\r\n            if (sprite) {\r\n                sprite.set(fh, forceHidden);\r\n            }\r\n        }\r\n    }\r\n    _toggleDataItem(dataItem, visible) {\r\n        const label = dataItem.get(\"label\");\r\n        const v = \"visible\";\r\n        if (label) {\r\n            label.setPrivate(v, visible);\r\n        }\r\n        const grid = dataItem.get(\"grid\");\r\n        if (grid) {\r\n            grid.setPrivate(v, visible);\r\n        }\r\n        const tick = dataItem.get(\"tick\");\r\n        if (tick) {\r\n            tick.setPrivate(v, visible);\r\n        }\r\n        const axisFill = dataItem.get(\"axisFill\");\r\n        if (axisFill) {\r\n            axisFill.setPrivate(v, visible);\r\n        }\r\n        const bullet = dataItem.get(\"bullet\");\r\n        if (bullet) {\r\n            const sprite = bullet.get(\"sprite\");\r\n            if (sprite) {\r\n                sprite.setPrivate(v, visible);\r\n            }\r\n        }\r\n    }\r\n    _createAssets(dataItem, tags, minor) {\r\n        var _a, _b, _c;\r\n        const renderer = this.get(\"renderer\");\r\n        let m = \"minor\";\r\n        const label = dataItem.get(\"label\");\r\n        if (!label) {\r\n            renderer.makeLabel(dataItem, tags);\r\n        }\r\n        else {\r\n            let themeTags = label.get(\"themeTags\");\r\n            let remove = false;\r\n            if (minor) {\r\n                if ((themeTags === null || themeTags === void 0 ? void 0 : themeTags.indexOf(m)) == -1) {\r\n                    remove = true;\r\n                }\r\n            }\r\n            else {\r\n                if ((themeTags === null || themeTags === void 0 ? void 0 : themeTags.indexOf(m)) != -1) {\r\n                    remove = true;\r\n                }\r\n            }\r\n            if (remove) {\r\n                (_a = label.parent) === null || _a === void 0 ? void 0 : _a.children.removeValue(label);\r\n                renderer.makeLabel(dataItem, tags);\r\n                label.dispose();\r\n                renderer.labels.removeValue(label);\r\n            }\r\n        }\r\n        const grid = dataItem.get(\"grid\");\r\n        if (!grid) {\r\n            renderer.makeGrid(dataItem, tags);\r\n        }\r\n        else {\r\n            let themeTags = grid.get(\"themeTags\");\r\n            let remove = false;\r\n            if (minor) {\r\n                if ((themeTags === null || themeTags === void 0 ? void 0 : themeTags.indexOf(m)) == -1) {\r\n                    remove = true;\r\n                }\r\n            }\r\n            else {\r\n                if ((themeTags === null || themeTags === void 0 ? void 0 : themeTags.indexOf(m)) != -1) {\r\n                    remove = true;\r\n                }\r\n            }\r\n            if (remove) {\r\n                (_b = grid.parent) === null || _b === void 0 ? void 0 : _b.children.removeValue(grid);\r\n                renderer.makeGrid(dataItem, tags);\r\n                grid.dispose();\r\n                renderer.grid.removeValue(grid);\r\n            }\r\n        }\r\n        const tick = dataItem.get(\"tick\");\r\n        if (!tick) {\r\n            renderer.makeTick(dataItem, tags);\r\n        }\r\n        else {\r\n            let remove = false;\r\n            let themeTags = tick.get(\"themeTags\");\r\n            if (minor) {\r\n                if ((themeTags === null || themeTags === void 0 ? void 0 : themeTags.indexOf(m)) == -1) {\r\n                    remove = true;\r\n                }\r\n            }\r\n            else {\r\n                if ((themeTags === null || themeTags === void 0 ? void 0 : themeTags.indexOf(m)) != -1) {\r\n                    remove = true;\r\n                }\r\n            }\r\n            if (remove) {\r\n                (_c = tick.parent) === null || _c === void 0 ? void 0 : _c.children.removeValue(tick);\r\n                renderer.makeTick(dataItem, tags);\r\n                tick.dispose();\r\n                renderer.ticks.removeValue(tick);\r\n            }\r\n        }\r\n        if (!minor && !dataItem.get(\"axisFill\")) {\r\n            renderer.makeAxisFill(dataItem, tags);\r\n        }\r\n        this._processBullet(dataItem);\r\n    }\r\n    _processBullet(dataItem) {\r\n        let bullet = dataItem.get(\"bullet\");\r\n        let axisBullet = this.get(\"bullet\");\r\n        if (!bullet && axisBullet && !dataItem.get(\"isRange\")) {\r\n            bullet = axisBullet(this._root, this, dataItem);\r\n        }\r\n        if (bullet) {\r\n            bullet.axis = this;\r\n            const sprite = bullet.get(\"sprite\");\r\n            if (sprite) {\r\n                sprite._setDataItem(dataItem);\r\n                dataItem.setRaw(\"bullet\", bullet);\r\n                if (!sprite.parent) {\r\n                    this.bulletsContainer.children.push(sprite);\r\n                }\r\n            }\r\n        }\r\n    }\r\n    _afterChanged() {\r\n        super._afterChanged();\r\n        const chart = this.chart;\r\n        if (chart) {\r\n            chart._updateChartLayout();\r\n            chart.axisHeadersContainer.markDirtySize();\r\n        }\r\n        this.get(\"renderer\")._updatePositions();\r\n        this._seriesAdded = false;\r\n    }\r\n    /**\r\n     * @ignore\r\n     */\r\n    disposeDataItem(dataItem) {\r\n        super.disposeDataItem(dataItem);\r\n        const renderer = this.get(\"renderer\");\r\n        const label = dataItem.get(\"label\");\r\n        if (label) {\r\n            renderer.labels.removeValue(label);\r\n            label.dispose();\r\n        }\r\n        const tick = dataItem.get(\"tick\");\r\n        if (tick) {\r\n            renderer.ticks.removeValue(tick);\r\n            tick.dispose();\r\n        }\r\n        const grid = dataItem.get(\"grid\");\r\n        if (grid) {\r\n            renderer.grid.removeValue(grid);\r\n            grid.dispose();\r\n        }\r\n        const axisFill = dataItem.get(\"axisFill\");\r\n        if (axisFill) {\r\n            renderer.axisFills.removeValue(axisFill);\r\n            axisFill.dispose();\r\n        }\r\n        const bullet = dataItem.get(\"bullet\");\r\n        if (bullet) {\r\n            bullet.dispose();\r\n        }\r\n    }\r\n    _updateGhost() {\r\n        this.setPrivate(\"cellWidth\", this.getCellWidthPosition() * this.get(\"renderer\").axisLength());\r\n        const ghostLabel = this.ghostLabel;\r\n        if (!ghostLabel.isHidden()) {\r\n            const bounds = ghostLabel.localBounds();\r\n            const gWidth = Math.ceil(bounds.right - bounds.left);\r\n            let text = ghostLabel.get(\"text\");\r\n            $array.each(this.dataItems, (dataItem) => {\r\n                const label = dataItem.get(\"label\");\r\n                if (label && !label.isHidden()) {\r\n                    const bounds = label.localBounds();\r\n                    const w = Math.ceil(bounds.right - bounds.left);\r\n                    if (w > gWidth) {\r\n                        text = label.text._getText();\r\n                    }\r\n                }\r\n            });\r\n            ghostLabel.set(\"text\", text);\r\n        }\r\n        let start = this.get(\"start\", 0);\r\n        let end = this.get(\"end\", 1);\r\n        this.get(\"renderer\").updateLabel(ghostLabel, start + (end - start) * 0.5);\r\n    }\r\n    _handleCursorPosition(position, snapToSeries) {\r\n        const renderer = this.get(\"renderer\");\r\n        position = renderer.toAxisPosition(position);\r\n        this._cursorPosition = position;\r\n        this._snapToSeries = snapToSeries;\r\n        this.updateTooltip();\r\n    }\r\n    /**\r\n     * Can be called when axis zoom changes and you need to update tooltip\r\n     * position.\r\n     */\r\n    updateTooltip() {\r\n        const snapToSeries = this._snapToSeries;\r\n        let position = this._cursorPosition;\r\n        const tooltip = this.get(\"tooltip\");\r\n        const renderer = this.get(\"renderer\");\r\n        if ($type.isNumber(position)) {\r\n            $array.each(this.series, (series) => {\r\n                if (series.get(\"baseAxis\") === this) {\r\n                    const dataItem = this.getSeriesItem(series, position, this.get(\"tooltipLocation\"));\r\n                    if (snapToSeries && snapToSeries.indexOf(series) != -1) {\r\n                        series.updateLegendMarker(dataItem);\r\n                        series.updateLegendValue(dataItem);\r\n                        series._settings.tooltipDataItem = dataItem;\r\n                    }\r\n                    else {\r\n                        series.showDataItemTooltip(dataItem);\r\n                        series.setRaw(\"tooltipDataItem\", dataItem);\r\n                    }\r\n                }\r\n            });\r\n            if (this.get(\"snapTooltip\")) {\r\n                position = this.roundAxisPosition(position, this.get(\"tooltipLocation\", 0.5));\r\n            }\r\n            this.setPrivateRaw(\"tooltipPosition\", position);\r\n            if (tooltip) {\r\n                renderer.updateTooltipBounds(tooltip);\r\n                if (!$type.isNaN(position)) {\r\n                    this._updateTooltipText(tooltip, position);\r\n                    renderer.positionTooltip(tooltip, position);\r\n                    if (position < this.get(\"start\", 0) || position > this.get(\"end\", 1)) {\r\n                        tooltip.hide(0);\r\n                    }\r\n                    else {\r\n                        tooltip.show(0);\r\n                    }\r\n                }\r\n                else {\r\n                    tooltip.hide(0);\r\n                }\r\n            }\r\n        }\r\n    }\r\n    _updateTooltipText(tooltip, position) {\r\n        tooltip.label.set(\"text\", this.getTooltipText(position));\r\n    }\r\n    /**\r\n     * @ignore\r\n     */\r\n    roundAxisPosition(position, _location) {\r\n        return position;\r\n    }\r\n    /**\r\n     * @ignore\r\n     */\r\n    handleCursorShow() {\r\n        let tooltip = this.get(\"tooltip\");\r\n        if (tooltip) {\r\n            tooltip.show();\r\n        }\r\n    }\r\n    /**\r\n     * @ignore\r\n     */\r\n    handleCursorHide() {\r\n        let tooltip = this.get(\"tooltip\");\r\n        if (tooltip) {\r\n            tooltip.hide();\r\n        }\r\n    }\r\n    /**\r\n     * @ignore\r\n     */\r\n    processSeriesDataItem(_dataItem, _fields) {\r\n    }\r\n    _clearDirty() {\r\n        super._clearDirty();\r\n        this._sizeDirty = false;\r\n        this._rangesDirty = false;\r\n    }\r\n    /**\r\n     * Converts pixel coordinate to a relative position on axis.\r\n     *\r\n     * @param   coordinate  Coordinate\r\n     * @return              Relative position\r\n     */\r\n    coordinateToPosition(coordinate) {\r\n        const renderer = this.get(\"renderer\");\r\n        return renderer.toAxisPosition(coordinate / renderer.axisLength());\r\n    }\r\n    /**\r\n     * Converts relative position of the plot area to relative position of the\r\n     * axis with zoom taken into account.\r\n     *\r\n     * @param position Position\r\n     * @return Relative position\r\n     */\r\n    toAxisPosition(position) {\r\n        return this.get(\"renderer\").toAxisPosition(position);\r\n    }\r\n    /**\r\n     * Converts relative position of the axis to a global position taking current\r\n     * zoom into account (opposite to what `toAxisPosition` does).\r\n     *\r\n     * @since 5.4.2\r\n     * @param position Position\r\n     * @return Global position\r\n     */\r\n    toGlobalPosition(position) {\r\n        return this.get(\"renderer\").toGlobalPosition(position);\r\n    }\r\n    /**\r\n     * Adjusts position with inversed taken into account.\r\n     *\r\n     * @ignore\r\n     */\r\n    fixPosition(position) {\r\n        return this.get(\"renderer\").fixPosition(position);\r\n    }\r\n    /**\r\n     * @ignore\r\n     */\r\n    shouldGap(_dataItem, _nextItem, _autoGapCount, _fieldName) {\r\n        return false;\r\n    }\r\n    /**\r\n     * Creates and returns an axis range object.\r\n     *\r\n     * @see {@link https://www.amcharts.com/docs/v5/charts/xy-chart/axes/axis-ranges/} for more info\r\n     * @param   axisDataItem  Axis data item\r\n     * @return                Axis range\r\n     */\r\n    createAxisRange(axisDataItem) {\r\n        return this.axisRanges.push(axisDataItem);\r\n    }\r\n    /**\r\n     * @ignore\r\n     */\r\n    _groupSeriesData(_series) { }\r\n    /**\r\n     * Returns relative position between two grid lines of the axis.\r\n     *\r\n     * @return Position\r\n     */\r\n    getCellWidthPosition() {\r\n        return 0.05;\r\n    }\r\n}\r\nObject.defineProperty(Axis, \"className\", {\r\n    enumerable: true,\r\n    configurable: true,\r\n    writable: true,\r\n    value: \"Axis\"\r\n});\r\nObject.defineProperty(Axis, \"classNames\", {\r\n    enumerable: true,\r\n    configurable: true,\r\n    writable: true,\r\n    value: Component.classNames.concat([Axis.className])\r\n});\r\n//# sourceMappingURL=Axis.js.map","import { DataItem } from \"../../../core/render/Component\";\r\nimport { Axis } from \"./Axis\";\r\nimport { MultiDisposer } from \"../../../core/util/Disposer\";\r\nimport * as $type from \"../../../core/util/Type\";\r\nimport * as $array from \"../../../core/util/Array\";\r\nimport * as $math from \"../../../core/util/Math\";\r\nimport * as $utils from \"../../../core/util/Utils\";\r\n/**\r\n * Creates a value axis.\r\n *\r\n * @see {@link https://www.amcharts.com/docs/v5/charts/xy-chart/axes/value-axis/} for more info\r\n * @important\r\n */\r\nexport class ValueAxis extends Axis {\r\n    constructor() {\r\n        super(...arguments);\r\n        Object.defineProperty(this, \"_dirtyExtremes\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: false\r\n        });\r\n        Object.defineProperty(this, \"_dirtySelectionExtremes\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: false\r\n        });\r\n        Object.defineProperty(this, \"_dseHandled\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: false\r\n        });\r\n        Object.defineProperty(this, \"_deltaMinMax\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: 1\r\n        });\r\n        Object.defineProperty(this, \"_minReal\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"_maxReal\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"_minRealLog\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"_baseValue\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: 0\r\n        });\r\n        Object.defineProperty(this, \"_syncDp\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"_minLogAdjusted\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: 1\r\n        });\r\n    }\r\n    /**\r\n     * @ignore\r\n     */\r\n    markDirtyExtremes() {\r\n        this._dirtyExtremes = true;\r\n        this.markDirty();\r\n    }\r\n    /**\r\n     * @ignore\r\n     */\r\n    markDirtySelectionExtremes() {\r\n        this._dirtySelectionExtremes = true;\r\n        this.markDirty();\r\n    }\r\n    _afterNew() {\r\n        this._settings.themeTags = $utils.mergeTags(this._settings.themeTags, [\"axis\"]);\r\n        this.setPrivateRaw(\"name\", \"value\");\r\n        this.addTag(\"value\");\r\n        super._afterNew();\r\n    }\r\n    _prepareChildren() {\r\n        super._prepareChildren();\r\n        if (this.isDirty(\"syncWithAxis\")) {\r\n            let previousValue = this._prevSettings.syncWithAxis;\r\n            if (previousValue) {\r\n                if (this._syncDp) {\r\n                    this._syncDp.dispose();\r\n                }\r\n            }\r\n            let syncWithAxis = this.get(\"syncWithAxis\");\r\n            if (syncWithAxis) {\r\n                this._syncDp = new MultiDisposer([\r\n                    syncWithAxis.onPrivate(\"selectionMinFinal\", () => {\r\n                        this._dirtySelectionExtremes = true;\r\n                    }),\r\n                    syncWithAxis.onPrivate(\"selectionMaxFinal\", () => {\r\n                        this._dirtySelectionExtremes = true;\r\n                    })\r\n                ]);\r\n            }\r\n        }\r\n        let someDirty = false;\r\n        if (this.isDirty(\"min\") || this.isDirty(\"max\") || this.isDirty(\"maxPrecision\") || this.isDirty(\"numberFormat\")) {\r\n            someDirty = true;\r\n            this.ghostLabel.set(\"text\", \"\");\r\n        }\r\n        //if (this._dirtyExtremes || this.isPrivateDirty(\"width\") || this.isPrivateDirty(\"height\") || this.isDirty(\"min\") || this.isDirty(\"max\") || this.isDirty(\"extraMin\") || this.isDirty(\"extraMax\") || this.isDirty(\"logarithmic\") || this.isDirty(\"treatZeroAs\") || this.isDirty(\"baseValue\") || this.isDirty(\"strictMinMax\") || this.isDirty(\"maxPrecision\")) {\r\n        if (this._sizeDirty || this._dirtyExtremes || this._valuesDirty || someDirty || this.isPrivateDirty(\"width\") || this.isPrivateDirty(\"height\") || this.isDirty(\"extraMin\") || this.isDirty(\"extraMax\") || this.isDirty(\"logarithmic\") || this.isDirty(\"treatZeroAs\") || this.isDirty(\"baseValue\") || this.isDirty(\"strictMinMax\") || this.isDirty(\"strictMinMaxSelection\")) {\r\n            this._getMinMax();\r\n            this._dirtyExtremes = false;\r\n        }\r\n        this._handleSizeDirty();\r\n        if (this._dirtySelectionExtremes && !this._isPanning && this.get(\"autoZoom\", true)) {\r\n            const chart = this.chart;\r\n            let getMM = false;\r\n            // #1563\r\n            if (chart) {\r\n                const letter = this.get(\"renderer\").getPrivate(\"letter\");\r\n                if (letter == \"Y\") {\r\n                    chart.xAxes.each((axis) => {\r\n                        if (axis.className != \"ValueAxis\") {\r\n                            getMM = true;\r\n                        }\r\n                    });\r\n                }\r\n                else if (letter == \"X\") {\r\n                    chart.yAxes.each((axis) => {\r\n                        if (axis.className != \"ValueAxis\") {\r\n                            getMM = true;\r\n                        }\r\n                    });\r\n                }\r\n            }\r\n            if (getMM) {\r\n                this._getSelectionMinMax();\r\n            }\r\n            this._dirtySelectionExtremes = false;\r\n        }\r\n        this._groupData();\r\n        if (this._sizeDirty || this._valuesDirty || this.isDirty(\"start\") || this.isDirty(\"end\") || this.isPrivateDirty(\"min\") || this.isPrivateDirty(\"selectionMax\") || this.isPrivateDirty(\"selectionMin\") || this.isPrivateDirty(\"max\") || this.isPrivateDirty(\"step\") || this.isPrivateDirty(\"width\") || this.isPrivateDirty(\"height\") || this.isDirty(\"logarithmic\")) {\r\n            this._handleRangeChange();\r\n            this._prepareAxisItems();\r\n            this._updateAxisRanges();\r\n        }\r\n        this._baseValue = this.baseValue();\r\n    }\r\n    _handleSizeDirty() {\r\n        if (this._sizeDirty && !this._dseHandled) {\r\n            this._dirtySelectionExtremes = true;\r\n            this._dseHandled = true;\r\n        }\r\n    }\r\n    _clearDirty() {\r\n        super._clearDirty();\r\n        this._dseHandled = false;\r\n    }\r\n    _groupData() {\r\n    }\r\n    _formatText(value) {\r\n        const numberFormat = this.get(\"numberFormat\");\r\n        const formatter = this.getNumberFormatter();\r\n        let text = \"\";\r\n        if (numberFormat) {\r\n            text = formatter.format(value, numberFormat);\r\n        }\r\n        else {\r\n            text = formatter.format(value, undefined, this.getPrivate(\"stepDecimalPlaces\"));\r\n        }\r\n        return text;\r\n    }\r\n    _prepareAxisItems() {\r\n        const min = this.getPrivate(\"min\");\r\n        const max = this.getPrivate(\"max\");\r\n        if ($type.isNumber(min) && $type.isNumber(max)) {\r\n            const logarithmic = this.get(\"logarithmic\");\r\n            const step = this.getPrivate(\"step\");\r\n            const selectionMin = this.getPrivate(\"selectionMin\");\r\n            const selectionMax = this.getPrivate(\"selectionMax\") + step;\r\n            let value = selectionMin - step;\r\n            let differencePower = 1;\r\n            let minLog = min;\r\n            if (logarithmic) {\r\n                value = this._minLogAdjusted;\r\n                if (value < selectionMin) {\r\n                    while (value < selectionMin) {\r\n                        value += step;\r\n                    }\r\n                }\r\n                minLog = value;\r\n                if (minLog <= 0) {\r\n                    minLog = 1;\r\n                    if (step < 1) {\r\n                        if ($type.isNumber(this._minRealLog)) {\r\n                            minLog = this._minRealLog;\r\n                        }\r\n                        else {\r\n                            minLog = Math.pow(10, -50);\r\n                        }\r\n                    }\r\n                }\r\n                differencePower = Math.log(selectionMax - step) * Math.LOG10E - Math.log(minLog) * Math.LOG10E;\r\n                if (differencePower > 2) {\r\n                    value = Math.pow(10, Math.log(minLog) * Math.LOG10E - 50);\r\n                }\r\n            }\r\n            /// minor grid\r\n            const renderer = this.get(\"renderer\");\r\n            const minorLabelsEnabled = renderer.get(\"minorLabelsEnabled\");\r\n            const minorGridEnabled = renderer.get(\"minorGridEnabled\", minorLabelsEnabled);\r\n            let stepPower = Math.pow(10, Math.floor(Math.log(Math.abs(step)) * Math.LOG10E));\r\n            const stepAdjusted = Math.round(step / stepPower);\r\n            let minorGridCount = 2;\r\n            if ($math.round(stepAdjusted / 5, 10) % 1 == 0) {\r\n                minorGridCount = 5;\r\n            }\r\n            if ($math.round(stepAdjusted / 10, 10) % 1 == 0) {\r\n                minorGridCount = 10;\r\n            }\r\n            let minorStep = step / minorGridCount;\r\n            // end of minor grid\r\n            let i = 0;\r\n            let m = 0;\r\n            let previous = -Infinity;\r\n            while (value < selectionMax) {\r\n                let dataItem;\r\n                if (this.dataItems.length < i + 1) {\r\n                    dataItem = new DataItem(this, undefined, {});\r\n                    this._dataItems.push(dataItem);\r\n                    this.processDataItem(dataItem);\r\n                }\r\n                else {\r\n                    dataItem = this.dataItems[i];\r\n                }\r\n                this._createAssets(dataItem, []);\r\n                this._toggleDataItem(dataItem, true);\r\n                dataItem.setRaw(\"value\", value);\r\n                const label = dataItem.get(\"label\");\r\n                if (label) {\r\n                    label.set(\"text\", this._formatText(value));\r\n                }\r\n                this._prepareDataItem(dataItem);\r\n                let nextValue = value;\r\n                if (!logarithmic) {\r\n                    nextValue += step;\r\n                }\r\n                else {\r\n                    if (differencePower > 2) {\r\n                        nextValue = Math.pow(10, Math.log(minLog) * Math.LOG10E + i - 50);\r\n                    }\r\n                    else {\r\n                        nextValue += step;\r\n                    }\r\n                }\r\n                // minor grid\r\n                if (minorGridEnabled) {\r\n                    let minorValue = value + minorStep;\r\n                    if (logarithmic) {\r\n                        if (differencePower > 2) {\r\n                            let minorMinMaxStep = this._adjustMinMax(value, nextValue, 10);\r\n                            minorStep = minorMinMaxStep.step;\r\n                        }\r\n                        minorValue = value + minorStep;\r\n                    }\r\n                    while (minorValue < nextValue - step * 0.00000000001) {\r\n                        let minorDataItem;\r\n                        if (this.minorDataItems.length < m + 1) {\r\n                            minorDataItem = new DataItem(this, undefined, {});\r\n                            this.minorDataItems.push(minorDataItem);\r\n                            this.processDataItem(minorDataItem);\r\n                        }\r\n                        else {\r\n                            minorDataItem = this.minorDataItems[m];\r\n                        }\r\n                        this._createAssets(minorDataItem, [\"minor\"], true);\r\n                        this._toggleDataItem(minorDataItem, true);\r\n                        minorDataItem.setRaw(\"value\", minorValue);\r\n                        const minorLabel = minorDataItem.get(\"label\");\r\n                        if (minorLabel) {\r\n                            if (minorLabelsEnabled) {\r\n                                minorLabel.set(\"text\", this._formatText(minorValue));\r\n                            }\r\n                            else {\r\n                                minorLabel.setPrivate(\"visible\", false);\r\n                            }\r\n                        }\r\n                        this._prepareDataItem(minorDataItem);\r\n                        minorValue += minorStep;\r\n                        m++;\r\n                    }\r\n                }\r\n                value = nextValue;\r\n                if (previous == value) {\r\n                    break;\r\n                }\r\n                let stepPower = Math.pow(10, Math.floor(Math.log(Math.abs(step)) * Math.LOG10E));\r\n                if (stepPower < 1 && !logarithmic) {\r\n                    // exponent is less then 1 too. Count decimals of exponent\r\n                    let decCount = Math.round(Math.abs(Math.log(Math.abs(stepPower)) * Math.LOG10E)) + 2;\r\n                    // round value to avoid floating point issues\r\n                    value = $math.round(value, decCount);\r\n                }\r\n                i++;\r\n                previous = value;\r\n            }\r\n            for (let j = i; j < this.dataItems.length; j++) {\r\n                this._toggleDataItem(this.dataItems[j], false);\r\n            }\r\n            for (let j = m; j < this.minorDataItems.length; j++) {\r\n                this._toggleDataItem(this.minorDataItems[j], false);\r\n            }\r\n            $array.each(this.series, (series) => {\r\n                if (series.inited) {\r\n                    series._markDirtyAxes();\r\n                }\r\n            });\r\n            this._updateGhost();\r\n        }\r\n    }\r\n    _prepareDataItem(dataItem, count) {\r\n        let renderer = this.get(\"renderer\");\r\n        let value = dataItem.get(\"value\");\r\n        let endValue = dataItem.get(\"endValue\");\r\n        let position = this.valueToPosition(value);\r\n        let endPosition = position;\r\n        let fillEndPosition = this.valueToPosition(value + this.getPrivate(\"step\"));\r\n        if ($type.isNumber(endValue)) {\r\n            endPosition = this.valueToPosition(endValue);\r\n            fillEndPosition = endPosition;\r\n        }\r\n        if (dataItem.get(\"isRange\")) {\r\n            if (endValue == null) {\r\n                fillEndPosition = position;\r\n            }\r\n        }\r\n        let labelEndPosition = endPosition;\r\n        let labelEndValue = dataItem.get(\"labelEndValue\");\r\n        if (labelEndValue != null) {\r\n            labelEndPosition = this.valueToPosition(labelEndValue);\r\n        }\r\n        renderer.updateLabel(dataItem.get(\"label\"), position, labelEndPosition, count);\r\n        const grid = dataItem.get(\"grid\");\r\n        renderer.updateGrid(grid, position, endPosition);\r\n        if (grid) {\r\n            if (value == this.get(\"baseValue\", 0)) {\r\n                grid.addTag(\"base\");\r\n                grid._applyThemes();\r\n            }\r\n            else if (grid.hasTag(\"base\")) {\r\n                grid.removeTag(\"base\");\r\n                grid._applyThemes();\r\n            }\r\n        }\r\n        renderer.updateTick(dataItem.get(\"tick\"), position, labelEndPosition, count);\r\n        renderer.updateFill(dataItem.get(\"axisFill\"), position, fillEndPosition);\r\n        this._processBullet(dataItem);\r\n        renderer.updateBullet(dataItem.get(\"bullet\"), position, endPosition);\r\n        if (!dataItem.get(\"isRange\")) {\r\n            const fillRule = this.get(\"fillRule\");\r\n            if (fillRule) {\r\n                fillRule(dataItem);\r\n            }\r\n        }\r\n    }\r\n    _handleRangeChange() {\r\n        let selectionMin = this.positionToValue(this.get(\"start\", 0));\r\n        let selectionMax = this.positionToValue(this.get(\"end\", 1));\r\n        const gridCount = this.get(\"renderer\").gridCount();\r\n        let minMaxStep = this._adjustMinMax(selectionMin, selectionMax, gridCount, true);\r\n        let stepDecimalPlaces = $utils.decimalPlaces(minMaxStep.step);\r\n        this.setPrivateRaw(\"stepDecimalPlaces\", stepDecimalPlaces);\r\n        selectionMin = $math.round(selectionMin, stepDecimalPlaces);\r\n        selectionMax = $math.round(selectionMax, stepDecimalPlaces);\r\n        minMaxStep = this._adjustMinMax(selectionMin, selectionMax, gridCount, true);\r\n        let step = minMaxStep.step;\r\n        selectionMin = minMaxStep.min;\r\n        selectionMax = minMaxStep.max;\r\n        if (this.getPrivate(\"selectionMin\") !== selectionMin || this.getPrivate(\"selectionMax\") !== selectionMax || this.getPrivate(\"step\") !== step) {\r\n            // do not change to setPrivate, will cause SO\r\n            this.setPrivateRaw(\"selectionMin\", selectionMin);\r\n            this.setPrivateRaw(\"selectionMax\", selectionMax);\r\n            this.setPrivateRaw(\"step\", step);\r\n        }\r\n    }\r\n    /**\r\n     * Converts a relative position to a corresponding numeric value from axis\r\n     * scale.\r\n     *\r\n     * @param   position  Relative position\r\n     * @return            Value\r\n     */\r\n    positionToValue(position) {\r\n        const min = this.getPrivate(\"min\");\r\n        const max = this.getPrivate(\"max\");\r\n        if (!this.get(\"logarithmic\")) {\r\n            return position * (max - min) + min;\r\n        }\r\n        else {\r\n            return Math.pow(Math.E, (position * ((Math.log(max) * Math.LOG10E - Math.log(min) * Math.LOG10E)) + Math.log(min) * Math.LOG10E) / Math.LOG10E);\r\n        }\r\n    }\r\n    /**\r\n     * Convers value to a relative position on axis.\r\n     *\r\n     * @param   value  Value\r\n     * @return         Relative position\r\n     */\r\n    valueToPosition(value) {\r\n        const min = this.getPrivate(\"min\");\r\n        const max = this.getPrivate(\"max\");\r\n        if (!this.get(\"logarithmic\")) {\r\n            return (value - min) / (max - min);\r\n        }\r\n        else {\r\n            if (value <= 0) {\r\n                let treatZeroAs = this.get(\"treatZeroAs\");\r\n                if ($type.isNumber(treatZeroAs)) {\r\n                    value = treatZeroAs;\r\n                }\r\n            }\r\n            return (Math.log(value) * Math.LOG10E - Math.log(min) * Math.LOG10E) / ((Math.log(max) * Math.LOG10E - Math.log(min) * Math.LOG10E));\r\n        }\r\n    }\r\n    /**\r\n     * @ignore\r\n     */\r\n    valueToFinalPosition(value) {\r\n        const min = this.getPrivate(\"minFinal\");\r\n        const max = this.getPrivate(\"maxFinal\");\r\n        if (!this.get(\"logarithmic\")) {\r\n            return (value - min) / (max - min);\r\n        }\r\n        else {\r\n            if (value <= 0) {\r\n                let treatZeroAs = this.get(\"treatZeroAs\");\r\n                if ($type.isNumber(treatZeroAs)) {\r\n                    value = treatZeroAs;\r\n                }\r\n            }\r\n            return (Math.log(value) * Math.LOG10E - Math.log(min) * Math.LOG10E) / ((Math.log(max) * Math.LOG10E - Math.log(min) * Math.LOG10E));\r\n        }\r\n    }\r\n    /**\r\n     * Returns X coordinate in pixels corresponding to specific value.\r\n     *\r\n     * @param   value     Numeric value\r\n     * @param   location  Location\r\n     * @param   baseValue Base value\r\n     * @return            X coordinate\r\n     */\r\n    getX(value, location, baseValue) {\r\n        value = baseValue + (value - baseValue) * location;\r\n        const position = this.valueToPosition(value);\r\n        return this._settings.renderer.positionToCoordinate(position);\r\n    }\r\n    /**\r\n     * Returns X coordinate in pixels corresponding to specific value.\r\n     *\r\n     * @param   value     Numeric value\r\n     * @param   location  Location\r\n     * @param   baseValue Base value\r\n     * @return            X coordinate\r\n     */\r\n    getY(value, location, baseValue) {\r\n        value = baseValue + (value - baseValue) * location;\r\n        const position = this.valueToPosition(value);\r\n        return this._settings.renderer.positionToCoordinate(position);\r\n    }\r\n    /**\r\n     * @ignore\r\n     */\r\n    getDataItemCoordinateX(dataItem, field, _cellLocation, axisLocation) {\r\n        return this._settings.renderer.positionToCoordinate(this.getDataItemPositionX(dataItem, field, _cellLocation, axisLocation));\r\n    }\r\n    /**\r\n     * @ignore\r\n     */\r\n    getDataItemPositionX(dataItem, field, _cellLocation, axisLocation) {\r\n        let value = dataItem.get(field);\r\n        const stackToItem = dataItem.get(\"stackToItemX\");\r\n        if (stackToItem) {\r\n            const series = dataItem.component;\r\n            value = value * axisLocation + series.getStackedXValueWorking(dataItem, field);\r\n        }\r\n        else {\r\n            value = this._baseValue + (value - this._baseValue) * axisLocation;\r\n        }\r\n        return this.valueToPosition(value);\r\n    }\r\n    /**\r\n     * @ignore\r\n     */\r\n    getDataItemCoordinateY(dataItem, field, _cellLocation, axisLocation) {\r\n        return this._settings.renderer.positionToCoordinate(this.getDataItemPositionY(dataItem, field, _cellLocation, axisLocation));\r\n    }\r\n    /**\r\n     * @ignore\r\n     */\r\n    getDataItemPositionY(dataItem, field, _cellLocation, axisLocation) {\r\n        let value = dataItem.get(field);\r\n        const stackToItem = dataItem.get(\"stackToItemY\");\r\n        if (stackToItem) {\r\n            const series = dataItem.component;\r\n            value = value * axisLocation + series.getStackedYValueWorking(dataItem, field);\r\n        }\r\n        else {\r\n            value = this._baseValue + (value - this._baseValue) * axisLocation;\r\n        }\r\n        return this.valueToPosition(value);\r\n    }\r\n    /**\r\n     * Returns relative position of axis' `baseValue`.\r\n     *\r\n     * @return  Base value position\r\n     */\r\n    basePosition() {\r\n        return this.valueToPosition(this.baseValue());\r\n    }\r\n    /**\r\n     * Base value of the [[ValueAxis]], which determines positive and negative\r\n     * values.\r\n     *\r\n     * @return Base value\r\n     */\r\n    baseValue() {\r\n        const min = Math.min(this.getPrivate(\"minFinal\", -Infinity), this.getPrivate(\"selectionMin\", -Infinity));\r\n        const max = Math.max(this.getPrivate(\"maxFinal\", Infinity), this.getPrivate(\"selectionMax\", Infinity));\r\n        let baseValue = this.get(\"baseValue\", 0);\r\n        if (baseValue < min) {\r\n            baseValue = min;\r\n        }\r\n        if (baseValue > max) {\r\n            baseValue = max;\r\n        }\r\n        return baseValue;\r\n    }\r\n    /**\r\n     * @ignore\r\n     */\r\n    cellEndValue(value) {\r\n        return value;\r\n    }\r\n    fixSmallStep(step) {\r\n        // happens because of floating point error\r\n        if (1 + step === 1) {\r\n            step *= 2;\r\n            return this.fixSmallStep(step);\r\n        }\r\n        return step;\r\n    }\r\n    _fixMin(min) {\r\n        return min;\r\n    }\r\n    _fixMax(max) {\r\n        return max;\r\n    }\r\n    _calculateTotals() {\r\n        if (this.get(\"calculateTotals\")) {\r\n            let series = this.series[0];\r\n            if (series) {\r\n                let startIndex = series.startIndex();\r\n                if (series.dataItems.length > 0) {\r\n                    if (startIndex > 0) {\r\n                        startIndex--;\r\n                    }\r\n                    let endIndex = series.endIndex();\r\n                    if (endIndex < series.dataItems.length) {\r\n                        endIndex++;\r\n                    }\r\n                    let field;\r\n                    let vc;\r\n                    if (series.get(\"yAxis\") == this) {\r\n                        field = \"valueY\";\r\n                        vc = \"vcy\";\r\n                    }\r\n                    else if (series.get(\"xAxis\") == this) {\r\n                        field = \"valueX\";\r\n                        vc = \"vcx\";\r\n                    }\r\n                    let fieldWorking = field + \"Working\";\r\n                    if (field) {\r\n                        for (let i = startIndex; i < endIndex; i++) {\r\n                            let sum = 0;\r\n                            let total = 0;\r\n                            $array.each(this.series, (series) => {\r\n                                if (!series.get(\"excludeFromTotal\")) {\r\n                                    let dataItem = series.dataItems[i];\r\n                                    if (dataItem) {\r\n                                        let value = dataItem.get(fieldWorking) * series.get(vc);\r\n                                        if (!$type.isNaN(value)) {\r\n                                            sum += value;\r\n                                            total += Math.abs(value);\r\n                                        }\r\n                                    }\r\n                                }\r\n                            });\r\n                            $array.each(this.series, (series) => {\r\n                                if (!series.get(\"excludeFromTotal\")) {\r\n                                    let dataItem = series.dataItems[i];\r\n                                    if (dataItem) {\r\n                                        let value = dataItem.get(fieldWorking) * series.get(vc);\r\n                                        if (!$type.isNaN(value)) {\r\n                                            dataItem.set((field + \"Total\"), total);\r\n                                            dataItem.set((field + \"Sum\"), sum);\r\n                                            dataItem.set((field + \"TotalPercent\"), value / total * 100);\r\n                                        }\r\n                                    }\r\n                                }\r\n                            });\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n    _getSelectionMinMax() {\r\n        const min = this.getPrivate(\"minFinal\");\r\n        const max = this.getPrivate(\"maxFinal\");\r\n        const minDefined = this.get(\"min\");\r\n        const maxDefined = this.get(\"max\");\r\n        let extraMin = this.get(\"extraMin\", 0);\r\n        let extraMax = this.get(\"extraMax\", 0);\r\n        if (this.get(\"logarithmic\")) {\r\n            if (this.get(\"extraMin\") == null) {\r\n                extraMin = 0.1;\r\n            }\r\n            if (this.get(\"extraMax\") == null) {\r\n                extraMax = 0.2;\r\n            }\r\n        }\r\n        const gridCount = this.get(\"renderer\").gridCount();\r\n        const selectionStrictMinMax = this.get(\"strictMinMaxSelection\");\r\n        let strictMinMax = this.get(\"strictMinMax\");\r\n        if ($type.isNumber(min) && $type.isNumber(max)) {\r\n            let selectionMin = max;\r\n            let selectionMax = min;\r\n            $array.each(this.series, (series) => {\r\n                if (!series.get(\"ignoreMinMax\")) {\r\n                    let seriesMin;\r\n                    let seriesMax;\r\n                    const outOfSelection = series.getPrivate(\"outOfSelection\");\r\n                    if (series.get(\"xAxis\") === this) {\r\n                        if (!outOfSelection) {\r\n                            let minX = series.getPrivate(\"minX\");\r\n                            let maxX = series.getPrivate(\"maxX\");\r\n                            // solves #90085\r\n                            if (series.startIndex() != 0 || series.endIndex() != series.dataItems.length) {\r\n                                minX = undefined;\r\n                                maxX = undefined;\r\n                            }\r\n                            seriesMin = series.getPrivate(\"selectionMinX\", minX);\r\n                            seriesMax = series.getPrivate(\"selectionMaxX\", maxX);\r\n                        }\r\n                    }\r\n                    else if (series.get(\"yAxis\") === this) {\r\n                        if (!outOfSelection) {\r\n                            let minY = series.getPrivate(\"minY\");\r\n                            let maxY = series.getPrivate(\"maxY\");\r\n                            // solves #90085\r\n                            if (series.startIndex() != 0 || series.endIndex() != series.dataItems.length) {\r\n                                minY = undefined;\r\n                                maxY = undefined;\r\n                            }\r\n                            seriesMin = series.getPrivate(\"selectionMinY\", minY);\r\n                            seriesMax = series.getPrivate(\"selectionMaxY\", maxY);\r\n                        }\r\n                    }\r\n                    if (!series.isHidden() && !series.isShowing()) {\r\n                        if ($type.isNumber(seriesMin)) {\r\n                            selectionMin = Math.min(selectionMin, seriesMin);\r\n                        }\r\n                        if ($type.isNumber(seriesMax)) {\r\n                            selectionMax = Math.max(selectionMax, seriesMax);\r\n                        }\r\n                    }\r\n                }\r\n            });\r\n            this.axisRanges.each((range) => {\r\n                if (range.get(\"affectsMinMax\")) {\r\n                    let value = range.get(\"value\");\r\n                    if (value != null) {\r\n                        selectionMin = Math.min(selectionMin, value);\r\n                        selectionMax = Math.max(selectionMax, value);\r\n                    }\r\n                    value = range.get(\"endValue\");\r\n                    if (value != null) {\r\n                        selectionMin = Math.min(selectionMin, value);\r\n                        selectionMax = Math.max(selectionMax, value);\r\n                    }\r\n                }\r\n            });\r\n            if (selectionMin > selectionMax) {\r\n                [selectionMin, selectionMax] = [selectionMax, selectionMin];\r\n            }\r\n            if ($type.isNumber(minDefined)) {\r\n                if (strictMinMax) {\r\n                    selectionMin = minDefined;\r\n                }\r\n                else {\r\n                    selectionMin = min;\r\n                }\r\n            }\r\n            else if (strictMinMax) {\r\n                if ($type.isNumber(this._minReal)) {\r\n                    selectionMin = this._minReal;\r\n                }\r\n            }\r\n            if ($type.isNumber(maxDefined)) {\r\n                if (strictMinMax) {\r\n                    selectionMax = maxDefined;\r\n                }\r\n                else {\r\n                    selectionMax = max;\r\n                }\r\n            }\r\n            else if (strictMinMax) {\r\n                if ($type.isNumber(this._maxReal)) {\r\n                    selectionMax = this._maxReal;\r\n                }\r\n            }\r\n            if (selectionMin === selectionMax) {\r\n                let smin = selectionMin;\r\n                selectionMin -= this._deltaMinMax;\r\n                selectionMax += this._deltaMinMax;\r\n                if (selectionMin < min) {\r\n                    let d = smin - min;\r\n                    if (d == 0) {\r\n                        d = this._deltaMinMax;\r\n                    }\r\n                    selectionMin = smin - d;\r\n                    selectionMax = smin + d;\r\n                    strictMinMax = true;\r\n                }\r\n                let minMaxStep2 = this._adjustMinMax(selectionMin, selectionMax, gridCount, strictMinMax);\r\n                selectionMin = minMaxStep2.min;\r\n                selectionMax = minMaxStep2.max;\r\n            }\r\n            let selectionMinReal = selectionMin;\r\n            let selectionMaxReal = selectionMax;\r\n            let delta = selectionMax - selectionMin;\r\n            selectionMin -= delta * extraMin;\r\n            selectionMax += delta * extraMax;\r\n            let minMaxStep = this._adjustMinMax(selectionMin, selectionMax, gridCount);\r\n            selectionMin = minMaxStep.min;\r\n            selectionMax = minMaxStep.max;\r\n            selectionMin = $math.fitToRange(selectionMin, min, max);\r\n            selectionMax = $math.fitToRange(selectionMax, min, max);\r\n            // do it for the second time !important\t\t\t\r\n            minMaxStep = this._adjustMinMax(selectionMin, selectionMax, gridCount, true);\r\n            if (!strictMinMax) {\r\n                selectionMin = minMaxStep.min;\r\n                selectionMax = minMaxStep.max;\r\n            }\r\n            const syncWithAxis = this.get(\"syncWithAxis\");\r\n            if (syncWithAxis) {\r\n                minMaxStep = this._syncAxes(selectionMin, selectionMax, minMaxStep.step, syncWithAxis.getPrivate(\"selectionMinFinal\", syncWithAxis.getPrivate(\"minFinal\", 0)), syncWithAxis.getPrivate(\"selectionMaxFinal\", syncWithAxis.getPrivate(\"maxFinal\", 1)), syncWithAxis.getPrivate(\"selectionStepFinal\", syncWithAxis.getPrivate(\"step\", 1)));\r\n                if (minMaxStep.min < min) {\r\n                    minMaxStep.min = min;\r\n                }\r\n                if (minMaxStep.max > max) {\r\n                    minMaxStep.max = max;\r\n                }\r\n                selectionMin = minMaxStep.min;\r\n                selectionMax = minMaxStep.max;\r\n            }\r\n            if (strictMinMax) {\r\n                if ($type.isNumber(minDefined)) {\r\n                    selectionMin = Math.max(selectionMin, minDefined);\r\n                }\r\n                if ($type.isNumber(maxDefined)) {\r\n                    selectionMax = Math.min(selectionMax, maxDefined);\r\n                }\r\n            }\r\n            if (selectionStrictMinMax) {\r\n                selectionMin = selectionMinReal - (selectionMaxReal - selectionMinReal) * extraMin;\r\n                selectionMax = selectionMaxReal + (selectionMaxReal - selectionMinReal) * extraMax;\r\n            }\r\n            if (strictMinMax) {\r\n                if ($type.isNumber(minDefined)) {\r\n                    selectionMin = minDefined;\r\n                }\r\n                else {\r\n                    selectionMin = selectionMinReal;\r\n                }\r\n                if ($type.isNumber(maxDefined)) {\r\n                    selectionMax = maxDefined;\r\n                }\r\n                else {\r\n                    selectionMax = selectionMaxReal;\r\n                }\r\n                if (selectionMax - selectionMin <= 0.00000001) {\r\n                    selectionMin -= this._deltaMinMax;\r\n                    selectionMax += this._deltaMinMax;\r\n                }\r\n                let delta = selectionMax - selectionMin;\r\n                selectionMin -= delta * extraMin;\r\n                selectionMax += delta * extraMax;\r\n            }\r\n            if (this.get(\"logarithmic\")) {\r\n                if (selectionMin <= 0) {\r\n                    selectionMin = selectionMinReal * (1 - Math.min(extraMin, 0.99));\r\n                }\r\n                if (selectionMin < min) {\r\n                    selectionMin = min;\r\n                }\r\n                if (selectionMax > max) {\r\n                    selectionMax = max;\r\n                }\r\n            }\r\n            let len = Math.min(20, Math.ceil(Math.log(this.getPrivate(\"maxZoomFactor\", 100) + 1) / Math.LN10) + 2);\r\n            let start = $math.round(this.valueToFinalPosition(selectionMin), len);\r\n            let end = $math.round(this.valueToFinalPosition(selectionMax), len);\r\n            this.setPrivateRaw(\"selectionMinFinal\", selectionMin);\r\n            this.setPrivateRaw(\"selectionMaxFinal\", selectionMax);\r\n            this.setPrivateRaw(\"selectionStepFinal\", minMaxStep.step);\r\n            this.zoom(start, end);\r\n        }\r\n    }\r\n    _getMinMax() {\r\n        let minDefined = this.get(\"min\");\r\n        let maxDefined = this.get(\"max\");\r\n        let min = Infinity;\r\n        let max = -Infinity;\r\n        let extraMin = this.get(\"extraMin\", 0);\r\n        let extraMax = this.get(\"extraMax\", 0);\r\n        if (this.get(\"logarithmic\")) {\r\n            if (this.get(\"extraMin\") == null) {\r\n                extraMin = 0.1;\r\n            }\r\n            if (this.get(\"extraMax\") == null) {\r\n                extraMax = 0.2;\r\n            }\r\n        }\r\n        let minDiff = Infinity;\r\n        $array.each(this.series, (series) => {\r\n            if (!series.get(\"ignoreMinMax\")) {\r\n                let seriesMin;\r\n                let seriesMax;\r\n                if (series.get(\"xAxis\") === this) {\r\n                    seriesMin = series.getPrivate(\"minX\");\r\n                    seriesMax = series.getPrivate(\"maxX\");\r\n                }\r\n                else if (series.get(\"yAxis\") === this) {\r\n                    seriesMin = series.getPrivate(\"minY\");\r\n                    seriesMax = series.getPrivate(\"maxY\");\r\n                }\r\n                if ($type.isNumber(seriesMin) && $type.isNumber(seriesMax)) {\r\n                    min = Math.min(min, seriesMin);\r\n                    max = Math.max(max, seriesMax);\r\n                    let diff = seriesMax - seriesMin;\r\n                    if (diff <= 0) {\r\n                        diff = Math.abs(seriesMax / 100);\r\n                    }\r\n                    if (diff < minDiff) {\r\n                        minDiff = diff;\r\n                    }\r\n                }\r\n            }\r\n        });\r\n        this.axisRanges.each((range) => {\r\n            if (range.get(\"affectsMinMax\")) {\r\n                let value = range.get(\"value\");\r\n                if (value != null) {\r\n                    min = Math.min(min, value);\r\n                    max = Math.max(max, value);\r\n                }\r\n                value = range.get(\"endValue\");\r\n                if (value != null) {\r\n                    min = Math.min(min, value);\r\n                    max = Math.max(max, value);\r\n                }\r\n            }\r\n        });\r\n        if (this.get(\"logarithmic\")) {\r\n            let treatZeroAs = this.get(\"treatZeroAs\");\r\n            if ($type.isNumber(treatZeroAs)) {\r\n                if (min <= 0) {\r\n                    min = treatZeroAs;\r\n                }\r\n            }\r\n            if (min <= 0) {\r\n                new Error(\"Logarithmic value axis can not have values <= 0.\");\r\n            }\r\n        }\r\n        if (min === 0 && max === 0) {\r\n            max = 0.9;\r\n            min = -0.9;\r\n        }\r\n        if ($type.isNumber(minDefined)) {\r\n            min = minDefined;\r\n        }\r\n        if ($type.isNumber(maxDefined)) {\r\n            max = maxDefined;\r\n        }\r\n        // meaning no min/max found on series/ranges and no min/max was defined\r\n        if (min === Infinity || max === -Infinity) {\r\n            this.setPrivate(\"minFinal\", undefined);\r\n            this.setPrivate(\"maxFinal\", undefined);\r\n            return;\r\n        }\r\n        if (min > max) {\r\n            [min, max] = [max, min];\r\n        }\r\n        const initialMin = min;\r\n        const initialMax = max;\r\n        // adapter\r\n        let minAdapted = this.adapters.fold(\"min\", min);\r\n        let maxAdapted = this.adapters.fold(\"max\", max);\r\n        this._minRealLog = min;\r\n        if ($type.isNumber(minAdapted)) {\r\n            min = minAdapted;\r\n        }\r\n        if ($type.isNumber(maxAdapted)) {\r\n            max = maxAdapted;\r\n        }\r\n        // DateAxis does some magic here\r\n        min = this._fixMin(min);\r\n        max = this._fixMax(max);\r\n        // this happens if starLocation and endLocation are 0.5 and DateAxis has only one date\t\t\r\n        if (max - min <= 1 / Math.pow(10, 15)) {\r\n            if (max - min !== 0) {\r\n                this._deltaMinMax = (max - min) / 2;\r\n            }\r\n            else {\r\n                this._getDelta(max);\r\n            }\r\n            min -= this._deltaMinMax;\r\n            max += this._deltaMinMax;\r\n        }\r\n        // add extras\r\n        min -= (max - min) * extraMin;\r\n        max += (max - min) * extraMax;\r\n        if (this.get(\"logarithmic\")) {\r\n            // don't let min go below 0 if real min is >= 0\r\n            if (min < 0 && initialMin >= 0) {\r\n                min = 0;\r\n            }\r\n            // don't let max go above 0 if real max is <= 0\r\n            if (max > 0 && initialMax <= 0) {\r\n                max = 0;\r\n            }\r\n        }\r\n        this._minReal = min;\r\n        this._maxReal = max;\r\n        let strictMinMax = this.get(\"strictMinMax\");\r\n        let strictMinMaxSelection = this.get(\"strictMinMaxSelection\", false);\r\n        if (strictMinMaxSelection) {\r\n            strictMinMax = strictMinMaxSelection;\r\n        }\r\n        let strict = strictMinMax;\r\n        if ($type.isNumber(maxDefined)) {\r\n            strict = true;\r\n        }\r\n        let gridCount = this.get(\"renderer\").gridCount();\r\n        let minMaxStep = this._adjustMinMax(min, max, gridCount, strict);\r\n        min = minMaxStep.min;\r\n        max = minMaxStep.max;\r\n        // do it for the second time with strict true (importat!)\r\n        minMaxStep = this._adjustMinMax(min, max, gridCount, true);\r\n        min = minMaxStep.min;\r\n        max = minMaxStep.max;\r\n        // return min max if strict\r\n        if (strictMinMax) {\r\n            if ($type.isNumber(minDefined)) {\r\n                min = minDefined;\r\n            }\r\n            else {\r\n                min = this._minReal;\r\n            }\r\n            if ($type.isNumber(maxDefined)) {\r\n                max = maxDefined;\r\n            }\r\n            else {\r\n                max = this._maxReal;\r\n            }\r\n            if (max - min <= 0.00000001) {\r\n                min -= this._deltaMinMax;\r\n                max += this._deltaMinMax;\r\n            }\r\n            let delta = max - min;\r\n            min -= delta * extraMin;\r\n            max += delta * extraMax;\r\n        }\r\n        minAdapted = this.adapters.fold(\"min\", min);\r\n        maxAdapted = this.adapters.fold(\"max\", max);\r\n        if ($type.isNumber(minAdapted)) {\r\n            min = minAdapted;\r\n        }\r\n        if ($type.isNumber(maxAdapted)) {\r\n            max = maxAdapted;\r\n        }\r\n        if (minDiff == Infinity) {\r\n            minDiff = (max - min);\r\n        }\r\n        // this is to avoid floating point number error\r\n        let decCount = Math.round(Math.abs(Math.log(Math.abs(max - min)) * Math.LOG10E)) + 5;\r\n        min = $math.round(min, decCount);\r\n        max = $math.round(max, decCount);\r\n        const syncWithAxis = this.get(\"syncWithAxis\");\r\n        if (syncWithAxis) {\r\n            minMaxStep = this._syncAxes(min, max, minMaxStep.step, syncWithAxis.getPrivate(\"minFinal\", syncWithAxis.getPrivate(\"min\", 0)), syncWithAxis.getPrivate(\"maxFinal\", syncWithAxis.getPrivate(\"max\", 1)), syncWithAxis.getPrivate(\"step\", 1));\r\n            min = minMaxStep.min;\r\n            max = minMaxStep.max;\r\n        }\r\n        this.setPrivateRaw(\"maxZoomFactor\", Math.max(1, Math.ceil((max - min) / minDiff * this.get(\"maxZoomFactor\", 100))));\r\n        this._fixZoomFactor();\r\n        if (this.get(\"logarithmic\")) {\r\n            this._minLogAdjusted = min;\r\n            min = this._minReal;\r\n            max = this._maxReal;\r\n            if (min <= 0) {\r\n                min = initialMin * (1 - Math.min(extraMin, 0.99));\r\n            }\r\n        }\r\n        if ($type.isNumber(min) && $type.isNumber(max)) {\r\n            if (this.getPrivate(\"minFinal\") !== min || this.getPrivate(\"maxFinal\") !== max) {\r\n                this.setPrivate(\"minFinal\", min);\r\n                this.setPrivate(\"maxFinal\", max);\r\n                this._saveMinMax(min, max);\r\n                const duration = this.get(\"interpolationDuration\", 0);\r\n                const easing = this.get(\"interpolationEasing\");\r\n                this.animatePrivate({ key: \"min\", to: min, duration, easing });\r\n                this.animatePrivate({ key: \"max\", to: max, duration, easing });\r\n            }\r\n        }\r\n    }\r\n    _fixZoomFactor() {\r\n    }\r\n    _getDelta(max) {\r\n        // the number by which we need to raise 10 to get difference\r\n        let exponent = Math.log(Math.abs(max)) * Math.LOG10E;\r\n        // here we find a number which is power of 10 and has the same count of numbers as difference has\r\n        let power = Math.pow(10, Math.floor(exponent));\r\n        // reduce this number by 10 times\r\n        power = power / 10;\r\n        this._deltaMinMax = power;\r\n    }\r\n    _saveMinMax(_min, _max) {\r\n    }\r\n    _adjustMinMax(min, max, gridCount, strictMode) {\r\n        // will fail if 0\r\n        if (gridCount <= 1) {\r\n            gridCount = 1;\r\n        }\r\n        gridCount = Math.round(gridCount);\r\n        let initialMin = min;\r\n        let initialMax = max;\r\n        let difference = max - min;\r\n        // in case min and max is the same, use max\r\n        if (difference === 0) {\r\n            difference = Math.abs(max);\r\n        }\r\n        // the number by which we need to raise 10 to get difference\r\n        let exponent = Math.log(Math.abs(difference)) * Math.LOG10E;\r\n        // here we find a number which is power of 10 and has the same count of numbers as difference has\r\n        let power = Math.pow(10, Math.floor(exponent));\r\n        // reduce this number by 10 times\r\n        power = power / 10;\r\n        let extra = power;\r\n        if (strictMode) {\r\n            extra = 0;\r\n        }\r\n        // round down min\r\n        if (strictMode) {\r\n            min = Math.floor(min / power) * power;\r\n            // round up max\r\n            max = Math.ceil(max / power) * power;\r\n        }\r\n        else {\r\n            min = Math.ceil(min / power) * power - extra;\r\n            // round up max\r\n            max = Math.floor(max / power) * power + extra;\r\n        }\r\n        // don't let min go below 0 if real min is >= 0\r\n        if (min < 0 && initialMin >= 0) {\r\n            min = 0;\r\n        }\r\n        // don't let max go above 0 if real max is <= 0\r\n        if (max > 0 && initialMax <= 0) {\r\n            max = 0;\r\n        }\r\n        exponent = Math.log(Math.abs(difference)) * Math.LOG10E;\r\n        power = Math.pow(10, Math.floor(exponent));\r\n        power = power / 100; // used to be 10 in v4, but this caused issue that there could be limited number of grids with even very small minGridDistance\r\n        // approximate difference between two grid lines\r\n        let step = Math.ceil((difference / gridCount) / power) * power;\r\n        let stepPower = Math.pow(10, Math.floor(Math.log(Math.abs(step)) * Math.LOG10E));\r\n        // the step should divide by  2, 5, and 10.\r\n        let stepDivisor = Math.ceil(step / stepPower); // number 0 - 10\r\n        if (stepDivisor > 5) {\r\n            stepDivisor = 10;\r\n        }\r\n        else if (stepDivisor <= 5 && stepDivisor > 2) {\r\n            stepDivisor = 5;\r\n        }\r\n        // now get real step\r\n        step = Math.ceil(step / (stepPower * stepDivisor)) * stepPower * stepDivisor;\r\n        let maxPrecision = this.get(\"maxPrecision\");\r\n        if ($type.isNumber(maxPrecision)) {\r\n            let ceiledStep = $math.ceil(step, maxPrecision);\r\n            if (maxPrecision < Number.MAX_VALUE && step !== ceiledStep) {\r\n                step = ceiledStep;\r\n                if (step == 0) {\r\n                    step = 1;\r\n                }\r\n            }\r\n        }\r\n        let decCount = 0;\r\n        // in case numbers are smaller than 1\r\n        if (stepPower < 1) {\r\n            // exponent is less then 1 too. Count decimals of exponent\r\n            decCount = Math.round(Math.abs(Math.log(Math.abs(stepPower)) * Math.LOG10E)) + 1;\r\n            // round step\r\n            step = $math.round(step, decCount);\r\n        }\r\n        // final min and max\r\n        let minCount = Math.floor(min / step);\r\n        min = $math.round(step * minCount, decCount);\r\n        let maxCount;\r\n        if (!strictMode) {\r\n            maxCount = Math.ceil(max / step);\r\n        }\r\n        else {\r\n            maxCount = Math.floor(max / step);\r\n        }\r\n        if (maxCount === minCount) {\r\n            maxCount++;\r\n        }\r\n        max = $math.round(step * maxCount, decCount);\r\n        if (max < initialMax) {\r\n            max = max + step;\r\n        }\r\n        if (min > initialMin) {\r\n            min = min - step;\r\n        }\r\n        step = this.fixSmallStep(step);\r\n        return { min: min, max: max, step: step };\r\n    }\r\n    /**\r\n     * Returns text to be used in an axis tooltip for specific relative position.\r\n     *\r\n     * @param   position  Position\r\n     * @return            Tooltip text\r\n     */\r\n    getTooltipText(position, _adjustPosition) {\r\n        const numberFormat = this.get(\"tooltipNumberFormat\", this.get(\"numberFormat\"));\r\n        const formatter = this.getNumberFormatter();\r\n        const extraDecimals = this.get(\"extraTooltipPrecision\", 0);\r\n        const decimals = this.getPrivate(\"stepDecimalPlaces\", 0) + extraDecimals;\r\n        const value = $math.round(this.positionToValue(position), decimals);\r\n        if (numberFormat) {\r\n            return formatter.format(value, numberFormat);\r\n        }\r\n        else {\r\n            return formatter.format(value, undefined, decimals);\r\n        }\r\n    }\r\n    /**\r\n     * Returns a data item from series that is closest to the `position`.\r\n     *\r\n     * @param   series    Series\r\n     * @param   position  Relative position\r\n     * @return            Data item\r\n     */\r\n    getSeriesItem(series, position) {\r\n        let fieldName = (this.getPrivate(\"name\") + this.get(\"renderer\").getPrivate(\"letter\"));\r\n        let value = this.positionToValue(position);\r\n        let index = undefined;\r\n        let oldDiff;\r\n        $array.each(series.dataItems, (dataItem, i) => {\r\n            const diff = Math.abs(dataItem.get(fieldName) - value);\r\n            if (index === undefined || diff < oldDiff) {\r\n                index = i;\r\n                oldDiff = diff;\r\n            }\r\n        });\r\n        if (index != null) {\r\n            return series.dataItems[index];\r\n        }\r\n    }\r\n    /**\r\n     * Zooms the axis to specific `start` and `end` values.\r\n     *\r\n     * Optional `duration` specifies duration of zoom animation in milliseconds.\r\n     *\r\n     * @param  start     Start value\r\n     * @param  end       End value\r\n     * @param  duration  Duration in milliseconds\r\n     */\r\n    zoomToValues(start, end, duration) {\r\n        const min = this.getPrivate(\"minFinal\", 0);\r\n        const max = this.getPrivate(\"maxFinal\", 0);\r\n        if (this.getPrivate(\"min\") != null && this.getPrivate(\"max\") != null) {\r\n            this.zoom((start - min) / (max - min), (end - min) / (max - min), duration);\r\n        }\r\n    }\r\n    /**\r\n     * Syncs with a target axis.\r\n     *\r\n     * @param  min  Min\r\n     * @param  max  Max\r\n     * @param  step Step\r\n     */\r\n    _syncAxes(min, max, step, syncMin, syncMax, syncStep) {\r\n        let axis = this.get(\"syncWithAxis\");\r\n        if (axis) {\r\n            let count = Math.round(syncMax - syncMin) / syncStep;\r\n            let currentCount = Math.round((max - min) / step);\r\n            let gridCount = this.get(\"renderer\").gridCount();\r\n            if ($type.isNumber(count) && $type.isNumber(currentCount)) {\r\n                let synced = false;\r\n                let c = 0;\r\n                let diff = (max - min) * 0.01;\r\n                let omin = min;\r\n                let omax = max;\r\n                let ostep = step;\r\n                while (synced != true) {\r\n                    synced = this._checkSync(omin, omax, ostep, count);\r\n                    c++;\r\n                    if (c > 500) {\r\n                        synced = true;\r\n                    }\r\n                    if (!synced) {\r\n                        if (c / 3 == Math.round(c / 3)) {\r\n                            omin = min - diff * c;\r\n                            if (min >= 0 && omin < 0) {\r\n                                omin = 0;\r\n                            }\r\n                        }\r\n                        else {\r\n                            omax = max + diff * c;\r\n                            if (omax <= 0 && omax > 0) {\r\n                                omax = 0;\r\n                            }\r\n                        }\r\n                        let minMaxStep = this._adjustMinMax(omin, omax, gridCount, true);\r\n                        omin = minMaxStep.min;\r\n                        omax = minMaxStep.max;\r\n                        ostep = minMaxStep.step;\r\n                    }\r\n                    else {\r\n                        min = omin;\r\n                        max = omax;\r\n                        step = ostep;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        return { min: min, max: max, step: step };\r\n    }\r\n    /**\r\n     * Returns `true` if axis needs to be resunced with some other axis.\r\n     */\r\n    _checkSync(min, max, step, count) {\r\n        let currentCount = (max - min) / step;\r\n        for (let i = 1; i < count; i++) {\r\n            if ($math.round(currentCount / i, 1) == count || currentCount * i == count) {\r\n                return true;\r\n            }\r\n        }\r\n        return false;\r\n    }\r\n    /**\r\n     * Returns relative position between two grid lines of the axis.\r\n     *\r\n     * @return Position\r\n     */\r\n    getCellWidthPosition() {\r\n        let max = this.getPrivate(\"selectionMax\", this.getPrivate(\"max\"));\r\n        let min = this.getPrivate(\"selectionMin\", this.getPrivate(\"min\"));\r\n        if ($type.isNumber(max) && $type.isNumber(min)) {\r\n            return this.getPrivate(\"step\", 1) / (max - min);\r\n        }\r\n        return 0.05;\r\n    }\r\n    /**\r\n     * @ignore\r\n     */\r\n    nextPosition(count) {\r\n        if (count == null) {\r\n            count = 1;\r\n        }\r\n        if (this.get(\"renderer\").getPrivate(\"letter\") == \"Y\") {\r\n            count *= -1;\r\n        }\r\n        let value = this.positionToValue(this.getPrivate(\"tooltipPosition\", 0));\r\n        value += this.getPrivate(\"step\", 1) * count;\r\n        value = $math.fitToRange(value, this.getPrivate(\"selectionMin\", 0), this.getPrivate(\"selectionMax\", 1));\r\n        return this.toGlobalPosition(this.valueToPosition(value));\r\n    }\r\n}\r\nObject.defineProperty(ValueAxis, \"className\", {\r\n    enumerable: true,\r\n    configurable: true,\r\n    writable: true,\r\n    value: \"ValueAxis\"\r\n});\r\nObject.defineProperty(ValueAxis, \"classNames\", {\r\n    enumerable: true,\r\n    configurable: true,\r\n    writable: true,\r\n    value: Axis.classNames.concat([ValueAxis.className])\r\n});\r\n//# sourceMappingURL=ValueAxis.js.map","import { Entity } from \"../../../core/util/Entity\";\r\nimport * as $object from \"../../../core/util/Object\";\r\n/**\r\n * Draws a bullet on an axis.\r\n *\r\n * @see {@link https://www.amcharts.com/docs/v5/charts/xy-chart/axes/#Axis_bullets} for more info\r\n */\r\nexport class AxisBullet extends Entity {\r\n    constructor() {\r\n        super(...arguments);\r\n        /**\r\n         * Target axis object.\r\n         */\r\n        Object.defineProperty(this, \"axis\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n    }\r\n    _beforeChanged() {\r\n        super._beforeChanged();\r\n        const sprite = this.get(\"sprite\");\r\n        if (this.isDirty(\"sprite\")) {\r\n            if (sprite) {\r\n                sprite.setAll({ position: \"absolute\", role: \"figure\" });\r\n                this._disposers.push(sprite);\r\n            }\r\n        }\r\n        if (this.isDirty(\"location\")) {\r\n            const dataItem = sprite.dataItem;\r\n            if (this.axis && sprite && dataItem) {\r\n                this.axis._prepareDataItem(dataItem);\r\n            }\r\n        }\r\n    }\r\n    dispose() {\r\n        const axis = this.axis;\r\n        if (axis) {\r\n            $object.each(axis._bullets, (key, bullet) => {\r\n                if (bullet.uid == this.uid) {\r\n                    delete axis._bullets[key];\r\n                }\r\n            });\r\n        }\r\n        super.dispose();\r\n    }\r\n}\r\nObject.defineProperty(AxisBullet, \"className\", {\r\n    enumerable: true,\r\n    configurable: true,\r\n    writable: true,\r\n    value: \"AxisBullet\"\r\n});\r\nObject.defineProperty(AxisBullet, \"classNames\", {\r\n    enumerable: true,\r\n    configurable: true,\r\n    writable: true,\r\n    value: Entity.classNames.concat([AxisBullet.className])\r\n});\r\n//# sourceMappingURL=AxisBullet.js.map","import { Label } from \"../../../core/render/Label\";\r\n/**\r\n * Draws an axis label.\r\n *\r\n * @see {@link https://www.amcharts.com/docs/v5/charts/xy-chart/axes/#Labels} for more info\r\n * @important\r\n */\r\nexport class AxisLabel extends Label {\r\n    constructor() {\r\n        super(...arguments);\r\n        Object.defineProperty(this, \"_tickPoints\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: []\r\n        });\r\n    }\r\n}\r\nObject.defineProperty(AxisLabel, \"className\", {\r\n    enumerable: true,\r\n    configurable: true,\r\n    writable: true,\r\n    value: \"AxisLabel\"\r\n});\r\nObject.defineProperty(AxisLabel, \"classNames\", {\r\n    enumerable: true,\r\n    configurable: true,\r\n    writable: true,\r\n    value: Label.classNames.concat([AxisLabel.className])\r\n});\r\n//# sourceMappingURL=AxisLabel.js.map","import { RadialLabel } from \"../../../core/render/RadialLabel\";\r\n/**\r\n * Draws a label on a circular axis.\r\n *\r\n * @see {@link https://www.amcharts.com/docs/v5/charts/xy-chart/axes/#Labels} for more info\r\n */\r\nexport class AxisLabelRadial extends RadialLabel {\r\n    constructor() {\r\n        super(...arguments);\r\n        Object.defineProperty(this, \"_tickPoints\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: []\r\n        });\r\n    }\r\n}\r\nObject.defineProperty(AxisLabelRadial, \"className\", {\r\n    enumerable: true,\r\n    configurable: true,\r\n    writable: true,\r\n    value: \"AxisLabelRadial\"\r\n});\r\nObject.defineProperty(AxisLabelRadial, \"classNames\", {\r\n    enumerable: true,\r\n    configurable: true,\r\n    writable: true,\r\n    value: RadialLabel.classNames.concat([AxisLabelRadial.className])\r\n});\r\n//# sourceMappingURL=AxisLabelRadial.js.map","import { Tick } from \"../../../core/render/Tick\";\r\n/**\r\n * Draws an axis tick.\r\n *\r\n * @see {@link https://www.amcharts.com/docs/v5/charts/xy-chart/axes/#Ticks} for more info\r\n * @important\r\n */\r\nexport class AxisTick extends Tick {\r\n    constructor() {\r\n        super(...arguments);\r\n        Object.defineProperty(this, \"_tickPoints\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: []\r\n        });\r\n    }\r\n}\r\nObject.defineProperty(AxisTick, \"className\", {\r\n    enumerable: true,\r\n    configurable: true,\r\n    writable: true,\r\n    value: \"AxisTick\"\r\n});\r\nObject.defineProperty(AxisTick, \"classNames\", {\r\n    enumerable: true,\r\n    configurable: true,\r\n    writable: true,\r\n    value: Tick.classNames.concat([AxisTick.className])\r\n});\r\n//# sourceMappingURL=AxisTick.js.map","import { Graphics } from \"../../../core/render/Graphics\";\r\nimport { Template } from \"../../../core/util/Template\";\r\nimport { ListTemplate } from \"../../../core/util/List\";\r\nimport { AxisTick } from \"./AxisTick\";\r\nimport { Grid } from \"./Grid\";\r\nimport { AxisLabel } from \"./AxisLabel\";\r\nimport * as $utils from \"../../../core/util/Utils\";\r\n/**\r\n * Base class for an axis renderer.\r\n *\r\n * Should not be used on its own.\r\n *\r\n * @see {@link https://www.amcharts.com/docs/v5/charts/xy-chart/#Axis_renderer} for more info\r\n */\r\nexport class AxisRenderer extends Graphics {\r\n    constructor() {\r\n        super(...arguments);\r\n        // save for quick access\r\n        Object.defineProperty(this, \"_axisLength\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: 100\r\n        });\r\n        Object.defineProperty(this, \"_start\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: 0\r\n        });\r\n        Object.defineProperty(this, \"_end\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: 1\r\n        });\r\n        Object.defineProperty(this, \"_inversed\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: false\r\n        });\r\n        Object.defineProperty(this, \"_minSize\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: 0\r\n        });\r\n        /**\r\n         * Chart the renderer is used in.\r\n         */\r\n        Object.defineProperty(this, \"chart\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"_lc\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: 1\r\n        });\r\n        Object.defineProperty(this, \"_ls\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: 0\r\n        });\r\n        Object.defineProperty(this, \"_thumbDownPoint\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"_downStart\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"_downEnd\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        /**\r\n         * A list of ticks in the axis.\r\n         *\r\n         * `ticks.template` can be used to configure ticks.\r\n         *\r\n         * @default new ListTemplate<AxisTick>\r\n         */\r\n        Object.defineProperty(this, \"ticks\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: new ListTemplate(Template.new({}), () => AxisTick._new(this._root, {\r\n                themeTags: $utils.mergeTags(this.ticks.template.get(\"themeTags\", []), this.get(\"themeTags\", []))\r\n            }, [this.ticks.template]))\r\n        });\r\n        /**\r\n         * A list of grid elements in the axis.\r\n         *\r\n         * `grid.template` can be used to configure grid.\r\n         *\r\n         * @default new ListTemplate<Grid>\r\n         */\r\n        Object.defineProperty(this, \"grid\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: new ListTemplate(Template.new({}), () => Grid._new(this._root, {\r\n                themeTags: $utils.mergeTags(this.grid.template.get(\"themeTags\", []), this.get(\"themeTags\", []))\r\n            }, [this.grid.template]))\r\n        });\r\n        /**\r\n         * A list of fills in the axis.\r\n         *\r\n         * `axisFills.template` can be used to configure axis fills.\r\n         *\r\n         * @default new ListTemplate<Graphics>\r\n         */\r\n        Object.defineProperty(this, \"axisFills\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: new ListTemplate(Template.new({}), () => Graphics._new(this._root, {\r\n                themeTags: $utils.mergeTags(this.axisFills.template.get(\"themeTags\", [\"axis\", \"fill\"]), this.get(\"themeTags\", []))\r\n            }, [this.axisFills.template]))\r\n        });\r\n        /**\r\n         * A list of labels in the axis.\r\n         *\r\n         * `labels.template` can be used to configure axis labels.\r\n         *\r\n         * @default new ListTemplate<AxisLabel>\r\n         */\r\n        Object.defineProperty(this, \"labels\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: new ListTemplate(Template.new({}), () => AxisLabel._new(this._root, {\r\n                themeTags: $utils.mergeTags(this.labels.template.get(\"themeTags\", []), this.get(\"themeTags\", []))\r\n            }, [this.labels.template]))\r\n        });\r\n        /**\r\n         * An [[Axis]] renderer is for.\r\n         */\r\n        Object.defineProperty(this, \"axis\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        /**\r\n         * A thumb Graphics to be used for panning the axis (the one which shows under the labels when hovered)\r\n         */\r\n        Object.defineProperty(this, \"thumb\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n    }\r\n    /**\r\n     * @ignore\r\n     */\r\n    makeTick(dataItem, themeTags) {\r\n        const tick = this.ticks.make();\r\n        tick._setDataItem(dataItem);\r\n        dataItem.setRaw(\"tick\", tick);\r\n        tick.set(\"themeTags\", $utils.mergeTags(tick.get(\"themeTags\"), themeTags));\r\n        this.axis.labelsContainer.children.push(tick);\r\n        this.ticks.push(tick);\r\n        return tick;\r\n    }\r\n    /**\r\n     * @ignore\r\n     */\r\n    makeGrid(dataItem, themeTags) {\r\n        const grid = this.grid.make();\r\n        grid._setDataItem(dataItem);\r\n        dataItem.setRaw(\"grid\", grid);\r\n        grid.set(\"themeTags\", $utils.mergeTags(grid.get(\"themeTags\"), themeTags));\r\n        this.axis.gridContainer.children.push(grid);\r\n        this.grid.push(grid);\r\n        return grid;\r\n    }\r\n    /**\r\n     * @ignore\r\n     */\r\n    makeAxisFill(dataItem, themeTags) {\r\n        const axisFill = this.axisFills.make();\r\n        axisFill._setDataItem(dataItem);\r\n        axisFill.set(\"themeTags\", $utils.mergeTags(axisFill.get(\"themeTags\"), themeTags));\r\n        this.axis.gridContainer.children.push(axisFill);\r\n        dataItem.setRaw(\"axisFill\", axisFill);\r\n        this.axisFills.push(axisFill);\r\n        return axisFill;\r\n    }\r\n    /**\r\n     * @ignore\r\n     */\r\n    makeLabel(dataItem, themeTags) {\r\n        const label = this.labels.make();\r\n        label.set(\"themeTags\", $utils.mergeTags(label.get(\"themeTags\"), themeTags));\r\n        this.axis.labelsContainer.children.moveValue(label, 0);\r\n        label._setDataItem(dataItem);\r\n        dataItem.setRaw(\"label\", label);\r\n        this.labels.push(label);\r\n        return label;\r\n    }\r\n    axisLength() {\r\n        return 0;\r\n    }\r\n    /**\r\n     * @ignore\r\n     */\r\n    gridCount() {\r\n        return this.axisLength() / this.get(\"minGridDistance\", 50);\r\n    }\r\n    _updatePositions() {\r\n    }\r\n    _afterNew() {\r\n        super._afterNew();\r\n        this.set(\"isMeasured\", false);\r\n        const thumb = this.thumb;\r\n        if (thumb) {\r\n            this._disposers.push(thumb.events.on(\"pointerdown\", (event) => {\r\n                this._handleThumbDown(event);\r\n            }));\r\n            this._disposers.push(thumb.events.on(\"globalpointerup\", (event) => {\r\n                this._handleThumbUp(event);\r\n            }));\r\n            this._disposers.push(thumb.events.on(\"globalpointermove\", (event) => {\r\n                this._handleThumbMove(event);\r\n            }));\r\n        }\r\n    }\r\n    _beforeChanged() {\r\n        super._beforeChanged();\r\n        if (this.isDirty(\"minGridDistance\")) {\r\n            this.root.events.once(\"frameended\", () => {\r\n                this.axis.markDirtySize();\r\n            });\r\n        }\r\n    }\r\n    _changed() {\r\n        super._changed();\r\n        if (this.isDirty(\"pan\")) {\r\n            const thumb = this.thumb;\r\n            if (thumb) {\r\n                const labelsContainer = this.axis.labelsContainer;\r\n                const pan = this.get(\"pan\");\r\n                if (pan == \"zoom\") {\r\n                    labelsContainer.children.push(thumb);\r\n                }\r\n                else if (pan == \"none\") {\r\n                    labelsContainer.children.removeValue(thumb);\r\n                }\r\n            }\r\n        }\r\n    }\r\n    _handleThumbDown(event) {\r\n        this._thumbDownPoint = this.toLocal(event.point);\r\n        const axis = this.axis;\r\n        this._downStart = axis.get(\"start\");\r\n        this._downEnd = axis.get(\"end\");\r\n    }\r\n    _handleThumbUp(_event) {\r\n        this._thumbDownPoint = undefined;\r\n    }\r\n    _handleThumbMove(event) {\r\n        const downPoint = this._thumbDownPoint;\r\n        if (downPoint) {\r\n            const point = this.toLocal(event.point);\r\n            const downStart = this._downStart;\r\n            const downEnd = this._downEnd;\r\n            const extra = this._getPan(point, downPoint) * Math.min(1, (downEnd - downStart)) / 2;\r\n            this.axis.zoom(downStart - extra, downEnd + extra, 0);\r\n        }\r\n    }\r\n    _getPan(_point1, _point2) {\r\n        return 0;\r\n    }\r\n    /**\r\n     * Converts relative position (0-1) on axis to a pixel coordinate.\r\n     *\r\n     * @param position  Position (0-1)\r\n     * @return Coordinate (px)\r\n     */\r\n    positionToCoordinate(position) {\r\n        if (this._inversed) {\r\n            return (this._end - position) * this._axisLength;\r\n        }\r\n        else {\r\n            return (position - this._start) * this._axisLength;\r\n        }\r\n    }\r\n    /**\r\n     * @ignore\r\n     */\r\n    updateTooltipBounds(_tooltip) { }\r\n    _updateSize() {\r\n        this.markDirty();\r\n        this._clear = true;\r\n    }\r\n    /**\r\n     * @ignore\r\n     */\r\n    toAxisPosition(position) {\r\n        const start = this._start || 0;\r\n        const end = this._end || 1;\r\n        position = position * (end - start);\r\n        if (!this.get(\"inversed\")) {\r\n            position = start + position;\r\n        }\r\n        else {\r\n            position = end - position;\r\n        }\r\n        return position;\r\n    }\r\n    /**\r\n     * @ignore\r\n     */\r\n    toGlobalPosition(position) {\r\n        const start = this._start || 0;\r\n        const end = this._end || 1;\r\n        if (!this.get(\"inversed\")) {\r\n            position = position - start;\r\n        }\r\n        else {\r\n            position = end - position;\r\n        }\r\n        position = position / (end - start);\r\n        return position;\r\n    }\r\n    /**\r\n     * @ignore\r\n     */\r\n    fixPosition(position) {\r\n        if (this.get(\"inversed\")) {\r\n            return 1 - position;\r\n        }\r\n        return position;\r\n    }\r\n    /**\r\n     * @ignore\r\n     */\r\n    _updateLC() {\r\n    }\r\n    toggleVisibility(sprite, position, minPosition, maxPosition) {\r\n        let axis = this.axis;\r\n        const start = axis.get(\"start\", 0);\r\n        const end = axis.get(\"end\", 1);\r\n        let updatedStart = start + (end - start) * (minPosition - 0.0001);\r\n        let updatedEnd = start + (end - start) * (maxPosition + 0.0001);\r\n        if (position < updatedStart || position > updatedEnd) {\r\n            sprite.setPrivate(\"visible\", false);\r\n        }\r\n        else {\r\n            sprite.setPrivate(\"visible\", true);\r\n        }\r\n    }\r\n    _positionTooltip(tooltip, point) {\r\n        const chart = this.chart;\r\n        if (chart) {\r\n            tooltip.set(\"pointTo\", this._display.toGlobal(point));\r\n            if (!chart.inPlot(point)) {\r\n                tooltip.hide();\r\n            }\r\n        }\r\n    }\r\n    processAxis() { }\r\n}\r\nObject.defineProperty(AxisRenderer, \"className\", {\r\n    enumerable: true,\r\n    configurable: true,\r\n    writable: true,\r\n    value: \"AxisRenderer\"\r\n});\r\nObject.defineProperty(AxisRenderer, \"classNames\", {\r\n    enumerable: true,\r\n    configurable: true,\r\n    writable: true,\r\n    value: Graphics.classNames.concat([AxisRenderer.className])\r\n});\r\n//# sourceMappingURL=AxisRenderer.js.map","import { Slice } from \"../../core/render/Slice\";\r\nimport { AxisRenderer } from \"../xy/axes/AxisRenderer\";\r\nimport { AxisLabelRadial } from \"../xy/axes/AxisLabelRadial\";\r\nimport { p100 } from \"../../core/util/Percent\";\r\nimport { ListTemplate } from \"../../core/util/List\";\r\nimport { Template } from \"../../core/util/Template\";\r\nimport { arc } from \"d3-shape\";\r\nimport * as $utils from \"../../core/util/Utils\";\r\nimport * as $math from \"../../core/util/Math\";\r\n/**\r\n * Renderer for circular axes.\r\n */\r\nexport class AxisRendererCircular extends AxisRenderer {\r\n    constructor() {\r\n        super(...arguments);\r\n        /**\r\n         * A list of labels in the axis.\r\n         *\r\n         * `labels.template` can be used to configure labels.\r\n         *\r\n         * @default new ListTemplate<AxisLabelRadial>\r\n         */\r\n        Object.defineProperty(this, \"labels\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: new ListTemplate(Template.new({}), () => AxisLabelRadial._new(this._root, {\r\n                themeTags: $utils.mergeTags(this.labels.template.get(\"themeTags\", []), this.get(\"themeTags\", []))\r\n            }, [this.labels.template]))\r\n        });\r\n        /**\r\n         * A list of fills in the axis.\r\n         *\r\n         * `axisFills.template` can be used to configure axis fills.\r\n         *\r\n         * @default new ListTemplate<Slice>\r\n         */\r\n        Object.defineProperty(this, \"axisFills\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: new ListTemplate(Template.new({}), () => Slice._new(this._root, {\r\n                themeTags: $utils.mergeTags(this.axisFills.template.get(\"themeTags\", [\"fill\"]), this.get(\"themeTags\", []))\r\n            }, [this.axisFills.template]))\r\n        });\r\n        Object.defineProperty(this, \"_fillGenerator\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: arc()\r\n        });\r\n    }\r\n    _afterNew() {\r\n        this._settings.themeTags = $utils.mergeTags(this._settings.themeTags, [\"renderer\", \"circular\"]);\r\n        super._afterNew();\r\n        this.setPrivateRaw(\"letter\", \"X\");\r\n        this.setRaw(\"position\", \"absolute\");\r\n    }\r\n    _changed() {\r\n        super._changed();\r\n        if (this.isDirty(\"radius\") || this.isDirty(\"innerRadius\") || this.isDirty(\"startAngle\") || this.isDirty(\"endAngle\")) {\r\n            this.updateLayout();\r\n        }\r\n    }\r\n    /**\r\n     * @ignore\r\n     */\r\n    processAxis() {\r\n        super.processAxis();\r\n        const axis = this.axis;\r\n        axis.labelsContainer.set(\"isMeasured\", false);\r\n    }\r\n    /**\r\n     * @ignore\r\n     */\r\n    updateLayout() {\r\n        const chart = this.chart;\r\n        if (chart) {\r\n            const radius = chart.getPrivate(\"radius\", 0);\r\n            let r = $utils.relativeToValue(this.get(\"radius\", p100), radius);\r\n            if (r < 0) {\r\n                r = radius + r;\r\n            }\r\n            this.setPrivate(\"radius\", r);\r\n            let ir = $utils.relativeToValue(this.get(\"innerRadius\", chart.getPrivate(\"innerRadius\", 0)), radius) * chart.getPrivate(\"irModifyer\", 1);\r\n            if (ir < 0) {\r\n                ir = r + ir;\r\n            }\r\n            this.setPrivate(\"innerRadius\", ir);\r\n            let startAngle = this.get(\"startAngle\", chart.get(\"startAngle\", -90));\r\n            let endAngle = this.get(\"endAngle\", chart.get(\"endAngle\", 270));\r\n            this.setPrivate(\"startAngle\", startAngle);\r\n            this.setPrivate(\"endAngle\", endAngle);\r\n            this.set(\"draw\", (display) => {\r\n                const p0 = this.positionToPoint(0);\r\n                display.moveTo(p0.x, p0.y);\r\n                if (startAngle > endAngle) {\r\n                    [startAngle, endAngle] = [endAngle, startAngle];\r\n                }\r\n                display.arc(0, 0, r, startAngle * $math.RADIANS, endAngle * $math.RADIANS);\r\n            });\r\n            this.axis.markDirtySize();\r\n        }\r\n    }\r\n    /**\r\n     * @ignore\r\n     */\r\n    updateGrid(grid, position, endPosition) {\r\n        if (grid) {\r\n            if (position == null) {\r\n                position = 0;\r\n            }\r\n            let location = grid.get(\"location\", 0.5);\r\n            if (endPosition != null && endPosition != position) {\r\n                position = position + (endPosition - position) * location;\r\n            }\r\n            let radius = this.getPrivate(\"radius\", 0);\r\n            let innerRadius = this.getPrivate(\"innerRadius\", 0);\r\n            let angle = this.positionToAngle(position);\r\n            this.toggleVisibility(grid, position, 0, 1);\r\n            if (radius != null) {\r\n                grid.set(\"draw\", (display) => {\r\n                    display.moveTo(innerRadius * $math.cos(angle), innerRadius * $math.sin(angle));\r\n                    display.lineTo(radius * $math.cos(angle), radius * $math.sin(angle));\r\n                });\r\n            }\r\n        }\r\n    }\r\n    /**\r\n     * Converts relative position to angle.\r\n     *\r\n     * @param   position  Position\r\n     * @return            Angle\r\n     */\r\n    positionToAngle(position) {\r\n        const axis = this.axis;\r\n        const startAngle = this.getPrivate(\"startAngle\", 0);\r\n        const endAngle = this.getPrivate(\"endAngle\", 360);\r\n        const start = axis.get(\"start\", 0);\r\n        const end = axis.get(\"end\", 1);\r\n        let arc = (endAngle - startAngle) / (end - start);\r\n        let angle;\r\n        if (this.get(\"inversed\")) {\r\n            angle = startAngle + (end - position) * arc;\r\n        }\r\n        else {\r\n            angle = startAngle + (position - start) * arc;\r\n        }\r\n        return angle;\r\n    }\r\n    // do not delete\r\n    _handleOpposite() { }\r\n    /**\r\n     * Converts relative position to an X/Y coordinate.\r\n     *\r\n     * @param   position  Position\r\n     * @return            Point\r\n     */\r\n    positionToPoint(position) {\r\n        const radius = this.getPrivate(\"radius\", 0);\r\n        const angle = this.positionToAngle(position);\r\n        return { x: radius * $math.cos(angle), y: radius * $math.sin(angle) };\r\n    }\r\n    /**\r\n     * @ignore\r\n     */\r\n    updateLabel(label, position, endPosition, count) {\r\n        if (label) {\r\n            if (position == null) {\r\n                position = 0;\r\n            }\r\n            let location = 0.5;\r\n            if (count != null && count > 1) {\r\n                location = label.get(\"multiLocation\", location);\r\n            }\r\n            else {\r\n                location = label.get(\"location\", location);\r\n            }\r\n            if (endPosition != null && endPosition != position) {\r\n                position = position + (endPosition - position) * location;\r\n            }\r\n            const radius = this.getPrivate(\"radius\", 0);\r\n            const innerRadius = this.getPrivate(\"innerRadius\", 0);\r\n            const angle = this.positionToAngle(position);\r\n            label.setPrivate(\"radius\", radius);\r\n            label.setPrivate(\"innerRadius\", innerRadius);\r\n            label.set(\"labelAngle\", angle);\r\n            this.toggleVisibility(label, position, label.get(\"minPosition\", 0), label.get(\"maxPosition\", 1));\r\n        }\r\n    }\r\n    /**\r\n     * @ignore\r\n     */\r\n    fillDrawMethod(fill, startAngle, endAngle) {\r\n        fill.set(\"draw\", (display) => {\r\n            if (startAngle == null) {\r\n                startAngle = this.getPrivate(\"startAngle\", 0);\r\n            }\r\n            if (endAngle == null) {\r\n                endAngle = this.getPrivate(\"endAngle\", 0);\r\n            }\r\n            const y0 = this.getPrivate(\"innerRadius\", 0);\r\n            const y1 = this.getPrivate(\"radius\", 0);\r\n            this._fillGenerator.context(display);\r\n            this._fillGenerator({ innerRadius: y0, outerRadius: y1, startAngle: (startAngle + 90) * $math.RADIANS, endAngle: (endAngle + 90) * $math.RADIANS });\r\n        });\r\n    }\r\n    /**\r\n     * @ignore\r\n     */\r\n    updateTick(tick, position, endPosition, count) {\r\n        if (tick) {\r\n            if (position == null) {\r\n                position = 0;\r\n            }\r\n            let location = 0.5;\r\n            if (count != null && count > 1) {\r\n                location = tick.get(\"multiLocation\", location);\r\n            }\r\n            else {\r\n                location = tick.get(\"location\", location);\r\n            }\r\n            if (endPosition != null && endPosition != position) {\r\n                position = position + (endPosition - position) * location;\r\n            }\r\n            let length = tick.get(\"length\", 0);\r\n            const inside = tick.get(\"inside\");\r\n            if (inside) {\r\n                length *= -1;\r\n            }\r\n            let radius = this.getPrivate(\"radius\", 0);\r\n            let angle = this.positionToAngle(position);\r\n            this.toggleVisibility(tick, position, tick.get(\"minPosition\", 0), tick.get(\"maxPosition\", 1));\r\n            if (radius != null) {\r\n                tick.set(\"draw\", (display) => {\r\n                    display.moveTo(radius * $math.cos(angle), radius * $math.sin(angle));\r\n                    radius += length;\r\n                    display.lineTo(radius * $math.cos(angle), radius * $math.sin(angle));\r\n                });\r\n            }\r\n        }\r\n    }\r\n    /**\r\n     * @ignore\r\n     */\r\n    updateBullet(bullet, position, endPosition) {\r\n        if (bullet) {\r\n            const sprite = bullet.get(\"sprite\");\r\n            if (sprite) {\r\n                if (position == null) {\r\n                    position = 0;\r\n                }\r\n                let location = bullet.get(\"location\", 0.5);\r\n                if (endPosition != null && endPosition != position) {\r\n                    position = position + (endPosition - position) * location;\r\n                }\r\n                let radius = this.getPrivate(\"radius\", 0);\r\n                let angle = this.positionToAngle(position);\r\n                this.toggleVisibility(sprite, position, 0, 1);\r\n                sprite.setAll({ rotation: angle, x: radius * $math.cos(angle), y: radius * $math.sin(angle) });\r\n            }\r\n        }\r\n    }\r\n    /**\r\n     * @ignore\r\n     */\r\n    updateFill(fill, position, endPosition) {\r\n        if (fill) {\r\n            if (position == null) {\r\n                position = 0;\r\n            }\r\n            if (endPosition == null) {\r\n                endPosition = 1;\r\n            }\r\n            let startAngle = this.fitAngle(this.positionToAngle(position));\r\n            let endAngle = this.fitAngle(this.positionToAngle(endPosition));\r\n            fill.setAll({ startAngle: startAngle, arc: endAngle - startAngle });\r\n            fill._setSoft(\"innerRadius\", this.getPrivate(\"innerRadius\"));\r\n            fill._setSoft(\"radius\", this.getPrivate(\"radius\"));\r\n        }\r\n    }\r\n    /**\r\n     * @ignore\r\n     */\r\n    fitAngle(angle) {\r\n        const startAngle = this.getPrivate(\"startAngle\", 0);\r\n        const endAngle = this.getPrivate(\"endAngle\", 0);\r\n        const minAngle = Math.min(startAngle, endAngle);\r\n        const maxAngle = Math.max(startAngle, endAngle);\r\n        if (angle < minAngle) {\r\n            angle = minAngle;\r\n        }\r\n        if (angle > maxAngle) {\r\n            angle = maxAngle;\r\n        }\r\n        return angle;\r\n    }\r\n    /**\r\n     * Returns axis length in pixels.\r\n     *\r\n     * @return Length\r\n     */\r\n    axisLength() {\r\n        return Math.abs(this.getPrivate(\"radius\", 0) * Math.PI * 2 * (this.getPrivate(\"endAngle\", 360) - this.getPrivate(\"startAngle\", 0)) / 360);\r\n    }\r\n    /**\r\n     * @ignore\r\n     */\r\n    positionTooltip(tooltip, position) {\r\n        let radius = this.getPrivate(\"radius\", 0);\r\n        const angle = this.positionToAngle(position);\r\n        //return tooltip.set(\"pointTo\", this.axis._display.toGlobal({ x: radius * $math.cos(angle), y: radius * $math.sin(angle) }));\r\n        this._positionTooltip(tooltip, { x: radius * $math.cos(angle), y: radius * $math.sin(angle) });\r\n    }\r\n    /**\r\n     * @ignore\r\n     */\r\n    updateTooltipBounds(_tooltip) {\r\n    }\r\n}\r\nObject.defineProperty(AxisRendererCircular, \"className\", {\r\n    enumerable: true,\r\n    configurable: true,\r\n    writable: true,\r\n    value: \"AxisRendererCircular\"\r\n});\r\nObject.defineProperty(AxisRendererCircular, \"classNames\", {\r\n    enumerable: true,\r\n    configurable: true,\r\n    writable: true,\r\n    value: AxisRenderer.classNames.concat([AxisRendererCircular.className])\r\n});\r\n//# sourceMappingURL=AxisRendererCircular.js.map","import { Container } from \"../../core/render/Container\";\r\nimport { Graphics } from \"../../core/render/Graphics\";\r\nimport { Percent, percent } from \"../../core/util/Percent\";\r\nimport * as $utils from \"../../core/util/Utils\";\r\n/**\r\n * A clock hand for use with [[RadarChart]].\r\n *\r\n * @see {@link https://www.amcharts.com/docs/v5/charts/radar-chart/gauge-charts/#Clock_hands} for more info\r\n * @important\r\n */\r\nexport class ClockHand extends Container {\r\n    constructor() {\r\n        super(...arguments);\r\n        /**\r\n         * A \"hand\" element.\r\n         *\r\n         * @default Graphics.new()\r\n         */\r\n        Object.defineProperty(this, \"hand\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: this.children.push(Graphics.new(this._root, { themeTags: [\"hand\"] }))\r\n        });\r\n        /**\r\n         * A \"pin\" element (hand's base).\r\n         *\r\n         * @default Graphics.new()\r\n         */\r\n        Object.defineProperty(this, \"pin\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: this.children.push(Graphics.new(this._root, { themeTags: [\"pin\"] }))\r\n        });\r\n    }\r\n    _afterNew() {\r\n        this._settings.themeTags = $utils.mergeTags(this._settings.themeTags, [\"clock\"]);\r\n        super._afterNew();\r\n        // to be redrawn when size changes\r\n        this.set(\"width\", percent(1));\r\n        this.adapters.add(\"x\", () => {\r\n            return 0;\r\n        });\r\n        this.adapters.add(\"y\", () => {\r\n            return 0;\r\n        });\r\n        this.pin.set(\"draw\", (display, graphics) => {\r\n            const parent = graphics.parent;\r\n            if (parent) {\r\n                const dataItem = parent.dataItem;\r\n                if (dataItem) {\r\n                    const axis = dataItem.component;\r\n                    if (axis) {\r\n                        const chart = axis.chart;\r\n                        if (chart) {\r\n                            const cr = chart.getPrivate(\"radius\", 0);\r\n                            let r = $utils.relativeToValue(parent.get(\"pinRadius\", 0), cr);\r\n                            if (r < 0) {\r\n                                r = cr + r;\r\n                            }\r\n                            display.moveTo(r, 0);\r\n                            display.arc(0, 0, r, 0, 360);\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        });\r\n        this.hand.set(\"draw\", (display, graphics) => {\r\n            const parent = graphics.parent;\r\n            if (parent) {\r\n                let bullet = parent.parent;\r\n                // to be redrawn when size changes\r\n                if (bullet) {\r\n                    bullet.set(\"width\", percent(1));\r\n                }\r\n                const dataItem = parent.dataItem;\r\n                if (dataItem) {\r\n                    const axis = dataItem.component;\r\n                    if (axis) {\r\n                        const chart = axis.chart;\r\n                        if (chart) {\r\n                            const bw = parent.get(\"bottomWidth\", 10) / 2;\r\n                            const tw = parent.get(\"topWidth\", 0) / 2;\r\n                            const cr = chart.getPrivate(\"radius\", 0);\r\n                            let r = $utils.relativeToValue(parent.get(\"radius\", 0), cr);\r\n                            if (r < 0) {\r\n                                r = cr + r;\r\n                            }\r\n                            let ir = parent.get(\"innerRadius\", 0);\r\n                            if (ir instanceof Percent) {\r\n                                ir = $utils.relativeToValue(ir, cr);\r\n                            }\r\n                            else {\r\n                                if (ir < 0) {\r\n                                    if (ir < 0) {\r\n                                        ir = r + ir;\r\n                                    }\r\n                                }\r\n                            }\r\n                            display.moveTo(ir, -bw);\r\n                            display.lineTo(r, -tw);\r\n                            display.lineTo(r, tw);\r\n                            display.lineTo(ir, bw);\r\n                            display.lineTo(ir, -bw);\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        });\r\n    }\r\n    _prepareChildren() {\r\n        super._prepareChildren();\r\n        this.hand._markDirtyKey(\"fill\");\r\n        this.pin._markDirtyKey(\"fill\");\r\n    }\r\n}\r\nObject.defineProperty(ClockHand, \"className\", {\r\n    enumerable: true,\r\n    configurable: true,\r\n    writable: true,\r\n    value: \"ClockHand\"\r\n});\r\nObject.defineProperty(ClockHand, \"classNames\", {\r\n    enumerable: true,\r\n    configurable: true,\r\n    writable: true,\r\n    value: Container.classNames.concat([ClockHand.className])\r\n});\r\n//# sourceMappingURL=ClockHand.js.map","import { Theme } from \"../../core/Theme\";\r\nimport { percent } from \"../../core/util/Percent\";\r\nimport { setColor } from \"../../themes/DefaultTheme\";\r\n/**\r\n * @ignore\r\n */\r\nexport class RadarDefaultTheme extends Theme {\r\n    setupDefaultRules() {\r\n        super.setupDefaultRules();\r\n        const r = this.rule.bind(this);\r\n        const ic = this._root.interfaceColors;\r\n        /**\r\n         * ========================================================================\r\n         * charts/radar\r\n         * ========================================================================\r\n         */\r\n        r(\"RadarChart\").setAll({\r\n            radius: percent(80),\r\n            innerRadius: 0,\r\n            startAngle: -90,\r\n            endAngle: 270\r\n        });\r\n        r(\"RadarColumnSeries\").setAll({\r\n            clustered: true\r\n        });\r\n        r(\"Slice\", [\"radar\", \"column\", \"series\"]).setAll({\r\n            width: percent(80),\r\n            height: percent(80)\r\n        });\r\n        r(\"RadarLineSeries\").setAll({\r\n            connectEnds: true\r\n        });\r\n        r(\"SmoothedRadarLineSeries\").setAll({\r\n            tension: 0.5\r\n        });\r\n        r(\"AxisRendererRadial\").setAll({\r\n            minGridDistance: 40,\r\n            axisAngle: -90,\r\n            inversed: false,\r\n            cellStartLocation: 0,\r\n            cellEndLocation: 1\r\n        });\r\n        r(\"AxisRendererCircular\").setAll({\r\n            minGridDistance: 100,\r\n            inversed: false,\r\n            cellStartLocation: 0,\r\n            cellEndLocation: 1\r\n        });\r\n        r(\"RadialLabel\", [\"circular\"]).setAll({\r\n            textType: \"circular\",\r\n            paddingTop: 1,\r\n            paddingRight: 0,\r\n            paddingBottom: 1,\r\n            paddingLeft: 0,\r\n            centerX: 0,\r\n            centerY: 0,\r\n            radius: 8\r\n        });\r\n        r(\"AxisLabelRadial\", [\"category\"]).setAll({\r\n            text: \"{category}\",\r\n            populateText: true\r\n        });\r\n        r(\"RadialLabel\", [\"radial\"]).setAll({\r\n            textType: \"regular\",\r\n            centerX: 0,\r\n            textAlign: \"right\"\r\n        });\r\n        r(\"RadarChart\", [\"gauge\"]).setAll({\r\n            startAngle: 180,\r\n            endAngle: 360,\r\n            innerRadius: percent(90)\r\n        });\r\n        r(\"ClockHand\").setAll({\r\n            topWidth: 1,\r\n            bottomWidth: 10,\r\n            radius: percent(90),\r\n            pinRadius: 10\r\n        });\r\n        {\r\n            const rule = r(\"Graphics\", [\"clock\", \"hand\"]);\r\n            rule.setAll({\r\n                fillOpacity: 1\r\n            });\r\n            setColor(rule, \"fill\", ic, \"alternativeBackground\");\r\n        }\r\n        {\r\n            const rule = r(\"Graphics\", [\"clock\", \"pin\"]);\r\n            rule.setAll({\r\n                fillOpacity: 1\r\n            });\r\n            setColor(rule, \"fill\", ic, \"alternativeBackground\");\r\n        }\r\n    }\r\n}\r\n//# sourceMappingURL=RadarDefaultTheme.js.map","import { RadarDefaultTheme } from \"./RadarDefaultTheme\";\r\nimport { XYChart } from \"../xy/XYChart\";\r\nimport { Percent, p50, percent } from \"../../core/util/Percent\";\r\nimport { Container } from \"../../core/render/Container\";\r\nimport { Graphics } from \"../../core/render/Graphics\";\r\nimport { arc } from \"d3-shape\";\r\nimport * as $utils from \"../../core/util/Utils\";\r\nimport * as $math from \"../../core/util/Math\";\r\n/**\r\n * Radar chart.\r\n *\r\n * @see {@link https://www.amcharts.com/docs/v5/charts/radar-chart/} for more info\r\n * @important\r\n */\r\nexport class RadarChart extends XYChart {\r\n    constructor() {\r\n        super(...arguments);\r\n        /**\r\n         * [[Container]] where radar-related elements go.\r\n         *\r\n         * @default Container.new()\r\n         */\r\n        Object.defineProperty(this, \"radarContainer\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: this.plotContainer.children.push(Container.new(this._root, { x: p50, y: p50 }))\r\n        });\r\n        Object.defineProperty(this, \"_arcGenerator\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: arc()\r\n        });\r\n        Object.defineProperty(this, \"_maxRadius\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: 1\r\n        });\r\n    }\r\n    _afterNew() {\r\n        this._defaultThemes.push(RadarDefaultTheme.new(this._root));\r\n        super._afterNew();\r\n        const radarContainer = this.radarContainer;\r\n        const gridContainer = this.gridContainer;\r\n        const topGridContainer = this.topGridContainer;\r\n        const seriesContainer = this.seriesContainer;\r\n        const bulletsContainer = this.bulletsContainer;\r\n        radarContainer.children.pushAll([gridContainer, seriesContainer, topGridContainer, bulletsContainer]);\r\n        seriesContainer.set(\"mask\", Graphics.new(this._root, {}));\r\n        gridContainer.set(\"mask\", Graphics.new(this._root, {}));\r\n        this._disposers.push(this.plotContainer.events.on(\"boundschanged\", () => {\r\n            this._updateRadius();\r\n        }));\r\n    }\r\n    _maskGrid() {\r\n    }\r\n    _prepareChildren() {\r\n        super._prepareChildren();\r\n        if (this._sizeDirty || this.isDirty(\"radius\") || this.isDirty(\"innerRadius\") || this.isDirty(\"startAngle\") || this.isDirty(\"endAngle\")) {\r\n            const chartContainer = this.chartContainer;\r\n            const w = chartContainer.innerWidth();\r\n            const h = chartContainer.innerHeight();\r\n            const startAngle = this.get(\"startAngle\", 0);\r\n            const endAngle = this.get(\"endAngle\", 0);\r\n            const innerRadius = this.get(\"innerRadius\");\r\n            let bounds = $math.getArcBounds(0, 0, startAngle, endAngle, 1);\r\n            const wr = w / (bounds.right - bounds.left);\r\n            const hr = h / (bounds.bottom - bounds.top);\r\n            let innerBounds = { left: 0, right: 0, top: 0, bottom: 0 };\r\n            if (innerRadius instanceof Percent) {\r\n                let value = innerRadius.value;\r\n                let mr = Math.min(wr, hr);\r\n                value = Math.max(mr * value, mr - Math.min(h, w)) / mr;\r\n                innerBounds = $math.getArcBounds(0, 0, startAngle, endAngle, value);\r\n                this.setPrivateRaw(\"irModifyer\", value / innerRadius.value);\r\n            }\r\n            bounds = $math.mergeBounds([bounds, innerBounds]);\r\n            this._maxRadius = Math.max(0, Math.min(wr, hr));\r\n            const radius = $utils.relativeToValue(this.get(\"radius\", 0), this._maxRadius);\r\n            this.radarContainer.setAll({\r\n                dy: -radius * (bounds.bottom + bounds.top) / 2, dx: -radius * (bounds.right + bounds.left) / 2\r\n            });\r\n            this._updateRadius();\r\n        }\r\n    }\r\n    _addCursor(cursor) {\r\n        this.radarContainer.children.push(cursor);\r\n    }\r\n    // do not delete\r\n    _updateRadius() {\r\n        const radius = $utils.relativeToValue(this.get(\"radius\", percent(80)), this._maxRadius);\r\n        this.setPrivateRaw(\"radius\", radius);\r\n        let innerRadius = $utils.relativeToValue(this.get(\"innerRadius\", 0), radius);\r\n        if (innerRadius < 0) {\r\n            innerRadius = radius + innerRadius;\r\n        }\r\n        this.setPrivateRaw(\"innerRadius\", innerRadius);\r\n        this.xAxes.each((axis) => {\r\n            const renderer = axis.get(\"renderer\");\r\n            renderer.updateLayout();\r\n        });\r\n        this.yAxes.each((axis) => {\r\n            const renderer = axis.get(\"renderer\");\r\n            renderer.updateLayout();\r\n        });\r\n        this._updateMask(this.seriesContainer, innerRadius, radius);\r\n        this._updateMask(this.gridContainer, innerRadius, radius);\r\n        this.series.each((series) => {\r\n            if (series.get(\"maskBullets\")) {\r\n                this._updateMask(series.bulletsContainer, innerRadius, radius);\r\n            }\r\n            else {\r\n                series.bulletsContainer.remove(\"mask\");\r\n            }\r\n        });\r\n        const cursor = this.get(\"cursor\");\r\n        if (cursor) {\r\n            cursor.updateLayout();\r\n        }\r\n    }\r\n    /**\r\n     * @ignore\r\n     */\r\n    _updateMask(container, innerRadius, radius) {\r\n        const mask = container.get(\"mask\");\r\n        if (mask) {\r\n            mask.set(\"draw\", (display) => {\r\n                this._arcGenerator.context(display);\r\n                this._arcGenerator({ innerRadius: innerRadius, outerRadius: radius + .5, startAngle: (this.get(\"startAngle\", 0) + 90) * $math.RADIANS, endAngle: (this.get(\"endAngle\", 0) + 90) * $math.RADIANS });\r\n            });\r\n        }\r\n    }\r\n    /**\r\n     * @ignore\r\n     */\r\n    processAxis(axis) {\r\n        this.radarContainer.children.push(axis);\r\n    }\r\n    /**\r\n     * @ignore\r\n     */\r\n    inPlot(point, radius, innerRadius) {\r\n        const r = Math.hypot(point.x, point.y);\r\n        const angle = $math.normalizeAngle(Math.atan2(point.y, point.x) * $math.DEGREES);\r\n        let startAngle = $math.normalizeAngle(this.get(\"startAngle\", 0));\r\n        let endAngle = $math.normalizeAngle(this.get(\"endAngle\", 0));\r\n        let inArc = false;\r\n        if (startAngle < endAngle) {\r\n            if (startAngle < angle && angle < endAngle) {\r\n                inArc = true;\r\n            }\r\n        }\r\n        if (startAngle > endAngle) {\r\n            if (angle > startAngle) {\r\n                inArc = true;\r\n            }\r\n            if (angle < endAngle) {\r\n                inArc = true;\r\n            }\r\n        }\r\n        if (startAngle == endAngle) {\r\n            inArc = true;\r\n        }\r\n        if (!inArc) {\r\n            return false;\r\n        }\r\n        if (radius == null) {\r\n            radius = this.getPrivate(\"radius\", 0);\r\n        }\r\n        if (innerRadius == null) {\r\n            innerRadius = this.getPrivate(\"innerRadius\", 0);\r\n        }\r\n        if (innerRadius > radius) {\r\n            [innerRadius, radius] = [radius, innerRadius];\r\n        }\r\n        if (r <= radius + .5 && r >= innerRadius - .5) {\r\n            return true;\r\n        }\r\n        return false;\r\n    }\r\n    _tooltipToLocal(point) {\r\n        return this.radarContainer._display.toLocal(point);\r\n    }\r\n    _handlePinch() {\r\n    }\r\n}\r\nObject.defineProperty(RadarChart, \"className\", {\r\n    enumerable: true,\r\n    configurable: true,\r\n    writable: true,\r\n    value: \"RadarChart\"\r\n});\r\nObject.defineProperty(RadarChart, \"classNames\", {\r\n    enumerable: true,\r\n    configurable: true,\r\n    writable: true,\r\n    value: XYChart.classNames.concat([RadarChart.className])\r\n});\r\n//# sourceMappingURL=RadarChart.js.map","import { Theme } from \"../core/Theme\";\r\n/**\r\n * @ignore\r\n */\r\nexport class AnimatedTheme extends Theme {\r\n    setupDefaultRules() {\r\n        super.setupDefaultRules();\r\n        this.rule(\"Component\").setAll({\r\n            interpolationDuration: 600\r\n        });\r\n        this.rule(\"Hierarchy\").set(\"animationDuration\", 600);\r\n        this.rule(\"Scrollbar\").set(\"animationDuration\", 600);\r\n        this.rule(\"Tooltip\").set(\"animationDuration\", 300);\r\n        this.rule(\"MapChart\").set(\"animationDuration\", 1000);\r\n        this.rule(\"MapChart\").set(\"wheelDuration\", 300);\r\n        this.rule(\"Entity\").setAll({\r\n            stateAnimationDuration: 600\r\n        });\r\n        this.rule(\"Sprite\").states.create(\"default\", { stateAnimationDuration: 600 });\r\n        this.rule(\"Tooltip\", [\"axis\"]).setAll({\r\n            animationDuration: 200\r\n        });\r\n        this.rule(\"WordCloud\").set(\"animationDuration\", 500);\r\n        this.rule(\"Polygon\").set(\"animationDuration\", 600);\r\n        this.rule(\"ArcDiagram\").set(\"animationDuration\", 600);\r\n    }\r\n}\r\n//# sourceMappingURL=AnimatedTheme.js.map","<script>\n    import { onMount } from \"svelte\";\n    import * as am5 from \"@amcharts/amcharts5\";\n    import * as am5xy from \"@amcharts/amcharts5/xy\";\n    import * as am5radar from \"@amcharts/amcharts5/radar\";\n    import am5themes_Animated from \"@amcharts/amcharts5/themes/Animated\";\n\n    export let demLead;\n\n    const colors = {\n        dem: {\n            main: \"#00f\",\n            secondary: \"#bbf\",\n            light: \"#e8e8ff\",\n        },\n        rep: {\n            main: \"#d00\",\n            secondary: \"#fbb\",\n            light: \"#ffe8e8\",\n        },\n    };\n\n    let lead_color = '#aaa';\n    let lead_bg_color = '#ddd';\n\n    if (demLead >= 0.02) {\n        lead_color = colors.dem.main\n        lead_bg_color = colors.dem.secondary\n    } else if (demLead >= 0) {\n        lead_color = colors.dem.main\n        lead_bg_color = colors.dem.light\n    } else if (demLead <= -0.02) {\n        lead_color = colors.rep.main;\n        lead_bg_color = colors.rep.light;\n    } else if (demLead <= -0) {\n        lead_color = colors.rep.main\n        lead_bg_color = colors.rep.secondary\n    } \n\n    let chartdiv;\n\n    onMount(() => {\n        // Create root element\n        let root = am5.Root.new(chartdiv);\n\n        // Set themes\n        root.setThemes([am5themes_Animated.new(root)]);\n\n        // Create chart\n        let chart = root.container.children.push(\n            am5radar.RadarChart.new(root, {\n                panX: false,\n                panY: false,\n                startAngle: 160,\n                endAngle: 380,\n                innerRadius: -20,\n            }),\n        );\n\n        let gradientFill = am5.LinearGradient.new(root, {\n            rotation: 0,\n            stops: [\n                { color: am5.color('#f77'), offset: 0 },\n                { color: am5.color('#eee'), offset: 0.5000 },\n                { color: am5.color('#eee'), offset: 0.7617\n                 },\n                { color: am5.color('#77f'), offset: 1 },\n            ],\n        });\n\n        // Create axis and its renderer\n        let axisRenderer = am5radar.AxisRendererCircular.new(root, {\n            strokeWidth: 30,\n            strokeOpacity: 1,\n            strokeGradient: gradientFill,\n        });\n\n        let xAxis = chart.xAxes.push(\n            am5xy.ValueAxis.new(root, {\n                maxDeviation: 0,\n                min: -15,\n                max: 15,\n                strictMinMax: true,\n                renderer: axisRenderer,\n            }),\n        );\n\n        // Add clock hand\n        let axisDataItem = xAxis.makeDataItem({});\n\n        let clockHand = am5radar.ClockHand.new(root, {\n            pinRadius: am5.percent(45),\n            radius: am5.percent(60),\n            bottomWidth: 60,\n            pinFill: am5.color(lead_bg_color),\n        });\n\n        clockHand.pin.adapters.add(\"fill\", () => am5.color(lead_bg_color));\n        clockHand.hand.adapters.add(\"fill\", () => am5.color(lead_bg_color));\n\n        let bullet = axisDataItem.set(\n            \"bullet\",\n            am5xy.AxisBullet.new(root, {\n                sprite: clockHand,\n            }),\n        );\n\n        xAxis.createAxisRange(axisDataItem);\n\n        let label = chart.radarContainer.children.push(\n            am5.Label.new(root, {\n                fill: am5.color(lead_color),\n                centerX: am5.percent(50),\n                textAlign: \"center\",\n                centerY: am5.percent(50),\n                fontSize: \"1.4rem\",\n            }),\n        );\n\n        // Set the initial value based on the prop\n        axisDataItem.set(\"value\", (demLead * 100).toFixed(1));\n        bullet.get(\"sprite\").on(\"rotation\", function () {\n            let value = axisDataItem.get(\"value\");\n            label.set(\"text\", Math.abs(value).toFixed(1).toString().replace(\".\", \",\"));\n        });\n\n        chart.appear(1000, 100);\n\n        return () => {\n            root.dispose();\n        };\n    });\n</script>\n\n<!-- HTML structure -->\n<div bind:this={chartdiv} style=\"width: 100%; height: 200px\"></div>\n\n<style>\n    :global(.chartdiv) {\n        width: 100%;\n        height: 200px;\n    }\n\n    :global(.am5-layer-30) {\n        display: none;\n    }\n</style>\n","import * as d3 from \"d3\";\n\nexport const colors = {\n    Trump: \"red\",\n    Harris: \"blue\",\n};\n\nlet resizeDebounce = null;\n\nlet screenSizes = {\n    mobile: 500,\n    small: 700,\n};\n\nlet paddingSizes = {\n    mobile: 100,\n    small: 120,\n    large: 150,\n};\n\nlet candidateLabelSizes = {\n    mobile: 1,\n    small: 1.2,\n    large: 1.5,\n}\n\nlet dotSizes = {\n    mobile: 2,\n    small: 3,\n    large: 3,\n}\n\nlet lineWidths = {\n    mobile: 5,\n    small: 7,\n    large: 9,\n}\n\nlet gridLabelSizes = {\n    mobile: 0.65,\n    small: 0.8,\n    large: 0.9,\n}\n\nfunction getScreenSize() {\n    const width = window.innerWidth;\n    for (const [size, minWidth] of Object.entries(screenSizes)) {\n        if (width < minWidth) {\n            return size;\n        }\n    }\n    return \"large\";\n}\n\nexport function onResize(dailyAggData, dailyData, aggregators) {\n    if (resizeDebounce) {\n        clearTimeout(resizeDebounce);\n    }\n    \n    resizeDebounce = setTimeout(() => {\n        d3.selectAll(\".polls\").selectAll(\"*\").remove();\n        drawChart(dailyAggData, dailyData, aggregators);\n    }, 250);\n}\n\nexport function drawChart(dailyAggData, dailyData, aggregators) {\n    const screenSizeCateg = getScreenSize();\n    const { margin, width, height, x, y, chartGroup } = setupChart(dailyData, screenSizeCateg);\n\n    drawLines(chartGroup, dailyAggData, x, y, screenSizeCateg);\n    drawDots(chartGroup, dailyData, x, y, aggregators, screenSizeCateg);\n    drawGridlines(chartGroup, x, y, width, height, screenSizeCateg);\n    setupInteractivity(chartGroup, dailyData, x, y, width, height, screenSizeCateg);\n}\n\nfunction setupChart(dailyData, screenSizeCateg) {\n    const paddingRightSize = paddingSizes[screenSizeCateg];\n\n    const margin = { top: 20, right: 0, bottom: 30, left: 0 };\n    const svg = d3.select(\".polls\");\n\n    const width = parseInt(svg.style(\"width\")) - margin.left - margin.right;\n    const height = width * (4 / 7);\n\n    const dateExtent = d3.extent(dailyData, (d) =>\n        d3.timeParse(\"%Y-%m-%d\")(d.Trump.date)\n    );\n\n    const paddedStartDate = new Date(dateExtent[0]);\n    paddedStartDate.setDate(paddedStartDate.getDate() - 1);\n\n    const x = d3\n        .scaleTime()\n        .domain([paddedStartDate, dateExtent[1]])\n        .range([0, width - paddingRightSize]);\n\n    const y = d3.scaleLinear().domain([0.35, 0.51]).range([height, 0]);\n\n    const chartGroup = svg\n        .attr(\n            \"viewBox\",\n            `0 0 ${width + margin.left + margin.right} ${height + margin.top + margin.bottom}`\n        )\n        .attr(\"preserveAspectRatio\", \"xMidYMid meet\")\n        .append(\"g\");\n\n    return { margin, width, height, x, y, chartGroup };\n}\n\nfunction drawLines(chartGroup, dailyAggData, x, y, screenSizeCateg) {\n    for (const candidate of [\"Trump\", \"Harris\"]) {\n        const line = d3\n            .line()\n            .x((d) => x(d.date))\n            .y((d) => y(d.avg))\n            .curve(d3.curveMonotoneX);\n\n        chartGroup\n            .append(\"path\")\n            .datum(\n                dailyAggData.map((d) => ({\n                    date: d3.timeParse(\"%Y-%m-%d\")(d.date),\n                    avg: d[candidate],\n                }))\n            )\n            .attr(\"class\", candidate)\n            .attr(\"fill\", \"none\")\n            .attr(\"stroke\", colors[candidate])\n            .attr(\"stroke-width\", lineWidths[screenSizeCateg])\n            .attr(\"opacity\", 0.45)\n            .attr(\"d\", line);\n    }\n}\n\nfunction drawDots(chartGroup, dailyData, x, y, aggregators, screenSizeCateg) {\n    const circleGroup = chartGroup.append(\"g\");\n\n    dailyData.forEach((d) => {\n        for (const candidate of [\"Trump\", \"Harris\"]) {\n            aggregators.forEach((aggregator) => {\n                if (!d[candidate][aggregator]) return;\n\n                circleGroup\n                    .append(\"circle\")\n                    .attr(\"class\", aggregator + \" \" + candidate)\n                    .attr(\n                        \"cx\",\n                        x(d3.timeParse(\"%Y-%m-%d\")(d[candidate].date))\n                    )\n                    .attr(\"cy\", y(d[candidate][aggregator]))\n                    .attr(\"r\", dotSizes[screenSizeCateg])\n                    .attr(\"fill\", colors[candidate])\n                    .attr(\"opacity\", 0.3)\n                    .attr(\"stroke\", \"white\")\n                    .attr(\"stroke-width\", 0)\n                    .attr(\"paint-order\", \"stroke\");\n            });\n        }\n    });\n}\n\nfunction drawGridlines(chartGroup, x, y, width, height, screenSizeCateg) {\n    chartGroup\n        .append(\"g\")\n        .attr(\"class\", \"grid x-grid\")\n        .attr(\"transform\", `translate(0,${height})`)\n        .call(\n            d3\n                .axisBottom(x)\n                .ticks(d3.timeWeek.every(1))\n                .tickSizeInner(-6)\n                .tickPadding(10)\n                .tickFormat((d) =>\n                    new Date(d).toLocaleDateString(\"hu-HU\", {\n                        month: \"short\",\n                        day: \"numeric\",\n                    })\n                )\n        )\n        .call((g) => g.select(\".domain\").remove())\n        .selectAll(\"line\")\n        .style(\"stroke\", \"#ccc\")\n        .style(\"stroke-opacity\", 1);\n\n    chartGroup\n        .append(\"g\")\n        .attr(\"class\", \"grid y-grid\")\n        .call(\n            d3\n                .axisLeft(y)\n                .tickValues([0.35, 0.4, 0.45, 0.5])\n                .tickSize(-width)\n                .tickFormat((d) => `${d * 100}`)\n        )\n        .call((g) => g.select(\".domain\").remove())\n        .selectAll(\"line\")\n        .style(\"stroke\", \"#ddd\")\n        .style(\"stroke-opacity\", 1);\n\n    chartGroup\n        .selectAll(\".y-grid\")\n        .selectAll(\"text\")\n        .attr(\"dx\", \"1.5em\")\n        .attr(\"dy\", \"-0.5em\")\n\n    d3.selectAll(\".grid text\").attr(\"font-size\", `${gridLabelSizes[screenSizeCateg]}rem`).attr(\"fill\", \"#666\");\n}\n\nfunction setupInteractivity(chartGroup, dailyData, x, y, width, height, screenSizeCateg) {\n    const paddingRightSize = paddingSizes[screenSizeCateg];\n\n    const focusDate = chartGroup\n        .append(\"g\")\n        .attr(\"y1\", 0)\n        .attr(\"y2\", height)\n        .attr(\"x1\", width - (paddingRightSize + 1))\n        .attr(\"x2\", width - (paddingRightSize + 1));\n\n    const verticalLine = focusDate\n        .append(\"line\")\n        .attr(\"stroke\", \"black\")\n        .attr(\"stroke-width\", 2)\n        .attr(\"y1\", 0)\n        .attr(\"y2\", height)\n        .attr(\"x1\", width - (paddingRightSize + 1))\n        .attr(\"x2\", width - (paddingRightSize + 1));\n\n    const dateLabel = focusDate\n        .append(\"text\")\n        .attr(\"text-anchor\", \"middle\")\n        .attr(\"fill\", \"#333\")\n        .attr(\"font-size\", `${gridLabelSizes[screenSizeCateg]}rem`)\n        .text(\n            new Date().toLocaleDateString(\"hu-HU\", {\n                month: \"long\",\n                day: \"numeric\",\n            }),\n        );\n\n    chartGroup\n        .append(\"rect\")\n        .attr(\"class\", \"overlay-box\")\n        .attr(\"x\", width - paddingRightSize)\n        .attr(\"y\", 0)\n        .attr(\"width\", paddingRightSize)\n        .attr(\"height\", height)\n        .attr(\"fill\", \"white\")\n        .attr(\"opacity\", 0.8);\n\n    dateLabel.attr(\"x\", width - paddingRightSize).attr(\"y\", -6);\n\n    const focusTexts = initializeFocusTexts(chartGroup, colors, screenSizeCateg);\n    updateLabels(focusTexts, dailyData, x, y);\n\n    const svg = d3.select(chartGroup.node().parentNode);\n\n    svg.append(\"rect\")\n        .attr(\"width\", width - paddingRightSize)\n        .attr(\"height\", height)\n        .style(\"fill\", \"none\")\n        .style(\"pointer-events\", \"all\")\n        .on(\"mousemove\", function (event) {\n            handleMouseMove(\n                event,\n                chartGroup,\n                dailyData,\n                x,\n                y,\n                width,\n                height,\n                verticalLine,\n                dateLabel,\n                focusTexts,\n            );\n        })\n        .on(\"mouseout\", () => {\n            verticalLine\n                .attr(\"y1\", 0)\n                .attr(\"y2\", height)\n                .attr(\"x1\", width - (paddingRightSize + 1))\n                .attr(\"x2\", width - (paddingRightSize + 1));\n\n            dateLabel\n                .text(\n                    new Date().toLocaleDateString(\"hu-HU\", {\n                        month: \"long\",\n                        day: \"numeric\",\n                    }),\n                )\n                .attr(\"x\", width - (paddingRightSize + 1))\n                .attr(\"y\", -6);\n\n            updateLabels(focusTexts, dailyData, x, y);\n\n            chartGroup.selectAll(\".overlay-box\").remove(); // Clear existing box\n            chartGroup\n                .append(\"rect\")\n                .attr(\"class\", \"overlay-box\")\n                .attr(\"x\", width - paddingRightSize)\n                .attr(\"y\", 0)\n                .attr(\"width\", 100)\n                .attr(\"height\", height)\n                .attr(\"fill\", \"white\")\n                .attr(\"opacity\", 0.8);\n            Object.values(focusTexts).forEach((text) => text.raise());\n        });\n}\n\nfunction initializeFocusTexts(chartGroup, colors, screenSizeCateg) {\n    const focusTexts = {};\n    Object.keys(colors).forEach((candidate) => {\n        focusTexts[candidate] = chartGroup\n            .append(\"text\")\n            .attr(\"class\", candidate)\n            .attr(\"text-anchor\", \"left\")\n            .attr(\"alignment-baseline\", \"middle\")\n            .style(\"font-size\", `${candidateLabelSizes[screenSizeCateg]}rem`)\n            .style(\"stroke\", \"#fff\")\n            .style(\"stroke-width\", 6)\n            .attr(\"paint-order\", \"stroke\");\n    });\n    return focusTexts;\n}\n\nfunction handleMouseMove(\n    event,\n    chartGroup,\n    dailyData,\n    x,\n    y,\n    width,\n    height,\n    verticalLine,\n    dateLabel,\n    focusTexts,\n) {\n    const mouse = d3.pointer(event);\n    const mouseDate = x.invert(mouse[0]);\n    const roundedDate = new Date(mouseDate);\n    roundedDate.setHours(0, 0, 0, 0);\n    if (mouseDate.getHours() >= 12) {\n        roundedDate.setDate(roundedDate.getDate() + 1);\n    }\n    const lineDate = new Date(roundedDate.getTime()); // Subtract 1 day from the date\n    verticalLine.attr(\"x1\", x(lineDate) - 1).attr(\"x2\", x(lineDate));\n    dateLabel\n        .text(\n            roundedDate.toLocaleDateString(\"hu-HU\", {\n                month: \"long\",\n                day: \"numeric\",\n            }),\n        )\n        .attr(\"x\", x(lineDate));\n\n    // Add half-opaque white box to the right of the vertical line\n    chartGroup.selectAll(\".overlay-box\").remove(); // Clear existing box\n    chartGroup\n        .append(\"rect\")\n        .attr(\"class\", \"overlay-box\")\n        .attr(\"x\", x(lineDate))\n        .attr(\"y\", 0)\n        .attr(\"width\", width - x(lineDate))\n        .attr(\"height\", height)\n        .attr(\"fill\", \"white\")\n        .attr(\"opacity\", 0.8);\n\n    // Put the labels at the end of the svg rendering order\n    Object.values(focusTexts).forEach((text) => text.raise());\n\n    updateLabels(focusTexts, dailyData, x, y, lineDate);\n    fixLabelPositions(focusTexts, x, y, width, height);\n}\n\nfunction updateLabels(focusTexts, dailyData, x, y, lineDate = null) {\n    if (!lineDate) {\n        lineDate = d3.max(dailyData.map((d) => d.Trump.date));\n    }\n\n    let closestValue = { Trump: null, Harris: null };\n    let minDiff = { Trump: Infinity, Harris: Infinity };\n\n    // Find the closest data point for each candidate\n    dailyData.forEach((day) => {\n        for (const candidate of [\"Trump\", \"Harris\"]) {\n            const candidateObj = day[candidate];\n\n            const diff = Math.abs(\n                new Date(lineDate) - new Date(candidateObj.date),\n            );\n\n            if (diff < minDiff[candidate]) {\n                closestValue[candidate] = candidateObj;\n                minDiff[candidate] = diff;\n            }\n\n            // Update focus text\n            if (closestValue[candidate]) {\n                focusTexts[candidate]\n                    .text(`${candidate} `)\n                    .attr(\n                        \"x\",\n                        x(new Date(closestValue[candidate].date)) + 8,\n                    )\n                    .attr(\"y\", y(closestValue[candidate].avg))\n                    .append(\"tspan\")\n                    .text(\n                        `${(closestValue[candidate].avg * 100).toFixed(1).replace(\".\", \",\")}`,\n                    )\n                    .attr(\n                        \"style\",\n                        `fill: ${colors[candidate]}; font-weight: 500; /* font-family: 'courier'; */ dominant-baseline: middle;`,\n                    );\n            }\n        }\n    });\n}\n\nfunction fixLabelPositions(focusTexts, x, y, width, height) {\n    const y_positions = Object.values(focusTexts).map((text) =>\n        parseFloat(text.attr(\"y\")),\n    );\n    const difference = Math.abs(y_positions[0] - y_positions[1]);\n    const average_y = (y_positions[0] + y_positions[1]) / 2;\n\n    if (difference < 30) {\n        const topCandidate =\n            y_positions[0] > y_positions[1] ? \"Trump\" : \"Harris\";\n        const bottomCandidate =\n            y_positions[0] > y_positions[1] ? \"Harris\" : \"Trump\";\n\n        focusTexts[topCandidate].attr(\"y\", average_y + 15);\n        focusTexts[bottomCandidate].attr(\"y\", average_y - 15);\n    }\n}","export default function extent(values, valueof) {\n  let min;\n  let max;\n  if (valueof === undefined) {\n    for (const value of values) {\n      if (value != null) {\n        if (min === undefined) {\n          if (value >= value) min = max = value;\n        } else {\n          if (min > value) min = value;\n          if (max < value) max = value;\n        }\n      }\n    }\n  } else {\n    let index = -1;\n    for (let value of values) {\n      if ((value = valueof(value, ++index, values)) != null) {\n        if (min === undefined) {\n          if (value >= value) min = max = value;\n        } else {\n          if (min > value) min = value;\n          if (max < value) max = value;\n        }\n      }\n    }\n  }\n  return [min, max];\n}\n","import sourceEvent from \"./sourceEvent.js\";\n\nexport default function(event, node) {\n  event = sourceEvent(event);\n  if (node === undefined) node = event.currentTarget;\n  if (node) {\n    var svg = node.ownerSVGElement || node;\n    if (svg.createSVGPoint) {\n      var point = svg.createSVGPoint();\n      point.x = event.clientX, point.y = event.clientY;\n      point = point.matrixTransform(node.getScreenCTM().inverse());\n      return [point.x, point.y];\n    }\n    if (node.getBoundingClientRect) {\n      var rect = node.getBoundingClientRect();\n      return [event.clientX - rect.left - node.clientLeft, event.clientY - rect.top - node.clientTop];\n    }\n  }\n  return [event.pageX, event.pageY];\n}\n","export default function(event) {\n  let sourceEvent;\n  while (sourceEvent = event.sourceEvent) event = sourceEvent;\n  return event;\n}\n","export default function max(values, valueof) {\n  let max;\n  if (valueof === undefined) {\n    for (const value of values) {\n      if (value != null\n          && (max < value || (max === undefined && value >= value))) {\n        max = value;\n      }\n    }\n  } else {\n    let index = -1;\n    for (let value of values) {\n      if ((value = valueof(value, ++index, values)) != null\n          && (max < value || (max === undefined && value >= value))) {\n        max = value;\n      }\n    }\n  }\n  return max;\n}\n","<script>\n    import { onMount } from \"svelte\";\n    import { drawChart, onResize } from \"$lib/chartUtils\";\n\n    export let dailyAggData;\n    export let dailyData;\n    export let aggregators;\n\n    onMount(() => {\n        drawChart(dailyAggData, dailyData, aggregators);\n        window.addEventListener(\"resize\", () => onResize(dailyAggData, dailyData, aggregators));\n    });\n\n</script>\n\n<svg class=\"polls\"></svg>\n\n<style>\n    .polls {\n        margin: 1rem 0;\n    }\n\n    svg {\n        width: 100%;\n        height: auto;\n        overflow: visible;\n    }\n</style>\n","import * as d3 from \"d3\";\n\nconst aggregators = [\n    \"fivethirtyeight\",\n    \"realclearpolling\",\n    \"natesilver\",\n    \"nyt\",\n];\n\nasync function fetchPollData(repo) {\n    const response = await fetch(\n        `https://api.github.com/repos/${repo}/contents/polls.csv`,\n    );\n    const json = await response.json();\n    const csvData = atob(json.content);\n    return d3.csvParse(csvData);\n}\n\nfunction isDataStale() {\n    const oneHour = 1000 * 60 * 60;\n    const now = new Date();\n    const lastUpdated = new Date(\n        sessionStorage.getItem(\"pollsDataUpdated\"),\n    );\n    const diff = now - lastUpdated;\n\n    return (\n        sessionStorage.getItem(\"pollsData\") == null ||\n        sessionStorage.getItem(\"pollsDataUpdated\") == null ||\n        diff >= oneHour\n    );\n}\n\nasync function getPollData(repo) {\n    if (isDataStale()) {\n        const pollData = await fetchPollData(repo);\n        const now = new Date();\n        sessionStorage.setItem(\"pollsData\", JSON.stringify(pollData));\n        sessionStorage.setItem(\"pollsDataUpdated\", now);\n        return pollData;\n    } else {\n        return JSON.parse(sessionStorage.getItem(\"pollsData\"));\n    }\n}\n\nfunction prepareData(data) {\n    const candidates = [\"Trump\", \"Harris\"];\n\n    data.forEach((d) => {\n        aggregators.forEach((p) => {\n            d[p] = d[p] || null;\n        });\n    });\n\n    const dates = Array.from(new Set(data.map((d) => d.date)));\n\n    const dailyCandidateData = dates.map((date) => {\n        const dateData = data.filter((d) => d.date === date);\n        const candidateData = candidates.map((candidate) => {\n            const candidatePolls = dateData.filter(\n                (d) => d.candidate === candidate,\n            );\n            const aggregatorData = Object.fromEntries(\n                aggregators.map((p) => [\n                    p,\n                    d3.mean(candidatePolls.map((d) => d[p])),\n                ]),\n            );\n\n            return {\n                candidate,\n                date,\n                ...aggregatorData,\n                avg: d3.mean(aggregators.map((p) => aggregatorData[p])),\n            };\n        });\n        return Object.fromEntries(\n            candidateData.map((d) => [d.candidate, d]),\n        );\n    });\n\n    const dailyCandidateAgg = dailyCandidateData.map((d) => {\n        const trump = d.Trump;\n        const harris = d.Harris;\n\n        return {\n            date: trump.date,\n            Trump: d3.mean(aggregators.map((p) => trump[p])).toFixed(4),\n            Harris: d3.mean(aggregators.map((p) => harris[p])).toFixed(4),\n        };\n    });\n\n    return {\n        dailyAggData: dailyCandidateAgg,\n        dailyData: dailyCandidateData,\n    };\n}\n\nexport { getPollData, prepareData, aggregators };\n","<script>\n    import * as d3 from \"d3\";\n    import Gauge from \"../components/Gauge.svelte\";\n    import Chart from \"../components/Chart.svelte\";\n    import { getPollData, prepareData, aggregators } from \"../lib/dataUtils.js\";\n\n    export let repo;\n\n    let dailyAggData = [];\n    let dailyData = [];\n\n    let demLead = null;\n    let leadHTML = null;\n    let aggregatorsCurrent = [];\n\n    function setDemLeadAndWinningHTML(data) {\n        const lastDay = data[data.length - 1];\n        const currentTrump = lastDay.Trump;\n        const currentHarris = lastDay.Harris;\n\n        demLead = currentHarris - currentTrump;\n\n        if (demLead >= 0.04) {\n            leadHTML =\n                \"valsznleg a <span class='dem'>demokratk</span> fognak nyerni vlasztson.\";\n        } else if (demLead < 0) {\n            leadHTML =\n                \"valsznleg a <span class='rep'>republiknusok</span> fognak nyerni vlasztson.\";\n        } else {\n            leadHTML =\n                \"<span class='contest'>szoros</span> eredmny vrhat a vlasztson.\";\n        }\n    }\n\n    function setAggregatorsCurrent(data) {\n        const lastDay = data[data.length - 1];\n        const currentTrump = lastDay.Trump;\n        const currentHarris = lastDay.Harris;\n        const aggregatorNameMap = {\n            fivethirtyeight: \"538\",\n            realclearpolling: \"RCP\",\n            natesilver: \"Silver Bulletin\",\n            nyt: \"NYT\",\n        };\n        aggregatorsCurrent = Object.keys(aggregatorNameMap).map(\n            (aggregator) => {\n                const trump = currentTrump[aggregator];\n                const harris = currentHarris[aggregator];\n                const lead = (harris - trump) * 100;\n                return {\n                    name: aggregator,\n                    displayName: aggregatorNameMap[aggregator],\n                    lead: Math.abs(lead.toFixed(2)),\n                    leading: lead > 0 ? \"dem\" : \"rep\",\n                };\n            },\n        );\n    }\n\n    async function fetchData() {\n        try {\n            const data = await getPollData(repo);\n            ({ dailyAggData, dailyData } = prepareData(data));\n\n            setDemLeadAndWinningHTML(dailyAggData);\n            setAggregatorsCurrent(dailyData);\n        } catch (error) {\n            console.error(\"Error fetching data:\", error);\n        }\n    }\n\n    function setSoloAggregator(aggregator) {\n        return () => {\n            d3.selectAll(`circle.${aggregator}.Trump`).attr(\"opacity\", 1).attr(\"r\", 4).attr(\"stroke-width\", 0);\n            d3.selectAll(`circle.${aggregator}.Harris`).attr(\"opacity\", 1).attr(\"r\", 5).attr(\"fill\", \"transparent\").attr(\"stroke-width\", 2).attr(\"stroke\", \"blue\");\n            d3.selectAll(`circle:not(.${aggregator})`).attr(\"opacity\", 0.05);\n            d3.selectAll(`path:is(.Trump, .Harris)`).attr(\"opacity\", 0.05);\n        };\n    }\n\n    function removeSoloAggregator(aggregator) {\n        return () => {\n            d3.selectAll(`circle`).attr(\"opacity\", 0.3).attr(\"r\", 3).attr(\"stroke-width\", 0);\n            d3.selectAll(`path:is(.Trump, .Harris)`).attr(\"opacity\", 0.45);\n            d3.selectAll(`circle.${aggregator}.Harris`).attr(\"fill\", \"blue\");\n        };\n    }\n\n    fetchData();\n</script>\n\n<article>\n    <header>\n        <h1>\n            <span>Vox Populi</span>\n            <div style=\"flex-grow: 1; flex-shrink: 1;\"></div>\n            <span>Egyeslt llamok 2024</span>\n        </h1>\n    </header>\n    <div class=\"uglygrid\">\n        <article id=\"winner-gauge\">\n            <h2>Vrhat gyztes</h2>\n            {#if demLead !== null && leadHTML !== null}\n                <p class=\"has-data\">\n                    Nagyjbl <span\n                        class=\"compact {demLead > 0 ? 'dem' : 'rep'}\"\n                        >{Math.abs((demLead * 100).toFixed(0))}%</span\n                    >-os {demLead > 0 ? \"demokrata\" : \"republiknus\"} vezetsnl\n                    <span class=\"container\">{@html leadHTML}</span>\n                </p>\n                <p class=\"label\">Vlasztsi irnyt</p>\n                <Gauge {demLead} />\n                <p class=\"info\">\n                    A demokratknak krlbell 2%-kal kell vezetnik ahhoz, hogy\n                    az elektorok szmban fej-fej mellett legyenek a\n                    republiknusokkal.\n                </p>\n            {/if}\n        </article>\n        <section id=\"poll-graph\">\n            <h1>Harris s Trump tmogatottsga</h1>\n            <p>\n                Az albbi grafikon az amerikai poll aggregtorokat (<a\n                    target=\"_blank\"\n                    href=\"https://projects.fivethirtyeight.com/polls/president-general/2024/national/\"\n                    >FiveThirtyEight</a\n                >,\n                <a\n                    target=\"_blank\"\n                    href=\"https://www.realclearpolling.com/polls/president/general/2024/trump-vs-harris\"\n                    >RealClear Polling</a\n                >,\n                <a\n                    target=\"_blank\"\n                    href=\"https://www.natesilver.net/p/nate-silver-2024-president-election-polls-model\"\n                    >Silver Bulletin</a\n                >,\n                <a\n                    target=\"_blank\"\n                    href=\"https://www.nytimes.com/interactive/2024/us/elections/polls-president.html\"\n                    >New York Times</a\n                >) tlagolja. Lorem ipsum dolor sit amet consectetur adipisicing\n                elit. Sit autem molestiae a sapiente quas! Esse deserunt\n                inventore quidem ipsam labore ducimus debitis, corrupti\n                blanditiis, quisquam, ipsum in consequuntur expedita reiciendis.\n            </p>\n            {#if aggregatorsCurrent.length !== 0}\n                <div class=\"aggregator-bubbles\">\n                    {#each aggregatorsCurrent as aggregator}\n                        <div class=\"aggregator\" on:mouseenter={setSoloAggregator(aggregator.name)} on:mouseleave={removeSoloAggregator(aggregator.name)}>\n                            {aggregator.displayName}\n                            <span class={aggregator.leading}\n                                >+{aggregator.lead.toString().replace('.', ',')}</span\n                            >\n                        </div>\n                    {/each}\n                </div>\n            {/if}\n            {#if dailyAggData.length !== 0 && dailyData.length !== 0}\n                <Chart {dailyAggData} {dailyData} {aggregators} />\n            {/if}\n        </section>\n        <article></article>\n    </div>\n</article>\n\n<style>\n    header {\n        margin-bottom: 32px;\n        background-color: #ddd;\n        padding: 8px 16px;\n        background-size: auto 800%;\n        background-position: 0 50%;\n        background-repeat: repeat-x;\n    }\n    header h1 {\n        font-size: 1.2rem;\n        color: #333;\n        display: flex;\n    }\n\n    header h1 span {\n        padding: 0 8px;\n    }\n\n    .uglygrid {\n        display: grid;\n        grid-template-columns: 1fr 700px;\n        grid-template-rows: fit-content 1fr;\n        gap: 24px;\n    }\n\n    #winner-gauge {\n        grid-column: 1 / 2;\n        grid-row: 1 / 2;\n        height: fit-content;\n        border-top: 2px solid #333;\n        padding: 8px 0;\n    }\n    #winner-gauge p:first-of-type {\n        text-align: center;\n        font-size: 22px;\n    }\n    #winner-gauge .label {\n        text-align: center;\n        margin-top: 36px;\n        font-family: 'helvetica neue';\n        text-transform: uppercase;\n        font-weight: 500;\n        font-size: 14px;\n        margin-bottom: -12px;\n    }\n\n    #poll-graph {\n        grid-column: 2 / 3;\n        grid-row: 1 / 3;\n        border-top: 2px solid #888;\n        padding: 8px 1rem;\n    }\n    #poll-graph .label {\n        text-transform: uppercase;\n        font-family: 'helvetica neue';\n        font-weight: 500;\n        font-size: 14px;\n        margin-top: 26px;\n    }\n\n    .aggregator-bubbles {\n        display: flex;\n        gap: 8px;\n        margin: 1rem 0;\n    }\n\n    .aggregator {\n        background-color: #f7f7f7;\n        padding-left: 8px;\n        font-size: 14px;\n        color: #666;\n        cursor: default;\n    }\n\n    .aggregator span {\n        font-family: \"courier\";\n        display: inline-block;\n        vertical-align: bottom;\n        margin-left: 3px;\n        background: transparent;\n        cursor: default;\n    }\n\n    article {\n        width: 100%;\n        max-width: 1000px;\n        margin: 0 auto;\n        padding: 8px 16px;\n    }\n\n    h1 {\n        font-size: 2rem;\n        font-weight: 500;\n    }\n\n    h2 {\n        font-size: 22px;\n        font-weight: 500;\n        text-align: center;\n    }\n\n    p {\n        font-size: 16px;\n        margin-top: 12px;\n    }\n    p.info {\n        margin: 12px 6px;\n        padding: 6px;\n        border-radius: 8px;\n        background-color: #f7f7f7;\n    }\n\n    span.dem.compact,\n    span.rep.compact {\n        padding: 0 3px;\n    }\n</style>\n","<script>\n    import { onMount } from \"svelte\";\n    import Chart from \"../components/Chart.svelte\";\n    import { getPollData, prepareData, aggregators } from \"../lib/dataUtils.js\";\n\n    export let repo;\n\n    let dailyAggData = [];\n    let dailyData = [];\n\n    async function fetchData() {\n        try {\n            const data = await getPollData(repo);\n            ({ dailyAggData, dailyData } = prepareData(data));\n        } catch (error) {\n            console.error(\"Error fetching data:\", error);\n        }\n    }\n\n    onMount(fetchData);\n</script>\n  \n<article>\n    <div class=\"chartContainer\">\n        {#if dailyAggData.length !== 0 && dailyData.length !== 0 && aggregators.length !== 0}\n            <Chart class=\"chart\" {dailyAggData} {dailyData} {aggregators} />\n        {/if}\n    </div>\n</article>\n\n<style lang=\"scss\">\narticle {\n    display: flex;\n    justify-content: center;\n\n    .chartContainer {\n        width: 100%;\n        max-width: 700px;\n        margin: 1rem;\n    }\n}\n</style>\n","<h1>Not found</h1>","<script>\n    import { onMount } from 'svelte';\n    import page from 'page';\n\n    import Home from './routes/Home.svelte';\n    import ChartEmbed from './routes/ChartEmbed.svelte';\n    import NotFound from './routes/NotFound.svelte';\n\n    let repo = 'hidegmisi/us2024_aggregator_scraper';\n\n    let currentComponent;\n\n    function routeHandler(component) {\n        return function() {\n            currentComponent = component;\n        }\n    }\n\n    onMount(() => {\n        page('/', routeHandler(Home));\n        page('/embed/chart', routeHandler(ChartEmbed));\n        page('*', routeHandler(NotFound));\n        page.start();\n    });\n</script>\n\n<svelte:component this={currentComponent} {repo} />\n","import App from './App.svelte';\nimport './lib/style/_global-imports.scss';\n\nconst app = new App({\n\ttarget: document.body,\n\tprops: {\n\t\trepo: 'hidegmisi/us2024_aggregator_scraper'\n\t},\n\tcustomElement: true,\n});\n\nexport default app;"],"names":["noop","run","fn","blank_object","Object","create","run_all","fns","forEach","is_function","thing","safe_not_equal","a","b","null_to_empty","value","append","target","node","appendChild","insert","anchor","insertBefore","detach","parentNode","removeChild","element","name","document","createElement","text","data","createTextNode","space","listen","event","handler","options","addEventListener","removeEventListener","attr","attribute","removeAttribute","getAttribute","setAttribute","set_data","set_style","key","important","style","removeProperty","setProperty","construct_svelte_component","component","props","current_component","set_current_component","onMount","Error","get_current_component","$$","on_mount","push","dirty_components","binding_callbacks","render_callbacks","flush_callbacks","resolved_promise","Promise","resolve","update_scheduled","add_render_callback","seen_callbacks","Set","flushidx","flush","saved_component","length","update","e","pop","i","callback","has","add","clear","fragment","before_update","dirty","p","ctx","after_update","outroing","outros","group_outros","r","c","check_outros","transition_in","block","local","delete","transition_out","o","d","ensure_array_like","array_like_or_iterator","undefined","Array","from","create_component","mount_component","m","new_on_destroy","map","filter","on_destroy","destroy_component","detaching","filtered","targets","indexOf","flush_render_callbacks","make_dirty","then","fill","init","instance","create_fragment","not_equal","append_styles","parent_component","bound","on_disconnect","context","Map","callbacks","skip_bound","root","ready","ret","rest","hydrate","nodes","childNodes","children","l","intro","SvelteComponent","$$set","$destroy","this","$on","type","index","splice","$set","obj","keys","window","__svelte","v","exports","isarray","isArray","arr","prototype","toString","call","pathToRegexp_1","pathToRegexp","parse_1","parse","compile_1","compile","tokensToFunction_1","tokensToFunction","tokensToRegExp_1","tokensToRegExp","PATH_REGEXP","RegExp","join","str","res","tokens","path","exec","escaped","offset","slice","prefix","capture","group","suffix","asterisk","repeat","optional","delimiter","pattern","escapeGroup","substr","matches","token","segment","TypeError","j","encodeURIComponent","test","escapeString","replace","attachKeys","re","flags","sensitive","regexpToRegexp","groups","source","match","arrayToRegexp","parts","stringToRegexp","strict","end","route","lastToken","endsWithSlash","loaded","hasDocument","hasWindow","hasHistory","history","hasProcess","process","clickEvent","ontouchstart","isLocation","location","Page","exits","current","len","_decodeURLComponents","_base","_strict","_running","_hashbang","clickHandler","bind","_onpopstate","createPage","pageInstance","pageFn","page","apply","arguments","base","start","stop","show","back","redirect","dispatch","exit","configure","sameOrigin","defineProperty","get","set","val","Context","Route","middleware","unhandled","handled","_window","_getBase","hash","pathname","search","canonicalPath","href","escapeRegExp","s","state","_page","hashbang","pageBase","title","querystring","_decodeURLEncodedURIComponent","params","split","globalPage","opts","method","regexp","decodeURLComponents","_popstate","popstate","_click","click","loc","protocol","enable","url","prev","prevContext","pushState","setTimeout","to","inst","save","nextExit","nextEnter","_which","metaKey","ctrlKey","shiftKey","defaultPrevented","el","eventPath","composedPath","nodeName","toUpperCase","svg","constructor","hasAttribute","link","_samePath","baseVal","orig","preventDefault","readyState","which","button","_toURL","URL","anc","hostname","port","decodeURIComponent","replaceState","self","next","routePath","qsIndex","hasOwnProperty","page_js","default_1","default","factory","ascending","NaN","descending","bisector","f","compare1","compare2","delta","left","x","lo","hi","mid","zero","center","right","bisectRight","bisect","e10","Math","sqrt","e5","e2","tickSpec","count","step","max","power","floor","log10","error","pow","factor","i1","i2","inc","round","tickIncrement","tickStep","reverse","mean","values","valueof","sum","identity$3","top","bottom","epsilon","translateX","translateY","y","number","scale","bandwidth","entering","__axis","axis","orient","tickArguments","tickValues","tickFormat","tickSizeInner","tickSizeOuter","tickPadding","devicePixelRatio","k","transform","ticks","domain","format","identity","spacing","range","range0","range1","position","copy","selection","selectAll","tick","order","tickExit","tickEnter","enter","line","select","merge","transition","isFinite","remove","each","_","tickSize","t","n","Dispatch","concat","on","typename","types","T","trim","that","args","xhtml","namespaces","xlink","xml","xmlns","namespace","creatorInherit","ownerDocument","uri","namespaceURI","documentElement","createElementNS","creatorFixed","fullname","creator","none","selector","querySelector","array","empty","selectorAll","querySelectorAll","matcher","childMatcher","find","childFirst","firstElementChild","sparse","EnterNode","parent","datum","_next","_parent","__data__","bindIndex","groupLength","dataLength","bindKey","keyValue","nodeByKeyValue","keyValues","arraylike","attrRemove","attrRemoveNS","removeAttributeNS","attrConstant","attrConstantNS","setAttributeNS","attrFunction","attrFunctionNS","defaultView","styleRemove","styleConstant","priority","styleFunction","styleValue","getPropertyValue","getComputedStyle","propertyRemove","propertyConstant","propertyFunction","classArray","string","classList","ClassList","_node","_names","classedAdd","names","list","classedRemove","classedTrue","classedFalse","classedFunction","textRemove","textContent","textConstant","textFunction","htmlRemove","innerHTML","htmlConstant","htmlFunction","raise","nextSibling","lower","previousSibling","firstChild","constantNull","selection_cloneShallow","clone","cloneNode","selection_cloneDeep","onRemove","__on","listener","onAdd","contextListener","dispatchEvent","CustomEvent","createEvent","initEvent","bubbles","cancelable","detail","dispatchConstant","dispatchFunction","child","contains","Selection","parents","_groups","_parents","define","extend","definition","Color","subgroups","subnode","subgroup","arrayAll","selectChild","childFind","selectChildren","childrenFilter","constant","enterGroup","updateGroup","previous","i0","_enter","_exit","onenter","onupdate","onexit","groups0","groups1","m0","m1","min","merges","group0","group1","compareDocumentPosition","sort","compare","compareNode","sortgroups","sortgroup","size","getAttributeNS","property","classed","html","before","deep","typenames","parseTypenames","Symbol","iterator","darker","brighter","reI","reN","reP","reHex","reRgbInteger","reRgbPercent","reRgbaInteger","reRgbaPercent","reHslPercent","reHslaPercent","named","aliceblue","antiquewhite","aqua","aquamarine","azure","beige","bisque","black","blanchedalmond","blue","blueviolet","brown","burlywood","cadetblue","chartreuse","chocolate","coral","cornflowerblue","cornsilk","crimson","cyan","darkblue","darkcyan","darkgoldenrod","darkgray","darkgreen","darkgrey","darkkhaki","darkmagenta","darkolivegreen","darkorange","darkorchid","darkred","darksalmon","darkseagreen","darkslateblue","darkslategray","darkslategrey","darkturquoise","darkviolet","deeppink","deepskyblue","dimgray","dimgrey","dodgerblue","firebrick","floralwhite","forestgreen","fuchsia","gainsboro","ghostwhite","gold","goldenrod","gray","green","greenyellow","grey","honeydew","hotpink","indianred","indigo","ivory","khaki","lavender","lavenderblush","lawngreen","lemonchiffon","lightblue","lightcoral","lightcyan","lightgoldenrodyellow","lightgray","lightgreen","lightgrey","lightpink","lightsalmon","lightseagreen","lightskyblue","lightslategray","lightslategrey","lightsteelblue","lightyellow","lime","limegreen","linen","magenta","maroon","mediumaquamarine","mediumblue","mediumorchid","mediumpurple","mediumseagreen","mediumslateblue","mediumspringgreen","mediumturquoise","mediumvioletred","midnightblue","mintcream","mistyrose","moccasin","navajowhite","navy","oldlace","olive","olivedrab","orange","orangered","orchid","palegoldenrod","palegreen","paleturquoise","palevioletred","papayawhip","peachpuff","peru","pink","plum","powderblue","purple","rebeccapurple","red","rosybrown","royalblue","saddlebrown","salmon","sandybrown","seagreen","seashell","sienna","silver","skyblue","slateblue","slategray","slategrey","snow","springgreen","steelblue","tan","teal","thistle","tomato","turquoise","violet","wheat","white","whitesmoke","yellow","yellowgreen","color_formatHex","rgb","formatHex","color_formatRgb","formatRgb","color","toLowerCase","parseInt","rgbn","Rgb","rgba","hsla","g","opacity","rgb_formatHex","hex","rgb_formatRgb","clampa","clampi","isNaN","h","Hsl","hslConvert","clamph","clampt","hsl2rgb","m2","channels","assign","displayable","formatHex8","formatHsl","clamp","constant$1","gamma","nogamma","exponential","linear","interpolateRgb","rgbGamma","colorRgb","numberArray","genericArray","nb","na","date$1","Date","setTime","interpolateNumber","object","reA","reB","interpolateString","am","bm","bs","bi","lastIndex","q","one","interpolate$1","date","ArrayBuffer","isView","DataView","isNumberArray","valueOf","interpolateRound","svgNode","degrees","PI","rotate","skewX","scaleX","scaleY","decompose","atan2","atan","interpolateTransform","pxComma","pxParen","degParen","xa","ya","xb","yb","translate","taskHead","taskTail","interpolateTransformCss","DOMMatrix","WebKitCSSMatrix","isIdentity","interpolateTransformSvg","consolidate","matrix","frame","timeout","interval","pokeDelay","clockLast","clockNow","clockSkew","clock","performance","now","setFrame","requestAnimationFrame","clearNow","Timer","_call","_time","timer","delay","time","restart","wake","timerFlush","t0","t2","t1","Infinity","sleep","nap","poke","clearTimeout","clearInterval","setInterval","elapsed","emptyOn","emptyTween","CREATED","SCHEDULED","STARTING","STARTED","RUNNING","ENDING","ENDED","schedule","id","timing","schedules","__transition","tween","duration","ease","tweenRemove","tween0","tween1","tweenFunction","tweenValue","_id","interpolate","value1","string00","interpolate0","string1","string0","string10","attrTweenNS","attrInterpolateNS","_value","attrTween","attrInterpolate","delayFunction","delayConstant","durationFunction","durationConstant","Transition","_name","newId","selection_prototype","inherit","id0","id1","on0","on1","sit","every","onFunction","styleTween","styleNull","listener0","styleMaybeRemove","styleInterpolate","textTween","textInterpolate","removeFunction","easeConstant","easeVarying","reject","cancel","interrupt","defaultTiming","active","pi","tau","tauEpsilon","strings","Path","digits","_x0","_y0","_x1","_y1","_append","appendRound","moveTo","closePath","lineTo","quadraticCurveTo","x1","y1","bezierCurveTo","x2","y2","arcTo","x0","y0","x21","y21","x01","y01","l01_2","abs","x20","y20","l21_2","l20_2","l21","l01","acos","t01","t21","arc","a0","a1","ccw","dx","cos","dy","sin","cw","da","rect","w","EOL","EOF","objectConverter","columns","Function","JSON","stringify","inferColumns","rows","columnSet","row","column","pad","width","formatDate","year","hours","getUTCHours","minutes","getUTCMinutes","seconds","getUTCSeconds","milliseconds","getUTCMilliseconds","getUTCFullYear","getUTCMonth","getUTCDate","csv","reFormat","DELIMITER","charCodeAt","parseRows","N","I","eof","eol","preformatBody","formatValue","formatRow","convert","customConverter","formatBody","formatRows","dsv","csvParse","formatDecimalParts","toExponential","coefficient","exponent","prefixExponent","formatSpecifier","specifier","FormatSpecifier","align","sign","symbol","comma","precision","formatRounded","formatTypes","toFixed","toLocaleString","toPrecision","X","identity$1","locale","formatPrefix","prefixes","formatLocale$1","grouping","thousands","Number","substring","currencyPrefix","currency","currencySuffix","decimal","numerals","formatNumerals","String","percent","minus","nan","newFormat","formatType","maybeSuffix","valuePrefix","valueSuffix","valueNegative","out","formatTrim","padding","initRange","formatLocale","unit","normalize","bimap","d0","d1","r0","r1","polymap","unknown","transformer","untransform","piecewise","output","input","interpolateValue","rescale","invert","rangeRound","u","continuous","precisionPrefix","precisionRound","precisionFixed","linearish","nice","prestep","maxIter","ceil","timeInterval","floori","offseti","field","millisecond","durationSecond","durationMinute","durationHour","durationDay","durationWeek","durationMonth","durationYear","second","getMilliseconds","timeMinute","getSeconds","getMinutes","utcMinute","setUTCSeconds","timeHour","getHours","utcHour","setUTCMinutes","timeDay","setHours","setDate","getDate","getTimezoneOffset","utcDay","setUTCHours","setUTCDate","unixDay","timeWeekday","getDay","timeSunday","timeMonday","timeTuesday","timeWednesday","timeThursday","timeFriday","timeSaturday","utcWeekday","getUTCDay","utcSunday","utcMonday","utcTuesday","utcWednesday","utcThursday","utcFriday","utcSaturday","timeMonth","setMonth","getMonth","getFullYear","utcMonth","setUTCMonth","timeYear","setFullYear","utcYear","setUTCFullYear","timeTicks","timeTickInterval","month","week","day","hour","minute","tickIntervals","tickInterval","ticker","localDate","H","M","S","L","utcDate","UTC","newDate","timeFormat","timeParse","pads","numberRe","percentRe","requoteRe","requote","formatRe","formatLookup","parseWeekdayNumberSunday","parseWeekdayNumberMonday","parseWeekNumberSunday","U","parseWeekNumberISO","V","parseWeekNumberMonday","W","parseFullYear","parseYear","parseZone","Z","parseQuarter","parseMonthNumber","parseDayOfMonth","parseDayOfYear","parseHour24","parseMinutes","parseSeconds","parseMilliseconds","parseMicroseconds","parseLiteralPercent","parseUnixTimestamp","Q","parseUnixTimestampSeconds","formatDayOfMonth","formatHour24","formatHour12","formatDayOfYear","formatMilliseconds","formatMicroseconds","formatMonthNumber","formatMinutes","formatSeconds","formatWeekdayNumberMonday","formatWeekNumberSunday","dISO","formatWeekNumberISO","formatWeekdayNumberSunday","formatWeekNumberMonday","formatYear","formatYearISO","formatFullYear","formatFullYearISO","formatZone","z","formatUTCDayOfMonth","formatUTCHour24","formatUTCHour12","formatUTCDayOfYear","formatUTCMilliseconds","formatUTCMicroseconds","formatUTCMonthNumber","formatUTCMinutes","formatUTCSeconds","formatUTCWeekdayNumberMonday","dow","formatUTCWeekNumberSunday","UTCdISO","formatUTCWeekNumberISO","formatUTCWeekdayNumberSunday","formatUTCWeekNumberMonday","formatUTCYear","formatUTCYearISO","formatUTCFullYear","formatUTCFullYearISO","formatUTCZone","formatLiteralPercent","formatUnixTimestamp","formatUnixTimestampSeconds","calendar","formatMillisecond","formatSecond","formatMinute","formatHour","formatDay","formatWeek","formatMonth","timeWeek","timeSecond","locale_dateTime","dateTime","locale_date","locale_time","locale_periods","periods","locale_weekdays","days","locale_shortWeekdays","shortDays","locale_months","months","locale_shortMonths","shortMonths","periodRe","periodLookup","weekdayRe","weekdayLookup","shortWeekdayRe","shortWeekdayLookup","monthRe","monthLookup","shortMonthRe","shortMonthLookup","formats","A","B","G","Y","utcFormats","parses","parseSpecifier","charAt","newParse","utcFormat","utcParse","defaultLocale","halfPi","asin","withPath","shape","RangeError","arcInnerRadius","innerRadius","arcOuterRadius","outerRadius","arcStartAngle","startAngle","arcEndAngle","endAngle","arcPadAngle","padAngle","cornerTangents","rc","ox","oy","x11","y11","x10","y10","x00","y00","d2","D","cx0","cy0","cx1","cy1","dx0","dy0","dx1","dy1","cx","cy","cornerRadius","padRadius","buffer","a01","a11","a00","a10","da0","da1","ap","rp","rc0","rc1","p0","p1","oc","x3","y3","x32","y32","intersect","ax","ay","bx","by","kc","lc","centroid","Linear","_context","curveLinear","line$1","defined","curve","defined0","lineStart","lineEnd","point","pointX","pointY","slope3","h0","h1","s0","s1","slope2","MonotoneX","monotoneX","Transform","__awaiter","thisArg","_arguments","P","generator","fulfilled","rejected","result","done","areaStart","_line","areaEnd","_point","_t0","applyX","applyY","invertX","invertY","rescaleX","rescaleY","SuppressedError","Percent","enumerable","configurable","writable","p100","p50","toNumber","isNumber","converted","isString","toDate","isDate","num","amount","getType","isObject","PLACEHOLDER","PLACEHOLDER2","eachReverse","eachContinue","found","removeFirst","move","toIndex","removeIndex","insertIndex","pushOne","findIndex","keepIf","keep","hasKey","DisposerClass","_disposed","isDisposed","dispose","_dispose","Disposer","ArrayDisposer","super","$array.each","_disposers","MultiDisposer","disposers","CounterDisposer","increment","_counter","dom","onZoom","_ev","supports","cap","getPointerId","pointerId","getRendererEvent","isTouchEvent","ev","Touch","PointerEvent","pointerType","MouseEvent","setStyle","getEventTarget","isLocalEvent","cursor","host","setInteractive","interactive","pointerEvents","getEventKey","keyCode","getSafeResolution","navigator","vendor","relativeToValue","full","$type.isNumber","decimalPlaces","padString","char","trimLeft","trimRight","cleanFormat","stripTags","escapeForRgex","getYearDay","utc","diff","getTime","getWeek","_utc","firstDay","getWeekYear","getMonthWeek","firstWeek","currentWeek","get12Hours","getTimeZone","long","savings","timezone","timeZone","timeZoneName","wotz","wtz","hslToRgb","hue2rgb","rgbToHsl","getLightnessStep","isLight","mergeTags","tags1","tags2","string2hex","fromAny","_hex","toCSS","alpha","toCSSHex","$utils.padString","toHSL","$utils.rgbToHsl","fromHSL","$utils.hslToRgb","fromRGB","fromHex","fromString","fromCSS","rgba2hex","$type.isString","alternative","lightAlternative","darkAlternative","light","dark","$utils.alternativeColor","mode","lighten","$utils.lighten","brighten","$utils.brighten","saturate","saturation","hsl","$utils.saturate","EventDispatcher","_listeners","_killed","_disabled","_iterating","_enabled","disposer","hasListeners","hasListenersByType","$array.any","killed","disable","enableType","disableType","_removeListener","_removeExistingListener","once","_eachListener","info","isEnabled","removeType","$array.findIndex","_shouldDispatch","_on","shouldClone","onAll","_type","off","copyFrom","waitForAnimations","animations","promises","$object.each","animation","waitForStop","all","defaultInterpolate","percentInterpolate","colorInterpolate","AnimationState","checkBounds","List","initial","_values","removeValue","$array.indexOf","hasIndex","getIndex","_onPush","newValue","events","_onInsertIndex","_onSetIndex","oldValue","_onRemoveIndex","_onMoveIndex","oldIndex","newIndex","_onClear","oldValues","setIndex","$array.insertIndex","swap","value_a","value_b","$array.removeIndex","moveValue","unshift","pushAll","shift","setAll","newArray","old","$array.eachReverse","ListAutoDispose","autoDispose","ListTemplate","template","make","Children","container","_container","_events","change","_onRemoved","_onInserted","_setParent","childrenDisplay","_childrenDisplay","addChild","_display","addChildAt","markDirtyBounds","markDirty","RADIANS","DEGREES","rounded","fitToRange","angle","normalizeAngle","getArcBounds","radius","minX","MAX_VALUE","minY","maxX","maxY","bpoints","getArcPoint","fromAngle","toAngle","pt","cubic","State","entity","settings","_entity","_settings","_userSettings","fallback","setRaw","$object.keys","_eachSetting","seen","defaultState","states","lookup","applyAnimate","stateAnimationDuration","easing","stateAnimationEasing","$ease.cubic","animate","States","_states","newState","_applyState","_applyStateAnimated","registry","compareArray","leftLength","rightLength","compareNumber","Adapters","_callbacks","_markDirtyKey","$array.removeFirst","fold","Animation","loops","startingTime","_animation","_from","_to","_duration","_easing","_loops","_interpolate","getInterpolate","_oldTime","playing","_playing","stopped","_stopped","pause","play","_startAnimation","percentage","_reject","_checkEnded","_run","currentTime","_reset","counter","Settings","_checkDirty","_userProperties","resetUserSettings","_runAnimation","Stopped","paused","_animatingSettings","_stopAnimation","_set","_animatingPrivateSettings","_stopAnimationPrivate","setPrivate","_setPrivate","Playing","Paused","_key","_markDirtyPrivateKey","_settingEvents","onPrivate","_privateSettingEvents","offPrivate","getRaw","_sendKeyEvent","_sendPrivateKeyEvent","_setRaw","_prevSettings","removeAll","getPrivate","_privateSettings","_setPrivateRaw","_prevPrivateSettings","setPrivateRaw","removePrivate","$ease.linear","_animationTime","animatePrivate","Entity","isReal","templates","_createEvents","_root","_internalTemplates","_registerId","_template","_afterNew","_new","shouldApply","_setObjectTemplate","_applyTemplates","_setDefaults","_afterNewApplyThemes","_applyThemes","classNames","className","_setDefaultFn","_setDefault","_setRawDefault","_clearDirty","_dirty","_dirtyPrivate","isDirty","isPrivateDirty","isType","_pushPropertyDisposer","_disposerProperties","_disposeProperty","_removeObjectTemplate","_addDirtyEntity","_addAnimation","animationTime","adapters","isUserSetting","_setSoft","_removeTemplateProperty","_userPrivateProperties","_removeTemplatePrivateProperty","_setTemplateProperty","_findTemplateByKey","_setTemplatePrivateProperty","_findTemplateByPrivateKey","_walkParents","_rootContainer","_applyStateByKey","other","_eachTemplate","_apply","_applyTemplate","_templateDisposers","privateSettings","_runSetup","setup","_findStaticTemplate","_templates","_disposeTemplates","_findTemplate","findIndexReverse","$array.findReverse","$array.find","_removeTemplates","force","isConnected","defaults","themes","themeTags","tags","tag","_defaultThemes","theme","allRules","rules","_lookupRules","rule","ordering","pivot","$array.getFirstSortedIndex","$order.compare","$order.compareArray","_changed","_beforeChanged","prevId","entitiesById","_afterChanged","addDisposer","removeDispose","hasTag","addTag","removeTag","$array.remove","_t","language","TemplateState","_stateChanged","TemplateStates","TemplateAdapters","Template","entities","_entities","SpriteEventDispatcher","sprite","_sprite","_makePointerEvent","originalEvent","simulated","native","_onRenderer","_rendererDisposers","rendererEvent","RENDERER_EVENTS","stopParentDispatch","_dispatchParents","dispatchParents","isDragging","_hasDown","_hasMoved","rightclick","middleclick","dblclick","pointerover","_getBounds","bounds","globalBounds","strokeWidth","$math.inBounds","_renderer","removeHovering","pointerout","pointerdown","pointerup","globalpointerup","globalpointermove","wheel","Sprite","markDirtyKey","_addPercentagePositionChildren","markDirtyPosition","_removeTemplateField","_templateField","_processTemplateField","dataItem","dataContext","new","_setDataItem","oldDataItem","_dataItem","eventType","newDataItem","_addPercentageSizeChildren","$array.pushOne","_percentageSizeChildren","_percentagePositionChildren","_addDirtyPosition","updatePivotPoint","_localBounds","centerX","$utils.relativeToValue","centerY","_handleStates","tooltip","setLayer","markDirtyLayer","tooltipMoveDp","_tooltipMoveDp","tooltipPointerDp","_tooltipPointerDp","isHover","showTooltip","_statesHandled","isHidden","markDirtyAccessibility","display","draggable","_dragDp","dragStart","dragMove","dragStop","cancelTouch","tooltipText","tooltipHTML","showTooltipOn","_tooltipDp","$utils.addEventListener","hideTooltip","toggleKey","_toggleDp","_isDragging","visible","_prevWidth","_sizeDirty","_updateSize","wheelable","_registerTabindexOrder","_unregisterTabindexOrder","blur","brightness","contrast","sepia","hue","cursorOverStyle","_focusDp","exportable","_hoverDp","$utils.isTouchEvent","_handleOver","_handleOut","_isDown","_handleUp","_handleDown","inactive","_dragEvent","_dragPoint","_downPoint","$utils.getPointerId","_downPoints","downPoint","dragEvent","dragPoint","$math.cos","$math.sin","hypot","getLocalBounds","depth","markDirtySize","_addDirtyBounds","isMeasured","invalidateBounds","isFocus","_invalidateAccessibility","_updateBounds","oldBounds","_adjustedLocalBounds","newBounds","_fixMinBounds","getAdjustedBounds","minWidth","minHeight","privateWidth","privateHeight","_removeParent","hover","unhover","getTooltip","tooltipPosition","tooltipTarget","_setMatrix","toGlobal","_getTooltipPoint","label","height","markDirtyText","promise","hide","_updatePosition","_x","xx","yy","innerWidth","_y","innerHeight","_removeFocusElement","adjustedLocalBounds","localBounds","p2","p3","_onShow","_onHide","appear","success","_error","_isShowing","_isHidden","_isHiding","isShowing","isHiding","hovering","focused","isVisible","isVisibleDeep","compositeOpacity","compositeScale","compositeRotation","rotation","maxWidth","maxHeight","_walkParent","updateChildren","prevParent","getNumberFormatter","numberFormatter","getDateFormatter","dateFormatter","getDurationFormatter","durationFormatter","toLocal","_getDownPoint","_getDownPointId","$object.keysOrdered","toFront","toBack","Pattern","makeGraphics","_pattern","_draw","_clear","_checkDirtyFill","repetition","fillOpacity","backgroundDisplay","_backgroundDisplay","beginFill","drawRect","endFill","createPattern","PicturePattern","_load","canvas","image","_image","patternWidth","patternHeight","fit","src","Image","decode","catch","BlendMode","Graphics","crisp","gradient","gradientTarget","strokeDasharray","setLineDash","strokeDashoffset","setLineDashOffset","blendMode","NORMAL","draw","svgPath","fillGradient","fillPattern","stroke","strokeGradient","strokePattern","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY","shadowOpacity","shadow","stops","colorInherited","opacityInherited","getFill","strokeOpacity","resolution","lineJoin","lineStyle","endStroke","Rectangle","eachChildren","Layout","HorizontalLayout","updateContainer","paddingLeft","availableWidth","totalPercent","childWidth","prevX","marginLeft","marginRight","VerticalLayout","paddingTop","availableHeight","childHeight","prevY","marginTop","marginBottom","GridLayout","paddingRight","minCellWidth","maxCellWidth","$math.fitToRange","columnCount","columnWidths","getColumnWidths","maxColumnHeight","totalWidth","TextFormatter","escape","unescape","cleanUp","chunk","quotedBlocks","noFormatting","chunks","$type.PLACEHOLDER","chunks2","chunk2","isImage","getTextStyle","fontWeight","textDecoration","populateString","getTagValue","tagName","reg","prop","dateFields","numericFields","durationFields","$utils.trim","matches2","reg2","getTagValueFromObject","$type.isObject","getCustomDataValue","customData","formatApplied","part","tmp","numberValue","$type.toNumber","dateValue","$type.toDate","$type.isDate","$type.isNaN","durationValue","formatParts","formatterType","hints","$utils.getFormat","Container","makeContainer","allChildren","_removeHTMLContent","interactiveChildren","_prevHeight","layout","contentMask","_contentMask","mask","updateBackground","background","verticalScrollbar","_contentHeight","bg","pWidth","pHeight","horizontal","vertical","paddingBottom","childBounds","childX","childY","cl","cr","ct","cb","_contentWidth","_addDirtyParent","_prepareChildren","_updateHTMLContent","_setHTMLContent","_positionHTMLElement","_updateChildren","startGrip","endGrip","interfaceColors","_vsbd0","wheelEvent","$utils.isLocalEvent","shiftY","deltaY","_vsbd1","walkChildren","updated","Text","makeTextStyle","makeText","textStyle","_getText","updateTooltip","_removeTooltipElement","wordWrapWidth","oversizedBehavior","breakWords","ellipsis","ignoreFormatting","minScale","_textStyles","styleName","maxLength","lastNonAlphanumericIndex","$utils.truncateTextWithEllipsis","_getAccessibleText","ariaLabel","Native","_observer","ResizeObserver","entries","entry","_targets","addTarget","observe","box","removeTarget","unobserve","$array.keepIf","Raf","_timer","lastTime","loop","newSize","getBoundingClientRect","cancelAnimationFrame","observer","ResizeSensor","_sensor","_element","_listener","$utils.onZoom","sensor","InterfaceColors","Label","_text","_makeText","_textKeys","propValue","_setMaxDimentions","_maybeUpdateHTMLColor","textAlign","textVisible","htmlElement","getText","getAccessibleText","PointedRectangle","bwh","xtl","ytl","xbl","stemX","stemY","Tooltip","$utils.mergeTags","_label","_updateBackground","_updateTextColor","tooltipContainer","_htmlContentHovered","_handleReaderAnnouncement","_tooltips","readerAlert","updateBackgroundColor","_keepHoverDp","outEvent","getEvent","_fillDp","_strokeDp","_labelDp","ch","parentW","parentH","layerMargin","_w","_h","pointTo","pointerOrientation","pointerLength","bgStrokeSizeY","bgStrokeSizeX","pointerX","pointerY","boundsW","boundsH","_fx","_fy","animationDuration","animationEasing","NumberFormatter","bns","sns","formatted","Intl","NumberFormat","$utils.cleanFormat","details","parseFormat","positive","negative","mod","$object.copy","decimals","applyFormat","thousandSeparator","translateEmpty","decimalSeparator","passive","separator","parsed","$type.PLACEHOLDER2","_part","item","partFormat","mods","modSpacing","applyPrefix","ol","parseFloat","exp","$utils.decimalPlaces","zeros","$type.numberToString","ints","ip","intsr","decs","newvalue","applied","parseDate","weekday","formatToParts","toUTCDate","Timezone","DateTimeFormat","hour12","fractionalSecondDigits","_dtf","convertLocal","offsetUTC","userOffset","newUserOffset","DateFormatter","ignoreTimezone","locales","fullYear","timestamp","$utils.getWeekYear","_getMonth","_getShortMonth","$utils.getWeek","$utils.getMonthWeek","$utils.getYearDay","translateFunc","_getShortWeekday","_getWeekday","firstDayOfWeek","$utils.get12Hours","$utils.getTimeZone","$utils.getTimezoneOffset","tz","tzh","tzm","toISOString","toUTCString","dateFormat","_months","_shortMonths","_weekdays","_shortWeekdays","parsedIndexes","year3","year2","year1","monthShort","monthLong","weekdayShort","weekdayLong","yearDay","hourBase0","hour12Base0","hourBase1","hour12Base1","millisecondDigits","zone","iso","resValues","indexAdjust","getStringList","regex","resolveMonth","resolveShortMonth","$utils.getDayFromWeek","isAm","ts","resolveTimezoneOffset","dir","isDefault","translateAll","$utils.escapeForRgex","DurationFormatter","K","dmillisecond","dsecond","dminute","dhour","dday","dweek","dmonth","aminute","ahour","aday","aweek","amonth","ayear","baseUnit","getFormat","absolute","dirs","_unitAliases","tstamp","toTimeStamp","_toTimeUnit","unitValue","_getUnitValue","code","maxValue","maxUnit","getValueUnit","currentUnit","ms","$object.eachContinue","_getUnitValues","timeUnit","en","_decimalSeparator","_thousandSeparator","_percentPrefix","_percentSuffix","_big_number_suffix_3","_big_number_suffix_6","_big_number_suffix_9","_big_number_suffix_12","_big_number_suffix_15","_big_number_suffix_18","_big_number_suffix_21","_big_number_suffix_24","_small_number_suffix_3","_small_number_suffix_6","_small_number_suffix_9","_small_number_suffix_12","_small_number_suffix_15","_small_number_suffix_18","_small_number_suffix_21","_small_number_suffix_24","_byte_suffix_B","_byte_suffix_KB","_byte_suffix_MB","_byte_suffix_GB","_byte_suffix_TB","_byte_suffix_PB","_date","_date_millisecond","_date_millisecond_full","_date_second","_date_second_full","_date_minute","_date_minute_full","_date_hour","_date_hour_full","_date_day","_date_day_full","_date_week","_date_week_full","_date_month","_date_month_full","_date_year","_duration_millisecond","_duration_millisecond_second","_duration_millisecond_minute","_duration_millisecond_hour","_duration_millisecond_day","_duration_millisecond_week","_duration_millisecond_month","_duration_millisecond_year","_duration_second","_duration_second_minute","_duration_second_hour","_duration_second_day","_duration_second_week","_duration_second_month","_duration_second_year","_duration_minute","_duration_minute_hour","_duration_minute_day","_duration_minute_week","_duration_minute_month","_duration_minute_year","_duration_hour","_duration_hour_day","_duration_hour_week","_duration_hour_month","_duration_hour_year","_duration_day","_duration_day_week","_duration_day_month","_duration_day_year","_duration_week","_duration_week_month","_duration_week_year","_duration_month","_duration_month_year","_duration_year","_era_ad","_era_bc","AM","PM","January","February","March","April","May","June","July","August","September","October","November","December","Jan","Feb","Mar","Apr","Jun","Jul","Aug","Sep","Oct","Nov","Dec","Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sun","Mon","Tue","Wed","Thu","Fri","Sat","_dateOrd","Play","Stop","Legend","Loading","Home","Chart","Series","Export","Data","Print","PNG","JPG","GIF","SVG","PDF","CSV","XLSX","HTML","Close","Minimize","Language","prompt","translation","translateAny","setTranslationAny","setTranslationsAny","translations","$array.map","Theme","setupDefaultRules","themeClass","_rules","ruleRaw","$array.getSortedIndex","setColor","ic","DefaultTheme","horizontalLayout","verticalLayout","primaryButton","primaryButtonHover","primaryButtonDown","primaryButtonActive","primaryButtonDisabled","primaryButtonTextDisabled","primaryButtonText","primaryButtonStroke","secondaryButton","secondaryButtonHover","secondaryButtonDown","secondaryButtonActive","secondaryButtonText","secondaryButtonStroke","grid","alternativeBackground","alternativeText","disabled","passOptions","lightness","colors","reuse","startIndex","$ease.out","interpolationDuration","interpolationEasing","tooltipX","tooltipY","setStateOnChildren","pinchZoom","maxZoomLevel","minZoomLevel","zoomStep","gap","colorOpacity","checkered","centered","horizontalGap","verticalGap","density","minOpacity","maxOpacity","fillField","strokeField","nameField","layer","clickTarget","ariaChecked","focusable","role","cornerRadiusBL","cornerRadiusTL","cornerRadiusBR","cornerRadiusTR","populateText","stepCount","fontFamily","fontSize","textType","inside","baseRadius","orientation","editOn","multiLine","pointerBaseWidth","shiftRadius","dRadius","dInnerRadius","locationX","locationY","getFillFromSprite","getStrokeFromSprite","autoTextColor","forceInactive","ariaValueMin","ariaValueMax","ariaLive","labelText","spikes","rotationStep","Matrix","tx","ty","setTransform","pivotX","pivotY","origin","applyInverse","b1","c1","prepend","tx1","_slicedToArray","_arr","_n","_d","_e","_s","_i","err","sliceIterator","TAU","mapToEllipse","_ref","rx","ry","cosphi","sinphi","centerx","centery","approxUnitArc","ang1","ang2","vectorAngle","ux","uy","vx","vy","dot","arcToBezier","_ref2","px","py","_ref2$xAxisRotation","xAxisRotation","_ref2$largeArcFlag","largeArcFlag","_ref2$sweepFlag","sweepFlag","curves","pxp","pyp","lambda","_getArcCenter","rxsq","rysq","pxpsq","pypsq","radicant","centerxp","centeryp","vx1","vy1","vx2","vy2","getArcCenter","_getArcCenter2","ratio","segments","_mapToEllipse","_mapToEllipse2","_mapToEllipse3","checkArgs","actual","expected","checkMinArgs","checkEvenArgs","splitArcFlags","flag","assertBinary","eachTargets","hitTarget","onPointerEvent","$utils.getRendererEvent","$utils.getEventTarget","touches","changedTouches","$array.copy","isTainted","getContext","willReadFrequently","drawImage","getImageData","console","warn","clearCanvas","view","CanvasPivot","CanvasDisplayObject","renderer","subStatus","status","_layer","_removeObject","getLayer","getCanvas","defaultLayer","margin","$utils.setInteractive","_ghostLayer","setMargin","layers","registerChildLayer","resizeLayer","resizeGhost","_addBounds","_bounds","_getColorId","_colorId","paintId","_isInteractive","_forceInteractive","_isInteractiveMask","_matrix","getLocalMatrix","_uMatrix","bn","_addEvent","_localMatrix","_transform","_transformMargin","_transformLayer","render","_omitTainted","ghostLayer","ghostContext","_runPath","clip","globalAlpha","compoundAlpha","_render","restore","tainted","_hovering","dragging","_dragging","some","shouldCancelTouch","tapToActivate","_touchActive","CanvasContainer","_children","_childLayers","setPoint","Op","colorize","_forceColor","colorizeGhost","forceColor","pathGhost","addBounds","BeginPath","beginPath","BeginFill","fillStyle","EndFill","clearShadow","EndStroke","LineStyle","strokeStyle","lineWidth","LineDash","dash","LineDashOffset","dashOffset","lineDashOffset","DrawRect","DrawCircle","DrawEllipse","radiusX","radiusY","ellipse","Arc","anticlockwise","arcBounds","$math.getArcBounds","$math.DEGREES","ArcTo","LineTo","MoveTo","ClosePath","BezierCurveTo","cpX","cpY","cpX2","cpY2","toX","toY","QuadraticCurveTo","Shadow","offsetX","offsetY","GraphicsImage","CanvasGraphics","_operations","_pushOp","op","_fillAlpha","_hasShadows","_strokeAlpha","drawCircle","drawEllipse","cpx","cpy","qcpx","qcpy","SEGMENTS_REGEXP","ARGS_REGEXP","relative","layerDirty","globalCompositeOperation","renderDetached","CanvasText","_textInfo","_shared","direction","textBaseline","_prerender","ignoreGhost","ignoreFontWeight","fontStyle","_getFontStyle","font","style2","fontVariant","_measure","_index","textChunks","fillText","thickness","metrics","_measureText","actualBoundingBoxLeft","actualBoundingBoxRight","_ignoreFontWeight","rtl","truncate","wrap","refText","lines","currentStyle","styleRestored","lineInfo","ascent","actualBoundingBoxAscent","actualBoundingBoxDescent","currentFormat","currentFill","currentChunkWidth","currentVerticalAlign","currentDecoration","skipFurtherText","firstTextChunk","leftoverChunks","$array.eachContinue","verticalAlign","chunkWidth","ellipsisMetrics","ellipsisWidth","excessWidth","_truncateText","tmpText","leftBoundMod","rightBoundMod","boundsMod","chunkHeight","lineHeight","currentChunkOffset","baselineRatio","_fitRatio","_originalScale","maxW","maxH","fallbackBreakWords","measureText","fakeMetrics","div","innerText","visibility","body","bbox","fontBoundingBoxAscent","fontBoundingBoxDescent","CanvasTextStyle","CanvasRadialText","_renderCircular","deltaAngle","inward","kerning","clockwise","shouldReverse","_textReversed","maxAngle","midAngle","$math.normalizeAngle","textHeight","lineStartAngle","angleShift","charWidth","_measureCircular","chars","rtlChar","splitPattern","$utils.splitString","CanvasImage","_imageMask","naturalWidth","naturalHeight","_getMask","imageSmoothingEnabled","fillRect","CanvasRendererEvent","originalPoint","$utils.supports","identifier","CanvasRenderer","GhostLayer","_patternCanvas","_layerDom","exportableView","_touchActiveTimeout","_delayTouchDeactivate","prevent","resetImageArray","imageArray","tapToActivateTimeout","debugGhostView","createLinearGradient","createRadialGradient","radius1","radius2","graphics","_patternContext","clearRect","makeRadialText","makePicture","resize","_calculatedWidth","_calculatedHeight","realWidth","realHeight","calculatedWidth","calculatedHeight","_realWidth","_realHeight","createDetachedLayer","CanvasLayer","getLayerByOrder","existingLayer","_dirtyLayers","_lastPointerMoveEvent","_dispatchGlobalMousemove","distributeId","_colorMap","_adjustBoundingBox","DOMRect","adjustPoint","clientX","clientY","widthScale","heightScale","_getHitTarget","pixel","colorId","getObjectAtPoint","getImageArray","_withEvents","dispatching","cleanup","disposed","_dispatchEventAll","interactionsEnabled","_dispatchEvent","dispatched","_dispatchMousedown","originalTarget","dragged","_mousedown","$utils.setStyle","_replacedCursorStyle","_dispatchGlobalMouseup","_dispatchDragMove","_dispatchDragEnd","clickevent","_dispatchDoubleClick","_dispatchWheel","_makeSharedEvent","_onPointerEvent","_initEvent","mouseup","pointercancel","mousedown","mousemove","canvasWidth","canvasHeight","maxScale","maintainPixelRatio","canvases","forceRender","needRerender","exportableContext","extraX","extraY","clientWidth","clientHeight","domWidth","domHeight","_resolution","_width","_height","rAF","fps","Root","accessible","_a11yD","useSafeResolution","$utils.getSafeResolution","HTMLElement","getElementById","rootElements","inner","tooltipContainerBounds","_tooltipContainerSettings","_inner","_updateComputedStyles","_init","moveDOM","_initResizeSensor","_handleLogo","_logo","offsetWidth","offsetHeight","_showBranding","logo","open","_getRealSize","_getCalculatedSize","calculateSize","tabindex","rootContainer","htmlElementContainer","_htmlElementContainer","overflow","readerAlertElement","_readerAlertElement","focusElementContainer","_focusElementContainer","tooltipElementContainer","_tooltipElementContainer","eventKey","$utils.getEventKey","_isShift","focusedSprite","_focusedSprite","downEvent","activeElement","focus","$utils.blur","dragOffsetX","dragOffsetY","_keyboardDragPoint","moveEvent","upEvent","items","_tabindexes","_startTicker","setThemes","_addTooltip","_hasLicense","_resizeSensorDisposer","autoResize","_focusElementDirty","_updateCurrentFocus","_runTickers","_tickers","_runAnimations","running","_animations","_isDirtyAnimation","_runDirties","allParents","_isDirtyParents","_dirtyParents","uid","objects","_isDirty","depths","_dirtyBounds","_positionHTMLElements","dirtyPositions","_dirtyPositions","_renderFrame","_updateTick","_checkComputedStyles","animationDone","_runTicker","_ticker","_paused","_runTickerNow","endTime","updateTick","_markDirty","_markDirtyRedraw","eachFrame","markDirtyGlobal","_isDisposed","$utils.stripTags","tooltipContainerSettings","_tooltip","_invalidateTabindexes","aindex","bindex","_moveFocusElement","_makeFocusElement","_decorateFocusElement","_positionFocusElement","focusElement","ariaCurrent","ariaSelected","ariaOrientation","ariaValueNow","ariaValueText","ariaControls","tabIndex","_handleFocus","_handleBlur","_hideFocusElement","focusPadding","_getSpriteByFocusElement","_focusNext","focusableElements","tooltipElement","_makeTooltipElement","parentElement","documentPointToRoot","scaleWidth","scaleHeight","rootPointToDocument","styles","fontHash","changed","_fontHash","_invalidateLabelBounds","licenses","_licenseApplied","_makeHTMLElement","boxSizing","_htmlEnabledContainers","setting","transformOrigin","RoundedRectangle","wSign","hSign","minSide","crtl","crtr","crbr","crbl","maxcr","Button","icon","ListData","incrementRef","decrementRef","processor","processRow","DataItem","markDirtyValues","disposeDataItem","showDataItem","hideDataItem","Component","_dataItems","_data","_onDataClear","_updateFields","dataItems","_mainDataItems","_markDirtyGroup","_dataChanged","_makeDataItem","processDataItem","properties","bullets","_afterDataChange","valueFields","_valueFields","_valueFieldsF","fieldKey","workingKey","fields","_fields","_fieldsF","makeDataItem","pushDataItem","_valuesDirty","inited","_dataGrouped","Gradient","_target","addColorStop","_offset","_color","getBounds","LinearGradient","longer","timeUnitDurations","getDuration","firstDateOfWeek","firstDate","timeZoneOffset","difference","unitCount","setUTCMilliseconds","wday","weekDay","newTimeZoneOffset","tzoffset","parsedDate","offsetDif","newDiff","segmentedLine","firstGroup","firstPoint","points","Line","$draw.segmentedLine","RadialText","$math.RADIANS","RadialLabel","radiusPrivate","innerRadiusPrivate","labelAngle","_flipped","Slice","ix","iy","_generator","middleAngle","SerialChart","series","seriesContainer","_removeSeries","reset","patterns","_processSeries","chart","_placeBulletsContainer","_removeBulletsContainer","Tick","ColorSet","generateColors","pass","currentStep","XYChartDefaultTheme","panX","panY","wheelStep","arrangeTooltips","pinchZoomX","pinchZoomY","legendLabelText","minGridDistance","minPosition","maxPosition","behavior","snapToSeriesBy","moveThreshold","minZoomCount","maxZoomCount","maxZoomFactor","maxDeviation","snapTooltip","tooltipLocation","zoomX","zoomY","fixAxisSize","multiLocation","opposite","inversed","cellStartLocation","cellEndLocation","startLocation","endLocation","fillRule","axisFill","gridIntervals","dateFormats","periodChangeDateFormats","tooltipDateFormats","markUnitChange","strictMinMax","groupData","groupCount","groupIntervals","endValue","intervalDuration","baseInterval","gridInterval","$time.round","baseValue","logarithmic","autoZoom","$math.round","maskBullets","stackToNegative","openValueXGrouped","openValueYGrouped","valueXGrouped","valueYGrouped","seriesTooltipTarget","adjustBulletPosition","clustered","connect","autoGapCount","tension","lowValueXGrouped","lowValueYGrouped","highValueXGrouped","highValueYGrouped","XYChart","chartContainer","yAxesAndPlotContainer","maskContent","plotsContainer","plotContainer","topPlotContainer","xAxes","yAxes","zoomOutButton","zoomOut","_processAxis","bottomAxesContainer","leftAxesContainer","topGridContainer","bulletsContainer","_handlePlotDown","_handlePlotUp","_handlePlotMove","_maskGrid","_setUpTouch","gridContainer","_unstack","_posXDp","_posYDp","xAxis","markDirtyExtremes","yAxis","snapToSeries","handleWheel","wheelX","wheelY","plotPoint","shiftX","deltaX","wheelZoomPositionX","wheelZoomPositionY","fixPosition","newStart","newEnd","_handleWheelAnimation","zoom","_getWheelSign","se","_fixWheel","_handleSetWheel","_wheelDp","_downStartX","_downEndX","_downStartY","_downEndY","_panStart","_panEnd","_dispatchWheelAnimation","_isPanning","_movePoints","_handlePinch","scrollbarX","panStart","panEnd","scrollbarY","downPoints","movePoints","movePoint","downPoint0","downPoint1","movePoint0","movePoint1","downStartX","downEndX","downPos0","downPos1","movePos0","movePos1","sa","ea","downStartY","downEndY","_handleCursorPosition","cursorPoint","endIndex","tooltipDataItem","closestItem","minDistance","distance","showDataItemTooltip","handleMove","_updateCursor","updateCursor","_addCursor","_colorize","_setChart","_handleCursorSelectEnd","topAxesContainer","_handleScrollbar","grip","_handleAxisSelection","getTooltipText","rightAxesContainer","_handleZoomOut","$array.move","_fixPosition","_markDirtyAxes","_seriesAdded","colorSet","patternSet","downPositionX","downPositionY","positionX","positionY","position0","toAxisPosition","position1","axes","axisStart","axisEnd","zoomAnimation","updateScrollbar","_removeAxis","processChart","axisParent","gridParent","topGridParent","_updateChartLayout","processAxis","updateGrips","inPlot","otherCharts","_otherCharts","global","chartPlotContainer","documentPoint","chartRoot","hh","plotT","plotB","tooltips","closest","closestPoint","_movePoint","maxTooltipDistance","maxTooltipDistanceBy","tooltipSeries","hidden","_tooltipToLocal","$order.compareNumber","prevBottom","Grid","Axis","labelsContainer","axisHeader","axisRanges","_processAxisRange","ghostLabel","makeLabel","_updateFinals","_start","_end","sAnimation","_sAnimation","eAnimation","_eAnimation","maxZoomFactorReal","minZoomFactor","_series","_createAssets","_rangesDirty","_prepareDataItem","above","markDirtySelectionExtremes","_calculateTotals","_updateAxisRanges","_bullets","axisRange","_seriesAxisRanges","_inversed","_axisLength","axisLength","_updateLC","rendererTags","_updateTooltipBounds","updateTooltipBounds","axisHeadersContainer","_toggleFHDataItem","forceHidden","fh","bullet","_toggleDataItem","minor","_a","_b","_c","labels","makeGrid","makeTick","makeAxisFill","_processBullet","axisBullet","_updatePositions","axisFills","_updateGhost","getCellWidthPosition","gWidth","updateLabel","_cursorPosition","_snapToSeries","getSeriesItem","updateLegendMarker","updateLegendValue","roundAxisPosition","_updateTooltipText","positionTooltip","_location","handleCursorShow","handleCursorHide","processSeriesDataItem","coordinateToPosition","coordinate","toGlobalPosition","shouldGap","_nextItem","_autoGapCount","_fieldName","createAxisRange","axisDataItem","_groupSeriesData","ValueAxis","_dirtyExtremes","_dirtySelectionExtremes","syncWithAxis","_syncDp","someDirty","_getMinMax","_handleSizeDirty","getMM","letter","_getSelectionMinMax","_groupData","_handleRangeChange","_prepareAxisItems","_baseValue","_dseHandled","_formatText","numberFormat","formatter","selectionMin","selectionMax","differencePower","minLog","_minLogAdjusted","_minRealLog","log","LOG10E","minorLabelsEnabled","minorGridEnabled","stepPower","stepAdjusted","minorGridCount","minorStep","nextValue","minorValue","_adjustMinMax","minorDataItem","minorDataItems","minorLabel","valueToPosition","endPosition","fillEndPosition","labelEndPosition","labelEndValue","updateGrid","updateFill","updateBullet","positionToValue","gridCount","minMaxStep","stepDecimalPlaces","E","treatZeroAs","valueToFinalPosition","getX","positionToCoordinate","getY","getDataItemCoordinateX","_cellLocation","axisLocation","getDataItemPositionX","getStackedXValueWorking","getDataItemCoordinateY","getDataItemPositionY","getStackedYValueWorking","basePosition","cellEndValue","fixSmallStep","_fixMin","_fixMax","vc","fieldWorking","total","minDefined","maxDefined","extraMin","extraMax","selectionStrictMinMax","seriesMin","seriesMax","outOfSelection","_minReal","_maxReal","smin","_deltaMinMax","minMaxStep2","selectionMinReal","selectionMaxReal","_syncAxes","LN10","minDiff","initialMin","initialMax","minAdapted","maxAdapted","_getDelta","strictMinMaxSelection","decCount","_fixZoomFactor","_saveMinMax","_min","_max","strictMode","extra","stepDivisor","maxPrecision","ceiledStep","$math.ceil","maxCount","minCount","_adjustPosition","extraDecimals","oldDiff","fieldName","zoomToValues","syncMin","syncMax","syncStep","currentCount","synced","omin","omax","ostep","_checkSync","nextPosition","AxisBullet","AxisLabel","AxisLabelRadial","AxisTick","AxisRenderer","thumb","_handleThumbDown","_handleThumbUp","_handleThumbMove","pan","_thumbDownPoint","_downStart","_downEnd","_event","downStart","downEnd","_getPan","_point1","_point2","toggleVisibility","_positionTooltip","AxisRendererCircular","updateLayout","ir","positionToPoint","positionToAngle","_handleOpposite","fillDrawMethod","_fillGenerator","fitAngle","minAngle","ClockHand","pin","hand","bw","tw","RadarDefaultTheme","connectEnds","axisAngle","topWidth","bottomWidth","pinRadius","RadarChart","radarContainer","_updateRadius","wr","hr","innerBounds","mr","$math.mergeBounds","_maxRadius","_updateMask","_arcGenerator","inArc","AnimatedTheme","demLead","$$props","main","secondary","chartdiv","lead_color","lead_bg_color","am5.Root","am5themes_Animated","am5radar.RadarChart","gradientFill","am5.LinearGradient","am5.color","axisRenderer","am5radar.AxisRendererCircular","am5xy.ValueAxis","clockHand","am5radar.ClockHand","am5.percent","pinFill","am5xy.AxisBullet","am5.Label","$$value","Trump","Harris","resizeDebounce","screenSizes","mobile","small","paddingSizes","large","candidateLabelSizes","dotSizes","lineWidths","gridLabelSizes","drawChart","dailyAggData","dailyData","aggregators","screenSizeCateg","getScreenSize","chartGroup","paddingRightSize","d3.select","dateExtent","d3.extent","d3.timeParse","paddedStartDate","d3\n        .scaleTime","d3.scaleLinear","setupChart","candidate","d3\n            .line","avg","d3.curveMonotoneX","drawLines","circleGroup","aggregator","drawDots","d3.timeWeek","toLocaleDateString","d3\n                .axisLeft","d3.selectAll","drawGridlines","focusDate","verticalLine","dateLabel","focusTexts","initializeFocusTexts","updateLabels","mouse","sourceEvent","currentTarget","ownerSVGElement","createSVGPoint","matrixTransform","getScreenCTM","inverse","clientLeft","clientTop","pageX","pageY","d3.pointer","mouseDate","roundedDate","lineDate","y_positions","average_y","topCandidate","bottomCandidate","fixLabelPositions","handleMouseMove","setupInteractivity","d3.max","closestValue","candidateObj","onResize","async","getPollData","repo","sessionStorage","getItem","isDataStale","pollData","response","fetch","json","csvData","atob","content","d3.csvParse","fetchPollData","setItem","prepareData","candidates","dailyCandidateData","dateData","candidateData","candidatePolls","aggregatorData","fromEntries","d3.mean","trump","harris","t4_value","span0","span0_class_value","span1","t1_value","t4","iterations","t0_value","displayName","lead","span","span_class_value","leading","t3","t3_value","if_block0","create_if_block_2","create_if_block_1","create_if_block","article2","header","div1","article0","h2","section","h11","article1","leadHTML","aggregatorsCurrent","$$invalidate","lastDay","currentTrump","currentHarris","setDemLeadAndWinningHTML","aggregatorNameMap","fivethirtyeight","realclearpolling","natesilver","nyt","setAggregatorsCurrent","fetchData","if_block","article","currentComponent","routeHandler","ChartEmbed","NotFound","customElement"],"mappings":"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","x_google_ignoreList":[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,123,124,125,126,127,128,129,130,131,132,133,134,135,136,137,138,139,140,141,142,143,144,145,146,147,148,149,150,151,152,153,154,155,156,157,158,159,160,161,162,163,164,165,166,167,168,169,170,171,172,173,174,175,176,177,178,179,180,181,182,183,184,185,186,187,188,189,190,191,192,193,194,195,196,197,198,199,200,201,202,203,204,205,206,207,208,209,210,211,212,213,214,215,216,217,218,219,220,221,222,223,224,225,226,227,228,229,230,231,232,233,234,235,236,237,238,239,240,241,242,245,246,247,248]}